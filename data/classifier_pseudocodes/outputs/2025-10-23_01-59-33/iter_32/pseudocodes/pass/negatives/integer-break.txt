```
dp[1] = 1
for i in 2 to n:
    max_p = 0
    for j in 1 to i-1:
        max_p = max(max_p, j * dp[i-j], j * (i-j))
    dp[i] = max_p
return dp[n]
```