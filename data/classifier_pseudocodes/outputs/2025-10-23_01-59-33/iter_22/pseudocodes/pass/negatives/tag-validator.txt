CLASS Solution  
    FUNCTION isValid(code)  
        SET stack TO an empty list  
        SET i TO zero  
        WHILE i IS LESS THAN the LENGTH OF code  
            IF the element at position i of code EQUALS the character less than  
                SET j TO the position of the character greater than found in code starting from position i plus one  
                IF j EQUALS minus one  
                    RETURN false  
                END IF  
                SET tag_content TO the substring from position i plus one TO position j minus one of code  
                IF tag_content IS EMPTY  
                    RETURN false  
                END IF  
                IF the element at position zero of tag_content EQUALS the character slash  
                    SET tag_name TO the substring from position one TO the end of tag_content  
                    IF the LENGTH OF stack EQUALS zero OR the element at position negative one of stack NOT EQUALS tag_name  
                        RETURN false  
                    END IF  
                    REMOVE the element at position negative one FROM stack  
                ELSE IF the element at position zero of tag_content EQUALS the character exclamation mark  
                    RETURN false  
                ELSE  
                    IF the LENGTH OF tag_content IS LESS THAN one OR the LENGTH OF tag_content IS GREATER THAN nine OR tag_content IS NOT composed entirely of uppercase letters  
                        RETURN false  
                    END IF  
                    APPEND tag_content TO stack  
                END IF  
                SET i TO j PLUS one  
            ELSE  
                INCREMENT i BY one  
            END IF  
        END WHILE  
        SET pattern TO a regular expression matching a less than character followed by one or more uppercase letters followed by a greater than character followed by zero or more characters followed by a less than character slash one or more uppercase letters followed by a greater than character  
        SET matches TO the list of all occurrences in code matching pattern  
        RETURN the condition that stack IS EMPTY AND the LENGTH OF matches IS GREATER THAN zero  
    END FUNCTION  
END CLASS