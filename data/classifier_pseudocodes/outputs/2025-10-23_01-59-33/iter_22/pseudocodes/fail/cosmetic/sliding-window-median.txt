CLASS Solution
    FUNCTION medianSlidingWindow(nums k)
        ASSIGN [] TO alpha
        ASSIGN [] TO beta

        FUNCTION balance_heaps()
            WHEN LENGTH(alpha) > LENGTH(beta) + 1:
                CALL heappush beta NEGATE CALL heappop alpha
            OTHERWISE WHEN LENGTH(beta) > LENGTH(alpha):
                CALL heappush alpha NEGATE CALL heappop beta
            END WHEN
        END FUNCTION

        FUNCTION add_num(delta)
            WHEN LENGTH(alpha) = 0 OR delta <= NEGATE alpha[0]:
                CALL heappush alpha NEGATE delta
            OTHERWISE:
                CALL heappush beta delta
            END WHEN
            CALL balance_heaps()
        END FUNCTION

        FUNCTION remove_num(delta)
            WHEN delta <= NEGATE alpha[0]:
                DELETE element NEGATE delta FROM alpha
                WHEN LENGTH(alpha) > 0:
                    CALL heapify alpha
                END WHEN
            OTHERWISE:
                DELETE element delta FROM beta
                WHEN LENGTH(beta) > 0:
                    CALL heapify beta
                END WHEN
            END WHEN
            CALL balance_heaps()
        END FUNCTION

        FUNCTION get_median()
            WHEN LENGTH(alpha) > LENGTH(beta):
                RETURN NEGATE alpha[0]
            END WHEN
            RETURN (NEGATE alpha[0] + beta[0]) / 2
        END FUNCTION

        ASSIGN 0 TO mu
        WHILE mu < k:
            CALL add_num nums[mu]
            ASSIGN mu + 1 TO mu
        END WHILE

        ASSIGN [get_median()] TO omegas

        ASSIGN k TO pi
        WHILE NOT (pi >= LENGTH(nums)):
            CALL add_num nums[pi]
            CALL remove_num nums[pi - k]
            APPEND get_median() TO omegas
            ASSIGN pi + 1 TO pi
        END WHILE

        RETURN omegas
    END FUNCTION
END CLASS