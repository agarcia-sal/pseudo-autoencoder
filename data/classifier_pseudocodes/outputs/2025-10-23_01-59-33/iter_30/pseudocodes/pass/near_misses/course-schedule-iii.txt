CLASS Solution
    FUNCTION scheduleCourse(courses)
        PROCEDURE heapify(array)
            FOR index FROM (LENGTH(array) // 2 - 1) DOWNTO 0
                CALL siftDown(array, index, LENGTH(array))

        PROCEDURE siftDown(heap, start, end)
            SET root TO start
            WHILE root * 2 + 1 < end
                SET child TO root * 2 + 1
                SET swap_candidate TO root
                IF heap[swap_candidate] < heap[child]
                    SET swap_candidate TO child
                IF child + 1 < end AND heap[swap_candidate] < heap[child + 1]
                    SET swap_candidate TO child + 1
                IF swap_candidate = root
                    RETURN
                ELSE
                    SWAP heap[root], heap[swap_candidate]
                    SET root TO swap_candidate

        PROCEDURE heappush(heap, value)
            APPEND value TO heap
            SET idx TO LENGTH(heap) - 1
            WHILE idx > 0
                SET parent TO (idx - 1) // 2
                IF heap[parent] >= heap[idx]
                    RETURN
                SWAP heap[parent], heap[idx]
                SET idx TO parent

        PROCEDURE heappop(heap)
            SET last_element TO heap[ LENGTH(heap) - 1 ]
            SET max_element TO heap[0]
            REPLACE heap[0] WITH last_element
            REMOVE last element from heap
            CALL siftDown(heap, 0, LENGTH(heap))
            RETURN max_element

        DEFINE comparator(a, b)
            RETURN a[1] < b[1]

        SET timeline TO 0
        CALL sort(courses, comparator)
        SET dropbox TO []
        CALL heapify(dropbox)

        PROCEDURE process(index)
            IF index = LENGTH(courses)
                RETURN
            SET curr_course TO courses[index]
            SET dur TO curr_course[0]
            SET deadline TO curr_course[1]
            IF timeline + dur <= deadline
                CALL heappush(dropbox, -dur)
                SET timeline TO timeline + dur
            ELSE IF LENGTH(dropbox) > 0 AND (-dropbox[0]) > dur
                SET removed TO heappop(dropbox)
                SET timeline TO timeline + dur + removed
                CALL heappush(dropbox, -dur)
            CALL process(index + 1)

        CALL process(0)
        RETURN LENGTH(dropbox)
END CLASS