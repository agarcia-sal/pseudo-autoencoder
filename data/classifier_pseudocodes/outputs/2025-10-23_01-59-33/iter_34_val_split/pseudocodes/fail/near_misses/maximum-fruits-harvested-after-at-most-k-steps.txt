CLASS Solution
    FUNCTION maxTotalFruits(fruits AS list of list of integers, startPos AS integer, k AS integer) RETURNS integer
        SET apex TO 0
        SET aggregate TO 0
        SET tunnel TO 0

        SET beacon TO 0
        WHILE beacon LESS THAN LENGTH(fruits)
            SET locale TO fruits[beacon][0]
            SET quantity TO fruits[beacon][1]
            ADD quantity TO aggregate

            LOOP
                IF tunnel GREATER THAN beacon THEN
                    BREAK
                END IF

                SET leftCoord TO fruits[tunnel][0]
                SET rightCoord TO fruits[beacon][0]

                IF (startPos - k) > leftCoord OR leftCoord > (startPos + k)
                    OR (startPos - k) > rightCoord OR rightCoord > (startPos + k) THEN
                    // condition is false, so negate to break
                    BREAK
                END IF

                SET distLeft TO ABS(leftCoord - startPos)
                SET distRight TO ABS(rightCoord - startPos)
                SET span TO rightCoord - leftCoord
                SET minimalDistance TO MIN(distRight, distLeft) + span

                IF minimalDistance GREATER THAN k THEN
                    SET deduction TO fruits[tunnel][1]
                    SUBTRACT deduction FROM aggregate
                    INCREMENT tunnel BY 1
                ELSE
                    BREAK
                END IF
            END LOOP

            IF apex < aggregate THEN
                SET apex TO aggregate
            END IF

            INCREMENT beacon BY 1
        END WHILE

        OUTPUT apex
    END FUNCTION
END CLASS