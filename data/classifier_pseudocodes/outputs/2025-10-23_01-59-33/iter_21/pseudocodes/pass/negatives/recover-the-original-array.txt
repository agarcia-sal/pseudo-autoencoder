```
sort nums
n = length(nums)
first = nums[0]

for i in 1 to n-1:
    k = (nums[i] - first) // 2
    if k <= 0 or first + 2*k != nums[i]: continue
    
    count = frequency_map(nums)
    arr = []
    
    for x in nums:
        if count[x] == 0: continue
        if count[x + 2*k] == 0: break
        arr.append(x + k)
        count[x] -= 1
        count[x + 2*k] -= 1
        
    if length(arr) == n/2:
        return arr

return []
```