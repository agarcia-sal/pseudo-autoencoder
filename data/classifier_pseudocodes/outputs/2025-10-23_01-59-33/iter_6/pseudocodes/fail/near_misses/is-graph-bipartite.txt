CLASS Solution  
    FUNCTION isBipartite(graph)  
        LET size BE LENGTH OF graph  
        LET marks BE a dictionary WITH KEYS FROM 0 TO size - 1 INITIALIZED TO 0  
        
        FUNCTION dfsCheck(vertex, mark)  
            marks[vertex] = mark  
            LET neighbors BE graph[vertex]  
            
            FOR index FROM LENGTH OF neighbors - 1 DOWNTO 0  
                LET adjacent BE neighbors[index]  
                
                SWITCH marks[adjacent]  
                    CASE mark:  
                        RETURN False  
                    CASE 0:  
                        LET result BE dfsCheck(adjacent, -mark)  
                        IF result == False THEN  
                            RETURN False  
                        END IF  
                END SWITCH  
            END FOR  
            
            RETURN True  
        END FUNCTION  
        
        LET pos BE 0  
        WHILE pos < size  
            IF marks[pos] == 0 THEN  
                IF NOT dfsCheck(pos, 1) THEN  
                    RETURN False  
                END IF  
            END IF  
            pos = pos + 1  
        END WHILE  
        
        RETURN True  
    END FUNCTION  
END CLASS