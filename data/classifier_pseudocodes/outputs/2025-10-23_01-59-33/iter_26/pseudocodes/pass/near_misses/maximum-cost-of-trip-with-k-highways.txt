CLASS Solution  
    FUNCTION maximumCost(n, highways, k)  
        CREATE adjacency_list AS a map with default empty list  
        FOR route IN highways  
            LET a = route[0]  
            LET b = route[1]  
            LET fee = route[2]  
            APPEND (b, fee) TO adjacency_list[a]  
            APPEND (a, fee) TO adjacency_list[b]  
        END FOR  

        SET best_value TO negative infinity  

        FUNCTION dfs(current_city, visited_nodes, current_sum, edges_count)  
            IF edges_count IS k THEN  
                IF current_sum > best_value THEN  
                    best_value = current_sum  
                END IF  
                RETURN  
            END IF  

            FOR EACH (next_city, toll_cost) IN adjacency_list[current_city]  
                IF next_city NOT IN visited_nodes THEN  
                    visited_nodes.ADD(next_city)  
                    CALL dfs(next_city, visited_nodes, current_sum + toll_cost, edges_count + 1)  
                    visited_nodes.REMOVE(next_city)  
                END IF  
            END FOR  
        END FUNCTION  

        FOR city_index FROM 0 TO n - 1 DO  
            SET visited_nodes TO new set containing city_index  
            CALL dfs(city_index, visited_nodes, 0, 0)  
        END FOR  

        RETURN best_value  
    END FUNCTION  
END CLASS