CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET length TO the LENGTH OF n  
        IF length EQUALS one  
            SET numeric_value TO integer VALUE OF n  
            RETURN string REPRESENTATION OF numeric_value MINUS one  
        END IF  
        
        SET candidates TO an EMPTY SET  
        
        SET power_length TO TEN RAISED TO THE power OF length  
        SET power_length_minus_one TO TEN RAISED TO THE power OF length MINUS one  
        
        ADD the VALUE OF power_length PLUS one TO candidates  
        ADD the VALUE OF power_length_minus_one MINUS one TO candidates  
        
        SET prefix TO integer VALUE OF substring FROM position one TO position (length PLUS one) DIVIDED BY two of n  
        
        FOR i FROM negative one TO positive one  
            SET new_prefix_numeric TO prefix PLUS i  
            SET new_prefix TO string REPRESENTATION OF new_prefix_numeric  
            
            IF length MODULO two EQUALS zero  
                SET reversed_part TO the REVERSED STRING OF new_prefix  
                SET candidate_string TO new_prefix CONCATENATED WITH reversed_part  
            ELSE  
                SET substring_reversed TO the REVERSED STRING OF substring FROM position one TO LENGTH OF new_prefix MINUS one of new_prefix  
                SET candidate_string TO new_prefix CONCATENATED WITH substring_reversed  
            END IF  
            
            SET candidate_numeric TO integer VALUE OF candidate_string  
            ADD candidate_numeric TO candidates  
        END FOR  
        
        SET original_number TO integer VALUE OF n  
        REMOVE original_number FROM candidates IF IT EXISTS  
        
        SET closest TO NULL  
        SET smallest_distance TO INFINITY  
        FOR each number IN candidates  
            SET current_distance TO the ABSOLUTE VALUE OF number MINUS original_number  
            IF current_distance LESS THAN smallest_distance OR (current_distance EQUALS smallest_distance AND number LESS THAN closest)  
                SET closest TO number  
                SET smallest_distance TO current_distance  
            END IF  
        END FOR  
        
        RETURN string REPRESENTATION OF closest  
    END FUNCTION  
END CLASS