CLASS Solution  
    FUNCTION nearestPalindromic WITH PARAMETER n  
        SET length TO the LENGTH OF n  
        IF length EQUALS one  
            SET integer_value TO the INTEGER VALUE OF n  
            SET result_value TO integer_value MINUS one  
            SET result_string TO the STRING REPRESENTATION OF result_value  
            RETURN result_string  
        END IF  
        
        CREATE an EMPTY SET called candidates  
        
        COMPUTE ten_to_length AS ten RAISED TO THE POWER OF length  
        COMPUTE ten_to_length_minus_one AS ten RAISED TO THE POWER OF length MINUS one  
        SET candidate_value_low TO ten_to_length MINUS one  
        SET candidate_value_high TO ten_to_length PLUS one  
        ADD candidate_value_high TO candidates  
        ADD candidate_value_low TO candidates  
        
        SET prefix_length TO length PLUS one DIVIDED BY two  
        SET prefix_string TO the SUBSTRING OF n FROM position one TO position prefix_length  
        SET prefix TO the INTEGER VALUE OF prefix_string  
        
        FOR each integer i FROM negative one TO one  
            SET new_prefix_value TO prefix PLUS i  
            SET new_prefix_string TO the STRING REPRESENTATION OF new_prefix_value  
            IF length MODULO two EQUALS zero  
                SET reversed_part TO the REVERSE OF new_prefix_string  
                SET candidate_string TO the CONCATENATION OF new_prefix_string AND reversed_part  
            ELSE  
                SET reversed_part TO the REVERSE OF the SUBSTRING OF new_prefix_string FROM position one TO the POSITION BEFORE THE LAST CHARACTER  
                SET candidate_string TO the CONCATENATION OF new_prefix_string AND reversed_part  
            END IF  
            SET candidate_integer TO the INTEGER VALUE OF candidate_string  
            ADD candidate_integer TO candidates  
        END FOR  
        
        SET original_number TO the INTEGER VALUE OF n  
        REMOVE original_number FROM candidates IF original_number IS PRESENT  
        
        SET minimal_difference TO a VERY LARGE NUMBER  
        SET closest_palindrome TO None  
        FOR each candidate IN candidates  
            COMPUTE difference AS the ABSOLUTE VALUE OF candidate MINUS original_number  
            IF difference LESS THAN minimal_difference OR (difference EQUALS minimal_difference AND candidate LESS THAN closest_palindrome)  
                SET minimal_difference TO difference  
                SET closest_palindrome TO candidate  
            END IF  
        END FOR  
        
        SET result_string TO the STRING REPRESENTATION OF closest_palindrome  
        RETURN result_string  
    END FUNCTION  
END CLASS