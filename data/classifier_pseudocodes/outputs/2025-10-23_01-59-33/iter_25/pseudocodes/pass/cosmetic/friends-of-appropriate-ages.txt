CLASS Solution
    FUNCTION numFriendRequests(ages)
        FUNCTION request_will_be_sent(age_x age_y)
            IF age_y <= (age_x / 2 + 7) THEN
                RETURN false
            ELSE IF age_y > age_x THEN
                RETURN false
            ELSE IF (age_y > 100) AND (age_x < 100) THEN
                RETURN false
            ELSE
                RETURN true
            END IF
        END FUNCTION

        SET tally TO dictionary()
        SET idx TO 0
        WHILE idx < LENGTH(ages)
            IF ages[idx] IN tally THEN
                tally[ages[idx]] = tally[ages[idx]] + 1
            ELSE
                tally[ages[idx]] = 1
            END IF
            idx = idx + 1
        END WHILE

        SET accumulated TO 0
        SET p_age_x TO 1
        WHILE p_age_x <= 120
            SET p_age_y TO 1
            WHILE p_age_y <= 120
                IF request_will_be_sent(p_age_x, p_age_y) THEN
                    IF p_age_x = p_age_y THEN
                        accumulated = accumulated + (tally.get(p_age_x, 0) * (tally.get(p_age_y, 0) - 1))
                    ELSE
                        accumulated = accumulated + (tally.get(p_age_x, 0) * tally.get(p_age_y, 0))
                    END IF
                END IF
                p_age_y = p_age_y + 1
            END WHILE
            p_age_x = p_age_x + 1
        END WHILE

        RETURN accumulated
    END FUNCTION
END CLASS