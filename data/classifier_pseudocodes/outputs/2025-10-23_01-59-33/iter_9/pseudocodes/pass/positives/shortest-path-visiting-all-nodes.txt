CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph EQUALS empty collection THEN  
            RETURN zero  
        END IF  
      
        SET n TO the LENGTH OF graph  
        SET queue TO a new double-ended queue containing pairs of each node in the range from zero TO n MINUS one together with a value obtained by ONE SHIFTED LEFT BY node  
        SET visited TO a new set containing the same pairs as in queue  
      
        SET steps TO zero  
        SET all_nodes_visited TO ONE SHIFTED LEFT BY n MINUS one  
      
        WHILE queue is not empty  
            SET current_level_size TO the LENGTH OF queue  
            FOR iteration FROM one TO current_level_size  
                REMOVE the leftmost element from queue and DESCTRUCTURE INTO current_node and visited_nodes  
              
                IF visited_nodes EQUALS all_nodes_visited THEN  
                    RETURN steps  
                END IF  
              
                FOR each neighbor IN the element at position current_node of graph  
                    SET next_visited_nodes TO visited_nodes OR ONE SHIFTED LEFT BY neighbor  
                    SET next_state TO pair of neighbor and next_visited_nodes  
                  
                    IF next_state NOT IN visited THEN  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
          
            INCREMENT steps BY one  
        END WHILE  
      
        RETURN negative one  
    END FUNCTION  
END CLASS