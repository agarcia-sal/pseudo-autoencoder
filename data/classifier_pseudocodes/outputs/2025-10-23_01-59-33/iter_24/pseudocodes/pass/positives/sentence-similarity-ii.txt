CLASS Solution  
    FUNCTION areSentencesSimilarTwo(sentence1 sentence1 TO sentence1 OF TYPE list OF strings sentence2 sentence2 TO sentence2 OF TYPE list OF strings similarPairs similarPairs TO similarPairs OF TYPE list OF list OF strings) RETURNS boolean  
        IF the LENGTH OF sentence1 NOT EQUALS the LENGTH OF sentence2  
            RETURN false  
        END IF  

        SET parent TO empty dictionary  

        FUNCTION find(x x TO x) RETURNS x  
            IF element at position x of parent NOT EQUALS x  
                SET element at position x of parent TO find(element at position x of parent)  
            END IF  
            RETURN element at position x of parent  
        END FUNCTION  

        FUNCTION union(x x TO x y y TO y)  
            SET rootX TO find(x)  
            SET rootY TO find(y)  
            IF rootX NOT EQUALS rootY  
                SET element at position rootY of parent TO rootX  
            END IF  
        END FUNCTION  

        FOR each pair IN similarPairs  
            FOR each word IN pair  
                IF word NOT IN parent  
                    SET element at position word of parent TO word  
                END IF  
            END FOR  
        END FOR  

        FOR each x y IN similarPairs  
            union(x y)  
        END FOR  

        FOR each w1 w2 IN sentence1 sentence2  
            IF w1 NOT IN parent  
                SET element at position w1 of parent TO w1  
            END IF  
            IF w2 NOT IN parent  
                SET element at position w2 of parent TO w2  
            END IF  
            IF find(w1) NOT EQUALS find(w2)  
                RETURN false  
            END IF  
        END FOR  

        RETURN true  
    END FUNCTION  
END CLASS