```
init last[26] = -1
total = 0
curr = 0
for i, c in s:
    idx = ord(c) - ord('a')
    curr += i - last[idx]
    total += curr
    last[idx] = i
return total
```