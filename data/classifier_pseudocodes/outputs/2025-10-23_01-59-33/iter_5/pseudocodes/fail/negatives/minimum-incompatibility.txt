CLASS Solution  
    FUNCTION minimumIncompatibility(nums PARAMETER, k PARAMETER)  
        SET n TO the LENGTH OF nums  
        SET subset_size TO n DIVIDED BY k  
        
        IF ANY count OF elements IN the counts of nums GREATER THAN k  
            RETURN negative one  
        END IF  
        
        SET subset_incompatibility TO an empty dictionary  
        FOR mask FROM zero TO two RAISED TO the power of n MINUS one  
            IF the COUNT OF ones IN the binary representation of mask EQUALS subset_size  
                SET elements TO an empty list  
                FOR i FROM zero TO n MINUS one  
                    IF the bit at position i IN mask IS SET  
                        APPEND element at position i OF nums TO elements  
                    END IF  
                END FOR  
                IF the LENGTH OF the set of elements EQUALS subset_size  
                    SET incompatibility TO the MAXIMUM element IN elements MINUS the MINIMUM element IN elements  
                    ASSIGN incompatibility TO subset_incompatibility AT key mask  
                END IF  
            END IF  
        END FOR  
        
        SET dp TO a list of size two RAISED TO the power of n FILLED WITH positive infinity  
        SET element at position zero OF dp TO zero  
        
        FOR mask FROM zero TO two RAISED TO the power of n MINUS one  
            IF the COUNT OF ones IN the binary representation of mask MODULO subset_size NOT EQUALS zero  
                CONTINUE to next iteration  
            END IF  
            FOR each subset_mask KEY IN subset_incompatibility  
                IF the bitwise AND of mask AND subset_mask EQUALS subset_mask  
                    SET candidate_value TO element at position mask MINUS subset_mask OF dp PLUS subset_incompatibility AT key subset_mask  
                    IF candidate_value LESS THAN element at position mask OF dp  
                        SET element at position mask OF dp TO candidate_value  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        
        IF element at position two RAISED TO the power of n MINUS one OF dp EQUALS positive infinity  
            RETURN negative one  
        ELSE  
            RETURN element at position two RAISED TO the power of n MINUS one OF dp  
        END IF  
    END FUNCTION  
END CLASS