CLASS Solution  
    FUNCTION areSentencesSimilarTwo(sentence1  
                                    sentence2  
                                    similarPairs)  
        IF the LENGTH OF sentence1 NOT EQUALS the LENGTH OF sentence2  
            RETURN false  
        END IF  

        SET parent TO empty dictionary  

        FUNCTION find(x)  
            IF the element at key x IN parent NOT EQUALS x  
                SET the element at key x IN parent TO find(the element at key x IN parent)  
            END IF  
            RETURN the element at key x IN parent  
        END FUNCTION  

        FUNCTION union(x  
                       y)  
            SET rootX TO find(x)  
            SET rootY TO find(y)  
            IF rootX NOT EQUALS rootY  
                SET the element at key rootY IN parent TO rootX  
            END IF  
        END FUNCTION  

        FOR each pair IN similarPairs  
            FOR each word IN pair  
                IF word NOT IN parent  
                    SET the element at key word IN parent TO word  
                END IF  
            END FOR  
        END FOR  

        FOR each element x AND each element y IN corresponding positions IN sentence1 AND sentence2  
            IF x NOT IN parent  
                SET the element at key x IN parent TO x  
            END IF  
            IF y NOT IN parent  
                SET the element at key y IN parent TO y  
            END IF  
            IF find(x) NOT EQUALS find(y)  
                RETURN false  
            END IF  
        END FOR  

        RETURN true  
    END FUNCTION  
END CLASS