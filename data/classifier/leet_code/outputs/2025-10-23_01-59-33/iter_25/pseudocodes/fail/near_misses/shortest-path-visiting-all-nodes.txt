CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph IS EMPTY THEN  
            RETURN 0  
        END IF  
      
        LET total_nodes = LENGTH(graph)  
        LET frontier_states = SET()  
        LET processing_queue = LIST()  
      
        FOR index IN RANGE(0, total_nodes - 1)  
            LET bitmask = 1 << index  
            LET state = (index, bitmask)  
            APPEND state TO processing_queue  
            ADD state TO frontier_states  
        END FOR  
      
        LET steps_counter = 0  
        LET full_visit_mask = (1 << total_nodes) - 1  
      
        FUNCTION process_level(depth)  
            IF LENGTH(processing_queue) = 0 THEN RETURN -1 END IF  
            LET batch_size = LENGTH(processing_queue)  
      
            FUNCTION handle_batch(i)  
                IF i = batch_size THEN RETURN NULL END IF  
                LET current_state = processing_queue[0]  
                REMOVE FIRST ELEMENT FROM processing_queue  
                LET current_node = current_state[0]  
                LET visited_mask = current_state[1]  
      
                IF visited_mask = full_visit_mask THEN  
                    RETURN depth  
                END IF  
      
                FOR neighbor_node IN graph[current_node]  
                    LET updated_mask = visited_mask | (1 << neighbor_node)  
                    LET next_state = (neighbor_node, updated_mask)  
                    IF next_state NOT IN frontier_states THEN  
                        ADD next_state TO frontier_states  
                        APPEND next_state TO processing_queue  
                    END IF  
                END FOR  
      
                RETURN handle_batch(i + 1)  
            END FUNCTION  
      
            LET result = handle_batch(0)  
            IF result IS NOT NULL THEN  
                RETURN result  
            END IF  
      
            RETURN process_level(depth + 1)  
        END FUNCTION  
      
        RETURN process_level(steps_counter)  
    END FUNCTION  
END CLASS