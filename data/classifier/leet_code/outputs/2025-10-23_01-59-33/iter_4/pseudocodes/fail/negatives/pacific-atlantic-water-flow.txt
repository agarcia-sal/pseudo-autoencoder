CLASS Solution  
    FUNCTION pacificAtlantic(heights)  
        FUNCTION bfs(queue, visited)  
            WHILE the LENGTH OF queue is GREATER THAN zero  
                FOR each element FROM zero TO the LENGTH OF queue MINUS one  
                    SET i TO the first component OF the element REMOVED FROM the FRONT OF queue  
                    SET j TO the second component OF the element REMOVED FROM the FRONT OF queue  
                    FOR each pair a b IN the list of pairs zero MINUS one zero one one zero MINUS one zero  
                        SET x TO i PLUS a  
                        SET y TO j PLUS b  
                        IF x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND the pair x y IS NOT IN visited AND the element at position x y OF heights IS GREATER THAN OR EQUAL TO the element at position i j OF heights  
                            ADD the pair x y TO visited  
                            APPEND the pair x y TO queue  
                        END IF  
                    END FOR  
                END FOR  
            END WHILE  
        END FUNCTION  

        SET m TO the LENGTH OF heights  
        SET n TO the LENGTH OF the element at position zero OF heights  
        SET visited_one TO an empty set  
        SET visited_two TO an empty set  
        SET queue_one TO an empty double ended queue  
        SET queue_two TO an empty double ended queue  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF i EQUALS zero OR j EQUALS zero  
                    ADD the pair i j TO visited_one  
                    APPEND the pair i j TO queue_one  
                END IF  
                IF i EQUALS m MINUS one OR j EQUALS n MINUS one  
                    ADD the pair i j TO visited_two  
                    APPEND the pair i j TO queue_two  
                END IF  
            END FOR  
        END FOR  
        CALL bfs WITH queue_one AND visited_one  
        CALL bfs WITH queue_two AND visited_two  
        SET result TO an empty list  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF the pair i j IS IN visited_one AND the pair i j IS IN visited_two  
                    APPEND the pair i j TO result  
                END IF  
            END FOR  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS