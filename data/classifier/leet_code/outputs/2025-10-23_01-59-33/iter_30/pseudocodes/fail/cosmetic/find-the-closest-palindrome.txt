CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET lenCount AS LENGTH OF n  
        IF lenCount EQUALS 1  
            SET valNum AS integer VALUE OF n  
            RETURN string FORM valNum MINUS 1  
        END IF  
        
        SET candSet AS AN EMPTY SET  
        
        SET powLen AS 10 TO THE POWER OF lenCount  
        SET powLenMinusOne AS 10 TO THE POWER OF (lenCount MINUS 1)  
        
        ADD (powLen PLUS 1) TO candSet  
        ADD (powLenMinusOne MINUS 1) TO candSet  
        
        SET prefVal AS integer VALUE OF SUBSTRING OF n FROM 1 TO ((lenCount PLUS 1) DIVIDED BY 2)  
        
        SET idx AS -1  
        WHILE idx LESS THAN OR EQUAL TO 1  
            SET newPrefNum AS prefVal PLUS idx  
            SET newPrefStr AS string FORM newPrefNum  
            
            IF (lenCount MOD 2) EQUALS 0 THEN
                SET revPart AS REVERSE OF newPrefStr  
                SET candStr AS newPrefStr CONCATENATED WITH revPart  
            ELSE  
                SET subRev AS REVERSE OF SUBSTRING OF newPrefStr FROM 1 TO (LENGTH OF newPrefStr MINUS 1)  
                SET candStr AS newPrefStr CONCATENATED WITH subRev  
            END IF  
            
            SET candNum AS integer VALUE OF candStr  
            ADD candNum TO candSet  
            
            SET idx AS idx PLUS 1  
        END WHILE  
        
        SET origNum AS integer VALUE OF n  
        IF candSet CONTAINS origNum THEN
            REMOVE origNum FROM candSet  
        END IF  
        
        SET bestCandidate AS NULL  
        SET minDist AS POSITIVE_INFINITY  
        
        FOR EACH num IN candSet  
            SET dist AS ABSOLUTE VALUE OF (num MINUS origNum)  
            IF (dist LESS THAN minDist) OR (dist EQUALS minDist AND num LESS THAN bestCandidate) THEN
                SET bestCandidate AS num  
                SET minDist AS dist  
            END IF  
        END FOR  
        
        RETURN string FORM bestCandidate  
    END FUNCTION  
END CLASS