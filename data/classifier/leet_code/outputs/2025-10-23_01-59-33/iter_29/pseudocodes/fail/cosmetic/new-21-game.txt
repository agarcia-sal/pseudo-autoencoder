CLASS Solution
    FUNCTION new21Game(n INTEGER, k INTEGER, maxPts INTEGER) RETURNS FLOAT
        FUNCTION dfs(pos INTEGER) RETURNS FLOAT
            SWITCH TRUE
                CASE pos >= k:
                    RETURN 1.0 IF pos <= n ELSE 0.0
                CASE pos = k - 1:
                    LET coverage FLOAT = n - k + 1
                    RETURN coverage / maxPts IF coverage < maxPts ELSE 1.0
            END SWITCH

            LET valStart FLOAT = dfs(pos + 1)
            LET valEnd FLOAT = dfs(pos + maxPts + 1)
            LET outcome FLOAT = valStart + (valStart - valEnd) / maxPts
            RETURN outcome
        END FUNCTION

        RETURN dfs(0)
    END FUNCTION
END CLASS