```
init n, (x,y) = len(pos), avg coords of pos
set decay=0.999, eps=1e-6, alpha=0.5
loop:
  grad_x=grad_y=dist=0
  for (x1,y1) in pos:
    a,b = x - x1, y - y1
    c = sqrt(a² + b²)
    grad_x += a/(c+1e-8); grad_y += b/(c+1e-8)
    dist += c
  dx, dy = grad_x*alpha, grad_y*alpha
  x, y = x - dx, y - dy
  alpha *= decay
  if |dx| ≤ eps and |dy| ≤ eps: return dist
```