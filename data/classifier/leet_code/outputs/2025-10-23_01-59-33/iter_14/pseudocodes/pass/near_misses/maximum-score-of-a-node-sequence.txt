CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        CREATE graph AS an empty mapping with default empty array  
        SET index_u TO 0  
        WHILE index_u < LENGTH(edges)  
            SET node_u TO edges[index_u][0]  
            SET node_v TO edges[index_u][1]  
            INSERT [scores[node_v], node_v] INTO graph[node_u] AT END  
            INSERT [scores[node_u], node_u] INTO graph[node_v] AT END  
            SET index_u TO index_u + 1  
        END WHILE  
        FOR each node IN KEYS(graph)  
            SET connected_nodes TO graph[node]  
            SORT connected_nodes DESCENDING BY first element of each pair  
            SET graph[node] TO SLICE connected_nodes FROM 0 TO 2  
        END FOR  
        SET max_score TO -1  
        SET idx_edge TO 0  
        WHILE idx_edge < LENGTH(edges)  
            SET edge_u TO edges[idx_edge][0]  
            SET edge_v TO edges[idx_edge][1]  
            SET u_pairs TO graph[edge_u]  
            SET v_pairs TO graph[edge_v]  
            SET ind_x TO 0  
            WHILE ind_x < LENGTH(u_pairs)  
                SET score1_pair TO u_pairs[ind_x][0]  
                SET x_node TO u_pairs[ind_x][1]  
                SET ind_y TO 0  
                WHILE ind_y < LENGTH(v_pairs)  
                    SET score2_pair TO v_pairs[ind_y][0]  
                    SET y_node TO v_pairs[ind_y][1]  
                    IF LENGTH(SET([x_node, y_node, edge_u, edge_v])) = 4 THEN  
                        SET temp_sum TO score1_pair + score2_pair + scores[edge_u] + scores[edge_v]  
                        IF temp_sum > max_score THEN  
                            SET max_score TO temp_sum  
                        END IF  
                    END IF  
                    SET ind_y TO ind_y + 1  
                END WHILE  
                SET ind_x TO ind_x + 1  
            END WHILE  
            SET idx_edge TO idx_edge + 1  
        END WHILE  
        RETURN max_score  
    END FUNCTION  
END CLASS