CLASS Solution
    FUNCTION countPrimes WITH PARAMETER n
        PROCEDURE markNonPrimes WITH PARAMETERS arr, current, endLimit
            IF current GREATER THAN endLimit THEN
                RETURN
            END IF
            IF arr[current] EQUALS True THEN
                SET factor TO current
                SET composite TO factor MULTIPLIED BY factor
                WHILE composite LESS THAN n DO
                    SET arr[composite] TO False
                    SET composite TO composite PLUS factor
                END WHILE
            END IF
            CALL markNonPrimes WITH arr, current PLUS 1, endLimit
        END PROCEDURE

        IF n LESS OR EQUAL 2 THEN
            RETURN 0
        END IF

        SET primeFlags TO empty list
        SET counter TO 0
        WHILE counter LESS THAN n DO
            ADD True TO primeFlags
            SET counter TO counter PLUS 1
        END WHILE

        SET primeFlags[0] TO False
        SET primeFlags[1] TO False

        SET boundary TO FLOOR(SQRT(n))

        CALL markNonPrimes WITH primeFlags, 2, boundary

        SET totalPrimes TO 0
        SET idx TO 0
        WHILE idx LESS THAN LENGTH(primeFlags) DO
            IF primeFlags[idx] IS True THEN
                SET totalPrimes TO totalPrimes PLUS 1
            END IF
            SET idx TO idx PLUS 1
        END WHILE

        RETURN totalPrimes
    END FUNCTION
END CLASS