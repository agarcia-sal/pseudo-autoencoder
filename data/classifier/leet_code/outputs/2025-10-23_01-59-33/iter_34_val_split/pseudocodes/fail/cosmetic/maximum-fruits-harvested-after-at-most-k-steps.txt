CLASS Solution
    FUNCTION maxTotalFruits(fruits AS list of list of integers, startPos AS integer, k AS integer) RETURNS integer
        ASSIGN 0 TO peak
        ASSIGN 0 TO aggregate
        ASSIGN 0 TO beginIndex

        ASSIGN fruits.LENGTH TO ceiling
        ASSIGN 0 TO cursor

        WHILE cursor < ceiling
            ASSIGN fruits[cursor][0] TO spot
            ASSIGN fruits[cursor][1] TO quantity
            ASSIGN aggregate + quantity TO aggregate

            LOOP
                EXIT WHEN beginIndex > cursor
                IF (startPos - k <= fruits[beginIndex][0]) AND (fruits[beginIndex][0] <= startPos + k) AND (startPos - k <= fruits[cursor][0]) AND (fruits[cursor][0] <= startPos + k) THEN
                    ASSIGN MIN(ABS(fruits[cursor][0] - startPos), ABS(fruits[beginIndex][0] - startPos)) + (fruits[cursor][0] - fruits[beginIndex][0]) <= k TO rangeCheck
                    IF rangeCheck THEN
                        BREAK
                    END IF
                END IF
                ASSIGN aggregate - fruits[beginIndex][1] TO aggregate
                ASSIGN beginIndex + 1 TO beginIndex
            END LOOP

            IF peak < aggregate THEN
                ASSIGN aggregate TO peak
            END IF
            ASSIGN cursor + 1 TO cursor
        END WHILE

        RETURN peak
    END FUNCTION
END CLASS