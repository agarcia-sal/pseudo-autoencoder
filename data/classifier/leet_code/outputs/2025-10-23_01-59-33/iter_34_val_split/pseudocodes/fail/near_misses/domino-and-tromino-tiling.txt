CLASS Solution
    FUNCTION numTilings(n)
        CONSTANT M ← 1000000007

        ARRAY results ← new array of size n + 1 filled with 0
        ARRAY partials ← new array of size n + 1 filled with 0

        results[0] ← 1
        results[1] ← 1

        IF n ≥ 2 THEN
            results[2] ← 2
            partials[2] ← 1
        END IF

        PROCEDURE loop(index)
            IF index > n THEN
                RETURN
            END IF
            results[index] ← (results[index - 1] + results[index - 2] + 2 * partials[index - 1]) MOD M
            partials[index] ← (results[index - 2] + partials[index - 1]) MOD M
            loop(index + 1)
        END PROCEDURE

        loop(3)

        RETURN results[n]
    END FUNCTION
END CLASS