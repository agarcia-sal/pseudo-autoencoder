CLASS Solution  
    FUNCTION minimumIncompatibility(nums k)  
        SET n TO the LENGTH OF nums  
        SET subset_size TO n DIVIDED BY k  
        
        IF any count IN the COUNTER of nums VALUES IS GREATER THAN k THEN  
            RETURN negative one  
        END IF  
        
        SET subset_incompatibility TO an empty map  
        FOR each mask FROM zero TO two RAISED TO THE POWER OF n MINUS one  
            IF the NUMBER OF ONES IN the BINARY REPRESENTATION OF mask EQUALS subset_size THEN  
                SET elements TO an empty list  
                FOR each i FROM zero TO n MINUS one  
                    IF the BITWISE AND of mask AND two RAISED TO THE POWER OF i IS GREATER THAN zero THEN  
                        APPEND the element at position i OF nums TO elements  
                    END IF  
                END FOR  
                IF the SIZE OF the SET OF elements EQUALS subset_size THEN  
                    SET incompatibility TO the MAXIMUM value IN elements MINUS the MINIMUM value IN elements  
                    ASSIGN incompatibility TO subset_incompatibility AT KEY mask  
                END IF  
            END IF  
        END FOR  
        
        SET dp TO a list OF length two RAISED TO THE POWER OF n FILLED WITH positive infinity  
        SET dp AT position zero TO zero  
        
        FOR each mask FROM zero TO two RAISED TO THE POWER OF n MINUS one  
            IF the NUMBER OF ONES IN the BINARY REPRESENTATION OF mask MODULO subset_size NOT EQUALS zero THEN  
                CONTINUE TO next iteration  
            END IF  
            FOR each subset_mask IN the KEYS OF subset_incompatibility  
                IF the BITWISE AND of mask AND subset_mask EQUALS subset_mask THEN  
                    SET dp AT position mask TO the MINIMUM value BETWEEN dp AT position mask AND dp AT position mask XOR subset_mask PLUS subset_incompatibility AT KEY subset_mask  
                END IF  
            END FOR  
        END FOR  
        
        IF dp AT position two RAISED TO THE POWER OF n MINUS one EQUALS positive infinity THEN  
            RETURN negative one  
        ELSE  
            RETURN dp AT position two RAISED TO THE POWER OF n MINUS one  
        END IF  
    END FUNCTION  
END CLASS