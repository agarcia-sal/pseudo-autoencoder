```
sort courses by end day
init max_heap as empty, current_end_day = 0

for (d, e) in courses:
    if current_end_day + d â‰¤ e:
        push -d into max_heap
        current_end_day += d
    else if max_heap not empty and -max_heap[0] > d:
        current_end_day += d + pop max_heap
        push -d into max_heap

return size of max_heap
```