CLASS Solution
    FUNCTION shortestPathLength(graph)
        IF NOT (graph == empty collection) THEN
            SET nodeCount AS LENGTH OF graph
            SET dequeContainer AS new double-ended queue
            SET index AS zero
            WHILE index LESS THAN nodeCount
                SET item AS pair(index, ONE SHIFTED LEFT BY index)
                APPEND item TO dequeContainer
                INCREMENT index BY one
            END WHILE

            SET visitedStates AS new set dequeContainer

            SET distance AS zero
            SET fullMask AS (ONE SHIFTED LEFT BY nodeCount) MINUS one

            WHILE NOT (dequeContainer IS EMPTY)
                SET levelSize AS LENGTH OF dequeContainer
                SET stepCounter AS zero
                WHILE stepCounter LESS THAN levelSize
                    REMOVE leftmost element FROM dequeContainer INTO currentPair
                    SET currentNode AS currentPair's first element
                    SET visitedMask AS currentPair's second element

                    IF visitedMask == fullMask THEN
                        RETURN distance
                    END IF

                    FOR each adjacent IN graph AT index currentNode
                        SET updatedMask AS visitedMask OR (ONE SHIFTED LEFT BY adjacent)
                        SET nextPair AS pair(adjacent, updatedMask)

                        IF NOT (nextPair IN visitedStates) THEN
                            ADD nextPair TO visitedStates
                            APPEND nextPair TO dequeContainer
                        END IF
                    END FOR
                    INCREMENT stepCounter BY one
                END WHILE
                SET distance AS distance + 1
            END WHILE

            RETURN minus one
        ELSE
            RETURN zero
        END IF
    END FUNCTION
END CLASS