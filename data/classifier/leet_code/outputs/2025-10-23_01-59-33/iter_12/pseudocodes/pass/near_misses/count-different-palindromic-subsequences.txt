CLASS Solution  
    FUNCTION countPalindromicSubsequences(s as string) RETURNS integer  
        SET MOD TO ten TO THE POWER OF nine PLUS one  
        SET n TO the LENGTH OF s  
        
        FUNCTION initialize_matrix(rows as integer, columns as integer) RETURNS two dimensional list  
            RETURN a two dimensional list of rows and columns filled with negative one  
        END FUNCTION  
        
        SET next_occurrence TO initialize_matrix(four, n)  
        SET prev_occurrence TO initialize_matrix(four, n)  
        
        FOR c FROM zero TO three  
            SET char TO the character corresponding to the ASCII code OF the ASCII code OF lowercase a PLUS c  
            SET last TO negative one  
            FOR i FROM zero TO n MINUS one  
                IF the element at position i OF s IS EQUAL TO char THEN  
                    SET last TO i  
                END IF  
                SET the element at position i OF the list at position c OF prev_occurrence TO last  
            END FOR  
            
            SET last TO negative one  
            FOR i FROM n MINUS one DOWN TO zero  
                IF the element at position i OF s IS EQUAL TO char THEN  
                    SET last TO i  
                END IF  
                SET the element at position i OF the list at position c OF next_occurrence TO last  
            END FOR  
        END FOR  
        
        FUNCTION initialize_two_dimensional_list(size as integer) RETURNS two dimensional list  
            RETURN a two dimensional list of size by size filled with zero  
        END FUNCTION  
        
        SET dp TO initialize_two_dimensional_list(n)  
        
        FOR i FROM zero TO n MINUS one  
            SET the element at position i at position i OF dp TO one  
        END FOR  
        
        FOR length FROM two TO n  
            FOR i FROM zero TO n MINUS length  
                SET j TO i PLUS length MINUS one  
                FOR c FROM zero TO three  
                    SET char TO the character corresponding to the ASCII code OF the ASCII code OF lowercase a PLUS c  
                    SET left TO the element at position i OF the list at position c OF next_occurrence  
                    SET right TO the element at position j OF the list at position c OF prev_occurrence  
                    
                    IF left IS GREATER THAN j OR right IS LESS THAN i THEN  
                        CONTINUE TO next iteration of the FOR loop over c  
                    ELSE IF left IS EQUAL TO right THEN  
                        SET the element at position i at position j OF dp TO the remainder of the sum of the element at position i at position j OF dp PLUS one DIVIDED BY MOD  
                    ELSE  
                        SET the element at position i at position j OF dp TO the remainder of the sum of the element at position i at position j OF dp PLUS the element at position left PLUS one at position right MINUS one OF dp PLUS two DIVIDED BY MOD  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        
        RETURN the element at position zero at position n MINUS one OF dp  
    END FUNCTION  
END CLASS