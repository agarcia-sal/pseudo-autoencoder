CLASS Solution
    FUNCTION atMostNGivenDigitSet(digits, n)
        FUNCTION count_numbers_with_length(length)
            RETURN the LENGTH OF digits RAISED TO THE POWER OF length
        END FUNCTION

        FUNCTION count_numbers_up_to_n(n)
            SET str_n TO the string FORM OF n
            SET length TO the LENGTH OF str_n
            SET count TO zero
            
            FOR length_iterator FROM one TO the value BEFORE length
                INCREMENT count BY the VALUE RETURNED BY count_numbers_with_length WITH length_iterator
            END FOR
            
            FOR index FROM zero TO the value BEFORE length
                SET current_digit TO the integer VALUE OF the element at position index OF str_n
                
                FOR each digit IN digits
                    SET digit_value TO the integer VALUE OF digit

                    IF digit_value IS LESS THAN current_digit THEN
                        INCREMENT count BY the VALUE RETURNED BY count_numbers_with_length WITH the VALUE OF length MINUS index MINUS one
                    ELSE IF digit_value IS EQUAL TO current_digit THEN
                        IF index IS EQUAL TO length MINUS one THEN
                            INCREMENT count BY one
                        END IF
                    ELSE
                        BREAK out of the inner loop
                    END IF
                END FOR
            END FOR
            
            RETURN count
        END FUNCTION

        RETURN the VALUE RETURNED BY count_numbers_up_to_n WITH n
    END FUNCTION
END CLASS