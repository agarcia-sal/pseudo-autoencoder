CLASS Solution  
    FUNCTION shoppingOffers(price, special, needs)  
        SET special TO an empty list  
        FOR each offer IN the original special list  
            IF the sum of elements at all positions except the last in offer IS GREATER THAN zero AND  
               the last element of offer IS LESS THAN the sum of the product of corresponding elements of price and offer except the last element  
                APPEND offer TO special  
            END IF  
        END FOR  
        
        FUNCTION dfs(needs)  
            SET min_cost TO zero  
            FOR each element at position index FROM zero TO the length of price MINUS one  
                INCREMENT min_cost BY the element at position index of price MULTIPLIED BY the element at position index of needs  
            END FOR  
            
            FOR each offer IN special  
                SET new_needs TO an empty list  
                FOR each index FROM zero TO the length of needs MINUS one  
                    APPEND to new_needs the element at position index of needs MINUS the element at position index of offer  
                END FOR  
                
                SET can_use_offer TO true  
                FOR each element n IN new_needs  
                    IF n IS LESS THAN zero  
                        SET can_use_offer TO false  
                        BREAK the loop  
                    END IF  
                END FOR  
                
                IF can_use_offer EQUALS true  
                    SET possible_cost TO the last element of offer PLUS dfs(the tuple version of new_needs)  
                    IF possible_cost IS LESS THAN min_cost  
                        SET min_cost TO possible_cost  
                    END IF  
                END IF  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN dfs(the tuple version of needs)  
    END FUNCTION  
END CLASS