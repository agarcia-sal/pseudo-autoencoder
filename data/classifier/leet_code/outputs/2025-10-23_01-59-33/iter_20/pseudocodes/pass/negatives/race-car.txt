```
init queue with (pos=0, spd=1, steps=0)
init visited with (0,1)

while queue not empty:
    pop (pos, spd, steps)
    if pos == target: return steps

    next_pos, next_spd = pos+spd, spd*2
    if (next_pos,next_spd) not in visited and 0 ≤ next_pos < 2*target:
        add (next_pos,next_spd) to visited
        append (next_pos,next_spd,steps+1) to queue

    next_spd = -1 if spd > 0 else 1
    if (pos,next_spd) not in visited and 0 ≤ pos < 2*target:
        add (pos,next_spd) to visited
        append (pos,next_spd,steps+1) to queue
```