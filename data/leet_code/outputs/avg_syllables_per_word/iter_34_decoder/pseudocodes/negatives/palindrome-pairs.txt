CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the REVERSED sequence of characters in s  
        END FUNCTION  
        
        SET word_dict TO an empty dictionary mapping each word in words TO its position index  
        SET result TO an empty list  
        
        FOR each position i AND corresponding word IN words  
            IF word EQUALS an empty string THEN  
                CONTINUE to next iteration of the loop  
            END IF  
            
            IF word_dict CONTAINS an empty string AND is_palindrome(word) holds THEN  
                APPEND a list containing i AND the position index of the empty string TO result  
                APPEND a list containing the position index of the empty string AND i TO result  
            END IF  
            
            SET reversed_word TO the sequence of characters in word in reverse order  
            IF word_dict CONTAINS reversed_word AND the position index of reversed_word IS NOT EQUAL TO i THEN  
                APPEND a list containing i AND the position index of reversed_word TO result  
            END IF  
            
            FOR variable j FROM one TO the LENGTH OF word MINUS one  
                SET prefix TO the substring from the first character up to position j of word  
                SET suffix TO the substring from position j TO the end of word  
                SET reversed_prefix TO the sequence of characters in prefix in reverse order  
                SET reversed_suffix TO the sequence of characters in suffix in reverse order  
                
                IF is_palindrome(suffix) holds AND word_dict CONTAINS reversed_prefix THEN  
                    APPEND a list containing i AND the position index of reversed_prefix TO result  
                END IF  
                
                IF is_palindrome(prefix) holds AND word_dict CONTAINS reversed_suffix THEN  
                    APPEND a list containing the position index of reversed_suffix AND i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS