CLASS Solution  
    FUNCTION maxValue(events parameter LIST OF LIST OF INTEGER, k parameter INTEGER) RETURNS INTEGER  
        CALL events sort BY the second element of each event  
        SET n TO the LENGTH OF events  
        SET dp TO a list composed of n PLUS one elements WHERE each element is a list composed of k PLUS one zeros  
        
        FOR i FROM one TO n  
            SET start TO the first element of the event at position i MINUS one of events  
            SET end TO the second element of the event at position i MINUS one of events  
            SET value TO the third element of the event at position i MINUS one of events  
            
            SET j TO the result of finding the position using binary search in events WHERE the second element of the event EQUALS OR IS GREATER THAN start  
            
            FOR l FROM one TO k  
                IF the value at position i MINUS one and position l in dp IS GREATER THAN OR EQUAL TO the value at position j and position l MINUS one in dp PLUS value THEN  
                    SET the value at position i and position l in dp TO the value at position i MINUS one and position l in dp  
                ELSE  
                    SET the value at position i and position l in dp TO the value at position j and position l MINUS one in dp PLUS value  
                END IF  
            END FOR  
        END FOR  
        
        RETURN the value at position n and position k in dp  
    END FUNCTION  
END CLASS