CLASS Solution  
    FUNCTION numSubarrayBoundedMax(nums PARAMETERS left PARAMETERS right)  
        FUNCTION count(max_value)  
            SET count TO zero  
            SET current_length TO zero  
            FOR each num IN nums  
                IF num LESS THAN OR EQUAL TO max_value  
                    INCREMENT current_length BY one  
                    INCREMENT count BY current_length  
                ELSE  
                    SET current_length TO zero  
                END IF  
            END FOR  
            RETURN count  
        END FUNCTION  
        RETURN the result of count called with right MINUS the result of count called with left MINUS one  
    END FUNCTION  
END CLASS