CLASS Solution  
    FUNCTION minPushBox(grid)  
        SET directions TO list of pairs consisting of minus one and zero one and zero minus one and zero and zero and one  
        FOR i FROM zero TO the length of grid MINUS one  
            FOR j FROM zero TO the length of the element at position zero of grid MINUS one  
                IF the element at position i of grid AT position j EQUALS uppercase letter S  
                    SET player_start TO pair consisting of i and j  
                ELSE IF the element at position i of grid AT position j EQUALS uppercase letter B  
                    SET box_start TO pair consisting of i and j  
                ELSE IF the element at position i of grid AT position j EQUALS uppercase letter T  
                    SET target TO pair consisting of i and j  
                END IF  
            END FOR  
        END FOR  
        SET queue TO a new deque containing a tuple of player_start box_start and zero  
        SET visited TO a new empty set  
        ADD tuple of player_start and box_start TO visited  
        WHILE the length of queue is greater than zero  
            SET player_pos box_pos push_count TO the element removed from the left of queue  
            IF the value of box_pos EQUALS the value of target  
                RETURN push_count  
            END IF  
            FOR each pair dx dy IN directions  
                SET new_player_pos TO a pair consisting of the first element of player_pos PLUS dx and the second element of player_pos PLUS dy  
                IF the result of calling is_valid_position with arguments new_player_pos and grid  
                    IF new_player_pos EQUALS box_pos  
                        SET new_box_pos TO a pair consisting of the first element of box_pos PLUS dx and the second element of box_pos PLUS dy  
                        IF the result of calling is_valid_position with arguments new_box_pos and grid AND the tuple of new_player_pos and new_box_pos NOT IN visited  
                            ADD tuple of new_player_pos and new_box_pos TO visited  
                            APPEND tuple of new_player_pos new_box_pos push_count PLUS one TO queue  
                        END IF  
                    ELSE  
                        IF the tuple of new_player_pos and box_pos NOT IN visited  
                            ADD tuple of new_player_pos and box_pos TO visited  
                            APPEND tuple of new_player_pos box_pos push_count TO queue  
                        END IF  
                    END IF  
                END IF  
            END FOR  
        END WHILE  
        RETURN minus one  
    END FUNCTION  
    FUNCTION is_valid_position(position grid)  
        SET x TO the first element of position  
        SET y TO the second element of position  
        RETURN the expression zero LESS THAN OR EQUAL TO x AND x LESS THAN the length of grid AND zero LESS THAN OR EQUAL TO y AND y LESS THAN the length of the element at position zero of grid AND the element at position x of grid AT position y NOT EQUALS the character number sign  
    END FUNCTION  
END CLASS