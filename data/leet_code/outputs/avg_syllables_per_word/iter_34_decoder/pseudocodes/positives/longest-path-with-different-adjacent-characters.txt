CLASS Solution  
    FUNCTION longestPath(parent, s)  
        ASSIGN reference TO a new default dictionary with list as default value and name it tree  
        FOR each index i and element p IN parent  
            IF p NOT EQUALS negative one  
                APPEND i TO the element at position p of tree  
            END IF  
        END FOR  
  
        SET self dot result TO one  
  
        FUNCTION dfs(node)  
            SET max1 TO zero  
            SET max2 TO zero  
  
            FOR each child IN the element at position node of tree  
                SET child_length TO the result of calling dfs with child as argument  
  
                IF the element at position child of s NOT EQUALS the element at position node of s  
                    IF child_length GREATER THAN max1  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length GREATER THAN max2  
                        SET max2 TO child_length  
                    END IF  
                END IF  
            END FOR  
  
            SET self dot result TO the greater value BETWEEN self dot result AND the sum of max1 PLUS max2 PLUS one  
  
            RETURN max1 PLUS one  
        END FUNCTION  
  
        CALL dfs with zero as argument  
  
        RETURN self dot result  
    END FUNCTION  
END CLASS