CLASS Solution  
    FUNCTION gridIllumination(n, lamps, queries)  
        INITIALIZE row_count AS a mapping from integer to integer defaulting to zero  
        INITIALIZE col_count AS a mapping from integer to integer defaulting to zero  
        INITIALIZE diag_count AS a mapping from integer to integer defaulting to zero where the key is row MINUS column  
        INITIALIZE anti_diag_count AS a mapping from integer to integer defaulting to zero where the key is row PLUS column  
        
        INITIALIZE lamp_positions AS an empty set  
        
        FOR each pair of values r and c IN lamps  
            IF pair of values r and c is NOT in lamp_positions  
                ADD pair of values r and c TO lamp_positions  
                INCREMENT the value at key r in row_count BY one  
                INCREMENT the value at key c in col_count BY one  
                INCREMENT the value at key of the difference between r and c in diag_count BY one  
                INCREMENT the value at key of the sum of r and c in anti_diag_count BY one  
            END IF  
        END FOR  
        
        SET directions TO the collection of pairs minus one minus one and minus one zero and minus one one and zero minus one and zero zero and zero one and one minus one and one zero and one one  
        
        INITIALIZE result AS an empty list  
        
        FOR each pair of values r and c IN queries  
            IF the value at key r in row_count GREATER THAN zero OR the value at key c in col_count GREATER THAN zero OR the value at key of the difference between r and c in diag_count GREATER THAN zero OR the value at key of the sum of r and c in anti_diag_count GREATER THAN zero  
                APPEND one TO result  
            ELSE  
                APPEND zero TO result  
            END IF  
            
            FOR each pair of values dr and dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF pair of values nr and nc IS IN lamp_positions  
                    REMOVE pair of values nr and nc FROM lamp_positions  
                    DECREMENT the value at key nr in row_count BY one  
                    DECREMENT the value at key nc in col_count BY one  
                    DECREMENT the value at key of the difference between nr and nc in diag_count BY one  
                    DECREMENT the value at key of the sum of nr and nc in anti_diag_count BY one  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS