CLASS Solution  
    FUNCTION maximumBeauty(flowers)  
        SET indices TO a new dictionary that creates a new empty list for any new key  
        SET prefix_sum TO a new list of zeros of the length of the number of elements in flowers PLUS one  
        FOR each index i FROM zero TO the length of flowers MINUS one  
            SET element_at_position i PLUS one of prefix_sum TO element_at_position i of prefix_sum PLUS the greater value between element_at_position i of flowers AND zero  
            APPEND index i TO the list associated with element_at_position i of flowers in indices  
        END FOR  
        SET max_beauty TO the smallest possible number representable as negative infinity  
        FOR each key beauty IN indices  
            IF the length of the list associated with beauty in indices IS GREATER THAN OR EQUAL TO two  
                SET first TO element at position zero of the list associated with beauty in indices  
                SET last TO element at the last position of the list associated with beauty in indices  
                SET current_beauty TO two MULTIPLIED BY beauty PLUS element at position last of prefix_sum MINUS element at position first PLUS one of prefix_sum  
                IF current_beauty IS GREATER THAN max_beauty  
                    SET max_beauty TO current_beauty  
                END IF  
            END IF  
        END FOR  
        RETURN max_beauty  
    END FUNCTION  
END CLASS