CLASS Solution  
    FUNCTION minPushBox(grid)  
        SET directions TO list containing tuple with negative one and zero, tuple with one and zero, tuple with zero and negative one, tuple with zero and one  
        FOR variable i FROM zero TO the LENGTH OF grid MINUS one  
            FOR variable j FROM zero TO the LENGTH OF the element at position i of grid MINUS one  
                IF element at position i of grid at position j EQUALS the character S  
                    SET player_start TO tuple containing i and j  
                ELSE IF element at position i of grid at position j EQUALS the character B  
                    SET box_start TO tuple containing i and j  
                ELSE IF element at position i of grid at position j EQUALS the character T  
                    SET target TO tuple containing i and j  
                END IF  
            END FOR  
        END FOR  
        ASSIGN reference TO a new empty double-ended queue containing tuple with player_start box_start and zero  
        ASSIGN reference TO a new empty set  
        ADD tuple with player_start and box_start TO the set referenced by visited  
        WHILE the queue referenced by queue is not empty  
            REMOVE and ASSIGN the leftmost element of the queue referenced by queue TO variables player_pos box_pos and push_count  
            IF variable box_pos EQUALS variable target  
                RETURN push_count  
            END IF  
            FOR each tuple dx and dy IN directions  
                SET new_player_pos TO tuple containing the element at position zero of player_pos PLUS dx and element at position one of player_pos PLUS dy  
                IF the result of calling FUNCTION is_valid_position with arguments self new_player_pos and grid  
                    IF new_player_pos EQUALS box_pos  
                        SET new_box_pos TO tuple containing the element at position zero of box_pos PLUS dx and element at position one of box_pos PLUS dy  
                        IF the result of calling FUNCTION is_valid_position with arguments self new_box_pos and grid AND tuple with new_player_pos and new_box_pos NOT IN visited  
                            ADD tuple with new_player_pos and new_box_pos TO visited  
                            APPEND tuple with new_player_pos new_box_pos and push_count PLUS one TO the queue referenced by queue  
                        END IF  
                    ELSE  
                        IF tuple with new_player_pos and box_pos NOT IN visited  
                            ADD tuple with new_player_pos and box_pos TO visited  
                            APPEND tuple with new_player_pos box_pos and push_count TO the queue referenced by queue  
                        END IF  
                    END IF  
                END IF  
            END FOR  
        END WHILE  
        RETURN result of negative one  
    END FUNCTION  

    FUNCTION is_valid_position(position grid)  
        SET x TO the element at position zero of position  
        SET y TO the element at position one of position  
        RETURN the result of zero LESS THAN OR EQUAL TO x AND x LESS THAN the LENGTH OF grid AND zero LESS THAN OR EQUAL TO y AND y LESS THAN the LENGTH OF the element at position zero of grid AND element at position x of grid at position y NOT EQUALS the character representing a hash  
    END FUNCTION  
END CLASS