CLASS Solution  
    FUNCTION ways(pizza, k)  
        FUNCTION dfs(i, j, k)  
            IF k EQUALS zero  
                IF the number of apples in the rectangular area from row i to the last row and from column j to the last column of the pizza is GREATER THAN zero  
                    RETURN one  
                ELSE  
                    RETURN zero  
                END IF  
            END IF  
            SET ans TO zero  
            FOR x FROM i PLUS one TO the number of rows in pizza MINUS one  
                IF the number of apples in the rectangular area from row x to the last row and from column j to the last column of the pizza is GREATER THAN zero  
                    INCREMENT ans BY dfs(x, j, k MINUS one)  
                END IF  
            END FOR  
            FOR y FROM j PLUS one TO the number of columns in pizza MINUS one  
                IF the number of apples in the rectangular area from row i to the last row and from column y to the last column of the pizza is GREATER THAN zero  
                    INCREMENT ans BY dfs(i, y, k MINUS one)  
                END IF  
            END FOR  
            RETURN ans MODULO the value of mod  
        END FUNCTION  

        SET mod TO one billion PLUS seven  
        SET m TO the number of rows in pizza  
        SET n TO the number of columns in pizza  
        SET s TO a two dimensional list with the number of rows equal to m PLUS one and the number of columns equal to n PLUS one filled with zeros  
        FOR each i and row in pizza starting the count at one  
            FOR each j and character in row starting the count at one  
                SET s at position i and j TO the value at position i MINUS one and j PLUS the value at position i and j MINUS one MINUS the value at position i MINUS one and j MINUS one PLUS one IF character EQUALS the apple character OTHERWISE zero  
            END FOR  
        END FOR  
        RETURN dfs(zero, zero, k MINUS one)  
    END FUNCTION  
END CLASS