CLASS Solution  
    FUNCTION largestRectangleArea(heights)  
        SET stack TO a list containing only negative one  
        SET max_area TO zero  
        APPEND zero TO the end of heights  
        
        FOR each position i AND height h IN heights with their indices  
            WHILE the element at the last position of stack DOES NOT EQUAL negative one AND height h IS LESS THAN the element at the position at the last element of stack in heights  
                SET height TO the element at the position obtained by removing the last element from stack in heights  
                SET width TO position i MINUS the element at the last position of stack MINUS one  
                SET max_area TO the greater of max_area AND height MULTIPLIED BY width  
            END WHILE  
            APPEND position i TO stack  
        END FOR  
        
        RETURN max_area  
    END FUNCTION  
END CLASS