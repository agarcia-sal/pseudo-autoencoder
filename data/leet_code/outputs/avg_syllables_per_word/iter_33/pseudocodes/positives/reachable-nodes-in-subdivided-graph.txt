CLASS Solution  
    FUNCTION reachableNodes(edges AS list of list of integer, maxMoves AS integer, n AS integer) RETURNS integer  
        SET graph TO empty mappings from integer TO empty list  
        FOR index FROM zero TO n MINUS one  
            SET element at position index of graph TO empty list  
        END FOR  
        
        FOR each element u, v, cnt IN edges  
            APPEND pair of v and cnt TO element at position u of graph  
            APPEND pair of u and cnt TO element at position v of graph  
        END FOR  
        
        SET distances TO list of length n with each element set to infinity  
        SET element at position zero of distances TO zero  
        SET priority_queue TO list containing pair of zero and zero  
        
        WHILE length of priority_queue IS greater than zero  
            SET dist, node TO remove and return the smallest element from priority_queue  
            IF dist GREATER THAN element at position node of distances  
                CONTINUE  
            END IF  
            FOR each element neighbor, cnt IN element at position node of graph  
                SET new_dist TO dist PLUS cnt PLUS one  
                IF new_dist LESS THAN element at position neighbor of distances  
                    SET element at position neighbor of distances TO new_dist  
                    INSERT pair of new_dist and neighbor INTO priority_queue maintaining order  
                END IF  
            END FOR  
        END WHILE  
        
        SET reachable_nodes TO zero  
        
        FOR each element d IN distances  
            IF d LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  
        
        SET used_edges TO empty mappings  
        FOR each element u, v, cnt IN edges  
            SET moves_u TO maximum of zero AND maxMoves MINUS element at position u of distances  
            SET moves_v TO maximum of zero AND maxMoves MINUS element at position v of distances  
            SET reachable_new_nodes TO minimum of cnt AND moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            SET element at key pair of u and v of used_edges TO reachable_new_nodes  
        END FOR  
        
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS