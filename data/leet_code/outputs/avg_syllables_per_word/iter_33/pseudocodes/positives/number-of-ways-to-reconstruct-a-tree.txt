CLASS Solution  
    FUNCTION checkWays(pairs)  
        SET graph TO a new mapping from element to a set of elements with default empty set  
        FOR each pair IN pairs  
            SET x TO the element at position one of pair  
            SET y TO the element at position two of pair  
            ADD y TO the set corresponding to key x in graph  
            ADD x TO the set corresponding to key y in graph  
        END FOR  
        
        SET max_degree TO the element in graph with the maximum size of the set corresponding to that element  
        SET n TO the number of keys in graph  
        
        IF the size of the set corresponding to max_degree in graph NOT EQUALS n MINUS one  
            RETURN zero  
        END IF  
        
        FUNCTION can_be_parent(u, v)  
            FOR each neighbor IN the set corresponding to v in graph  
                IF neighbor NOT IN the set corresponding to u in graph AND neighbor NOT EQUALS u  
                    RETURN false  
                END IF  
            END FOR  
            RETURN true  
        END FUNCTION  
        
        SET ways TO one  
        
        FOR each u IN the keys of graph  
            IF u EQUALS max_degree  
                CONTINUE to next iteration  
            END IF  
            SET parent TO none  
            FOR each v IN the set corresponding to u in graph  
                IF v IN graph AND the size of the set corresponding to v in graph GREATER THAN OR EQUAL TO the size of the set corresponding to u in graph AND can_be_parent(v, u)  
                    IF parent IS none OR the size of the set corresponding to v in graph LESS THAN the size of the set corresponding to parent in graph  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  
            IF parent IS none  
                RETURN zero  
            END IF  
            IF the size of the set corresponding to parent in graph EQUALS the size of the set corresponding to u in graph  
                SET ways TO two  
            END IF  
        END FOR  
        
        RETURN ways  
    END FUNCTION  
END CLASS