CLASS Solution  
    FUNCTION maxEnvelopes(envelopes)  
        SORT envelopes BY the element at position zero of element IN envelopes IN ASCENDING ORDER AND BY the NEGATION OF the element at position one of element IN envelopes IN DESCENDING ORDER  
        SET dp TO an empty list  
        FOR each pair OF underscore and h IN envelopes  
            SET idx TO the result of FINDING the LEFTMOST POSITION TO INSERT h INTO dp via BINARY SEARCH  
            IF idx EQUALS the LENGTH OF dp  
                APPEND h TO dp  
            ELSE  
                SET the element at position idx of dp TO h  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS