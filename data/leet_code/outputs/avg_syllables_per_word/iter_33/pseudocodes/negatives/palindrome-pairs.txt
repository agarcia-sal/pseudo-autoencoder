CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the string formed by the elements of s in reverse order  
        END FUNCTION  
        
        SET word_dict TO an empty mapping from string to integer  
        FOR each index i FROM zero TO the length of words MINUS one  
            SET word_dict at the element at position i of words TO i  
        END FOR  
        
        SET result TO an empty list  
        
        FOR each index i FROM zero TO the length of words MINUS one  
            SET word TO the element at position i of words  
            
            IF word EQUALS the empty string THEN  
                CONTINUE to the next iteration of the loop  
            END IF  
            
            IF the empty string is a key in word_dict AND is_palindrome applied to word returns true THEN  
                APPEND the list containing i and the value at the empty string key in word_dict TO result  
                APPEND the list containing the value at the empty string key in word_dict and i TO result  
            END IF  
            
            SET reversed_word TO the string formed by the elements of word in reverse order  
            IF reversed_word is a key in word_dict AND the value at key reversed_word in word_dict NOT EQUALS i THEN  
                APPEND the list containing i and the value at reversed_word key in word_dict TO result  
            END IF  
            
            FOR each index j FROM one TO the length of word MINUS one  
                SET prefix TO the substring of word from position zero TO position j MINUS one  
                SET suffix TO the substring of word from position j TO the last position in word  
                SET reversed_prefix TO the string formed by the elements of prefix in reverse order  
                SET reversed_suffix TO the string formed by the elements of suffix in reverse order  
                
                IF is_palindrome applied to suffix returns true AND reversed_prefix is a key in word_dict THEN  
                    APPEND the list containing i and the value at reversed_prefix key in word_dict TO result  
                END IF  
                
                IF is_palindrome applied to prefix returns true AND reversed_suffix is a key in word_dict THEN  
                    APPEND the list containing the value at reversed_suffix key in word_dict and i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS