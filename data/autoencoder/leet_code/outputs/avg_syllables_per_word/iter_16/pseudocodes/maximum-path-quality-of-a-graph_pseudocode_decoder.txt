CLASS Solution  
    FUNCTION maximalPathQuality(values, edges, maxTime)  
        SET graph TO result of calling auxiliary FUNCTION constructGraph with edges as parameter  
        SET visited TO empty set  
        SET max_quality TO zero  
        
        FUNCTION dfs(node, current_time, current_quality)  
            IF node EQUALS zero THEN  
                SET max_quality TO the GREATER OF max_quality AND current_quality  
            END IF  
            
            FOR each pair neighbor and time IN element at position node of graph  
                IF time LESS THAN OR EQUAL TO current_time THEN  
                    IF neighbor NOT IN visited THEN  
                        ADD neighbor TO visited  
                        CALL dfs with neighbor, current_time MINUS time, current_quality PLUS element at position neighbor of values  
                        REMOVE neighbor FROM visited  
                    ELSE  
                        CALL dfs with neighbor, current_time MINUS time, current_quality  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  
        
        ADD zero TO visited  
        CALL dfs with zero, maxTime, element at position zero of values  
        RETURN max_quality  
    END FUNCTION  
    
    FUNCTION constructGraph(edges)  
        SET graph TO empty mapping from integer keys TO list of pairs  
        FOR each triple u and v and time IN edges  
            APPEND pair v and time TO element at position u of graph  
            APPEND pair u and time TO element at position v of graph  
        END FOR  
        RETURN graph  
    END FUNCTION  
END CLASS