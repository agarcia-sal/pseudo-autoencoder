CLASS Solution  
    FUNCTION ways(pizza AS List of String, k AS Integer) AS Integer  
        DEFINE FUNCTION dfs(i AS Integer, j AS Integer, k AS Integer) AS Integer  
            IF k EQUALS zero THEN  
                RETURN integer VALUE of the expression:  
                    element at position m, n of s MINUS  
                    element at position i, n of s MINUS  
                    element at position m, j of s PLUS  
                    element at position i, j of s GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR each x FROM i PLUS one TO m MINUS one  
                IF element at position x, n of s MINUS element at position i, n of s MINUS element at position x, j of s PLUS element at position i, j of s GREATER THAN zero THEN  
                    INCREMENT ans BY dfs WITH arguments x, j, k MINUS one  
                END IF  
            END FOR  
            FOR each y FROM j PLUS one TO n MINUS one  
                IF element at position m, y of s MINUS element at position i, y of s MINUS element at position m, j of s PLUS element at position i, j of s GREATER THAN zero THEN  
                    INCREMENT ans BY dfs WITH arguments i, y, k MINUS one  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  
        SET mod TO ten RAISED TO THE POWER OF nine PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF element at position zero of pizza  
        INITIALIZE s AS a list of lists filled with zeroes of dimensions m PLUS one BY n PLUS one  
        FOR each i and row IN pizza enumerated starting from one  
            FOR each j and c IN row enumerated starting from one  
                SET element at position i, j of s TO  
                    element at position i MINUS one, j of s PLUS  
                    element at position i, j MINUS one of s MINUS  
                    element at position i MINUS one, j MINUS one of s PLUS  
                    integer VALUE of the expression c EQUALS capital letter A  
            END FOR  
        END FOR  
        RETURN dfs WITH arguments zero, zero, k MINUS one  
    END FUNCTION  
END CLASS