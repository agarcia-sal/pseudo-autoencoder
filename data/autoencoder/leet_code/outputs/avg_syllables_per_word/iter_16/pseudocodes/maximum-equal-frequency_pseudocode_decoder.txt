CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new Counter collection for counting the frequency of each number  
        SET freq TO a new Counter collection for counting the frequency of frequencies  
        SET max_len TO zero  
        
        FOR each index i AND each number num IN nums with enumeration  
            INCREMENT the frequency count at number num BY one  
            
            IF the frequency count at number num IS GREATER THAN one  
                DECREMENT the frequency of the old frequency which is the frequency count at num MINUS one BY one  
                IF the frequency of the old frequency IS EQUAL TO zero  
                    REMOVE the entry of the old frequency from freq  
                END IF  
            END IF  
            
            INCREMENT the frequency count of the new frequency which is the frequency count at num BY one  
            
            IF the number of different frequencies in freq IS EQUAL TO one AND  
               either one IS A KEY IN freq OR the only frequency count value in freq IS EQUAL TO one  
                SET max_len TO the index i PLUS one  
            ELSE IF the number of different frequencies in freq IS EQUAL TO two AND  
                    either one IS A KEY IN freq AND the frequency count for one in freq IS EQUAL TO one OR  
                    the difference between the maximum frequency key and the minimum frequency key in freq IS EQUAL TO one AND  
                    the frequency count for the maximum frequency key in freq IS EQUAL TO one  
                SET max_len TO the index i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS