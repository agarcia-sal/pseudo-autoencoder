CLASS Solution  
    FUNCTION checkWays WITH parameters pairs  
        SET graph TO DEFAULT DICTIONARY of SETS  
        FOR each element x AND element y IN pairs  
            APPEND element y TO the SET at position x of graph  
            APPEND element x TO the SET at position y of graph  
        END FOR  
        
        SET max_degree TO the element IN graph THAT HAS the MAXIMUM LENGTH OF the SET at that element of graph  
        SET n TO the LENGTH OF graph  
        
        IF the LENGTH OF the SET at max_degree of graph IS NOT EQUAL TO n MINUS one  
            RETURN zero  
        END IF  
        
        FUNCTION can_be_parent WITH parameters u AND v  
            RETURN TRUE IF for ALL neighbors IN the SET at position v of graph the neighbor IS IN the SET at position u of graph OR the neighbor IS EQUAL TO u  
            OTHERWISE RETURN FALSE  
        END FUNCTION  
        
        SET ways TO one  
        
        FOR each element u IN graph  
            IF u IS EQUAL TO max_degree  
                CONTINUE to the next iteration  
            END IF  
            SET parent TO None  
            FOR each element v IN the SET at position u of graph  
                IF v IS IN graph AND the LENGTH OF the SET at v of graph IS GREATER THAN OR EQUAL TO the LENGTH OF the SET at u of graph AND can_be_parent WITH u AS v AND v AS u RETURNS TRUE  
                    IF parent IS None OR the LENGTH OF the SET at v of graph IS LESS THAN the LENGTH OF the SET at parent of graph  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  
            IF parent IS None  
                RETURN zero  
            END IF  
            IF the LENGTH OF the SET at parent of graph IS EQUAL TO the LENGTH OF the SET at u of graph  
                SET ways TO two  
            END IF  
        END FOR  
        
        RETURN ways  
    END FUNCTION  
END CLASS