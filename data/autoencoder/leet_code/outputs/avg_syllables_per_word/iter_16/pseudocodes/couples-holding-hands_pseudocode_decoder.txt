CLASS Solution  
    FUNCTION minSwapsCouples(row)  
        CREATE a mapping named position FROM each person TO their index in the row  
        SET swaps TO zero  
        FOR index i FROM zero TO the LENGTH OF row MINUS one IN STEPS OF two  
            SET correct_pair TO the element at position i of row NUMBER XORED WITH one  
            IF the element at position i PLUS one of row IS NOT EQUALS TO correct_pair  
                SET swap_idx TO the position of correct_pair in position mapping  
                SWAP the elements at positions i PLUS one and swap_idx of row  
                SET the position of the element at swap_idx of row TO swap_idx in position mapping  
                SET the position of the element at i PLUS one of row TO i PLUS one in position mapping  
                INCREMENT swaps BY one  
            END IF  
        END FOR  
        RETURN swaps  
    END FUNCTION  
END CLASS