CLASS Solution  
    FUNCTION sumOfDistancesInTree WITH PARAMETERS n AND edges  
        SET graph TO a new mapping with default value as empty list  
        FOR each pair a AND b IN edges  
            APPEND b TO the element at position a of graph  
            APPEND a TO the element at position b of graph  
        END FOR  
        SET count TO a new list containing the number one repeated n times  
        SET dist TO a new list containing the number zero repeated n times  

        FUNCTION dfs1 WITH PARAMETERS u AND p  
            FOR each element v IN the element at position u of graph  
                IF v IS NOT EQUAL TO p  
                    CALL dfs1 WITH ARGUMENTS v AND u  
                    INCREMENT the element at position u of count BY the element at position v of count  
                    INCREMENT the element at position u of dist BY the element at position v of dist PLUS the element at position v of count  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs1 WITH ARGUMENTS zero AND negative one  

        FUNCTION dfs2 WITH PARAMETERS u AND p  
            FOR each element v IN the element at position u of graph  
                IF v IS NOT EQUAL TO p  
                    SET the element at position v of dist TO the element at position u of dist MINUS the element at position v of count PLUS n MINUS the element at position v of count  
                    CALL dfs2 WITH ARGUMENTS v AND u  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs2 WITH ARGUMENTS zero AND negative one  

        RETURN dist  
    END FUNCTION  
END CLASS