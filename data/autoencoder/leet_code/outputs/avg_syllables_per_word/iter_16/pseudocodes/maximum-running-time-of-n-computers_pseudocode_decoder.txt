CLASS Solution  
    FUNCTION maxRunTime WITH PARAMETERS n AND batteries  
        FUNCTION canRunFor WITH PARAMETER time  
            SET total TO zero  
            FOR each battery IN batteries  
                INCREMENT total BY the SMALLER OF battery AND time  
            END FOR  
            RETURN total GREATER THAN OR EQUAL TO time MULTIPLIED BY n  
        END FUNCTION  

        SET left TO zero  
        SET right TO the SUM OF all elements in batteries DIVIDED BY n  
        WHILE left LESS THAN right HOLDS  
            SET mid TO the SUM OF left AND right AND one DIVIDED BY two  
            IF canRunFor WITH mid RETURNS true  
                SET left TO mid  
            ELSE  
                SET right TO right MINUS one  
            END IF  
        END WHILE  
        RETURN left  
    END FUNCTION  
END CLASS