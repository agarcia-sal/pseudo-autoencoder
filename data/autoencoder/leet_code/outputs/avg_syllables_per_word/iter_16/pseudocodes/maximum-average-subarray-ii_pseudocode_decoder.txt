CLASS Solution  
    FUNCTION findMaxAverage(nums WITH TYPE list of integers, k WITH TYPE integer) RETURNS floating point number  
        FUNCTION canFindAverage(mid WITH TYPE floating point number) RETURNS boolean  
            SET prefix_sums TO a list of length the LENGTH OF nums PLUS one FILLED WITH zero  
            SET min_prefix_sum TO a list of length the LENGTH OF nums PLUS one FILLED WITH zero  
            FOR index FROM zero TO the LENGTH OF nums MINUS one  
                SET element at position index PLUS one of prefix_sums TO element at position index of prefix_sums PLUS element at position index of nums MINUS mid  
                IF index IS GREATER THAN OR EQUAL TO k THEN  
                    SET element at position index PLUS one of min_prefix_sum TO the MINIMUM OF element at position index of min_prefix_sum AND element at position index PLUS one MINUS k of prefix_sums  
                ELSE  
                    SET element at position index PLUS one of min_prefix_sum TO element at position index of min_prefix_sum  
                END IF  
                IF index IS GREATER THAN OR EQUAL TO k MINUS one AND element at position index PLUS one of prefix_sums MINUS element at position index PLUS one of min_prefix_sum IS GREATER THAN OR EQUAL TO zero THEN  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  
        SET low TO the MINIMUM element IN nums  
        SET high TO the MAXIMUM element IN nums  
        WHILE high MINUS low IS GREATER THAN zero POINT zero zero zero zero one  
            SET mid TO low PLUS high DIVIDED BY two  
            IF canFindAverage(mid) IS True THEN  
                SET low TO mid  
            ELSE  
                SET high TO mid  
            END IF  
        END WHILE  
        RETURN low  
    END FUNCTION  
END CLASS