CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            IF string s EQUALS the reverse of string s THEN  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  
        
        SET word_dict TO an empty dictionary mapping each word to its index in words  
        SET result TO an empty list  
        
        FOR each index i AND word IN words  
            IF word EQUALS empty string THEN  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string EXISTS AS a key IN word_dict AND is_palindrome(word) IS true THEN  
                APPEND the list containing index i AND the value at key empty string in word_dict TO result  
                APPEND the list containing the value at key empty string in word_dict AND index i TO result  
            END IF  
            
            SET reversed_word TO the reverse of word  
            IF reversed_word EXISTS AS a key IN word_dict AND the value at key reversed_word in word_dict NOT EQUALS i THEN  
                APPEND the list containing index i AND the value at key reversed_word in word_dict TO result  
            END IF  
            
            FOR each integer j FROM one TO the length of word MINUS one  
                SET prefix TO the substring of word from position zero TO j MINUS one  
                SET suffix TO the substring of word from position j TO the end of word  
                SET reversed_prefix TO the reverse of prefix  
                SET reversed_suffix TO the reverse of suffix  
                
                IF is_palindrome(suffix) IS true AND reversed_prefix EXISTS AS a key IN word_dict THEN  
                    APPEND the list containing index i AND the value at key reversed_prefix in word_dict TO result  
                END IF  
                
                IF is_palindrome(prefix) IS true AND reversed_suffix EXISTS AS a key IN word_dict THEN  
                    APPEND the list containing the value at key reversed_suffix in word_dict AND index i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS