CLASS Solution  
    FUNCTION magicalString(n)  
        IF n EQUALS zero  
            RETURN zero  
        END IF  
        IF n LESS THAN OR EQUAL TO three  
            RETURN one  
        END IF  
        SET s TO a list containing one one followed by one two followed by one two  
        SET count TO one  
        SET index TO two  
        WHILE the LENGTH OF s LESS THAN n  
            SET next_num TO three MINUS the element at position last of s  
            EXTEND the list s by the element next_num repeated as many times AS the element at position index of s  
            IF next_num EQUALS one  
                INCREMENT count BY the element at position index of s  
            END IF  
            INCREMENT index BY one  
        END WHILE  
        IF the LENGTH OF s GREATER THAN n  
            DECREMENT count BY the element at position last of s MULTIPLIED BY the DIFFERENCE between the LENGTH OF s AND n  
        END IF  
        RETURN count  
    END FUNCTION  
END CLASS