CLASS Solution  
    FUNCTION wordPatternMatch(pattern, s)  
        FUNCTION backtrack(pattern_index, string_index, mapping, used)  
            IF pattern_index EQUALS the LENGTH OF pattern AND string_index EQUALS the LENGTH OF s  
                RETURN True  
            END IF  
            IF pattern_index EQUALS the LENGTH OF pattern OR string_index EQUALS the LENGTH OF s  
                RETURN False  
            END IF  

            SET current_char TO the element at position pattern_index of pattern  
            IF current_char IS IN mapping  
                SET word TO the element at key current_char of mapping  
                IF the substring of s from position string_index TO string_index PLUS the LENGTH OF word DOES NOT EQUAL word  
                    RETURN False  
                END IF  
                IF backtrack(pattern_index PLUS one, string_index PLUS the LENGTH OF word, mapping, used) RETURNS True  
                    RETURN True  
                END IF  
            ELSE  
                FOR end FROM string_index PLUS one TO the LENGTH OF s PLUS one  
                    SET word TO the substring of s from position string_index TO end  
                    IF word IS IN used  
                        CONTINUE to the next iteration  
                    END IF  
                    SET mapping at key current_char TO word  
                    ADD word TO used  
                    IF backtrack(pattern_index PLUS one, end, mapping, used) RETURNS True  
                        RETURN True  
                    END IF  
                    REMOVE the key current_char FROM mapping  
                    REMOVE word FROM used  
                END FOR  
            END IF  

            RETURN False  
        END FUNCTION  

        RETURN backtrack zero, zero, new empty dictionary, new empty set  
    END FUNCTION  
END CLASS