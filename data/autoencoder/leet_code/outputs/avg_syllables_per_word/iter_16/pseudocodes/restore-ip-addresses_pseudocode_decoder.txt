CLASS Solution  
    FUNCTION restoreIpAddresses WITH PARAMETER s  
        FUNCTION is_valid WITH PARAMETER segment  
            RETURN the LENGTH OF segment EQUALS one OR (the element at position one of segment NOT EQUALS character zero AND the integer value of segment LESS THAN OR EQUAL TO two hundred AND fifty five)  
        END FUNCTION  
        
        FUNCTION backtrack WITH PARAMETERS start AND path  
            IF the LENGTH OF path EQUALS four  
                IF start EQUALS the LENGTH OF s  
                    APPEND the concatenation of elements in path separated by full stop TO result  
                END IF  
                RETURN  
            END IF  
            
            FOR each length FROM one TO three  
                IF start PLUS length LESS THAN OR EQUAL TO the LENGTH OF s  
                    SET segment TO substring from position start TO the position before start PLUS length of string s  
                    IF is_valid WITH segment  
                        CALL backtrack WITH start PLUS length AND the list path extended by segment  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  
        
        SET result TO an empty list  
        CALL backtrack WITH zero AND an empty list  
        RETURN result  
    END FUNCTION  
END CLASS