CLASS Solution  
    FUNCTION longestPath(parent AS List of integers, s AS string) RETURNS integer  
        CREATE a mapping from an integer to a list of integers named tree with default empty list for each key  
        FOR each index i and element p IN parent  
            IF p IS NOT EQUAL TO negative one  
                APPEND i TO the list at key p IN tree  
            END IF  
        END FOR  
        SET self dot result TO one  
        FUNCTION dfs(node) RETURNS integer  
            SET max1 TO zero  
            SET max2 TO zero  
            FOR each child IN the list at key node IN tree  
                SET child_length TO result of calling dfs with child  
                IF character at position child of s IS NOT EQUAL TO character at position node of s  
                    IF child_length IS GREATER THAN max1  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length IS GREATER THAN max2  
                        SET max2 TO child_length  
                    END IF  
                END IF  
            END FOR  
            SET self dot result TO the greater value BETWEEN self dot result AND the sum of max1 AND max2 AND one  
            RETURN the sum of max1 AND one  
        END FUNCTION  
        CALL dfs with zero as the argument  
        RETURN self dot result  
    END FUNCTION  
END CLASS