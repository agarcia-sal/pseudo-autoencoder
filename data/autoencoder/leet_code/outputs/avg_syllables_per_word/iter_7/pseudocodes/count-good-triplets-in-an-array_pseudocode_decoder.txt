CLASS BIT  
    FUNCTION __init__(self, n)  
        SET self.size TO n  
        SET self.tree TO list of zeros with length n plus one  
    END FUNCTION  
  
    FUNCTION update(self, idx, delta)  
        WHILE idx LESS THAN OR EQUAL TO self.size  
            INCREMENT self.tree at idx BY delta  
            INCREMENT idx BY idx AND negative idx  
        END WHILE  
    END FUNCTION  
  
    FUNCTION query(self, idx)  
        SET result TO 0  
        WHILE idx GREATER THAN 0  
            INCREMENT result BY self.tree at idx  
            DECREMENT idx BY idx AND negative idx  
        END WHILE  
        RETURN result  
    END FUNCTION  
END CLASS  
  
CLASS Solution  
    FUNCTION goodTriplets(self, nums1, nums2)  
        SET n TO length of nums1  
  
        SET pos TO list of zeros with length n  
        FOR i FROM 0 TO n MINUS 1  
            SET num TO nums1 at i  
            SET pos at num TO i  
        END FOR  
  
        SET compressed TO list where each element is pos at num FOR each num IN nums2  
  
        SET bit TO new BIT initialized with n  
  
        SET smaller_count TO list of zeros with length n  
        SET larger_count TO list of zeros with length n  
  
        FOR i FROM 0 TO n MINUS 1  
            SET smaller_count at i TO bit.query(compressed at i)  
            CALL bit.update WITH parameters compressed at i plus one, 1  
        END FOR  
  
        SET bit TO new BIT initialized with n  
  
        FOR i FROM n MINUS 1 DOWN TO 0 STEP MINUS 1  
            SET larger_count at i TO bit.query(n) MINUS bit.query(compressed at i plus one)  
            CALL bit.update WITH parameters compressed at i plus one, 1  
        END FOR  
  
        SET good_triplets TO 0  
        FOR i FROM 0 TO n MINUS 1  
            INCREMENT good_triplets BY smaller_count at i multiplied BY larger_count at i  
        END FOR  
  
        RETURN good_triplets  
    END FUNCTION  
END CLASS