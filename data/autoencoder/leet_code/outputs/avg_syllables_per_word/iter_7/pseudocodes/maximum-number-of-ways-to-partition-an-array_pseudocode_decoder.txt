CLASS Solution  
    FUNCTION waysToPartition(nums, k)  
        SET total_sum TO sum of nums  
        SET n TO length of nums  
        
        SET left_diff TO empty map with default integer zero  
        SET right_diff TO empty map with default integer zero  
        
        SET current_sum TO 0  
        FOR i FROM 0 TO n MINUS 2 DO  
            INCREMENT current_sum BY nums at i  
            SET diff TO total_sum MINUS 2 TIMES current_sum  
            INCREMENT right_diff at key diff BY 1  
        
        SET max_ways TO right_diff at key 0  
        
        SET current_sum TO 0  
        FOR i FROM 0 TO n MINUS 1 DO  
            INCREMENT current_sum BY nums at i  
            SET diff_change TO k MINUS nums at i  
            SET new_ways TO left_diff at key negative diff_change PLUS right_diff at key diff_change  
            SET max_ways TO maximum of max_ways and new_ways  
            
            SET diff TO total_sum MINUS 2 TIMES current_sum  
            DECREMENT right_diff at key diff BY 1  
            INCREMENT left_diff at key diff BY 1  
        
        RETURN max_ways  
    END FUNCTION  
END CLASS