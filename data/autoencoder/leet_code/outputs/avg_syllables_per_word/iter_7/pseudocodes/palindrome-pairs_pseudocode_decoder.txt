CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s IS EQUAL TO s REVERSED  
        END FUNCTION  
      
        SET word_dict TO MAPPING OF each word TO its index IN words  
        SET result TO empty list  
      
        FOR each index i AND word IN words  
            IF word IS EMPTY  
                CONTINUE TO next iteration  
            END IF  
          
            IF empty string IS IN word_dict AND is_palindrome(word)  
                APPEND list of i AND word_dict FOR empty string TO result  
                APPEND list of word_dict FOR empty string AND i TO result  
            END IF  
          
            SET reversed_word TO word REVERSED  
            IF reversed_word IS IN word_dict AND word_dict FOR reversed_word IS NOT i  
                APPEND list of i AND word_dict FOR reversed_word TO result  
            END IF  
          
            FOR each j FROM 1 TO LENGTH OF word MINUS 1  
                SET prefix TO SUBSTRING of word FROM START TO j  
                SET suffix TO SUBSTRING of word FROM j TO END  
                SET reversed_prefix TO prefix REVERSED  
                SET reversed_suffix TO suffix REVERSED  
              
                IF is_palindrome(suffix) AND reversed_prefix IS IN word_dict  
                    APPEND list of i AND word_dict FOR reversed_prefix TO result  
                END IF  
              
                IF is_palindrome(prefix) AND reversed_suffix IS IN word_dict  
                    APPEND list of word_dict FOR reversed_suffix AND i TO result  
                END IF  
            END FOR  
        END FOR  
      
        RETURN result  
    END FUNCTION  
END CLASS