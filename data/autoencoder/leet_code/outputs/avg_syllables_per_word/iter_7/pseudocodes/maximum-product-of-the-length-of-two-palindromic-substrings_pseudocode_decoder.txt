CLASS Solution  
    FUNCTION maxProduct(s)  
        SET n TO LENGTH OF s  
        SET max_len_end TO LIST OF 1 REPEATED n TIMES  
        SET max_len_start TO LIST OF 1 REPEATED n TIMES  
        
        FUNCTION expand_around_center(left, right)  
            WHILE left GREATER THAN OR EQUAL TO 0 AND right LESS THAN n AND CHARACTER AT s[left] EQUAL TO CHARACTER AT s[right]  
                SET length TO right MINUS left PLUS 1  
                SET max_len_end[right] TO THE GREATER OF max_len_end[right] AND length  
                SET max_len_start[left] TO THE GREATER OF max_len_start[left] AND length  
                DECREMENT left BY 1  
                INCREMENT right BY 1  
            END WHILE  
        END FUNCTION  
        
        FOR i FROM 0 TO n MINUS 1  
            CALL expand_around_center(i, i)  
        END FOR  
        
        SET prefix_max TO LIST OF 0 REPEATED n TIMES  
        SET suffix_max TO LIST OF 0 REPEATED n TIMES  
        
        SET prefix_max[0] TO max_len_end[0]  
        FOR i FROM 1 TO n MINUS 1  
            SET prefix_max[i] TO THE GREATER OF prefix_max[i MINUS 1] AND max_len_end[i]  
        END FOR  
        
        SET suffix_max[n MINUS 1] TO max_len_start[n MINUS 1]  
        FOR i FROM n MINUS 2 DOWNTO 0  
            SET suffix_max[i] TO THE GREATER OF suffix_max[i PLUS 1] AND max_len_start[i]  
        END FOR  
        
        SET max_product TO 0  
        FOR i FROM 0 TO n MINUS 2  
            SET product TO prefix_max[i] MULTIPLIED BY suffix_max[i PLUS 1]  
            SET max_product TO THE GREATER OF max_product AND product  
        END FOR  
        
        RETURN max_product  
    END FUNCTION  
END CLASS