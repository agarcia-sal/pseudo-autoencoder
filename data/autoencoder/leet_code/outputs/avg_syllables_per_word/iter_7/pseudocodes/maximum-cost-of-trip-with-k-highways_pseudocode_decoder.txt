CLASS Solution  
    FUNCTION maximumCost(n, highways, k)  
        DEFINE graph AS mapping from city TO list of (neighbor city, toll) pairs  
        FOR each city1, city2, toll IN highways  
            APPEND (city2, toll) TO graph at city1  
            APPEND (city1, toll) TO graph at city2  
        
        SET max_cost TO -1  
        
        FUNCTION dfs(city, visited, cost, highways_used)  
            IF highways_used EQUALS k THEN  
                SET max_cost TO maximum of max_cost and cost  
                RETURN  
            FOR each neighbor, toll IN graph at city  
                IF neighbor NOT IN visited THEN  
                    ADD neighbor TO visited  
                    CALL dfs(neighbor, visited, cost INCREMENTED BY toll, highways_used INCREMENTED BY 1)  
                    REMOVE neighbor FROM visited  
        
        FOR each start_city IN range from 0 TO n MINUS 1  
            SET visited TO set containing start_city  
            CALL dfs(start_city, visited, 0, 0)  
        
        RETURN max_cost  
    END FUNCTION  
END CLASS