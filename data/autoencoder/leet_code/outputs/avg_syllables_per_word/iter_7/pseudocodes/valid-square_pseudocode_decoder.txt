CLASS Solution  
    FUNCTION validSquare(p1, p2, p3, p4)  
        FUNCTION squared_distance(point1, point2)  
            SET delta_x TO point1 at index 0 MINUS point2 at index 0  
            SET delta_y TO point1 at index 1 MINUS point2 at index 1  
            RETURN delta_x SQUARED PLUS delta_y SQUARED  
        END FUNCTION  
        
        SET points TO list containing p1, p2, p3, p4  
        SET distances TO empty set  
        
        FOR i FROM 0 TO 3  
            FOR j FROM i PLUS 1 TO 3  
                SET dist TO squared_distance(points at index i, points at index j)  
                IF dist EQUALS 0 THEN  
                    RETURN False  
                END IF  
                ADD dist TO distances  
            END FOR  
        END FOR  
        
        RETURN whether LENGTH OF distances EQUALS 2  
    END FUNCTION  
END CLASS