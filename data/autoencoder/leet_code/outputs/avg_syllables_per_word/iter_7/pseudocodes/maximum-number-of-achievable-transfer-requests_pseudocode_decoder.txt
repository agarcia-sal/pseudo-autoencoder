CLASS Solution  
    FUNCTION maximumRequests(n, requests)  
        SET max_requests TO 0  
        SET num_requests TO LENGTH OF requests  
        
        FOR mask FROM 0 TO (2 RAISED TO num_requests) MINUS 1 DO  
            SET balance TO LIST OF ZEROS OF LENGTH n  
            SET count TO 0  
            
            FOR i FROM 0 TO num_requests MINUS 1 DO  
                IF mask HAS BIT i SET THEN  
                    SET from_building, to_building TO requests AT INDEX i  
                    DECREMENT balance AT INDEX from_building BY 1  
                    INCREMENT balance AT INDEX to_building BY 1  
                    INCREMENT count BY 1  
            
            IF ALL ELEMENTS OF balance ARE EQUAL TO 0 THEN  
                IF count IS GREATER THAN max_requests THEN  
                    SET max_requests TO count  
        
        RETURN max_requests  
    END FUNCTION  
END CLASS