CLASS Solution  
    FUNCTION totalNQueens(n)  
        FUNCTION is_not_under_attack(row, col)  
            RETURN NOT (cols AT index col PLUS hills AT index row MINUS col PLUS dales AT index row PLUS col)  
        END FUNCTION  
        
        FUNCTION place_queen(row, col)  
            SET cols AT index col TO 1  
            SET hills AT index row MINUS col TO 1  
            SET dales AT index row PLUS col TO 1  
        END FUNCTION  
        
        FUNCTION remove_queen(row, col)  
            SET cols AT index col TO 0  
            SET hills AT index row MINUS col TO 0  
            SET dales AT index row PLUS col TO 0  
        END FUNCTION  
        
        FUNCTION backtrack(row = 0, count = 0)  
            FOR col FROM 0 TO n MINUS 1  
                IF is_not_under_attack(row, col)  
                    place_queen(row, col)  
                    IF row PLUS 1 EQUALS n  
                        INCREMENT count BY 1  
                    ELSE  
                        SET count TO backtrack(row PLUS 1, count)  
                    END IF  
                    remove_queen(row, col)  
                END IF  
            END FOR  
            RETURN count  
        END FUNCTION  
        
        SET cols TO list of zeros with length n  
        SET hills TO list of zeros with length (2 TIMES n MINUS 1)  
        SET dales TO list of zeros with length (2 TIMES n MINUS 1)  
        
        RETURN backtrack()  
    END FUNCTION  
END CLASS