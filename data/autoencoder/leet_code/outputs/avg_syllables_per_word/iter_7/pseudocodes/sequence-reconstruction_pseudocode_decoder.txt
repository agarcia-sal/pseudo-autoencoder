CLASS Solution  
    FUNCTION sequenceReconstruction(nums, sequences)  
        SET n TO LENGTH OF nums  
        SET graph TO a mapping from elements to empty lists  
        SET indegree TO a list of zeros with length n PLUS 1  
        
        FOR each seq IN sequences  
            FOR i FROM 0 TO LENGTH OF seq MINUS 2  
                SET u TO seq AT i  
                SET v TO seq AT i PLUS 1  
                APPEND v TO graph[u]  
                INCREMENT indegree[v] BY 1  
        
        SET queue TO empty deque  
        FOR i FROM 1 TO n  
            IF indegree AT i EQUALS 0 THEN  
                APPEND i TO queue  
        
        IF LENGTH OF queue IS NOT 1 THEN  
            RETURN False  
        
        SET index TO 0  
        WHILE queue IS NOT empty  
            IF LENGTH OF queue IS NOT 1 THEN  
                RETURN False  
            
            SET node TO REMOVE the first element FROM queue  
            IF node IS NOT EQUAL TO nums AT index THEN  
                RETURN False  
            
            INCREMENT index BY 1  
            
            FOR each neighbor IN graph[node]  
                DECREMENT indegree[neighbor] BY 1  
                IF indegree[neighbor] EQUALS 0 THEN  
                    APPEND neighbor TO queue  
        
        RETURN index EQUALS n  
    END FUNCTION  
END CLASS