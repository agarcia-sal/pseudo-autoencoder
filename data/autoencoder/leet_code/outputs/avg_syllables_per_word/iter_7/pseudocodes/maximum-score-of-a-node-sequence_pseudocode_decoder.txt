CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        CREATE graph AS mapping from node TO list of (score, node) pairs  
        FOR each pair u, v IN edges  
            APPEND (scores at v, v) TO graph at u  
            APPEND (scores at u, u) TO graph at v  
        
        FOR each node IN graph  
            SET graph at node TO three largest elements FROM graph at node BY score  
        
        SET max_score TO negative one  
        
        FOR each pair u, v IN edges  
            FOR each pair score1, x IN graph at u  
                FOR each pair score2, y IN graph at v  
                    IF all of x, y, u, v are distinct  
                        SET candidate_score TO score1 PLUS score2 PLUS scores at u PLUS scores at v  
                        SET max_score TO maximum of max_score AND candidate_score  
        
        RETURN max_score  
    END FUNCTION  
END CLASS