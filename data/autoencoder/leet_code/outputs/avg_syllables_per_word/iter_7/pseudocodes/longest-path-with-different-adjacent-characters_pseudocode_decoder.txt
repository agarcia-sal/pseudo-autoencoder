CLASS Solution  
    FUNCTION longestPath(parent, s)  
        DEFINE tree AS a mapping with default empty list for each key  
        FOR each index i and value p IN parent  
            IF p is not equal to -1  
                APPEND i TO tree at key p  
        END FOR  
  
        SET self.result TO 1  
  
        FUNCTION dfs(node)  
            SET max1 TO 0  
            SET max2 TO 0  
  
            FOR each child IN tree at key node  
                SET child_length TO dfs(child)  
  
                IF character at s[child] is not equal to character at s[node]  
                    IF child_length is greater than max1  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length is greater than max2  
                        SET max2 TO child_length  
                    END IF  
                END IF  
            END FOR  
  
            SET self.result TO the maximum between self.result and max1 plus max2 plus 1  
  
            RETURN max1 plus 1  
        END FUNCTION  
  
        CALL dfs with argument 0  
  
        RETURN self.result  
    END FUNCTION  
END CLASS