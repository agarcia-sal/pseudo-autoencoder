CLASS Solution  
    FUNCTION updateBoard(board, click)  
        FUNCTION count_adjacent_mines(r, c)  
            SET count TO 0  
            FOR i FROM r MINUS 1 TO r PLUS 1 INCLUSIVE  
                FOR j FROM c MINUS 1 TO c PLUS 1 INCLUSIVE  
                    IF i IS GREATER THAN OR EQUAL TO 0 AND i IS LESS THAN LENGTH OF board  
                        AND j IS GREATER THAN OR EQUAL TO 0 AND j IS LESS THAN LENGTH OF board AT INDEX 0  
                        AND board AT i AT j IS EQUAL TO 'M'  
                            INCREMENT count BY 1  
            RETURN count  
        END FUNCTION  
        
        FUNCTION dfs(r, c)  
            IF r IS LESS THAN 0 OR r IS GREATER THAN OR EQUAL TO LENGTH OF board  
                RETURN  
            IF c IS LESS THAN 0 OR c IS GREATER THAN OR EQUAL TO LENGTH OF board AT INDEX 0  
                RETURN  
            IF board AT r AT c IS NOT EQUAL TO 'E'  
                RETURN  
            
            SET mine_count TO count_adjacent_mines(r, c)  
            IF mine_count IS GREATER THAN 0  
                SET board AT r AT c TO STRING REPRESENTATION OF mine_count  
            ELSE  
                SET board AT r AT c TO 'B'  
                FOR i FROM r MINUS 1 TO r PLUS 1 INCLUSIVE  
                    FOR j FROM c MINUS 1 TO c PLUS 1 INCLUSIVE  
                        CALL dfs(i, j)  
        END FUNCTION  
        
        SET row TO click AT INDEX 0  
        SET col TO click AT INDEX 1  
        IF board AT row AT col IS EQUAL TO 'M'  
            SET board AT row AT col TO 'X'  
            RETURN board  
        
        CALL dfs(row, col)  
        RETURN board  
END CLASS