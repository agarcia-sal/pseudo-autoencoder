CLASS Solution  
    FUNCTION restoreIpAddresses(s)  
        FUNCTION is_valid(segment)  
            RETURN length of segment EQUAL TO 1 OR (first character of segment NOT EQUAL TO '0' AND integer value of segment LESS THAN OR EQUAL TO 255)  
        END FUNCTION  

        FUNCTION backtrack(start, path)  
            IF length of path EQUAL TO 4 THEN  
                IF start EQUAL TO length of s THEN  
                    APPEND concatenation of path with '.' separator TO result  
                END IF  
                RETURN  
            END IF  

            FOR length FROM 1 TO 3 INCLUSIVE DO  
                IF start PLUS length LESS THAN OR EQUAL TO length of s THEN  
                    SET segment TO substring of s FROM start TO start PLUS length  
                    IF is_valid(segment) THEN  
                        CALL backtrack WITH start PLUS length AND path APPENDED WITH segment  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  

        SET result TO empty list  
        CALL backtrack WITH 0 AND empty list  
        RETURN result  
    END FUNCTION  
END CLASS