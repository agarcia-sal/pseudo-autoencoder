CLASS Solution  
    FUNCTION longestPrefix(s)  
        SET n TO LENGTH OF s  
        SET lps TO LIST OF ZEROS WITH LENGTH n  
        SET j TO 0  
        
        FOR i FROM 1 TO n MINUS 1  
            WHILE j GREATER THAN 0 AND CHARACTER AT s[i] NOT EQUAL TO CHARACTER AT s[j]  
                SET j TO lps AT POSITION j MINUS 1  
            
            IF CHARACTER AT s[i] EQUAL TO CHARACTER AT s[j]  
                INCREMENT j BY 1  
                SET lps AT POSITION i TO j  
        
        SET longest_happy_prefix_length TO lps AT POSITION n MINUS 1  
        RETURN SUBSTRING OF s FROM START TO longest_happy_prefix_length  
    END FUNCTION  
END CLASS