CLASS Solution  
    FUNCTION numDistinctIslands(grid)  
        FUNCTION dfs(i, j, direction)  
            IF i GREATER THAN OR EQUAL TO 0 AND i LESS THAN LENGTH OF grid AND j GREATER THAN OR EQUAL TO 0 AND j LESS THAN LENGTH OF grid AT 0 AND grid AT i AT j EQUALS 1  
                SET grid AT i AT j TO 0  
                APPEND direction TO path  
                CALL dfs WITH i PLUS 1, j, 'd'  
                CALL dfs WITH i MINUS 1, j, 'u'  
                CALL dfs WITH i, j PLUS 1, 'r'  
                CALL dfs WITH i, j MINUS 1, 'l'  
                APPEND 'b' TO path  
            RETURN path  
        END FUNCTION  
        
        SET unique_islands TO empty set  
        
        FOR i FROM 0 TO LENGTH OF grid MINUS 1  
            FOR j FROM 0 TO LENGTH OF grid AT 0 MINUS 1  
                IF grid AT i AT j EQUALS 1  
                    SET path TO empty list  
                    ADD tuple OF dfs(i, j, 'o') TO unique_islands  
        RETURN SIZE OF unique_islands  
    END FUNCTION  
END CLASS