CLASS Solution  
    FUNCTION numFactoredBinaryTrees(arr)  
        SET MOD TO 10 TO THE POWER OF 9 PLUS 7  
        SORT arr IN ASCENDING ORDER  
        SET dp TO A DICTIONARY MAPPING each num IN arr TO 1  

        FOR EACH i, num IN ENUMERATE OF arr  
            FOR EACH j IN RANGE FROM 0 TO i MINUS 1  
                IF num MODULO arr[j] EQUALS 0 THEN  
                    SET right_child TO num DIVIDED BY arr[j]  
                    IF right_child EXISTS IN dp THEN  
                        SET dp[num] TO (dp[num] PLUS dp[arr[j]] TIMES dp[right_child]) MODULO MOD  
                    END IF  
                END IF  
            END FOR  
        END FOR  

        RETURN SUM OF ALL VALUES IN dp MODULO MOD  
    END FUNCTION  
END CLASS