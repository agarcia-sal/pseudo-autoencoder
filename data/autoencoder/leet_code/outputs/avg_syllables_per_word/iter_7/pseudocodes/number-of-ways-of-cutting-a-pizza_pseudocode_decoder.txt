CLASS Solution  
    FUNCTION ways(pizza, k)  
        SET mod TO 1000000007  
        SET m TO LENGTH OF pizza  
        SET n TO LENGTH OF pizza AT INDEX 0  
        SET s TO A MATRIX OF SIZE (m + 1) BY (n + 1) WITH ALL VALUES 0  

        FOR i FROM 1 TO m  
            FOR j FROM 1 TO n  
                SET s[i][j] TO s[i - 1][j] PLUS s[i][j - 1] MINUS s[i - 1][j - 1] PLUS 1 IF pizza AT INDEX (i - 1) AT INDEX (j - 1) IS 'A' OTHERWISE 0  

        FUNCTION dfs(i, j, k)  
            IF k EQUALS 0 THEN  
                RETURN 1 IF s[m][n] MINUS s[i][n] MINUS s[m][j] PLUS s[i][j] IS GREATER THAN 0 OTHERWISE RETURN 0  
            END IF  
            SET ans TO 0  
            FOR x FROM i PLUS 1 TO m MINUS 1  
                IF s[x][n] MINUS s[i][n] MINUS s[x][j] PLUS s[i][j] IS GREATER THAN 0 THEN  
                    SET ans TO ans PLUS dfs(x, j, k MINUS 1)  
                END IF  
            END FOR  
            FOR y FROM j PLUS 1 TO n MINUS 1  
                IF s[m][y] MINUS s[i][y] MINUS s[m][j] PLUS s[i][j] IS GREATER THAN 0 THEN  
                    SET ans TO ans PLUS dfs(i, y, k MINUS 1)  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  

        RETURN dfs(0, 0, k MINUS 1)  
    END FUNCTION  
END CLASS