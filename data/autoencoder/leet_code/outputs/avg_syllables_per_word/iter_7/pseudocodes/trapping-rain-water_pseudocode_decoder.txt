CLASS Solution  
    FUNCTION trap(height)  
        IF height IS empty  
            RETURN 0  
        END IF  

        SET n TO LENGTH OF height  
        SET left_max TO list of zeros with length n  
        SET right_max TO list of zeros with length n  

        SET left_max at position 0 TO height at position 0  
        FOR i FROM 1 TO n MINUS 1  
            SET left_max at position i TO maximum of left_max at position i MINUS 1 AND height at position i  
        END FOR  

        SET right_max at position n MINUS 1 TO height at position n MINUS 1  
        FOR i FROM n MINUS 2 DOWN TO 0  
            SET right_max at position i TO maximum of right_max at position i PLUS 1 AND height at position i  
        END FOR  

        SET trapped_water TO 0  
        FOR i FROM 0 TO n MINUS 1  
            INCREMENT trapped_water BY minimum of left_max at position i AND right_max at position i MINUS height at position i  
        END FOR  

        RETURN trapped_water  
    END FUNCTION  
END CLASS