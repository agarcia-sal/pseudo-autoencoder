CLASS Solution  
    FUNCTION maxStudents(seats)  
        SET m TO LENGTH OF seats  
        SET n TO LENGTH OF seats AT INDEX 0  
        
        SET broken TO LIST OF LENGTH m WITH ALL VALUES 0  
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF seats AT i AT j EQUALS '#'  
                    SET broken AT i TO broken AT i PLUS BIT SHIFT LEFT 1 BY j  
        
        FUNCTION is_valid(arrangement)  
            RETURN arrangement AND (arrangement SHIFT RIGHT BY 1) EQUALS 0  
        END FUNCTION  
        
        SET dp TO LIST OF LENGTH m WHERE EACH ELEMENT IS AN EMPTY DICTIONARY  
        
        FOR arrangement FROM 0 TO (1 SHIFT LEFT BY n) MINUS 1  
            IF is_valid(arrangement) AND (arrangement AND broken AT 0) EQUALS 0  
                SET dp AT 0 AT KEY arrangement TO COUNT OF ONES IN arrangement  
        
        FOR i FROM 1 TO m MINUS 1  
            FOR arrangement FROM 0 TO (1 SHIFT LEFT BY n) MINUS 1  
                IF is_valid(arrangement) AND (arrangement AND broken AT i) EQUALS 0  
                    SET max_students TO 0  
                    FOR prev_arrangement IN KEYS OF dp AT i MINUS 1  
                        IF (arrangement AND (prev_arrangement SHIFT RIGHT BY 1)) EQUALS 0 AND (arrangement AND (prev_arrangement SHIFT LEFT BY 1)) EQUALS 0  
                            SET max_students TO MAXIMUM OF max_students AND dp AT i MINUS 1 AT KEY prev_arrangement  
                    SET dp AT i AT KEY arrangement TO max_students PLUS COUNT OF ONES IN arrangement  
        
        IF dp AT m MINUS 1 IS NOT EMPTY  
            RETURN MAXIMUM OF VALUES IN dp AT m MINUS 1  
        ELSE  
            RETURN 0  
    END FUNCTION  
END CLASS