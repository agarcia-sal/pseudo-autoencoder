CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO empty mapping  
        FOR i FROM 0 TO LENGTH OF arr MINUS 1  
            SET x TO arr AT i  
            SET index AT x TO i  
        END FOR  
  
        SET dp TO empty mapping  
        SET max_length TO 0  
  
        FOR k FROM 0 TO LENGTH OF arr MINUS 1  
            FOR j FROM 0 TO k MINUS 1  
                SET i TO value FROM index FOR KEY arr AT k MINUS arr AT j, OR -1 IF NOT FOUND  
                IF i GREATER THAN OR EQUAL TO 0 AND i LESS THAN j  
                    SET dp AT (j, k) TO value FROM dp FOR KEY (i, j), OR 2 IF NOT FOUND, PLUS 1  
                    SET max_length TO GREATER OF max_length AND dp AT (j, k)  
                END IF  
            END FOR  
        END FOR  
  
        IF max_length GREATER THAN OR EQUAL TO 3  
            RETURN max_length  
        ELSE  
            RETURN 0  
        END IF  
    END FUNCTION  
END CLASS