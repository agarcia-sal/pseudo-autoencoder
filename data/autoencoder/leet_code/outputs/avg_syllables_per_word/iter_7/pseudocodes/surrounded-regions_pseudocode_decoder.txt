CLASS Solution  
    FUNCTION solve(board)  
        IF board IS empty OR board[0] IS empty THEN  
            RETURN  
        
        SET m TO LENGTH OF board  
        SET n TO LENGTH OF board[0]  
        
        FUNCTION dfs(x, y)  
            IF x LESS THAN 0 OR x GREATER THAN OR EQUAL TO m OR y LESS THAN 0 OR y GREATER THAN OR EQUAL TO n OR board[x][y] IS NOT 'O' THEN  
                RETURN  
            SET board[x][y] TO 'S'  
            CALL dfs WITH x PLUS 1, y  
            CALL dfs WITH x MINUS 1, y  
            CALL dfs WITH x, y PLUS 1  
            CALL dfs WITH x, y MINUS 1  
        END FUNCTION  
        
        FOR i FROM 0 TO m MINUS 1  
            CALL dfs WITH i, 0  
            CALL dfs WITH i, n MINUS 1  
        
        FOR j FROM 0 TO n MINUS 1  
            CALL dfs WITH 0, j  
            CALL dfs WITH m MINUS 1, j  
        
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF board[i][j] IS 'O' THEN  
                    SET board[i][j] TO 'X'  
        
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF board[i][j] IS 'S' THEN  
                    SET board[i][j] TO 'O'  
    END FUNCTION  
END CLASS