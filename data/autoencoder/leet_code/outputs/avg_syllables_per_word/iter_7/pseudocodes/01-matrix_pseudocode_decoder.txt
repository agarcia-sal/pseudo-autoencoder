CLASS Solution  
    FUNCTION updateMatrix(mat)  
        IF mat IS EMPTY OR mat AT 0 IS EMPTY  
            RETURN mat  
        SET rows TO LENGTH OF mat  
        SET cols TO LENGTH OF mat AT 0  
        SET dist TO MATRIX OF SIZE rows BY cols FILLED WITH infinity  
        SET queue TO EMPTY QUEUE  
        FOR each r FROM 0 TO rows MINUS 1  
            FOR each c FROM 0 TO cols MINUS 1  
                IF mat AT r AT c EQUALS 0  
                    SET dist AT r AT c TO 0  
                    APPEND (r, c) TO queue  
        SET directions TO LIST OF (-1, 0), (1, 0), (0, -1), (0, 1)  
        WHILE queue IS NOT EMPTY  
            REMOVE FIRST ELEMENT FROM queue AND SET TO (r, c)  
            FOR each (dr, dc) IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr IS GREATER THAN OR EQUAL TO 0 AND nr IS LESS THAN rows AND nc IS GREATER THAN OR EQUAL TO 0 AND nc IS LESS THAN cols AND dist AT nr AT nc IS GREATER THAN dist AT r AT c PLUS 1  
                    SET dist AT nr AT nc TO dist AT r AT c PLUS 1  
                    APPEND (nr, nc) TO queue  
        RETURN dist  
    END FUNCTION  
END CLASS