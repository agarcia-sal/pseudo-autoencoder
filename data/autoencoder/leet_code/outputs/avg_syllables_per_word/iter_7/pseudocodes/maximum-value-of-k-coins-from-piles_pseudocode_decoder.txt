CLASS Solution  
    FUNCTION maxValueOfCoins(piles, k)  
        SET n TO LENGTH OF piles  
        INITIALIZE dp AS a two dimensional list with (n plus 1) rows and (k plus 1) columns filled with 0  
          
        FOR i FROM 1 TO n  
            FOR j FROM 1 TO k  
                SET current_pile TO piles AT INDEX (i minus 1)  
                SET current_value TO 0  
                FOR l FROM 0 TO MINIMUM OF j AND LENGTH OF current_pile  
                    IF l GREATER THAN 0  
                        INCREMENT current_value BY current_pile AT INDEX (l minus 1)  
                    SET dp AT POSITION i AND j TO MAXIMUM OF dp AT POSITION i AND j AND dp AT POSITION (i minus 1) AND (j minus l) PLUS current_value  
        RETURN dp AT POSITION n AND k  
    END FUNCTION  
END CLASS