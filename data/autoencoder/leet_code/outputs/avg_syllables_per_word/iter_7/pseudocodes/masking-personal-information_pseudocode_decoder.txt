CLASS Solution  
    FUNCTION maskPII(s)  
        IF s CONTAINS '@'  
            SPLIT s INTO local AND domain AT '@'  
            SET masked_local TO first character of local CONCATENATED WITH five asterisks CONCATENATED WITH last character of local  
            RETURN lowercase of masked_local CONCATENATED WITH '@' CONCATENATED WITH lowercase of domain  
        ELSE  
            EXTRACT all digits FROM s AND STORE IN digits  
            SET local_number TO three asterisks CONCATENATED WITH hyphen CONCATENATED WITH three asterisks CONCATENATED WITH hyphen CONCATENATED WITH last four characters of digits  
            IF length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO length of digits MINUS ten  
                SET country_code TO plus sign CONCATENATED WITH country_code_length number of asterisks CONCATENATED WITH hyphen  
                RETURN country_code CONCATENATED WITH local_number  
    END FUNCTION  
END CLASS