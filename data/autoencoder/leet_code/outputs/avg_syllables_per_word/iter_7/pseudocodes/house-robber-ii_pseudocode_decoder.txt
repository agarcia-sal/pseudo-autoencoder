CLASS Solution  
    FUNCTION rob(nums)  
        FUNCTION rob_linear(houses)  
            IF houses IS empty  
                RETURN 0  
            IF LENGTH OF houses IS 1  
                RETURN FIRST element OF houses  
            
            SET dp TO list OF zeros WITH LENGTH OF houses  
            SET FIRST element OF dp TO FIRST element OF houses  
            SET SECOND element OF dp TO maximum OF FIRST and SECOND element OF houses  
            
            FOR i FROM 2 TO LENGTH OF houses MINUS 1  
                SET dp AT position i TO maximum OF dp AT position i MINUS 1 AND dp AT position i MINUS 2 PLUS houses AT position i  
            
            RETURN LAST element OF dp  
        END FUNCTION  
        
        IF nums IS empty  
            RETURN 0  
        IF LENGTH OF nums IS 1  
            RETURN FIRST element OF nums  
        
        RETURN maximum OF rob_linear WITH nums EXCLUDING LAST element AND rob_linear WITH nums EXCLUDING FIRST element  
    END FUNCTION  
END CLASS