CLASS Solution  
    FUNCTION minimumDifference(nums)  
        SET n TO LENGTH OF nums DIVIDED BY 3  
        
        SET min_heap TO empty list  
        SET min_sums TO list of zeros with length 2 TIMES n PLUS 1  
        
        FOR i FROM 0 TO 2 TIMES n MINUS 1  
            ADD NEGATION OF nums AT i TO min_heap USING heap push  
            IF LENGTH OF min_heap GREATER THAN n  
                REMOVE smallest element FROM min_heap USING heap pop  
            IF LENGTH OF min_heap EQUALS n  
                SET min_sums AT i TO NEGATION OF SUM OF ELEMENTS IN min_heap  
        
        SET max_heap TO empty list  
        SET max_sums TO list of zeros with length 2 TIMES n PLUS 1  
        
        FOR i FROM 3 TIMES n MINUS 1 DOWN TO n  
            ADD nums AT i TO max_heap USING heap push  
            IF LENGTH OF max_heap GREATER THAN n  
                REMOVE smallest element FROM max_heap USING heap pop  
            IF LENGTH OF max_heap EQUALS n  
                SET max_sums AT i TO SUM OF ELEMENTS IN max_heap  
        
        SET min_diff TO positive infinity  
        FOR i FROM n MINUS 1 TO 2 TIMES n MINUS 1  
            SET current_difference TO min_sums AT i MINUS max_sums AT i PLUS 1  
            SET min_diff TO minimum of min_diff AND current_difference  
        
        RETURN min_diff  
    END FUNCTION  
END CLASS