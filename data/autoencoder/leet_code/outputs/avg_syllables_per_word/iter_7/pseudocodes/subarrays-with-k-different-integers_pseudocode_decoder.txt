CLASS Solution  
    FUNCTION subarraysWithKDistinct(nums, k)  
        FUNCTION atMostKDistinct(t)  
            SET count TO new mapping with default integer zero  
            SET left TO 0  
            SET result TO 0  
            FOR right FROM 0 TO LENGTH OF nums MINUS 1  
                INCREMENT count value for nums at right BY 1  
                WHILE LENGTH OF count GREATER THAN t  
                    DECREMENT count value for nums at left BY 1  
                    IF count value for nums at left EQUALS 0  
                        REMOVE nums at left FROM count  
                    INCREMENT left BY 1  
                INCREMENT result BY right MINUS left PLUS 1  
            RETURN result  
        END FUNCTION  
        RETURN atMostKDistinct(k) MINUS atMostKDistinct(k MINUS 1)  
    END FUNCTION  
END CLASS