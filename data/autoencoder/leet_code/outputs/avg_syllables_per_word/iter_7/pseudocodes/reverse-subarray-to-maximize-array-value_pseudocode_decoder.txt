CLASS Solution  
    FUNCTION maxValueAfterReverse(nums)  
        SET n TO LENGTH OF nums  
        IF n EQUALS 2  
            RETURN absolute difference BETWEEN nums AT 0 AND nums AT 1  
        END IF  
        
        SET initial_value TO 0  
        FOR i FROM 1 TO n MINUS 1  
            INCREMENT initial_value BY absolute difference BETWEEN nums AT i AND nums AT i MINUS 1  
        END FOR  
        
        SET max_edge_gain TO 0  
        FOR i FROM 1 TO n MINUS 1  
            SET potential_gain TO absolute difference BETWEEN nums AT 0 AND nums AT i MINUS absolute difference BETWEEN nums AT i AND nums AT i MINUS 1  
            SET max_edge_gain TO maximum OF max_edge_gain AND potential_gain  
        END FOR  
        
        FOR i FROM 0 TO n MINUS 2  
            SET potential_gain TO absolute difference BETWEEN nums AT n MINUS 1 AND nums AT i MINUS absolute difference BETWEEN nums AT i PLUS 1 AND nums AT i  
            SET max_edge_gain TO maximum OF max_edge_gain AND potential_gain  
        END FOR  
        
        SET min_pair TO minimum OF maximum OF nums AT i AND nums AT i PLUS 1 FOR i FROM 0 TO n MINUS 2  
        SET max_pair TO maximum OF minimum OF nums AT i AND nums AT i PLUS 1 FOR i FROM 0 TO n MINUS 2  
        
        SET general_gain TO maximum OF 0 AND 2 MULTIPLIED BY (max_pair MINUS min_pair)  
        
        RETURN initial_value PLUS maximum OF max_edge_gain AND general_gain  
    END FUNCTION  
END CLASS