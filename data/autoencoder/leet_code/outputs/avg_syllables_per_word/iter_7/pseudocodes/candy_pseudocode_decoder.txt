CLASS Solution  
    FUNCTION candy(ratings)  
        SET n TO LENGTH OF ratings  
        SET candies TO list of length n with all elements as 1  
        
        FOR i FROM 1 TO n MINUS 1  
            IF ratings AT i GREATER THAN ratings AT i MINUS 1  
                SET candies AT i TO candies AT i MINUS 1 PLUS 1  
        
        FOR i FROM n MINUS 2 DOWNTO 0  
            IF ratings AT i GREATER THAN ratings AT i PLUS 1  
                SET candies AT i TO GREATER OF candies AT i AND candies AT i PLUS 1 PLUS 1  
        
        SET total_candies TO SUM OF candies  
        RETURN total_candies  
    END FUNCTION  
END CLASS