CLASS Solution
    FUNCTION palindromePairs(words)
        FUNCTION is_palindrome(s)
            RETURN s EQUALS the REVERSE OF s
        END FUNCTION

        SET word_dictionary TO the RESULT OF calling create_word_dictionary WITH words
        SET result TO an EMPTY list

        FOR each index i FROM zero TO the LENGTH OF words MINUS one
            SET word TO element at position i of words
            IF word EQUALS empty string IS false
                IF empty string IS IN the KEYS OF word_dictionary AND CALL is_palindrome WITH word THEN
                    APPEND list containing i AND the element at key empty string of word_dictionary TO result
                    APPEND list containing the element at key empty string of word_dictionary AND i TO result
                END IF

                SET reversed_word TO the REVERSE OF word
                IF reversed_word IS IN the KEYS OF word_dictionary AND the element at key reversed_word of word_dictionary NOT EQUALS i THEN
                    APPEND list containing i AND the element at key reversed_word of word_dictionary TO result
                END IF

                FOR each index j FROM one TO the LENGTH OF word MINUS one
                    SET prefix TO the SUBSTRING from position zero TO j MINUS one of word
                    SET suffix TO the SUBSTRING from position j TO the END of word
                    SET reversed_prefix TO the REVERSE OF prefix
                    SET reversed_suffix TO the REVERSE OF suffix

                    IF CALL is_palindrome WITH suffix AND reversed_prefix IS IN the KEYS OF word_dictionary THEN
                        APPEND list containing i AND the element at key reversed_prefix of word_dictionary TO result
                    END IF

                    IF CALL is_palindrome WITH prefix AND reversed_suffix IS IN the KEYS OF word_dictionary THEN
                        APPEND list containing the element at key reversed_suffix of word_dictionary AND i TO result
                    END IF
                END FOR
            END IF
        END FOR

        RETURN result
    END FUNCTION

    FUNCTION create_word_dictionary(words)
        // Auxiliary FUNCTION to create a mapping from word to index
    END FUNCTION
END CLASS