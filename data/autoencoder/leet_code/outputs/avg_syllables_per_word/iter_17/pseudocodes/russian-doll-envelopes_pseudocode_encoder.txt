CLASS Solution
    FUNCTION maxEnvelopes(list_of_envelopes)
        CALL sort list_of_envelopes BY width IN ascending order AND BY height IN descending order WHEN widths ARE EQUAL
        SET list_of_heights TO an EMPTY list
        FOR each pair IGNORE width SET height TO the second element OF pair
            SET position TO the RESULT OF calling binary search TO FIND the LEFTMOST position IN list_of_heights WHERE height CAN BE INSERTED
            IF position EQUALS the LENGTH OF list_of_heights
                APPEND height TO list_of_heights
            ELSE
                SET element AT position OF list_of_heights TO height
            END IF
        END FOR
        RETURN the LENGTH OF list_of_heights
    END FUNCTION
END CLASS