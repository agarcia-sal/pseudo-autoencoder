CLASS Solution
    FUNCTION trap(height)
        IF height IS empty
            RETURN zero
        END IF

        SET n TO the LENGTH OF height
        CALL initialize_list WITH parameters zero AND n RETURNING left_max
        CALL initialize_list WITH parameters zero AND n RETURNING right_max

        SET element at position zero of left_max TO element at position zero of height
        FOR index FROM one TO n MINUS one
            SET element at position index of left_max TO the MAXIMUM OF element at position index MINUS one of left_max AND element at position index of height
        END FOR

        SET element at position n MINUS one of right_max TO element at position n MINUS one of height
        FOR index FROM n MINUS two DOWN TO zero
            SET element at position index of right_max TO the MAXIMUM OF element at position index PLUS one of right_max AND element at position index of height
        END FOR

        SET trapped_water TO zero
        FOR index FROM zero TO n MINUS one
            INCREMENT trapped_water BY the MINIMUM OF element at position index of left_max AND element at position index of right_max MINUS element at position index of height
        END FOR

        RETURN trapped_water
    END FUNCTION
END CLASS