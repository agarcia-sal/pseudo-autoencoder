CLASS Solution
    FUNCTION nearestPalindromic(n)
        SET length TO the LENGTH OF n
        IF length EQUALS one
            RETURN the STRING REPRESENTATION OF the INTEGER REPRESENTATION OF n MINUS one
        END IF

        SET candidates TO an EMPTY SET

        CALL AddToSet candidates WITH ten RAISED TO THE POWER OF length PLUS one
        CALL AddToSet candidates WITH ten RAISED TO THE POWER OF length MINUS one MINUS one

        SET prefix TO the INTEGER REPRESENTATION OF the SUBSTRING FROM POSITION zero TO the INTEGER VALUE OF length PLUS one DIVIDED BY two OF n
        FOR i FROM negative one TO two MINUS one
            SET new_prefix TO the STRING REPRESENTATION OF prefix PLUS i
            IF length MODULO two EQUALS zero
                SET candidate TO new_prefix CONCATENATED WITH the REVERSED ORDER OF new_prefix
            ELSE
                SET candidate TO new_prefix CONCATENATED WITH the SUBSTRING FROM POSITION the LENGTH OF new_prefix MINUS two DOWN TO zero IN REVERSED ORDER OF new_prefix
            END IF
            CALL AddToSet candidates WITH the INTEGER REPRESENTATION OF candidate
        END FOR

        SET original_number TO the INTEGER REPRESENTATION OF n
        CALL RemoveFromSet candidates WITH original_number

        SET closest TO the MINIMUM ELEMENT OF candidates ACCORDING TO the COMPARISON OF THE ABSOLUTE VALUE OF THE ELEMENT MINUS original_number AND THEN BY THE ELEMENT ITSELF

        RETURN the STRING REPRESENTATION OF closest
    END FUNCTION
END CLASS