CLASS Solution
    FUNCTION robotSim(commands, obstacles)
        SET directions TO auxiliary FUNCTION DirectionsList
        SET x TO zero
        SET y TO zero
        SET dir_index TO zero
        SET obstacles_set TO CALL auxiliary FUNCTION ConvertListOfListsToSet WITH obstacles
        SET max_distance TO zero

        FOR each command IN commands
            IF command EQUALS negative two
                SET dir_index TO (dir_index MINUS one) MODULO four
            ELSE IF command EQUALS negative one
                SET dir_index TO (dir_index PLUS one) MODULO four
            ELSE
                SET dx TO element at position dir_index FIRST element OF directions
                SET dy TO element at position dir_index SECOND element OF directions
                FOR step FROM one TO command
                    SET next_x TO x PLUS dx
                    SET next_y TO y PLUS dy
                    IF tuple of next_x AND next_y IS IN obstacles_set
                        BREAK out of current loop
                    END IF
                    SET x TO next_x
                    SET y TO next_y
                END FOR
                SET max_distance TO the GREATER OF max_distance AND x MULTIPLIED BY x PLUS y MULTIPLIED BY y
            END IF
        END FOR

        RETURN max_distance
    END FUNCTION

    FUNCTION DirectionsList
        RETURN list CONTAINING tuple of zero AND one, tuple of one AND zero, tuple of zero AND negative one, tuple of negative one AND zero
    END FUNCTION

    FUNCTION ConvertListOfListsToSet(list_of_lists)
        auxiliary FUNCTION describing conversion of list of coordinate pairs to a set of tuples
    END FUNCTION
END CLASS