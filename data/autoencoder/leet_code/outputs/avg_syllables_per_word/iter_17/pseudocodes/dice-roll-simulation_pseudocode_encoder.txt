CLASS Solution
    FUNCTION dieSimulator(n, rollMax)
        SET MOD TO ten POWERED BY nine PLUS seven
        SET dp TO auxiliary FUNCTION initialize_dp WITH PARAMETERS n, rollMax
        
        FOR each face_index FROM zero TO five
            SET element at position one AT element at position face_index OF element at position one OF dp TO one
        END FOR
        
        FOR each roll_count FROM two TO n
            FOR each face_index FROM zero TO five
                FOR each consecutive_count FROM one TO element at position face_index OF rollMax
                    IF consecutive_count GREATER THAN one
                        SET element at position consecutive_count AT element at position face_index OF element at position roll_count OF dp 
                            TO element at position consecutive_count MINUS one AT element at position face_index OF element at position roll_count MINUS one OF dp
                    ELSE
                        SET temp_sum TO zero
                        FOR each previous_face FROM zero TO five
                            IF previous_face NOT EQUALS face_index
                                FOR each previous_consecutive_count FROM one TO element at position previous_face OF rollMax
                                    INCREMENT temp_sum BY element at position previous_consecutive_count AT element at position previous_face OF element at position roll_count MINUS one OF dp
                                END FOR
                            END IF
                        END FOR
                        SET element at position consecutive_count AT element at position face_index OF element at position roll_count OF dp TO temp_sum MODULO MOD
                    END IF
                END FOR
            END FOR
        END FOR
        
        SET total_ways TO zero
        FOR each face_index FROM zero TO five
            FOR each consecutive_count FROM one TO element at position face_index OF rollMax
                INCREMENT total_ways BY element at position consecutive_count AT element at position face_index OF element at position n OF dp
            END FOR
        END FOR
        
        RETURN total_ways MODULO MOD
    END FUNCTION
END CLASS

FUNCTION initialize_dp(n, rollMax)
    RETURN auxiliary construct three dimensional list OF size n plus one BY six BY maximum value IN rollMax plus one FILLED WITH zero
END FUNCTION