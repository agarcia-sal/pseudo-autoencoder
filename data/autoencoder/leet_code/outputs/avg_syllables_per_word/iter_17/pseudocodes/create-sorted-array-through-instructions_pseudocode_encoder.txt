CLASS Solution
    FUNCTION createSortedArray(instructions)
        SET MOD TO one billion PLUS seven
        SET MAX TO the MAXIMUM VALUE OF instructions PLUS one
        SET bit TO a list of zero repeated MAX times

        FUNCTION update(idx, val)
            WHILE idx LESS THAN MAX holds
                INCREMENT element at position idx of bit BY val
                INCREMENT idx BY idx BITWISE AND NEGATION OF idx
            END WHILE
        END FUNCTION

        FUNCTION query(idx)
            SET total TO zero
            WHILE idx GREATER THAN zero holds
                INCREMENT total BY element at position idx of bit
                DECREMENT idx BY idx BITWISE AND NEGATION OF idx
            END WHILE
            RETURN total
        END FUNCTION

        SET total_cost TO zero
        FOR each index and number IN enumeration of instructions
            SET less_than TO CALL query WITH parameter number MINUS one
            SET greater_than TO index MINUS CALL query WITH parameter number
            SET cost TO the MINIMUM OF less_than AND greater_than
            SET total_cost TO total_cost PLUS cost MODULO MOD
            CALL update WITH parameters number AND one
        END FOR

        RETURN total_cost
    END FUNCTION
END CLASS