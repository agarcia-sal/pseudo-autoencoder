CLASS Solution
    FUNCTION minPushBox(grid)
        SET directions TO a list of tuples containing minus one zero one zero zero minus one zero one
        FOR i FROM zero TO the LENGTH OF grid MINUS one
            FOR j FROM zero TO the LENGTH OF element at position zero of grid MINUS one
                IF element at position i of grid at position j EQUALS letter S
                    SET player_start TO tuple of i and j
                ELSE IF element at position i of grid at position j EQUALS letter B
                    SET box_start TO tuple of i and j
                ELSE IF element at position i of grid at position j EQUALS letter T
                    SET target TO tuple of i and j
                END IF
            END FOR
        END FOR
        CREATE queue AS deque WITH a tuple of player_start box_start and zero
        CREATE visited AS an empty set
        ADD tuple of player_start and box_start TO visited
        WHILE queue HAS elements
            REMOVE first element FROM queue ASSIGN TO player_pos box_pos push_count
            IF box_pos EQUALS target
                RETURN push_count
            END IF
            FOR each dx dy IN directions
                SET new_player_pos TO tuple of element at position zero of player_pos PLUS dx and element at position one of player_pos PLUS dy
                IF CALL is_valid_position WITH new_player_pos and grid RETURNS true
                    IF new_player_pos EQUALS box_pos
                        SET new_box_pos TO tuple of element at position zero of box_pos PLUS dx and element at position one of box_pos PLUS dy
                        IF CALL is_valid_position WITH new_box_pos and grid RETURNS true AND tuple of new_player_pos and new_box_pos NOT IN visited
                            ADD tuple of new_player_pos and new_box_pos TO visited
                            APPEND tuple of new_player_pos new_box_pos push_count PLUS one TO queue
                        END IF
                    ELSE
                        IF tuple of new_player_pos and box_pos NOT IN visited
                            ADD tuple of new_player_pos and box_pos TO visited
                            APPEND tuple of new_player_pos box_pos push_count TO queue
                        END IF
                    END IF
                END IF
            END FOR
        END WHILE
        RETURN minus one
    END FUNCTION

    FUNCTION is_valid_position(position grid)
        SET x TO element at position zero of position
        SET y TO element at position one of position
        RETURN x GREATER THAN OR EQUAL TO zero AND x LESS THAN LENGTH OF grid AND y GREATER THAN OR EQUAL TO zero AND y LESS THAN LENGTH OF element at position zero of grid AND element at position x of grid at position y NOT EQUALS hash symbol
    END FUNCTION
END CLASS