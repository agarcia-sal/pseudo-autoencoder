CLASS Solution
    FUNCTION updateMatrix(mat)
        IF mat IS EMPTY OR element at position zero of mat IS EMPTY
            RETURN mat
        END IF

        SET rows TO the LENGTH OF mat
        SET cols TO the LENGTH OF element at position zero of mat
        SET dist TO CALL createMatrixWithInfiniteValues WITH rows AND cols
        SET queue TO CALL initializeEmptyQueue

        FOR row FROM zero TO rows MINUS one
            FOR col FROM zero TO cols MINUS one
                IF element at position row of mat AT position col EQUALS zero
                    SET element at position row of dist AT position col TO zero
                    CALL appendPositionToQueue WITH queue AND row AND col
                END IF
            END FOR
        END FOR

        SET directions TO CALL defineDirectionOffsets

        WHILE queue IS NOT EMPTY
            SET currentPosition TO CALL popLeftFromQueue WITH queue
            SET r TO element at position zero of currentPosition
            SET c TO element at position one of currentPosition

            FOR each direction IN directions
                SET dr TO element at position zero of direction
                SET dc TO element at position one of direction
                SET nr TO r PLUS dr
                SET nc TO c PLUS dc

                IF nr IS GREATER THAN OR EQUAL TO zero AND nr IS LESS THAN rows AND nc IS GREATER THAN OR EQUAL TO zero AND nc IS LESS THAN cols AND element at position nr of dist AT position nc IS GREATER THAN element at position r of dist AT position c PLUS one
                    SET element at position nr of dist AT position nc TO element at position r of dist AT position c PLUS one
                    CALL appendPositionToQueue WITH queue AND nr AND nc
                END IF
            END FOR
        END WHILE

        RETURN dist
    END FUNCTION

    FUNCTION createMatrixWithInfiniteValues(rows, cols)
    END FUNCTION

    FUNCTION initializeEmptyQueue
    END FUNCTION

    FUNCTION appendPositionToQueue(queue, row, col)
    END FUNCTION

    FUNCTION defineDirectionOffsets
    END FUNCTION

    FUNCTION popLeftFromQueue(queue)
    END FUNCTION
END CLASS