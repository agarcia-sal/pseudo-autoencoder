CLASS Solution
    FUNCTION findMaxAverage(nums, k)
        FUNCTION canFindAverage(mid)
            SET prefix_sums TO a list of zero repeated the LENGTH OF nums PLUS one times
            SET min_prefix_sum TO a list of zero repeated the LENGTH OF nums PLUS one times
            
            FOR index FROM zero TO the LENGTH OF nums MINUS one
                SET element at position index PLUS one of prefix_sums TO element at position index of prefix_sums PLUS element at position index of nums MINUS mid
                IF index IS GREATER THAN OR EQUAL TO k
                    SET element at position index PLUS one of min_prefix_sum TO the MINIMUM OF element at position index of min_prefix_sum AND element at position index PLUS one MINUS k of prefix_sums
                ELSE
                    SET element at position index PLUS one of min_prefix_sum TO element at position index of min_prefix_sum
                END IF
                
                IF index IS GREATER THAN OR EQUAL TO k MINUS one AND element at position index PLUS one of prefix_sums MINUS element at position index PLUS one of min_prefix_sum IS GREATER THAN OR EQUAL TO zero
                    RETURN true
                END IF
            END FOR
            RETURN false
        END FUNCTION
        
        SET low TO the MINIMUM value IN nums
        SET high TO the MAXIMUM value IN nums
        WHILE high MINUS low IS GREATER THAN one THOUSANDTH OF one
            SET mid TO low PLUS high DIVIDED BY two
            IF canFindAverage(mid)
                SET low TO mid
            ELSE
                SET high TO mid
            END IF
        END WHILE
        RETURN low
    END FUNCTION
END CLASS