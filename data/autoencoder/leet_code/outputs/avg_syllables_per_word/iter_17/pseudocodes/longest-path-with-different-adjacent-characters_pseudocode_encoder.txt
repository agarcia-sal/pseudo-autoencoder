CLASS Solution
    FUNCTION longestPath(parent_list, string_s)
        CALL import_defaultdict_function

        SET tree TO CALL defaultdict WITH list
        FOR each index, parent_element IN enumeration OF parent_list
            IF parent_element IS NOT EQUAL TO negative one
                APPEND index TO element at position parent_element OF tree
            END IF
        END FOR

        SET self_result TO one

        FUNCTION dfs(node)
            SET max1 TO zero
            SET max2 TO zero

            FOR each child_element IN element at position node OF tree
                SET child_length TO CALL dfs WITH child_element

                IF element at position child_element OF string_s IS NOT EQUAL TO element at position node OF string_s
                    IF child_length IS GREATER THAN max1
                        SET max2 TO max1
                        SET max1 TO child_length
                    ELSE IF child_length IS GREATER THAN max2
                        SET max2 TO child_length
                    END IF
                END IF
            END FOR

            SET self_result TO the GREATER OF self_result AND max1 PLUS max2 PLUS one

            RETURN max1 PLUS one
        END FUNCTION

        CALL dfs WITH zero

        RETURN self_result
    END FUNCTION
END CLASS