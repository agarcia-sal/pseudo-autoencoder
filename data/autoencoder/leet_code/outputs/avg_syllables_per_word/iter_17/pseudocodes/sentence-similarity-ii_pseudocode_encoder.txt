CLASS Solution
    FUNCTION areSentencesSimilarTwo(sentence1, sentence2, similarPairs)
        IF the LENGTH OF sentence1 IS NOT EQUALS TO the LENGTH OF sentence2
            RETURN false
        END IF

        SET parent TO an empty mapping

        FUNCTION find(x)
            IF element at position x of parent IS NOT EQUALS TO x
                SET element at position x of parent TO CALL find WITH element at position x of parent
            END IF
            RETURN element at position x of parent
        END FUNCTION

        FUNCTION union(x, y)
            SET rootX TO CALL find WITH x
            SET rootY TO CALL find WITH y
            IF rootX IS NOT EQUALS TO rootY
                SET element at position rootY of parent TO rootX
            END IF
        END FUNCTION

        FOR each pair IN similarPairs
            FOR each word IN pair
                IF word IS NOT IN parent
                    SET element at position word of parent TO word
                END IF
            END FOR
        END FOR

        FOR each x, y IN pairs formed by combining corresponding elements of similarPairs
            CALL union WITH x, y
        END FOR

        FOR each w1, w2 IN pairs formed by combining corresponding elements of sentence1 and sentence2
            IF w1 IS NOT IN parent
                SET element at position w1 of parent TO w1
            END IF
            IF w2 IS NOT IN parent
                SET element at position w2 of parent TO w2
            END IF
            IF CALL find WITH w1 IS NOT EQUALS TO CALL find WITH w2
                RETURN false
            END IF
        END FOR

        RETURN true
    END FUNCTION
END CLASS