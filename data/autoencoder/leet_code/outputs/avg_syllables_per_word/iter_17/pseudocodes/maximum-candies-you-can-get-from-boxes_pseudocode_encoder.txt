CLASS Solution
    FUNCTION maxCandies(status AS list_of_integers candies AS list_of_integers keys AS list_of_list_of_integers containedBoxes AS list_of_list_of_integers initialBoxes AS list_of_integers)
        SET boxes_we_have TO the SET OF initialBoxes
        SET keys_we_have TO the EMPTY SET
        SET total_candies TO zero
        SET progress_made TO true
        WHILE progress_made holds
            SET progress_made TO false
            FOR each box IN the LIST convert boxes_we_have TO a LIST
                IF the element at position box of status EQUALS one OR box IS IN keys_we_have
                    INCREMENT total_candies BY the element at position box of candies
                    CALL keys_we_have UPDATE WITH the element at position box of keys
                    CALL boxes_we_have UPDATE WITH the element at position box of containedBoxes
                    REMOVE box FROM boxes_we_have
                    SET progress_made TO true
                END IF
            END FOR
        END WHILE
        RETURN total_candies
    END FUNCTION
END CLASS