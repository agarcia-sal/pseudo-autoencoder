CLASS Solution
    FUNCTION minOperationsToFlip(expression)
        SET stack TO an empty list

        FOR each element IN expression
            IF element IS IN a collection of opening parenthesis AND AND operator AND OR operator
                APPEND a tuple of element AND zero TO stack
                CONTINUE to next iteration
            END IF

            IF element IS a closing parenthesis
                SET lastPair TO the element removed from the end of stack
                REMOVE the element at the end of stack which should be the opening parenthesis
            ELSE
                SET lastPair TO a tuple of element AND one
            END IF

            IF stack is not empty AND element at position zero of the last tuple in stack IS IN AND operator AND OR operator
                SET op TO the element at position zero of the element removed from the end of stack
                SET tuple a_costA TO the element removed from the end of stack
                SET a TO element at position zero of tuple a_costA
                SET costA TO element at position one of tuple a_costA
                SET b TO element at position zero of lastPair
                SET costB TO element at position one of lastPair

                IF op EQUALS AND operator
                    IF a EQUALS zero AND b EQUALS zero
                        SET lastPair TO a tuple of zero AND one INCREMENTED BY the minimum of costA AND costB
                    ELSE IF a EQUALS zero AND b EQUALS one
                        SET lastPair TO a tuple of zero AND one
                    ELSE IF a EQUALS one AND b EQUALS zero
                        SET lastPair TO a tuple of zero AND one
                    ELSE
                        SET lastPair TO a tuple of one AND the minimum of costA AND costB
                    END IF
                ELSE
                    IF a EQUALS zero AND b EQUALS zero
                        SET lastPair TO a tuple of zero AND the minimum of costA AND costB
                    ELSE IF a EQUALS zero AND b EQUALS one
                        SET lastPair TO a tuple of one AND one
                    ELSE IF a EQUALS one AND b EQUALS zero
                        SET lastPair TO a tuple of one AND one
                    ELSE
                        SET lastPair TO a tuple of one AND one INCREMENTED BY the minimum of costA AND costB
                    END IF
                END IF
            END IF

            APPEND lastPair TO stack
        END FOR

        RETURN the element at position one of the element at the last position of stack
    END FUNCTION
END CLASS