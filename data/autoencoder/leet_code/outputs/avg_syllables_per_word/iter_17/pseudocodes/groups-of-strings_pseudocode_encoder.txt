CLASS UnionFind
    FUNCTION __init__(size)
        SET parent TO the LIST OF all integers FROM zero TO size MINUS one
        SET rank TO the LIST containing zero repeated size times
        SET size TO the LIST containing one repeated size times
    END FUNCTION

    FUNCTION find(u)
        IF element at position u of parent IS NOT EQUAL TO u
            SET element at position u of parent TO CALL find WITH element at position u of parent
        END IF
        RETURN element at position u of parent
    END FUNCTION

    FUNCTION union(u, v)
        SET rootU TO CALL find WITH u
        SET rootV TO CALL find WITH v
        IF rootU IS NOT EQUAL TO rootV
            IF element at position rootU of rank IS GREATER THAN element at position rootV of rank
                SET element at position rootV of parent TO rootU
                INCREMENT element at position rootU of size BY element at position rootV of size
            ELSE IF element at position rootU of rank IS LESS THAN element at position rootV of rank
                SET element at position rootU of parent TO rootV
                INCREMENT element at position rootV of size BY element at position rootU of size
            ELSE
                SET element at position rootV of parent TO rootU
                INCREMENT element at position rootU of size BY element at position rootV of size
                INCREMENT element at position rootU of rank BY one
            END IF
        END IF
    END FUNCTION
END CLASS

CLASS Solution
    FUNCTION groupStrings(words)
        FUNCTION bitmask(word)
            SET mask TO zero
            FOR each character IN word
                SET mask TO mask OR one SHIFTED LEFT BY the difference BETWEEN the ASCII value of character AND the ASCII value of letter a
            END FOR
            RETURN mask
        END FUNCTION

        SET word_map TO CALL defaultdict WITH list AS parameter
        SET n TO the LENGTH OF words
        SET uf TO NEW UnionFind WITH n AS parameter

        FOR each index i AND word IN enumeration of words
            SET mask TO CALL bitmask WITH word
            APPEND i TO element at key mask of word_map
        END FOR

        FOR each index i AND word IN enumeration of words
            SET mask TO CALL bitmask WITH word
            FOR j FROM zero TO twenty five
                SET new_mask TO mask XOR one SHIFTED LEFT BY j
                IF new_mask IS IN word_map
                    FOR each k IN element at key new_mask of word_map
                        CALL uf.union WITH i AND k AS parameters
                    END FOR
                END IF

                IF the bitwise AND of mask AND one SHIFTED LEFT BY j IS EQUAL TO zero
                    SET new_mask TO mask OR one SHIFTED LEFT BY j
                    IF new_mask IS IN word_map
                        FOR each k IN element at key new_mask of word_map
                            CALL uf.union WITH i AND k AS parameters
                        END FOR
                    END IF
                END IF

                IF the bitwise AND of mask AND one SHIFTED LEFT BY j IS NOT EQUAL TO zero
                    FOR k FROM zero TO twenty five
                        IF the bitwise AND of mask AND one SHIFTED LEFT BY k IS EQUAL TO zero
                            SET new_mask TO the bitwise OR of (mask XOR one SHIFTED LEFT BY j) AND one SHIFTED LEFT BY k
                            IF new_mask IS IN word_map
                                FOR each l IN element at key new_mask of word_map
                                    CALL uf.union WITH i AND l AS parameters
                                END FOR
                            END IF
                        END IF
                    END FOR
                END IF
            END FOR
        END FOR

        SET root_sizes TO CALL defaultdict WITH integer zero AS default parameter

        FOR i FROM zero TO n MINUS one
            SET root TO CALL uf.find WITH i
            INCREMENT element at key root of root_sizes BY one
        END FOR

        SET max_group_size TO the MAXIMUM VALUE AMONG elements of root_sizes
        SET num_groups TO the NUMBER OF KEYS IN root_sizes

        RETURN the LIST containing num_groups AND max_group_size
    END FUNCTION
END CLASS