CLASS Solution
    FUNCTION stoneGame(piles)
        FUNCTION dfs(i, j) WITH CACHE
            IF i GREATER THAN j
                RETURN zero
            END IF
            SET left_choice TO element at position i of piles MINUS CALL dfs WITH parameters i PLUS one AND j
            SET right_choice TO element at position j of piles MINUS CALL dfs WITH parameters i AND j MINUS one
            RETURN the GREATER OF left_choice AND right_choice
        END FUNCTION
        SET result TO CALL dfs WITH parameters zero AND the LENGTH OF piles MINUS one
        RETURN result GREATER THAN zero
    END FUNCTION
END CLASS