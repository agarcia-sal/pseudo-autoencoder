CLASS Solution
    FUNCTION solveNQueens(n)
        FUNCTION is_not_under_attack(row, col)
            RETURN NOT element at position col of cols PLUS element at position row MINUS col of hills PLUS element at position row PLUS col of dales
        END FUNCTION

        FUNCTION place_queen(row, col)
            APPEND tuple of row and col TO queens
            SET element at position col of cols TO one
            SET element at position row MINUS col of hills TO one
            SET element at position row PLUS col of dales TO one
        END FUNCTION

        FUNCTION remove_queen(row, col)
            REMOVE tuple of row and col FROM queens
            SET element at position col of cols TO zero
            SET element at position row MINUS col of hills TO zero
            SET element at position row PLUS col of dales TO zero
        END FUNCTION

        FUNCTION add_solution()
            SET solution TO empty list
            FOR each tuple of ignored_row and col IN sorted list of queens
                SET string_line TO concatenation of character dot repeated col times PLUS character Q PLUS character dot repeated n MINUS col MINUS one times
                APPEND string_line TO solution
            END FOR
            APPEND solution TO output
        END FUNCTION

        FUNCTION backtrack(row EQUALS zero)
            FOR col FROM zero TO n MINUS one
                IF is_not_under_attack(row, col) HOLDS
                    CALL place_queen WITH row AND col
                    IF row PLUS one EQUALS n
                        CALL add_solution
                    ELSE
                        CALL backtrack WITH row PLUS one
                    END IF
                    CALL remove_queen WITH row AND col
                END IF
            END FOR
        END FUNCTION

        SET cols TO list of zero repeated n times
        SET hills TO list of zero repeated two MULTIPLIED BY n MINUS one times
        SET dales TO list of zero repeated two MULTIPLIED BY n MINUS one times
        SET queens TO empty set
        SET output TO empty list
        CALL backtrack WITH zero
        RETURN output
END CLASS