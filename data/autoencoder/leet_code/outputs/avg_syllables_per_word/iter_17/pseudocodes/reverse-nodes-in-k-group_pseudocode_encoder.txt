CLASS ListNode
    FUNCTION __init__(val EQUALS zero, next EQUALS None)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values)
    IF values IS empty
        RETURN None
    END IF
    SET head TO CALL ListNode WITH element at position zero of values
    SET p TO head
    FOR each val IN the substring from position one TO the end of values
        SET node TO CALL ListNode WITH val
        SET p.next TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS None AND p2 IS None
        RETURN True
    END IF
    IF p1 IS None OR p2 IS None
        RETURN False
    END IF
    RETURN the logical AND of p1.val EQUALS p2.val AND CALL is_same_list WITH p1.next AND p2.next
END FUNCTION

CLASS Solution
    FUNCTION reverseKGroup(head, k)
        FUNCTION reverseLinkedList(start, end)
            SET prev TO None
            SET curr TO start
            WHILE curr IS NOT EQUALS TO end
                SET next_node TO element at position next of curr
                SET curr.next TO prev
                SET prev TO curr
                SET curr TO next_node
            END WHILE
            SET curr.next TO prev
            RETURN end, start
        END FUNCTION

        SET dummy TO CALL ListNode WITH zero
        SET dummy.next TO head
        SET prev_group_end TO dummy

        WHILE True
            SET kth_node TO prev_group_end
            FOR index FROM zero TO k MINUS one
                SET kth_node TO element at position next of kth_node
                IF kth_node IS None
                    RETURN element at position next of dummy
                END IF
            END FOR
            SET next_group_start TO element at position next of kth_node
            SET kth_node.next TO None
            SET new_group_start, new_group_end TO CALL reverseLinkedList WITH element at position next of prev_group_end AND kth_node
            SET prev_group_end.next TO new_group_start
            SET new_group_end.next TO next_group_start
            SET prev_group_end TO new_group_end
        END WHILE

        RETURN element at position next of dummy
    END FUNCTION
END CLASS