CLASS Solution
    FUNCTION numSubarrayBoundedMax(list_of_numbers nums, integer left, integer right)
        FUNCTION count(integer max_value)
            SET total_count TO zero
            SET current_length TO zero
            FOR each number IN list_of_numbers nums
                IF number LESS THAN OR EQUALS max_value
                    INCREMENT current_length BY one
                    INCREMENT total_count BY current_length
                ELSE
                    SET current_length TO zero
                END IF
            END FOR
            RETURN total_count
        END FUNCTION
        SET result TO CALL count WITH parameter right MINUS CALL count WITH parameter left MINUS one
        RETURN result
    END FUNCTION
END CLASS