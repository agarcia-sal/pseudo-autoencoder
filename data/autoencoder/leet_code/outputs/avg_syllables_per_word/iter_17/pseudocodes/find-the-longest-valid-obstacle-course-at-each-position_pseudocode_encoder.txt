CLASS Solution
    FUNCTION longestObstacleCourseAtEachPosition(obstacles)
        SET n TO the LENGTH OF obstacles
        SET ans TO empty list
        SET increasing_subseq TO empty list
        
        FOR each obstacle IN obstacles
            SET idx TO the POSITION WHERE obstacle CAN BE INSERTED TO THE RIGHT IN increasing_subseq TO KEEP IT SORTED
            
            IF idx EQUALS the LENGTH OF increasing_subseq
                APPEND obstacle TO increasing_subseq
            ELSE
                SET element at position idx of increasing_subseq TO obstacle
            END IF
            
            APPEND idx PLUS one TO ans
        END FOR
        
        RETURN ans
    END FUNCTION
END CLASS