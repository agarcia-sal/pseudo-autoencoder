CLASS Solution
    FUNCTION maxProfit(k, prices)
        IF prices IS empty OR k EQUALS zero
            RETURN zero
        END IF

        SET n TO the LENGTH OF prices

        IF k GREATER THAN OR EQUAL TO n DIVIDED BY two
            SET profit TO zero
            FOR index FROM one TO n MINUS one
                IF element at position index of prices GREATER THAN element at position index MINUS one of prices
                    INCREMENT profit BY element at position index of prices MINUS element at position index MINUS one of prices
                END IF
            END FOR
            RETURN profit
        END IF

        CALL initializeHoldArray WITH parameters k
        CALL initializeReleaseArray WITH parameters k

        FOR each price IN prices
            FOR transaction_index FROM one TO k
                SET hold at position transaction_index TO the MAXIMUM OF hold at position transaction_index AND release at position transaction_index MINUS one MINUS price
                SET release at position transaction_index TO the MAXIMUM OF release at position transaction_index AND hold at position transaction_index PLUS price
            END FOR
        END FOR

        RETURN release at position k
    END FUNCTION
END CLASS

FUNCTION initializeHoldArray(k)
END FUNCTION

FUNCTION initializeReleaseArray(k)
END FUNCTION