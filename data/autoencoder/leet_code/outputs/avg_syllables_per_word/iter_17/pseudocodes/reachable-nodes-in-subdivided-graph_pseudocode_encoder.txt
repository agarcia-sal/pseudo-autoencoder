CLASS Solution
    FUNCTION reachableNodes(edges AS list of list of integers, maxMoves AS integer, n AS integer)
        SET graph TO CALL InitializeGraph WITH parameters n
        FOR each triple u v cnt IN edges
            APPEND tuple of v AND cnt TO element at position u of graph
            APPEND tuple of u AND cnt TO element at position v of graph
        END FOR

        SET distances TO CALL InitializeDistances WITH parameter n
        SET element at position zero of distances TO zero
        SET priority_queue TO list containing tuple of zero AND zero

        WHILE priority_queue holds values
            CALL pop the smallest element FROM priority_queue AND ASSIGN TO dist AND node
            IF dist GREATER THAN element at position node of distances
                CONTINUE
            END IF
            FOR each tuple neighbor AND cnt IN element at position node of graph
                SET new_dist TO dist PLUS cnt PLUS one
                IF new_dist LESS THAN element at position neighbor of distances
                    SET element at position neighbor of distances TO new_dist
                    CALL push tuple of new_dist AND neighbor INTO priority_queue
                END IF
            END FOR
        END WHILE

        SET reachable_nodes TO zero

        FOR each d IN distances
            IF d LESS THAN OR EQUAL TO maxMoves
                INCREMENT reachable_nodes BY one
            END IF
        END FOR

        SET used_edges TO empty dictionary

        FOR each triple u v cnt IN edges
            SET moves_u TO maximum of zero AND maxMoves MINUS element at position u of distances
            SET moves_v TO maximum of zero AND maxMoves MINUS element at position v of distances
            SET reachable_new_nodes TO minimum of cnt AND moves_u PLUS moves_v
            INCREMENT reachable_nodes BY reachable_new_nodes
            SET element with key tuple of u AND v IN used_edges TO reachable_new_nodes
        END FOR

        RETURN reachable_nodes
    END FUNCTION

    FUNCTION InitializeGraph(n AS integer)
    END FUNCTION

    FUNCTION InitializeDistances(n AS integer)
    END FUNCTION
END CLASS