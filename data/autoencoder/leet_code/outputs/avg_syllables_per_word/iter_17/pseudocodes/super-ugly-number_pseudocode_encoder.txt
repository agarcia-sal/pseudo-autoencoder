CLASS Solution
    FUNCTION nthSuperUglyNumber(n, primes)
        SET ugly_numbers TO list containing one
        SET heap TO list of pairs each containing element at position index of primes AND index FOR each index AND element in enumerate of primes
        CALL heapify WITH heap
        SET indices TO list of zero repeated the LENGTH OF primes times
        WHILE the LENGTH OF ugly_numbers IS LESS THAN n holds
            SET next_ugly AND prime_index TO element extracted FROM heap by popping the smallest element
            IF next_ugly NOT EQUALS element at position LENGTH OF ugly_numbers MINUS one of ugly_numbers
                APPEND next_ugly TO ugly_numbers
            END IF
            INCREMENT element at position prime_index of indices BY one
            SET next_multiple TO element at position prime_index of primes MULTIPLIED BY element at position element at position prime_index of indices of ugly_numbers
            CALL heappush WITH heap AND the pair of next_multiple AND prime_index
        END WHILE
        RETURN element at position LENGTH OF ugly_numbers MINUS one of ugly_numbers
    END FUNCTION
END CLASS