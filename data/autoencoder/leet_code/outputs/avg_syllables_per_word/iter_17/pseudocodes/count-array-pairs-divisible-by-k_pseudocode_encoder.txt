CLASS Solution
    FUNCTION countPairs(list_of_integers nums, integer k)
        ASSIGN gcd_count TO CALL Counter WITH no parameters
        
        FOR each number IN nums
            SET current_gcd TO CALL gcd WITH parameters number AND k
            INCREMENT element at position current_gcd OF gcd_count BY one
        END FOR
        
        SET total_pairs TO zero
        
        SET gcd_values TO CALL list WITH parameter CALL keys OF gcd_count
        SET n TO the LENGTH OF gcd_values
        
        FOR i FROM zero TO n MINUS one
            FOR j FROM i TO n MINUS one
                SET gcd1 TO element at position i OF gcd_values
                SET gcd2 TO element at position j OF gcd_values
                
                IF the remainder when gcd1 MULTIPLIED BY gcd2 IS DIVIDED BY k EQUALS zero
                    IF i EQUALS j
                        INCREMENT total_pairs BY the INTEGER DIVISION of (element at position gcd1 OF gcd_count MULTIPLIED BY (element at position gcd1 OF gcd_count MINUS one)) BY two
                    ELSE
                        INCREMENT total_pairs BY element at position gcd1 OF gcd_count MULTIPLIED BY element at position gcd2 OF gcd_count
                    END IF
                END IF
            END FOR
        END FOR
        
        RETURN total_pairs
    END FUNCTION
END CLASS