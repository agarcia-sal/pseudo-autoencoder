CLASS Solution
    FUNCTION findAnagrams(string_s, string_p)
        SET length_of_string_s TO the LENGTH OF string_s
        SET length_of_string_p TO the LENGTH OF string_p
        
        IF length_of_string_p GREATER THAN length_of_string_s
            RETURN empty list
        END IF
        
        SET p_character_counts TO CALL Counter WITH parameter string_p
        SET s_character_counts TO CALL Counter WITH parameter substring from position zero TO position length_of_string_p MINUS one of string_s
        
        SET anagrams_list TO empty list
        
        IF s_character_counts EQUALS p_character_counts
            APPEND zero TO anagrams_list
        END IF
        
        FOR index FROM length_of_string_p TO length_of_string_s MINUS one
            SET new_character TO element at position index of string_s
            INCREMENT the COUNT of new_character in s_character_counts BY one
            
            SET old_character TO element at position index MINUS length_of_string_p of string_s
            DECREMENT the COUNT of old_character in s_character_counts BY one
            
            IF the COUNT of old_character in s_character_counts EQUALS zero
                REMOVE old_character FROM s_character_counts
            END IF
            
            IF s_character_counts EQUALS p_character_counts
                APPEND index MINUS length_of_string_p PLUS one TO anagrams_list
            END IF
        END FOR
        
        RETURN anagrams_list
    END FUNCTION
END CLASS