CLASS Solution
    FUNCTION magicalString(n)
        IF n EQUALS zero
            RETURN zero
        END IF
        
        IF n LESS THAN OR EQUAL TO three
            RETURN one
        END IF
        
        SET s TO a list containing one two two
        SET count TO one
        SET index TO two
        
        WHILE the LENGTH OF s LESS THAN n
            SET next_num TO three MINUS the element at position negative one of s
            CALL ExtendList WITH PARAMETERS s next_num the element at position index of s
            IF next_num EQUALS one
                INCREMENT count BY the element at position index of s
            END IF
            INCREMENT index BY one
        END WHILE
        
        IF the LENGTH OF s GREATER THAN n
            SET excess_length TO the LENGTH OF s MINUS n
            SET last_element TO the element at position negative one of s
            DECREMENT count BY last_element MULTIPLIED BY excess_length
        END IF
        
        RETURN count
    END FUNCTION

    FUNCTION ExtendList(list_to_extend number times)
        // Auxiliary function representing appending number repeated times to list_to_extend
    END FUNCTION
END CLASS