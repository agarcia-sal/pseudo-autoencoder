CLASS TreeNode
    FUNCTION __init__(self, val EQUALS zero, left EQUALS None, right EQUALS None)
        SET self.val TO val
        SET self.left TO left
        SET self.right TO right
    END FUNCTION
END CLASS

FUNCTION tree_node(values)
    IF values IS empty
        RETURN None
    END IF
    SET root TO CALL TreeNode WITH the element at position zero of values
    SET i TO one
    SET queue TO CALL deque
    CALL queue append WITH root
    WHILE queue IS NOT empty
        SET node TO CALL queue popleft
        IF i IS LESS THAN the LENGTH OF values AND the element at position i of values IS NOT None
            SET node.left TO CALL TreeNode WITH the element at position i of values
            CALL queue append WITH node.left
        END IF
        INCREMENT i BY one
        IF i IS LESS THAN the LENGTH OF values AND the element at position i of values IS NOT None
            SET node.right TO CALL TreeNode WITH the element at position i of values
            CALL queue append WITH node.right
        END IF
        INCREMENT i BY one
    END WHILE
    RETURN root
END FUNCTION

FUNCTION is_same_tree(p, q)
    IF p IS None AND q IS None
        RETURN True
    ELSE IF p IS None OR q IS None
        RETURN False
    ELSE IF p.val IS NOT EQUALS TO q.val
        RETURN False
    ELSE
        RETURN CALL is_same_tree WITH p.left AND q.left AND CALL is_same_tree WITH p.right AND q.right
    END IF
END FUNCTION

CLASS Solution
    FUNCTION countUnivalSubtrees(self, root)
        FUNCTION helper(node)
            IF node IS None
                RETURN True, zero
            END IF
            SET is_left_unival, left_count TO CALL helper WITH node.left
            SET is_right_unival, right_count TO CALL helper WITH node.right
            IF is_left_unival AND is_right_unival
                IF (node.left IS None OR the val of node.left EQUALS the val of node) AND (node.right IS None OR the val of node.right EQUALS the val of node)
                    RETURN True, left_count PLUS right_count PLUS one
                END IF
            END IF
            RETURN False, left_count PLUS right_count
        END FUNCTION
        SET _, count TO CALL helper WITH root
        RETURN count
    END FUNCTION
END CLASS