CLASS Solution
    FUNCTION constrainedSubsetSum(nums, k)
        SET n TO the LENGTH OF nums
        SET dp TO auxiliary FUNCTION create_zero_list WITH parameter n
        SET element at position zero of dp TO element at position zero of nums
        SET max_sum TO element at position zero of nums

        SET q TO auxiliary FUNCTION create_deque WITH parameter zero
       
        FOR index FROM one TO n MINUS one
            IF element at position zero of dp AT index at position zero of q IS GREATER THAN zero
                SET dp_value TO element at position zero of dp AT index at position zero of q
            ELSE
                SET dp_value TO zero
            END IF
            SET element at position index of dp TO element at position index of nums PLUS dp_value

            IF max_sum IS LESS THAN element at position index of dp
                SET max_sum TO element at position index of dp
            END IF

            WHILE q IS NOT empty AND element at position index of dp IS GREATER THAN OR EQUAL TO element at position at the last position of q of dp
                CALL q TO REMOVE the last element
            END WHILE

            CALL q TO ADD element index

            IF element at position zero of q EQUALS index MINUS k
                CALL q TO REMOVE element at position zero
            END IF
        END FOR

        RETURN max_sum
    END FUNCTION
END CLASS