CLASS Solution
    FUNCTION maxHappyGroups(batchSize, groups)
        IF batchSize EQUALS one
            RETURN the LENGTH OF groups
        END IF

        SET remainder_count TO a list of zero repeated batchSize times
        FOR each group IN groups
            INCREMENT element at position group MODULO batchSize of remainder_count BY one
        END FOR

        FUNCTION dp(remainder, variable_number_of_remainders)
            SET remainder_count TO a list CONSTRUCTED FROM variable_number_of_remainders
            SET max_happy TO zero

            FOR i FROM zero TO batchSize MINUS one
                IF element at position i of remainder_count EQUALS zero
                    CONTINUE TO next iteration
                END IF

                DECREMENT element at position i of remainder_count BY one
                SET new_remainder TO remainder MINUS i MODULO batchSize

                IF remainder EQUALS zero
                    SET happy_groups TO one PLUS CALL dp WITH new_remainder AND all elements of remainder_count
                ELSE
                    SET happy_groups TO CALL dp WITH new_remainder AND all elements of remainder_count
                END IF

                SET max_happy TO the GREATER OF max_happy AND happy_groups

                INCREMENT element at position i of remainder_count BY one
            END FOR

            RETURN max_happy
        END FUNCTION

        RETURN CALL dp WITH zero AND all elements of remainder_count
    END FUNCTION
END CLASS