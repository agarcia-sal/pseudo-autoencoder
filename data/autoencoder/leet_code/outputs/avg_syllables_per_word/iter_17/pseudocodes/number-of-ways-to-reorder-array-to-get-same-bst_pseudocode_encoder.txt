CLASS Solution
    FUNCTION numOfWays(nums)
        SET MOD TO ten POWERED BY nine PLUS seven

        FUNCTION count_ways(arr)
            IF the LENGTH OF arr IS LESS THAN OR EQUAL TO one
                RETURN one
            END IF

            SET root TO element at position zero of arr
            SET left_subtree TO an empty list
            FOR each x IN arr
                IF x IS LESS THAN root
                    APPEND x TO left_subtree
                END IF
            END FOR

            SET right_subtree TO an empty list
            FOR each x IN arr
                IF x IS GREATER THAN root
                    APPEND x TO right_subtree
                END IF
            END FOR

            SET ways_left TO CALL count_ways WITH left_subtree
            SET ways_right TO CALL count_ways WITH right_subtree

            SET total_ways TO CALL comb WITH the sum of the LENGTH OF left_subtree PLUS the LENGTH OF right_subtree AND the LENGTH OF left_subtree

            RETURN the product of ways_left MULTIPLIED BY ways_right MULTIPLIED BY total_ways MODULO MOD
        END FUNCTION

        RETURN the result of subtracting one FROM CALL count_ways WITH nums MODULO MOD
    END FUNCTION
END CLASS