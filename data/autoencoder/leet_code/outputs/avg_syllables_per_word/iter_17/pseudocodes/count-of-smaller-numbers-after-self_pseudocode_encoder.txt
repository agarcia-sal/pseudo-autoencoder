CLASS Solution
    FUNCTION countSmaller(list_of_numbers)
        SET sorted_unique_numbers TO CALL create_sorted_unique_list WITH list_of_numbers
        SET rank_dictionary TO CALL create_rank_dictionary WITH sorted_unique_numbers

        SET binary_indexed_tree TO CALL initialize_bit WITH the LENGTH OF sorted_unique_numbers PLUS one

        FUNCTION get_sum(index)
            SET result TO zero
            WHILE index GREATER THAN zero holds
                INCREMENT result BY element at position index of binary_indexed_tree
                DECREMENT index BY index AND negative index
            END WHILE
            RETURN result
        END FUNCTION

        FUNCTION update(index, delta)
            WHILE index LESS THAN the LENGTH OF binary_indexed_tree holds
                INCREMENT element at position index of binary_indexed_tree BY delta
                INCREMENT index BY index AND negative index
            END WHILE
        END FUNCTION

        SET counts_list TO empty list
        FOR each number IN the reversed list_of_numbers
            SET current_rank TO value at key number of rank_dictionary
            APPEND CALL get_sum WITH current_rank MINUS one TO counts_list
            CALL update WITH current_rank AND one
        END FOR

        RETURN the reversed counts_list
    END FUNCTION

    FUNCTION create_sorted_unique_list(list_of_numbers)
    END FUNCTION

    FUNCTION create_rank_dictionary(sorted_unique_numbers)
    END FUNCTION

    FUNCTION initialize_bit(size)
    END FUNCTION
END CLASS