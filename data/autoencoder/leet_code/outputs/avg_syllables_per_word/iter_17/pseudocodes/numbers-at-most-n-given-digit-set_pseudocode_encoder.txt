CLASS Solution
    FUNCTION atMostNGivenDigitSet(digits, n)
        FUNCTION count_numbers_with_length(length)
            RETURN the LENGTH OF digits RAISED TO THE POWER OF length
        END FUNCTION

        FUNCTION count_numbers_up_to_n(n)
            SET string_n TO the STRING REPRESENTATION OF n
            SET length TO the LENGTH OF string_n
            SET count TO zero

            FOR l FROM one TO length MINUS one
                INCREMENT count BY CALL count_numbers_with_length(l)
            END FOR

            FOR i FROM zero TO length MINUS one
                SET current_digit TO the INTEGER VALUE OF the element at position i of string_n
                FOR each digit IN digits
                    SET digit_value TO the INTEGER VALUE OF digit
                    IF digit_value LESS THAN current_digit THEN
                        INCREMENT count BY CALL count_numbers_with_length(length MINUS i MINUS one)
                    ELSE IF digit_value EQUALS current_digit THEN
                        IF i EQUALS length MINUS one THEN
                            INCREMENT count BY one
                        END IF
                    ELSE
                        BREAK
                    END IF
                END FOR
            END FOR

            RETURN count
        END FUNCTION

        RETURN CALL count_numbers_up_to_n(n)
    END FUNCTION
END CLASS