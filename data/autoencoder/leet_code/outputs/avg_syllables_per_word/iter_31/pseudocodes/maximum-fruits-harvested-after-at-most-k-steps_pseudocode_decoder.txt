CLASS Solution  
    FUNCTION maxTotalFruits(fruits list OF list OF integer  startPos integer  k integer) RETURNS integer  
        SET max_fruits TO zero  
        SET total_fruits TO zero  
        SET left TO zero  
        FOR right FROM zero TO the LENGTH OF fruits MINUS one  
            SET position TO the element at position right AND position zero of fruits  
            SET amount TO the element at position right AND position one of fruits  
            INCREMENT total_fruits BY amount  
            WHILE left LESS THAN OR EQUAL TO right AND NOT  
                 (startPos MINUS k LESS THAN OR EQUAL TO the element at position left AND position zero of fruits  
                  AND the element at position left AND position zero of fruits LESS THAN OR EQUAL TO startPos PLUS k  
                  AND startPos MINUS k LESS THAN OR EQUAL TO the element at position right AND position zero of fruits  
                  AND the element at position right AND position zero of fruits LESS THAN OR EQUAL TO startPos PLUS k  
                  AND the MINIMUM OF the absolute value of the element at position right AND position zero of fruits MINUS startPos  
                  AND the absolute value of the element at position left AND position zero of fruits MINUS startPos) PLUS  
                 the element at position right AND position zero of fruits MINUS the element at position left AND position zero of fruits  
                 LESS THAN OR EQUAL TO k  
                 DECREMENT total_fruits BY the element at position left AND position one of fruits  
                 INCREMENT left BY one  
            END WHILE  
            SET max_fruits TO the MAXIMUM OF max_fruits AND total_fruits  
        END FOR  
        RETURN max_fruits  
    END FUNCTION  
END CLASS