CLASS Solution  
    FUNCTION scheduleCourse(courses)  
        SORT courses BY the end day of each course  
        INITIALIZE max_heap AS an empty list  
        SET current_end_day TO zero  
        FOR each pair of duration and last_day IN courses  
            IF the sum of current_end_day PLUS duration IS LESS THAN OR EQUAL TO last_day  
                ADD the negative of duration TO max_heap as a heap element  
                INCREMENT current_end_day BY duration  
            ELSE  
                IF max_heap IS NOT EMPTY AND the negative of the first element of max_heap IS GREATER THAN duration  
                    INCREMENT current_end_day BY the sum of duration PLUS the first element popped from max_heap  
                    ADD the negative of duration TO max_heap as a heap element  
                END IF  
            END IF  
        END FOR  
        RETURN the LENGTH OF max_heap  
    END FUNCTION  
END CLASS