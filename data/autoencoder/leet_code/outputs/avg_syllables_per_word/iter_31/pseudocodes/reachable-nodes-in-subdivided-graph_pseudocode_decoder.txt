CLASS Solution  
    FUNCTION reachableNodes(edges AS List OF List OF integer, maxMoves AS integer, n AS integer) RETURNS integer  
        SET graph TO a new dictionary mapping each integer i FROM zero TO n MINUS one TO an empty list  
        FOR each element consisting of u v cnt IN edges  
            APPEND a tuple consisting of v and cnt TO the list at key u in graph  
            APPEND a tuple consisting of u and cnt TO the list at key v in graph  
        END FOR  
        
        SET distances TO a list of size n all filled with positive infinity  
        SET the element at position zero of distances TO zero  
        SET priority_queue TO a list containing a tuple consisting of zero and zero  
        
        WHILE the length of priority_queue is greater than zero  
            EXTRACT the element with smallest first component from priority_queue and ASSIGN its components to dist and node respectively  
            IF dist GREATER THAN the element at position node of distances  
                CONTINUE to the next iteration of the WHILE loop  
            END IF  
            FOR each element consisting of neighbor and cnt in the list at key node in graph  
                SET new_dist TO dist PLUS cnt PLUS one  
                IF new_dist LESS THAN the element at position neighbor of distances  
                    SET the element at position neighbor of distances TO new_dist  
                    INSERT the tuple consisting of new_dist and neighbor INTO priority_queue respecting the smallest-first order  
                END IF  
            END FOR  
        END WHILE  
        
        SET reachable_nodes TO zero  
        
        FOR each element d in distances  
            IF d LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  
        
        SET used_edges TO an empty dictionary  
        FOR each element consisting of u v cnt IN edges  
            SET moves_u TO the maximum of zero and maxMoves MINUS the element at position u of distances  
            SET moves_v TO the maximum of zero and maxMoves MINUS the element at position v of distances  
            SET reachable_new_nodes TO the minimum of cnt and moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            ASSIGN to used_edges at key consisting of tuple u v the value reachable_new_nodes  
        END FOR  
        
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS