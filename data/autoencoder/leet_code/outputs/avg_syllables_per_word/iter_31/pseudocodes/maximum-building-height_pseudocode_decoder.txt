CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND list containing position one and height zero TO restrictions  
        SORT restrictions IN ASCENDING ORDER BY position AND HEIGHT  
        
        FOR i FROM one TO the LENGTH OF restrictions MINUS one  
            SET idx TO element at position zero of restriction at position i  
            SET height TO element at position one of restriction at position i  
            SET prev_idx TO element at position zero of restriction at position i MINUS one  
            SET prev_height TO element at position one of restriction at position i MINUS one  
            SET height TO the MINIMUM OF height AND prev_height PLUS idx MINUS prev_idx  
            SET element at position one of restriction at position i TO height  
        END FOR  
        
        FOR i FROM the LENGTH OF restrictions MINUS two DOWN TO zero  
            SET idx TO element at position zero of restriction at position i  
            SET height TO element at position one of restriction at position i  
            SET next_idx TO element at position zero of restriction at position i PLUS one  
            SET next_height TO element at position one of restriction at position i PLUS one  
            SET height TO the MINIMUM OF height AND next_height PLUS next_idx MINUS idx  
            SET element at position one of restriction at position i TO height  
        END FOR  
        
        SET max_height TO zero  
        SET prev_idx TO element at position zero of restriction at position zero  
        SET prev_height TO element at position one of restriction at position zero  
        FOR i FROM one TO the LENGTH OF restrictions MINUS one  
            SET idx TO element at position zero of restriction at position i  
            SET height TO element at position one of restriction at position i  
            SET candidate_height TO idx MINUS prev_idx PLUS prev_height PLUS height DIVIDED BY two  
            IF candidate_height GREATER THAN max_height  
                SET max_height TO candidate_height  
            END IF  
            SET prev_idx TO idx  
            SET prev_height TO height  
        END FOR  
        
        SET candidate_height TO prev_height PLUS n MINUS prev_idx  
        IF candidate_height GREATER THAN max_height  
            SET max_height TO candidate_height  
        END IF  
        
        RETURN max_height  
    END FUNCTION  
END CLASS