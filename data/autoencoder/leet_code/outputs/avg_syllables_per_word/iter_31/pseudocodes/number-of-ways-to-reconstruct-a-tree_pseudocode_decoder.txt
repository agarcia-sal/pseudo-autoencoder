CLASS Solution  
    FUNCTION checkWays(pairs)  
        SET graph TO an empty mapping with default value as an empty set  
        FOR each x AND y IN pairs  
            ADD y TO the set of neighbors associated with x in graph  
            ADD x TO the set of neighbors associated with y in graph  
        END FOR  
        SET max_degree TO the element in graph with the maximum size of its associated set of neighbors  
        SET n TO the number of keys in graph  
        IF the size of the set of neighbors associated with max_degree NOT EQUALS n MINUS one  
            RETURN zero  
        END IF  

        FUNCTION can_be_parent(u, v)  
            RETURN whether all neighbors of v are contained in the set of neighbors associated with u OR are equal to u  
        END FUNCTION  

        SET ways TO one  
        FOR each u IN the keys of graph  
            IF u EQUALS max_degree  
                CONTINUE to the next iteration  
            END IF  
            SET parent TO no value  
            FOR each v IN the set of neighbors associated with u  
                IF v is a key in graph AND the size of the set of neighbors associated with v GREATER THAN OR EQUAL TO the size of the set of neighbors associated with u AND can_be_parent(v, u)  
                    IF parent has no value OR the size of the set of neighbors associated with v LESS THAN the size of the set of neighbors associated with parent  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  
            IF parent has no value  
                RETURN zero  
            END IF  
            IF the size of the set of neighbors associated with parent EQUALS the size of the set of neighbors associated with u  
                SET ways TO two  
            END IF  
        END FOR  
        RETURN ways  
    END FUNCTION  
END CLASS