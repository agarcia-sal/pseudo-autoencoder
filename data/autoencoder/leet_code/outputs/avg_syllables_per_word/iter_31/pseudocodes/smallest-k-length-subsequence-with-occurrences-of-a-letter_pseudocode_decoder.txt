CLASS Solution  
    FUNCTION smallestSubsequence(s parameter OF TYPE string, k parameter OF TYPE integer, letter parameter OF TYPE string, repetition parameter OF TYPE integer) RETURNS string  
        SET letter_count TO the NUMBER OF OCCURRENCES OF letter IN s  
        SET stack TO an EMPTY LIST  
        FOR each index i AND character char IN s WITH THEIR INDEXES  
            WHILE the LENGTH OF stack IS GREATER THAN zero AND  
                  the character char IS LESS THAN the ELEMENT AT THE LAST POSITION OF stack AND  
                  the SUM OF the LENGTH OF s MINUS index i AND the LENGTH OF stack MINUS one IS GREATER THAN OR EQUAL TO k  
                IF the ELEMENT AT THE LAST POSITION OF stack EQUALS letter  
                    IF letter_count IS GREATER THAN repetition  
                        INCREMENT repetition BY one  
                        REMOVE the ELEMENT AT THE LAST POSITION FROM stack  
                    ELSE  
                        BREAK THE WHILE LOOP  
                    END IF  
                ELSE  
                    REMOVE the ELEMENT AT THE LAST POSITION FROM stack  
                END IF  
            END WHILE  

            IF the LENGTH OF stack IS LESS THAN k  
                IF char EQUALS letter  
                    APPEND char TO stack  
                    DECREMENT repetition BY one  
                ELSE IF the DIFFERENCE BETWEEN k AND the LENGTH OF stack IS GREATER THAN repetition  
                    APPEND char TO stack  
                END IF  
                IF char EQUALS letter  
                    DECREMENT letter_count BY one  
                END IF  
            END IF  
        END FOR  

        WHILE the LENGTH OF stack IS LESS THAN k  
            APPEND letter TO stack  
        END WHILE  

        SET result TO the STRING FORMED BY CONCATENATING ALL ELEMENTS OF stack IN ORDER  
        RETURN result  
    END FUNCTION  
END CLASS