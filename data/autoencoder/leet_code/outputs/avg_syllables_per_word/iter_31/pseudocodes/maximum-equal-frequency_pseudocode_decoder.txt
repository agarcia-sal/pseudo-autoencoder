CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new empty frequency counter  
        SET freq TO a new empty frequency counter  
        SET max_len TO zero  
        
        FOR each index i AND element num IN nums  
            INCREMENT the count of num BY one  
            
            IF the count of num IS GREATER THAN one  
                DECREMENT the frequency count of the old frequency of num BY one  
                IF the frequency count of the old frequency of num IS EQUAL TO zero  
                    REMOVE the frequency count entry for the old frequency of num  
                END IF  
            END IF  
            
            INCREMENT the frequency count of the new frequency of num BY one  
            
            IF the number of unique frequencies IS EQUAL TO one AND either element one IS a key in freq OR the single value in freq IS EQUAL TO one  
                SET max_len TO the current index i PLUS one  
            ELSE IF the number of unique frequencies IS EQUAL TO two AND either element one IS a key in freq AND the frequency count associated with one IS EQUAL TO one OR the difference between the maximum key in freq AND the minimum key in freq IS EQUAL TO one AND the frequency count associated with the maximum key in freq IS EQUAL TO one  
                SET max_len TO the current index i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS