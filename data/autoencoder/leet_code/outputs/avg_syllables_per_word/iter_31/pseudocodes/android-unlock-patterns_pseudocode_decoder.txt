CLASS Solution  
    FUNCTION numberOfPatterns(m n)  
        SET jumps TO mapping of pairs of dots TO the dot that must be visited to jump over  
            pair one and three maps to two  
            pair one and seven maps to four  
            pair one and nine maps to five  
            pair two and eight maps to five  
            pair three and one maps to two  
            pair three and seven maps to five  
            pair three and nine maps to six  
            pair four and six maps to five  
            pair five and five maps to five  
            pair six and four maps to five  
            pair seven and one maps to four  
            pair seven and three maps to five  
            pair seven and nine maps to eight  
            pair eight and two maps to five  
            pair nine and one maps to five  
            pair nine and three maps to six  
            pair nine and seven maps to eight  

        FUNCTION countPatternsFromDot(current visited length)  
            IF length EQUALS n THEN  
                RETURN one  
            END IF  
            SET count TO one IF length GREATER THAN OR EQUAL TO m OTHERWISE zero  
            FOR next_dot FROM one TO nine  
                IF element at position next_dot of visited IS false THEN  
                    SET jump TO the value in jumps mapped by pair current and next_dot OR null if not present  
                    IF jump IS null OR element at position jump of visited IS true THEN  
                        SET element at position next_dot of visited TO true  
                        INCREMENT count BY result of calling countPatternsFromDot with next_dot visited and length PLUS one  
                        SET element at position next_dot of visited TO false  
                    END IF  
                END IF  
            END FOR  
            RETURN count  
        END FUNCTION  

        SET visited TO list of ten false values indexed from zero to nine  
        SET result TO zero  

        SET element at position one of visited TO true  
        INCREMENT result BY result of calling countPatternsFromDot with one visited and length one  
        SET element at position one of visited TO false  

        SET element at position two of visited TO true  
        INCREMENT result BY result of calling countPatternsFromDot with two visited and length one  
        SET element at position two of visited TO false  

        SET element at position five of visited TO true  
        INCREMENT result BY result of calling countPatternsFromDot with five visited and length one  
        SET element at position five of visited TO false  

        RETURN result MULTIPLIED BY four PLUS result MULTIPLIED BY four PLUS result MINUS result MINUS result  
        END FUNCTION  
END CLASS