CLASS Solution  
    FUNCTION superpalindromesInRange(left right)  
        FUNCTION is_palindrome(num)  
            SET string_form TO convert num TO string  
            SET reversed_string_form TO reverse string_form  
            RETURN string_form EQUALS reversed_string_form  
        END FUNCTION  
        
        FUNCTION generate_palindromes(limit)  
            SET palindromes TO empty list  
            FOR i FROM one TO one hundred thousand MINUS one  
                SET string_i TO convert i TO string  
                SET odd_palindrome TO convert concatenation of string_i AND substring of string_i from position length of string_i MINUS two TO position zero IN REVERSE ORDER TO integer  
                APPEND odd_palindrome TO palindromes  
                SET even_palindrome TO convert concatenation of string_i AND reverse of string_i TO integer  
                APPEND even_palindrome TO palindromes  
            END FOR  
            SET filtered_palindromes TO empty list  
            FOR each p IN palindromes  
                IF p LESS THAN OR EQUAL TO limit  
                    APPEND p TO filtered_palindromes  
                END IF  
            END FOR  
            RETURN filtered_palindromes  
        END FUNCTION  
        
        SET left TO convert left TO integer  
        SET right TO convert right TO integer  
        SET limit TO convert square root of right TO integer PLUS one  
        SET palindromes TO generate_palindromes(limit)  
        
        SET count TO zero  
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF left LESS THAN OR EQUAL TO square AND square LESS THAN OR EQUAL TO right AND is_palindrome(square)  
                INCREMENT count BY one  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS