CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO an empty mapping from elements of arr to their positions  
        FOR each position i FROM zero TO the LENGTH OF arr MINUS one  
            SET element x TO element at position i of arr  
            ASSIGN to index at key x the value i  
        END FOR  
        
        SET dp TO an empty mapping from pairs of positions to lengths  
        SET max_length TO zero  
        
        FOR each position k FROM zero TO the LENGTH OF arr MINUS one  
            FOR each position j FROM zero TO k MINUS one  
                SET difference_value TO element at position k of arr MINUS element at position j of arr  
                IF index contains the key difference_value THEN  
                    SET i TO value at key difference_value of index  
                ELSE  
                    SET i TO negative one  
                END IF  
                IF i is greater than or equal to zero AND i is less than j THEN  
                    IF dp contains the key pair of positions i and j THEN  
                        SET base_length TO value at key pair i and j of dp  
                    ELSE  
                        SET base_length TO two  
                    END IF  
                    ASSIGN to dp at key pair j and k the value base_length PLUS one  
                    IF max_length is less than value at key pair j and k of dp THEN  
                        SET max_length TO value at key pair j and k of dp  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        
        IF max_length is greater than or equal to three THEN  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS