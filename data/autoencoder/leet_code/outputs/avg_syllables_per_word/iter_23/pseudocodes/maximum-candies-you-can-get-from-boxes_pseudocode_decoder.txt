CLASS Solution  
    FUNCTION maxCandies(status PARAMETER, candies PARAMETER, keys PARAMETER, containedBoxes PARAMETER, initialBoxes PARAMETER)  
        SET boxes_we_have TO the set of elements in initialBoxes  
        SET keys_we_have TO an empty set  
        SET total_candies TO zero  
        SET progress_made TO true  
        
        WHILE progress_made holds  
            SET progress_made TO false  
            FOR each box IN the list of elements in boxes_we_have  
                IF the element at position box of status EQUALS one OR box IS an element of keys_we_have  
                    INCREMENT total_candies BY the element at position box of candies  
                    SET keys_we_have TO the union of keys_we_have AND the elements at position box of keys  
                    SET boxes_we_have TO the union of boxes_we_have AND the elements at position box of containedBoxes  
                    REMOVE box FROM boxes_we_have  
                    SET progress_made TO true  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN total_candies  
    END FUNCTION  
END CLASS