CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        CREATE index AS an empty mapping from element to position  
        FOR each element x and position i IN arr with natural counting  
            SET element at position x in index TO position i  
        END FOR  
        CREATE dp AS an empty mapping from pair of positions to length  
        SET max_length TO zero  
        
        FOR position k FROM one TO the length of arr  
            FOR position j FROM one TO position k MINUS one  
                SET difference TO element at position k of arr MINUS element at position j of arr  
                SET i TO the value associated with difference in index IF it exists OTHERWISE negative one  
                IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN j  
                    SET dp at pair j k TO the value associated with pair i j in dp IF it exists OTHERWISE two PLUS one  
                    IF dp at pair j k IS GREATER THAN max_length  
                        SET max_length TO dp at pair j k  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        
        IF max_length IS GREATER THAN OR EQUAL TO three  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS