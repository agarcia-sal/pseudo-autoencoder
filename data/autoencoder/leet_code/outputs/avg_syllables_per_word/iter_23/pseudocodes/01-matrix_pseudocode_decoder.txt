CLASS Solution  
    FUNCTION updateMatrix WITH PARAMETER mat  
        IF mat EQUALS nothing OR the element at position zero of mat EQUALS nothing  
            RETURN mat  
        END IF  
        SET rows TO the LENGTH OF mat  
        SET cols TO the LENGTH OF the element at position zero of mat  
        SET dist TO a new list consisting of rows elements each of which is a list consisting of cols elements each set to positive infinity  
        SET queue TO a new empty double ended queue  
        FOR r FROM zero TO rows MINUS one  
            FOR c FROM zero TO cols MINUS one  
                IF the element at position r of mat at position c EQUALS zero  
                    SET the element at position r of dist at position c TO zero  
                    APPEND the tuple consisting of r and c TO queue  
                END IF  
            END FOR  
        END FOR  
        SET directions TO a list consisting of four tuples each representing movement up down left and right  
        WHILE queue is not empty  
            SET r TO the first element of the tuple obtained by removing an element from the front of queue  
            SET c TO the second element of the tuple obtained by removing an element from the front of queue  
            FOR each tuple dr dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF zero LESS THAN OR EQUAL TO nr AND nr LESS THAN rows AND zero LESS THAN OR EQUAL TO nc AND nc LESS THAN cols AND the element at position nr of dist at position nc GREATER THAN the element at position r of dist at position c PLUS one  
                    SET the element at position nr of dist at position nc TO the element at position r of dist at position c PLUS one  
                    APPEND the tuple consisting of nr and nc TO queue  
                END IF  
            END FOR  
        END WHILE  
        RETURN dist  
    END FUNCTION  
END CLASS