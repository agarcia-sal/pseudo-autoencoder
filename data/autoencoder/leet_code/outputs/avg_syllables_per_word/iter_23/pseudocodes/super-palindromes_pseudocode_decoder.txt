CLASS Solution  
    FUNCTION superpalindromesInRange(left right)  
        FUNCTION is_palindrome(num)  
            SET string_representation TO string form of num  
            SET reversed_string TO string_representation reversed from last character to first character  
            IF string_representation EQUALS reversed_string  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  
        
        FUNCTION generate_palindromes(limit)  
            SET palindromes TO empty list  
            FOR integer i FROM one TO one hundred thousand MINUS one  
                SET string_i TO string form of i  
                SET odd_palindrome_string TO string_i PLUS substring of string_i from second last character TO first character reversed  
                SET even_palindrome_string TO string_i PLUS string_i reversed  
                APPEND integer form of odd_palindrome_string TO palindromes  
                APPEND integer form of even_palindrome_string TO palindromes  
            END FOR  
            SET filtered_palindromes TO empty list  
            FOR each palindrome IN palindromes  
                IF palindrome LESS THAN OR EQUAL TO limit  
                    APPEND palindrome TO filtered_palindromes  
                END IF  
            END FOR  
            RETURN filtered_palindromes  
        END FUNCTION  
        
        SET left TO integer form of left  
        SET right TO integer form of right  
        SET limit TO integer part of square root of right PLUS one  
        SET palindromes TO generate_palindromes(limit)  
        SET count TO zero  
        
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF left LESS THAN OR EQUAL TO square AND square LESS THAN OR EQUAL TO right AND is_palindrome(square) EQUALS true  
                INCREMENT count BY one  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS