CLASS Solution  
    FUNCTION countSpecialSubsequences(nums)  
        SET MOD TO ten raised to the power of nine PLUS one  
        SET dp TO a list of three zeros representing counts of special subsequences ending with zero one and two respectively  
        FOR each num IN nums  
            IF num EQUALS zero  
                SET the first element of dp TO two MULTIPLIED BY the first element of dp PLUS one MODULO MOD  
            ELSE IF num EQUALS one  
                SET the second element of dp TO two MULTIPLIED BY the second element of dp PLUS the first element of dp MODULO MOD  
            ELSE IF num EQUALS two  
                SET the third element of dp TO two MULTIPLIED BY the third element of dp PLUS the second element of dp MODULO MOD  
            END IF  
        END FOR  
        RETURN the third element of dp  
    END FUNCTION  
END CLASS