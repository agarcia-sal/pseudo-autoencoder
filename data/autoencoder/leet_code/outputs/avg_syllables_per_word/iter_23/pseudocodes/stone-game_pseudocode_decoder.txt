CLASS Solution  
    FUNCTION stoneGame WITH parameter piles  
        FUNCTION dfs WITH parameters i j  
            IF i GREATER THAN j THEN  
                RETURN zero  
            END IF  
            RETURN the MAXIMUM OF the element at position i of piles MINUS the RESULT OF dfs WITH parameters i PLUS one j AND the element at position j of piles MINUS the RESULT OF dfs WITH parameters i j MINUS one  
        END FUNCTION  
        RETURN the RESULT OF dfs WITH parameters zero the LENGTH OF piles MINUS one GREATER THAN zero  
    END FUNCTION  
END CLASS