CLASS Solution  
    FUNCTION isEscapePossible(blocked blocked parameter IS A LIST OF LIST OF INTEGERS source source parameter IS A LIST OF INTEGERS target target parameter IS A LIST OF INTEGERS) RETURNS BOOLEAN  
        IF blocked EQUALS an empty collection  
            RETURN True  
        END IF  

        SET blocked_set TO a set CONTAINING each element CONVERTED TO a tuple FROM blocked  
        SET n TO the LENGTH OF blocked  
        SET max_steps TO n MULTIPLIED BY (n MINUS one) DIVIDED BY two  

        FUNCTION bfs(start start parameter IS A LIST OF INTEGERS end end parameter IS A LIST OF INTEGERS) RETURNS BOOLEAN  
            SET queue TO a double-ended queue INITIALIZED WITH a single element CONVERTED TO a tuple FROM start  
            SET visited TO a set INITIALIZED WITH the elements OF queue  
            
            WHILE the LENGTH OF queue IS GREATER THAN zero  
                REMOVE THE FIRST element FROM queue AND DECOMPOSE INTO x AND y  
                
                IF the LENGTH OF visited IS GREATER THAN max_steps OR (x EQUALS the element at position zero OF end AND y EQUALS the element at position one OF end)  
                    RETURN True  
                END IF  
                
                FOR each pair dx AND dy IN the collection OF four pairs CONTAINING zero AND one zero AND negative one one AND zero negative one AND zero  
                    SET nx TO x PLUS dx  
                    SET ny TO y PLUS dy  
                    IF nx IS GREATER THAN OR EQUAL TO zero AND nx IS LESS THAN one million AND ny IS GREATER THAN OR EQUAL TO zero AND ny IS LESS THAN one million AND the tuple OF nx AND ny IS NOT IN blocked_set AND the tuple OF nx AND ny IS NOT IN visited  
                        ADD the tuple OF nx AND ny TO visited  
                        APPEND the tuple OF nx AND ny TO queue  
                    END IF  
                END FOR  
            END WHILE  
            
            RETURN False  
        END FUNCTION  

        RETURN the result OF bfs WITH arguments source AND target AND the result OF bfs WITH arguments target AND source  
    END FUNCTION  
END CLASS