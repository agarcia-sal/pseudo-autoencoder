CLASS Solution  
    FUNCTION numberOfPatterns(m n)  
        SET jumps TO a mapping of pairs TO middle dot where the middle dot must be visited before jumping  
            with pair one three mapped TO two  
            pair one seven mapped TO four  
            pair one nine mapped TO five  
            pair two eight mapped TO five  
            pair three one mapped TO two  
            pair three seven mapped TO five  
            pair three nine mapped TO six  
            pair four six mapped TO five  
            pair five five mapped TO five  
            pair six four mapped TO five  
            pair seven one mapped TO four  
            pair seven three mapped TO five  
            pair seven nine mapped TO eight  
            pair eight two mapped TO five  
            pair nine one mapped TO five  
            pair nine three mapped TO six  
            pair nine seven mapped TO eight  
  
        FUNCTION countPatternsFromDot(current visited length)  
            IF length EQUALS n  
                RETURN one  
            END IF  
            SET count TO one IF length GREATER THAN OR EQUAL TO m ELSE zero  
            FOR next_dot FROM one TO nine  
                IF element at position next_dot of visited EQUALS False  
                    SET jump TO the value associated with the pair current next_dot in jumps or None if no mapping exists  
                    IF jump IS None OR element at position jump of visited EQUALS True  
                        SET element at position next_dot of visited TO True  
                        INCREMENT count BY the result of countPatternsFromDot with next_dot visited length PLUS one  
                        SET element at position next_dot of visited TO False  
                    END IF  
                END IF  
            END FOR  
            RETURN count  
        END FUNCTION  
  
        SET visited TO a list of False values with length ten  
        SET result TO zero  
        FOR i FROM one TO nine  
            SET element at position i of visited TO True  
            INCREMENT result BY the result of countPatternsFromDot with i visited one  
            SET element at position i of visited TO False  
        END FOR  
  
        RETURN result  
    END FUNCTION  
END CLASS