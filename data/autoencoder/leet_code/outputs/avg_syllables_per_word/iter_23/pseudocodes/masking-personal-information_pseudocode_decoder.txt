CLASS Solution  
    FUNCTION maskPII WITH PARAMETER s  
        IF character AT position one of AT SYMBOL is IN s  
            SPLIT s INTO local PART AND domain PART BY AT SYMBOL  
            SET masked_local TO CONCATENATION OF first character of local, FIVE ASTERISKS, last character of local  
            RETURN masked_local CONVERTED TO LOWERCASE CONCATENATED WITH AT SYMBOL CONCATENATED WITH domain CONVERTED TO LOWERCASE  
        ELSE  
            SET digits TO EMPTY STRING  
            FOR each character IN s  
                IF character IS A DIGIT  
                    APPEND character TO digits  
                END IF  
            END FOR  
            SET local_number TO THREE ASTERISKS DASH THREE ASTERISKS DASH concatenation of last FOUR characters of digits  
            IF length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO length of digits MINUS ten  
                SET country_code TO PLUS SYMBOL CONCATENATED WITH country_code_length ASTERISKS CONCATENATED WITH DASH SYMBOL  
                RETURN country_code CONCATENATED WITH local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS