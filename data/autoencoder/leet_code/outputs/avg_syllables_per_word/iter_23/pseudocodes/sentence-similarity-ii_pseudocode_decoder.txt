CLASS Solution  
    FUNCTION areSentencesSimilarTwo(sentence1 sentence1 OF TYPE list OF string sentence2 sentence2 OF TYPE list OF string similarPairs similarPairs OF TYPE list OF list OF string) RETURNS boolean  
        IF the LENGTH OF sentence1 NOT EQUALS the LENGTH OF sentence2  
            RETURN false  
        END IF  

        SET parent TO an empty dictionary  

        FUNCTION find(x)  
            IF the parent at key x NOT EQUALS x  
                SET the parent at key x TO the result of find WITH the parent at key x  
            END IF  
            RETURN the parent at key x  
        END FUNCTION  

        FUNCTION union(x x OF TYPE string y y OF TYPE string)  
            SET rootX TO the result of find WITH x  
            SET rootY TO the result of find WITH y  
            IF rootX NOT EQUALS rootY  
                SET the parent at key rootY TO rootX  
            END IF  
        END FUNCTION  

        FOR each pair IN similarPairs  
            FOR each word IN pair  
                IF word NOT IN parent  
                    SET the parent at key word TO word  
                END IF  
            END FOR  
        END FOR  

        FOR each element x y IN similarPairs  
            CALL union WITH x AND y  
        END FOR  

        FOR each element w1 w2 IN sentence1 AND sentence2 simultaneously  
            IF w1 NOT IN parent  
                SET the parent at key w1 TO w1  
            END IF  
            IF w2 NOT IN parent  
                SET the parent at key w2 TO w2  
            END IF  
            IF the result of find WITH w1 NOT EQUALS the result of find WITH w2  
                RETURN false  
            END IF  
        END FOR  

        RETURN true  
    END FUNCTION  
END CLASS