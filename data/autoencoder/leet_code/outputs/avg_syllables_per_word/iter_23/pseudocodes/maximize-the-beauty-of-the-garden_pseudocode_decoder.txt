CLASS Solution  
    FUNCTION maximumBeauty(flowers)  
        SET indices TO a new dictionary with default value as an empty list  
        SET prefix_sum TO a list of zeros with the length of the length of flowers PLUS one  
        FOR index FROM zero TO the length of flowers MINUS one  
            SET value_at_index TO element at position index of flowers  
            SET element at position index PLUS one of prefix_sum TO element at position index of prefix_sum PLUS the greater value between value_at_index AND zero  
            APPEND index TO the list at key value_at_index in indices  
        END FOR  
        SET max_beauty TO negative infinity  
        FOR each beauty_value IN keys of indices  
            IF the length of element at key beauty_value in indices IS GREATER THAN OR EQUAL TO two  
                SET first TO element at position zero of element at key beauty_value in indices  
                SET last TO element at position last position of element at key beauty_value in indices  
                SET current_beauty TO two MULTIPLIED BY beauty_value PLUS element at position last of prefix_sum MINUS element at position first PLUS one of prefix_sum  
                IF current_beauty IS GREATER THAN max_beauty  
                    SET max_beauty TO current_beauty  
                END IF  
            END IF  
        END FOR  
        RETURN max_beauty  
    END FUNCTION  
END CLASS