CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS reverse_of s  
        END FUNCTION  
        
        SET word_dict TO an empty dictionary mapping each word IN words TO its index position  
        SET result TO an empty list  
        
        FOR index i FROM zero TO the length of words MINUS one  
            SET word TO element at position i of words  
            IF word EQUALS empty string THEN  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string IS IN word_dict AND is_palindrome(word) THEN  
                APPEND list of i AND element at empty string key of word_dict TO result  
                APPEND list of element at empty string key of word_dict AND i TO result  
            END IF  
            
            SET reversed_word TO reverse_of word  
            IF reversed_word IS IN word_dict AND element at reversed_word key of word_dict NOT EQUALS i THEN  
                APPEND list of i AND element at reversed_word key of word_dict TO result  
            END IF  
            
            FOR index j FROM one TO the length of word MINUS one  
                SET prefix TO substring of word from position zero TO position j MINUS one  
                SET suffix TO substring of word from position j TO end of word  
                SET reversed_prefix TO reverse_of prefix  
                SET reversed_suffix TO reverse_of suffix  
                
                IF is_palindrome(suffix) AND reversed_prefix IS IN word_dict THEN  
                    APPEND list of i AND element at reversed_prefix key of word_dict TO result  
                END IF  
                
                IF is_palindrome(prefix) AND reversed_suffix IS IN word_dict THEN  
                    APPEND list of element at reversed_suffix key of word_dict AND i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS