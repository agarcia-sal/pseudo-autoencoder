CLASS Solution  
    FUNCTION numSubmatrixSumTarget(matrix parameter, target parameter)  
        FUNCTION subarraySum(nums parameter, target parameter)  
            SET count TO zero  
            CREATE empty mapping from integer to integer named seen_sums with default zero  
            SET cumulative_sum TO zero  
            FOR each num IN nums  
                SET cumulative_sum TO cumulative_sum PLUS num  
                IF cumulative_sum EQUALS target THEN  
                    INCREMENT count BY one  
                END IF  
                IF cumulative_sum MINUS target IS A KEY IN seen_sums THEN  
                    INCREMENT count BY the value mapped by cumulative_sum MINUS target in seen_sums  
                END IF  
                INCREMENT the value mapped by cumulative_sum in seen_sums BY one  
            END FOR  
            RETURN count  
        END FUNCTION  
  
        SET rows TO the length of matrix  
        SET cols TO the length of element at position zero of matrix  
        SET total_count TO zero  
  
        FOR top FROM zero TO rows MINUS one  
            CREATE list named current_cols of length cols filled with zero  
            FOR bottom FROM top TO rows MINUS one  
                FOR col FROM zero TO cols MINUS one  
                    SET element at position col of current_cols TO element at position col of current_cols PLUS element at position col of element at position bottom of matrix  
                END FOR  
                SET total_count TO total_count PLUS subarraySum called with current_cols and target  
            END FOR  
        END FOR  
  
        RETURN total_count  
    END FUNCTION  
END CLASS