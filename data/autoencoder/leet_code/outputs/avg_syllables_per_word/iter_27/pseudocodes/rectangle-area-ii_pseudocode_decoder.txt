CLASS Solution  
    FUNCTION rectangleArea(rectangles)  
        SET MOD TO ten raised to the power of nine PLUS one  
        
        SET y_coords TO an empty set  
        FOR each rectangle IN rectangles  
            DESTRUCTURE rectangle INTO x1 y1 x2 y2  
            ADD y1 TO y_coords  
            ADD y2 TO y_coords  
        END FOR  
        
        SET y_coords TO the sorted list of elements in y_coords  
        
        SET y_index TO an empty dictionary  
        FOR each index AND y IN enumeration of y_coords  
            SET y_index element at y TO index  
        END FOR  
        
        SET count TO a list of zeros with the length equal to the length of y_coords  
        
        SET events TO an empty list  
        FOR each rectangle IN rectangles  
            DESTRUCTURE rectangle INTO x1 y1 x2 y2  
            APPEND a tuple consisting of x1 AND one AND y1 AND y2 TO events  
            APPEND a tuple consisting of x2 AND negative one AND y1 AND y2 TO events  
        END FOR  
        
        SORT events by the first element of each tuple which is the x-coordinate  
        
        SET prev_x TO zero  
        SET area TO zero  
        
        FOR each event IN events  
            DESTRUCTURE event INTO x eventType y1 y2  
            
            SET current_length TO zero  
            FOR each i FROM one TO the length of count MINUS one  
                IF element at position i MINUS one of count IS GREATER THAN zero  
                    SET current_length TO current_length PLUS the element at position i of y_coords MINUS the element at position i MINUS one of y_coords  
                END IF  
            END FOR  
            
            SET area TO area PLUS current_length MULTIPLIED BY the difference between x AND prev_x  
            SET area TO the remainder of area DIVIDED BY MOD  
            
            IF eventType EQUALS one  
                FOR each i FROM the element at position y1 of y_index TO the element at position y2 of y_index MINUS one  
                    INCREMENT element at position i of count BY one  
                END FOR  
            ELSE  
                FOR each i FROM the element at position y1 of y_index TO the element at position y2 of y_index MINUS one  
                    DECREMENT element at position i of count BY one  
                END FOR  
            END IF  
            
            SET prev_x TO x  
        END FOR  
        
        RETURN area  
    END FUNCTION  
END CLASS