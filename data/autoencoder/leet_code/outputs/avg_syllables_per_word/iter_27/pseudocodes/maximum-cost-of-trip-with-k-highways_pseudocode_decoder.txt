CLASS Solution  
    FUNCTION maximumCost(n, highways, k)  
        CREATE an empty mapping named graph with default empty list for each key  
        FOR each element highway IN highways  
            EXTRACT city1 AS the element at position zero of highway  
            EXTRACT city2 AS the element at position one of highway  
            EXTRACT toll AS the element at position two of highway  
            APPEND a pair consisting of city2 and toll TO the list at key city1 in graph  
            APPEND a pair consisting of city1 and toll TO the list at key city2 in graph  
        END FOR  

        SET max_cost TO minus one  

        FUNCTION dfs(city, visited, cost, highways_used)  
            IF highways_used EQUALS k THEN  
                SET max_cost TO the greater value BETWEEN max_cost AND cost  
                RETURN  
            END IF  
            FOR each element neighbor_toll IN the list at key city in graph  
                EXTRACT neighbor AS the element at position zero of neighbor_toll  
                EXTRACT toll AS the element at position one of neighbor_toll  
                IF neighbor NOT IN visited THEN  
                    ADD neighbor TO visited  
                    CALL dfs WITH neighbor visited cost PLUS toll highways_used PLUS one  
                    REMOVE neighbor FROM visited  
                END IF  
            END FOR  
        END FUNCTION  

        FOR start_city FROM zero TO n MINUS one  
            CREATE visited AS a set containing start_city  
            CALL dfs WITH start_city visited zero zero  
        END FOR  

        RETURN max_cost  
    END FUNCTION  
END CLASS