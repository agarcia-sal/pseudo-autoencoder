CLASS Solution  
    FUNCTION largestRectangleArea(heights)  
        SET stack TO a list containing a single element negative one  
        SET max_area TO zero  
        APPEND zero TO heights  
        FOR each index i AND each height h IN the enumeration of heights  
            WHILE the element at the top position of stack NOT EQUALS negative one AND height h LESS THAN the element at position of element at the top position of stack in heights  
                SET height TO the element at position obtained by removing the top element of stack from heights  
                SET width TO index i MINUS the new top element of stack MINUS one  
                IF max_area LESS THAN height MULTIPLIED BY width  
                    SET max_area TO height MULTIPLIED BY width  
                END IF  
            END WHILE  
            APPEND index i TO stack  
        END FOR  
        RETURN max_area  
    END FUNCTION  
END CLASS