CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph EQUALS empty  
            RETURN zero  
        END IF  

        SET n TO the LENGTH OF graph  
        SET queue TO a new double ended queue containing each pair of node and bitmask with the bit corresponding to node set for each node FROM zero TO n MINUS one  
        SET visited TO a new set containing each pair of node and bitmask with the bit corresponding to node set for each node FROM zero TO n MINUS one  

        SET steps TO zero  
        SET all_nodes_visited TO one LEFT SHIFTED BY n MINUS one  

        WHILE queue IS NOT empty  
            SET current_level_size TO the LENGTH OF queue  
            FOR each index FROM zero TO current_level_size MINUS one  
                REMOVE the element at the front of queue and ASSIGN TO current_node AND visited_nodes  

                IF visited_nodes EQUALS all_nodes_visited  
                    RETURN steps  
                END IF  

                FOR each neighbor IN element at position current_node of graph  
                    SET next_visited_nodes TO visited_nodes OR one LEFT SHIFTED BY neighbor  
                    SET next_state TO the pair of neighbor AND next_visited_nodes  

                    IF next_state IS NOT IN visited  
                        ADD next_state TO visited  
                        ADD next_state TO the back of queue  
                    END IF  
                END FOR  
            END FOR  

            INCREMENT steps BY one  
        END WHILE  

        RETURN negative one  
    END FUNCTION  
END CLASS