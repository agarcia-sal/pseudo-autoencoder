CLASS Solution  
    FUNCTION maxCandies(status LIST OF INTEGER status PARAMETER candies LIST OF INTEGER candies PARAMETER keys LIST OF LIST OF INTEGER keys PARAMETER containedBoxes LIST OF LIST OF INTEGER containedBoxes PARAMETER initialBoxes LIST OF INTEGER initialBoxes PARAMETER)  
        SET boxes_we_have TO the SET of elements in initialBoxes  
        SET keys_we_have TO an empty SET  
        SET total_candies TO zero  
        SET progress_made TO true  
        WHILE progress_made EQUALS true  
            SET progress_made TO false  
            FOR each box IN the LIST converted from boxes_we_have  
                IF the element at position box of status EQUALS one OR the set keys_we_have CONTAINS box  
                    SET total_candies TO total_candies PLUS the element at position box of candies  
                    ADD all elements in the element at position box of keys TO keys_we_have  
                    ADD all elements in the element at position box of containedBoxes TO boxes_we_have  
                    REMOVE box FROM boxes_we_have  
                    SET progress_made TO true  
                END IF  
            END FOR  
        END WHILE  
        RETURN total_candies  
    END FUNCTION  
END CLASS