CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET length TO the LENGTH OF n  
        IF length EQUALS one  
            CONVERT n TO an INTEGER  
            SET result_number TO that INTEGER MINUS one  
            CONVERT result_number TO a STRING  
            RETURN that STRING  
        END IF  
        
        SET candidates TO an EMPTY SET  
        
        COMPUTE ten_power_length PLUS one AS ten RAISED TO THE POWER OF length PLUS one  
        ADD ten_power_length PLUS one TO candidates  
        
        COMPUTE ten_power_length_minus_one MINUS one AS ten RAISED TO THE POWER OF length MINUS one MINUS one  
        ADD ten_power_length_minus_one MINUS one TO candidates  
        
        COMPUTE prefix_length AS integer division OF length PLUS one BY two  
        EXTRACT substring of n FROM position one TO prefix_length  
        CONVERT substring TO an INTEGER AND SET TO prefix  
        
        FOR i FROM negative one TO positive one  
            COMPUTE new_prefix_number AS prefix PLUS i  
            CONVERT new_prefix_number TO a STRING AND SET TO new_prefix  
            
            IF length MODULO two EQUALS zero  
                SET reversed_part TO the REVERSE OF new_prefix  
                SET candidate_string TO CONCATENATION OF new_prefix AND reversed_part  
            ELSE  
                SET reversed_part TO the REVERSE OF substring of new_prefix FROM position one TO position length of new_prefix MINUS one  
                SET candidate_string TO CONCATENATION OF new_prefix AND reversed_part  
            END IF  
            
            CONVERT candidate_string TO an INTEGER AND ADD TO candidates  
        END FOR  
        
        CONVERT n TO an INTEGER AND SET TO original_number  
        REMOVE original_number FROM candidates IF IT EXISTS  
        
        SET closest TO an ELEMENT OF candidates THAT MINIMIZES A PAIR composed of the ABSOLUTE VALUE OF element MINUS original_number AND element ITSELF  
        
        CONVERT closest TO a STRING  
        RETURN closest  
    END FUNCTION  
END CLASS