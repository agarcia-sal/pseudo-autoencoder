CLASS Solution  
    FUNCTION numBusesToDestination(routes, source, target)  
        IF source EQUALS target  
            RETURN zero  
        END IF  

        SET stop_to_buses TO a mapping with default of empty list  

        FOR bus FROM zero TO the length of routes MINUS one  
            SET route TO element at position bus of routes  
            FOR each stop IN route  
                APPEND bus TO element at position stop of stop_to_buses  
            END FOR  
        END FOR  

        SET bus_queue TO an empty queue  
        SET visited_buses TO an empty set  
        SET visited_stops TO an empty set  

        FOR each bus IN element at position source of stop_to_buses  
            APPEND a pair consisting of bus AND one TO bus_queue  
            ADD bus TO visited_buses  
            ADD source TO visited_stops  
        END FOR  

        WHILE bus_queue is not empty  
            REMOVE and retrieve the first element of bus_queue INTO current_bus AND bus_count  

            FOR each stop IN element at position current_bus of routes  
                IF stop EQUALS target  
                    RETURN bus_count  
                END IF  

                IF stop is not an element of visited_stops  
                    ADD stop TO visited_stops  
                    FOR each next_bus IN element at position stop of stop_to_buses  
                        IF next_bus is not an element of visited_buses  
                            ADD next_bus TO visited_buses  
                            APPEND a pair consisting of next_bus AND bus_count PLUS one TO bus_queue  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END WHILE  

        RETURN negative one  
    END FUNCTION  
END CLASS