CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND a pair consisting of one and zero TO restrictions  
        SORT restrictions IN ascending order  
        
        FOR i FROM one TO the LENGTH OF restrictions MINUS one  
            ASSIGN idx TO the element at position zero of the element at position i of restrictions  
            ASSIGN height TO the element at position one of the element at position i of restrictions  
            ASSIGN prev_idx TO the element at position zero of the element at position i MINUS one of restrictions  
            ASSIGN prev_height TO the element at position one of the element at position i MINUS one of restrictions  
            SET the element at position one of the element at position i of restrictions TO the lesser VALUE BETWEEN height AND prev_height PLUS idx MINUS prev_idx  
        END FOR  
        
        FOR i FROM the LENGTH OF restrictions MINUS two DOWN TO zero  
            ASSIGN idx TO the element at position zero of the element at position i of restrictions  
            ASSIGN height TO the element at position one of the element at position i of restrictions  
            ASSIGN next_idx TO the element at position zero of the element at position i PLUS one of restrictions  
            ASSIGN next_height TO the element at position one of the element at position i PLUS one of restrictions  
            SET the element at position one of the element at position i of restrictions TO the lesser VALUE BETWEEN height AND next_height PLUS next_idx MINUS idx  
        END FOR  
        
        SET max_height TO zero  
        ASSIGN prev_idx TO the element at position zero of the element at position zero of restrictions  
        ASSIGN prev_height TO the element at position one of the element at position zero of restrictions  
        
        FOR i FROM one TO the LENGTH OF restrictions MINUS one  
            ASSIGN idx TO the element at position zero of the element at position i of restrictions  
            ASSIGN height TO the element at position one of the element at position i of restrictions  
            SET candidate_height TO the VALUE OF idx MINUS prev_idx PLUS prev_height PLUS height DIVIDED BY two  
            IF candidate_height GREATER THAN max_height THEN  
                SET max_height TO candidate_height  
            END IF  
            ASSIGN prev_idx TO idx  
            ASSIGN prev_height TO height  
        END FOR  
        
        IF prev_height PLUS n MINUS prev_idx GREATER THAN max_height THEN  
            SET max_height TO prev_height PLUS n MINUS prev_idx  
        END IF  
        
        RETURN max_height  
    END FUNCTION  
END CLASS