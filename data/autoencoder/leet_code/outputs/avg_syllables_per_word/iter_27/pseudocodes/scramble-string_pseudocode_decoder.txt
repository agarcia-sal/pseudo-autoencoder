CLASS Solution  
    FUNCTION isScramble(s1 s2)  
        IF string s1 EQUALS string s2  
            RETURN True  
        END IF  
        IF sorted characters of string s1 NOT EQUALS sorted characters of string s2  
            RETURN False  
        END IF  
        SET n TO the LENGTH OF string s1  
        FOR index i FROM one TO n MINUS one  
            IF isScramble(substring from position one TO position i of string s1) AND isScramble(substring from position one TO position i of string s2) AND isScramble(substring from position i PLUS one TO end of string s1) AND isScramble(substring from position i PLUS one TO end of string s2)  
                RETURN True  
            END IF  
            IF isScramble(substring from position one TO position i of string s1) AND isScramble(substring from position LENGTH OF string s2 MINUS i PLUS one TO end of string s2) AND isScramble(substring from position i PLUS one TO end of string s1) AND isScramble(substring from position one TO position LENGTH OF string s2 MINUS i of string s2)  
                RETURN True  
            END IF  
        END FOR  
        RETURN False  
    END FUNCTION  
END CLASS