CLASS Solution
    FUNCTION countSmaller(nums)
        SET unique_numbers TO the unique elements of nums
        SET sorted_nums TO unique_numbers sorted in ascending order
        SET rank TO an empty dictionary
        FOR index FROM zero TO the length of sorted_nums MINUS one
            SET element_at_position_index_of_sorted_nums TO the element at position index of sorted_nums
            ASSIGN to rank the mapping from element_at_position_index_of_sorted_nums TO index PLUS one
        END FOR

        SET bit TO a list of zeros with the length of the length of sorted_nums PLUS one

        FUNCTION get_sum(idx)
            SET result TO zero
            WHILE idx GREATER THAN zero
                INCREMENT result BY element at position idx of bit
                DECREMENT idx BY the bitwise AND of idx and the negation of idx interpreted as natural language BITWISE AND
            END WHILE
            RETURN result
        END FUNCTION

        FUNCTION update(idx, delta)
            WHILE idx LESS THAN the length of bit
                INCREMENT element at position idx of bit BY delta
                INCREMENT idx BY the bitwise AND of idx and the negation of idx interpreted as natural language BITWISE AND
            END WHILE
        END FUNCTION

        SET counts TO an empty list
        FOR each number IN the reversed sequence of nums
            SET r TO the value in rank corresponding to number
            APPEND to counts the result of get_sum with the argument r MINUS one
            CALL update with the arguments r AND one
        END FOR

        RETURN counts in the reversed order
    END FUNCTION
END CLASS