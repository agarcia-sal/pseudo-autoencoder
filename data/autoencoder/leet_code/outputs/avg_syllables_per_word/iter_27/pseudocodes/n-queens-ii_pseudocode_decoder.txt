CLASS Solution  
    FUNCTION totalNQueens WITH PARAMETER n  
        FUNCTION is_not_under_attack WITH PARAMETERS row AND col  
            RETURN the NEGATION OF the SUM of the element at position col of cols PLUS the element at position the difference of row MINUS col of hills PLUS the element at position the sum of row PLUS col of dales  
        END FUNCTION  

        FUNCTION place_queen WITH PARAMETERS row AND col  
            SET the element at position col of cols TO one  
            SET the element at position the difference of row MINUS col of hills TO one  
            SET the element at position the sum of row PLUS col of dales TO one  
        END FUNCTION  

        FUNCTION remove_queen WITH PARAMETERS row AND col  
            SET the element at position col of cols TO zero  
            SET the element at position the difference of row MINUS col of hills TO zero  
            SET the element at position the sum of row PLUS col of dales TO zero  
        END FUNCTION  

        FUNCTION backtrack WITH PARAMETERS optional row defaulting to zero AND optional count defaulting to zero  
            FOR col FROM zero TO the difference of n MINUS one  
                IF the call to is_not_under_attack WITH arguments row AND col HOLDS  
                    CALL place_queen WITH arguments row AND col  
                    IF the sum of row PLUS one EQUALS n  
                        INCREMENT count BY one  
                    ELSE  
                        SET count TO the result of the call to backtrack WITH arguments the sum of row PLUS one AND count  
                    END IF  
                    CALL remove_queen WITH arguments row AND col  
                END IF  
            END FOR  
            RETURN count  
        END FUNCTION  

        SET cols TO a list of zeros OF LENGTH n  
        SET hills TO a list of zeros OF LENGTH the difference of the product of two AND n MINUS one  
        SET dales TO a list of zeros OF LENGTH the difference of the product of two AND n MINUS one  

        RETURN the result of the call to backtrack WITH no arguments  
    END FUNCTION  
END CLASS