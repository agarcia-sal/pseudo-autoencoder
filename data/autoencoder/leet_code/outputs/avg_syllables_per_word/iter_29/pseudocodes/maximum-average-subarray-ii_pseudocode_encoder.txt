CLASS Solution  
    FUNCTION findMaxAverage(nums, k)  
        FUNCTION canFindAverage(mid)  
            SET prefix_sums TO a list of zeros with the length of the length of nums PLUS one  
            SET min_prefix_sum TO a list of zeros with the length of the length of nums PLUS one  
            FOR index FROM zero TO the length of nums MINUS one  
                SET the element at position index PLUS one of prefix_sums TO the element at position index of prefix_sums PLUS the element at position index of nums MINUS mid  
                IF index GREATER THAN OR EQUAL TO k  
                    SET the element at position index PLUS one of min_prefix_sum TO the smaller value BETWEEN the element at position index of min_prefix_sum AND the element at position index PLUS one MINUS k of prefix_sums  
                ELSE  
                    SET the element at position index PLUS one of min_prefix_sum TO the element at position index of min_prefix_sum  
                END IF  
                IF index GREATER THAN OR EQUAL TO k MINUS one AND the element at position index PLUS one of prefix_sums MINUS the element at position index PLUS one of min_prefix_sum GREATER THAN OR EQUAL TO zero  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  
        SET low TO the smallest value in nums  
        SET high TO the largest value in nums  
        WHILE the difference BETWEEN high AND low GREATER THAN one divided BY one hundred thousand  
            SET mid TO the sum of low AND high DIVIDED BY two  
            IF canFindAverage(mid) IS True  
                SET low TO mid  
            ELSE  
                SET high TO mid  
            END IF  
        END WHILE  
        RETURN low  
    END FUNCTION  
END CLASS