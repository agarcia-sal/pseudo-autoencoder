CLASS Solution  
    FUNCTION candy(ratings)  
        SET n TO the LENGTH OF ratings  
        SET candies TO a COLLECTION of size n WHERE each element IS one  
        
        FOR i FROM one TO n MINUS one  
            IF the element at position i of ratings IS GREATER THAN the element at position i MINUS one of ratings  
                SET the element at position i of candies TO the element at position i MINUS one of candies PLUS one  
            END IF  
        END FOR  
        
        FOR i FROM n MINUS two DOWN TO zero  
            IF the element at position i of ratings IS GREATER THAN the element at position i PLUS one of ratings  
                SET the element at position i of candies TO the GREATER OF the element at position i of candies AND the element at position i PLUS one of candies PLUS one  
            END IF  
        END FOR  
        
        SET total_candies TO zero  
        FOR each candy_count IN candies  
            INCREMENT total_candies BY candy_count  
        END FOR  
        
        RETURN total_candies  
    END FUNCTION  
END CLASS