CLASS Solution  
    FUNCTION numBusesToDestination(routes THE LIST OF LIST OF INTEGER NUMBERS source THE INTEGER NUMBER target THE INTEGER NUMBER)  
        IF source EQUALS target  
            RETURN zero  
        END IF  
        SET stop_to_buses TO a new empty mapping from stop TO list of buses  
        FOR each bus WITH index bus_index AND route route_list IN routes  
            FOR each stop IN route_list  
                APPEND bus_index TO the list mapped to stop IN stop_to_buses  
            END FOR  
        END FOR  
        SET bus_queue TO a new empty double ended queue  
        SET visited_buses TO a new empty set  
        SET visited_stops TO a new empty set  
        FOR each bus IN the list mapped to source IN stop_to_buses  
            APPEND the pair of bus AND the number one AS the initial bus count TO bus_queue      
            ADD bus TO visited_buses  
            ADD source TO visited_stops  
        END FOR  
        WHILE bus_queue is not empty  
            REMOVE the first element from bus_queue AND ASSIGN the pair TO current_bus AND bus_count  
            FOR each stop IN the list at position current_bus of routes  
                IF stop EQUALS target  
                    RETURN bus_count  
                END IF  
                IF stop is NOT IN visited_stops  
                    ADD stop TO visited_stops  
                    FOR each next_bus IN the list mapped to stop IN stop_to_buses  
                        IF next_bus is NOT IN visited_buses  
                            ADD next_bus TO visited_buses  
                            APPEND the pair of next_bus AND bus_count PLUS one TO bus_queue  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END WHILE  
        RETURN negative one  
    END FUNCTION  
END CLASS