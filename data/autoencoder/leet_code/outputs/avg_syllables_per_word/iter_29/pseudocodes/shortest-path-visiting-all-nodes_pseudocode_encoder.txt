CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph EQUALS empty list THEN  
            RETURN zero  
        END IF  
  
        SET number_of_nodes TO the LENGTH OF graph  
  
        SET queue TO a double ended queue initialized with pairs where each pair consists of  
            a node and the bitmask formed by one LEFT SHIFTED BY the value of the node  
            for each node FROM zero TO number_of_nodes MINUS one  
  
        SET visited TO a set of pairs where each pair consists of  
            a node and the bitmask formed by one LEFT SHIFTED BY the value of the node  
            for each node FROM zero TO number_of_nodes MINUS one  
  
        SET steps TO zero  
  
        SET all_nodes_visited_mask TO one LEFT SHIFTED BY number_of_nodes MINUS one  
  
        WHILE queue is not empty DO  
            SET current_level_length TO the LENGTH OF queue  
  
            FOR iteration_variable FROM zero TO current_level_length MINUS one DO  
                REMOVE the element at the front FROM queue AND ASSIGN it TO current_node and visited_nodes  
  
                IF visited_nodes EQUALS all_nodes_visited_mask THEN  
                    RETURN steps  
                END IF  
  
                FOR each neighbor IN the element at position current_node of graph DO  
                    SET next_visited_nodes TO visited_nodes OR one LEFT SHIFTED BY neighbor  
  
                    SET next_state TO the pair consisting of neighbor and next_visited_nodes  
  
                    IF next_state NOT IN visited THEN  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
  
            INCREMENT steps BY one  
        END WHILE  
  
        RETURN negative one  
    END FUNCTION  
END CLASS