CLASS Solution  
    FUNCTION maskPII(s)  
        IF the character at any position of s EQUALS an at symbol  
            SET split_position TO the position of the at symbol in s  
            SET local_part TO the substring from position one TO position split_position MINUS one of s  
            SET domain_part TO the substring from position split_position PLUS one TO the end of s  
            SET masked_local TO the concatenation of the character at position one of local_part PLUS the string consisting of five asterisks PLUS the character at the last position of local_part  
            SET result_email TO the concatenation of the lowercase version of masked_local PLUS the at symbol PLUS the lowercase version of domain_part  
            RETURN result_email  
        ELSE  
            SET all_characters TO an empty string  
            FOR each character IN s  
                IF the character is a digit  
                    APPEND the character TO all_characters  
                END IF  
            END FOR  
            SET digits_length TO the length of all_characters  
            SET local_number TO the concatenation of three asterisks PLUS a hyphen PLUS three asterisks PLUS a hyphen PLUS the substring from position digits_length MINUS three TO position digits_length OF all_characters  
            IF digits_length EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO digits_length MINUS ten  
                SET country_code TO the concatenation of the plus symbol PLUS the string consisting of country_code_length asterisks PLUS a hyphen  
                SET result_phone TO the concatenation of country_code PLUS local_number  
                RETURN result_phone  
            END IF  
        END IF  
    END FUNCTION  
END CLASS