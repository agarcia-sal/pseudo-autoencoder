CLASS Solution  
    FUNCTION maximizeXor(nums list_of_integers queries list_of_list_of_integers) RETURNS list_of_integers  
        SORT the list nums in ascending order  
        SET sorted_queries TO the list of pairs of original index AND query from queries sorted by the second element of each query which represents the maximum allowed value  
        SET result TO a list of length equal to the length of queries FILLED WITH negative one  
        SET trie TO an empty mapping  
        SET num_index TO zero representing the current position in nums  
        FOR each pair of query_index AND the pair of xi AND mi IN sorted_queries  
            WHILE num_index LESS THAN the LENGTH OF nums AND the element at position num_index of nums LESS THAN OR EQUAL TO mi  
                SET num TO the element at position num_index of nums  
                SET node TO trie  
                FOR i FROM thirty one DOWN TO zero  
                    SET bit TO the value of the bit at position i of num obtained by shifting num RIGHT BY i positions AND THEN taking the bitwise AND WITH one  
                    IF bit NOT IN node  
                        SET the element at key bit of node TO an empty mapping  
                    SET node TO the element at key bit of node  
                INCREMENT num_index BY one  
            END WHILE  
            IF trie IS empty  
                CONTINUE to the next query  
            SET node TO trie  
            SET max_xor TO zero  
            FOR i FROM thirty one DOWN TO zero  
                SET bit TO the bit at position i of xi obtained by shifting xi RIGHT BY i positions AND THEN taking the bitwise AND WITH one  
                SET toggle_bit TO one MINUS bit  
                IF toggle_bit IS IN node  
                    SET max_xor TO max_xor OR the value of one shifted LEFT BY i positions  
                    SET node TO the element at key toggle_bit of node  
                ELSE  
                    SET node TO the element at key bit of node  
            END FOR  
            SET the element at position query_index of result TO max_xor  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS