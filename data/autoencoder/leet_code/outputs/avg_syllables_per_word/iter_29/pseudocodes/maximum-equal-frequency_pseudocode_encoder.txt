CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new empty frequency counter  
        SET freq TO a new empty frequency counter of frequencies  
        SET max_len TO zero  
        
        FOR each index AND each number IN nums  
            INCREMENT the frequency count of number BY one  
            
            IF the frequency count of number IS GREATER THAN one THEN  
                DECREMENT the frequency count of the frequency count of number MINUS one BY one  
                IF the frequency count of the frequency count of number MINUS one IS EQUAL TO zero THEN  
                    REMOVE the frequency count of number MINUS one FROM freq  
                END IF  
            END IF  
            
            INCREMENT the frequency count of the frequency count of number BY one  
            
            IF the LENGTH OF freq IS EQUAL TO one AND  
               (the frequency count of one EXISTS IN freq OR  
                the sole value in freq IS EQUAL TO one) THEN  
                SET max_len TO index PLUS one  
            
            ELSE IF the LENGTH OF freq IS EQUAL TO two AND  
                ((the frequency count of one EXISTS IN freq AND its frequency count IS EQUAL TO one) OR  
                 (the difference BETWEEN the maximum key in freq AND the minimum key in freq IS EQUAL TO one AND  
                  the frequency count of the maximum key in freq IS EQUAL TO one)) THEN  
                SET max_len TO index PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS