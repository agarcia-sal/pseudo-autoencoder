CLASS Solution  
    FUNCTION sumOfDistancesInTree(n, edges)  
        SET graph TO a new mapping with default value as an empty list  
        FOR each pair of nodes a and b IN edges  
            APPEND node b TO the list at key a in graph  
            APPEND node a TO the list at key b in graph  
        END FOR  
        
        SET count TO a list of length n with every element SET TO one  
        SET dist TO a list of length n with every element SET TO zero  
        
        FUNCTION dfs1(u, p)  
            FOR each node v IN the list at key u in graph  
                IF node v NOT EQUALS node p THEN  
                    CALL dfs1 with parameters node v and node u  
                    INCREMENT the element at position u of count BY the element at position v of count  
                    INCREMENT the element at position u of dist BY the element at position v of dist PLUS the element at position v of count  
                END IF  
            END FOR  
        END FUNCTION  
        
        CALL dfs1 with node zero and negative one as parameters  
        
        FUNCTION dfs2(u, p)  
            FOR each node v IN the list at key u in graph  
                IF node v NOT EQUALS node p THEN  
                    SET the element at position v of dist TO the element at position u of dist MINUS the element at position v of count PLUS the total number n MINUS the element at position v of count  
                    CALL dfs2 with parameters node v and node u  
                END IF  
            END FOR  
        END FUNCTION  
        
        CALL dfs2 with node zero and negative one as parameters  
        
        RETURN dist  
    END FUNCTION  
END CLASS