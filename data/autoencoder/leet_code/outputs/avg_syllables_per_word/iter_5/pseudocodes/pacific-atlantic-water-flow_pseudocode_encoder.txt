CLASS Solution  
    FUNCTION pacificAtlantic(heights)  
        FUNCTION bfs(q, vis)  
            WHILE q IS NOT EMPTY  
                SET current_length TO LENGTH OF q  
                FOR count FROM 1 TO current_length  
                    SET i, j TO REMOVE FIRST ELEMENT FROM q  
                    FOR each pair a, b IN [[0, -1], [0, 1], [1, 0], [-1, 0]]  
                        SET x TO i PLUS a  
                        SET y TO j PLUS b  
                        IF x GREATER THAN OR EQUAL TO 0 AND x LESS THAN m AND y GREATER THAN OR EQUAL TO 0 AND y LESS THAN n AND (x, y) NOT IN vis AND heights[x][y] GREATER THAN OR EQUAL TO heights[i][j]  
                            ADD (x, y) TO vis  
                            ADD (x, y) TO q  
                        END IF  
                    END FOR  
                END FOR  
            END WHILE  
        END FUNCTION  

        SET m TO LENGTH OF heights  
        SET n TO LENGTH OF heights AT INDEX 0  
        SET vis1 TO EMPTY SET  
        SET vis2 TO EMPTY SET  
        SET q1 TO EMPTY QUEUE  
        SET q2 TO EMPTY QUEUE  
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF i EQUALS 0 OR j EQUALS 0  
                    ADD (i, j) TO vis1  
                    ADD (i, j) TO q1  
                END IF  
                IF i EQUALS m MINUS 1 OR j EQUALS n MINUS 1  
                    ADD (i, j) TO vis2  
                    ADD (i, j) TO q2  
                END IF  
            END FOR  
        END FOR  
        CALL bfs WITH PARAMETERS q1, vis1  
        CALL bfs WITH PARAMETERS q2, vis2  
        SET result TO EMPTY LIST  
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF (i, j) IN vis1 AND (i, j) IN vis2  
                    APPEND (i, j) TO result  
                END IF  
            END FOR  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS