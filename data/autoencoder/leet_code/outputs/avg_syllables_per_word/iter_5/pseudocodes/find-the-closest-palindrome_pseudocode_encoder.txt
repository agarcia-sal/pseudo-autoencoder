CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET length TO LENGTH OF n  
        IF length EQUALS 1  
            RETURN STRING OF (INTEGER OF n MINUS 1)  
        END IF  
        
        SET candidates TO EMPTY SET  
        
        APPEND TO candidates THE NUMBER TEN RAISED TO THE power OF length PLUS 1  
        APPEND TO candidates THE NUMBER TEN RAISED TO THE power OF (length MINUS 1) MINUS 1  
        
        SET prefix TO INTEGER OF SUBSTRING OF n FROM START TO (length PLUS 1) DIVIDED BY 2  
        FOR i FROM -1 TO 1  
            SET new_prefix TO STRING OF (prefix PLUS i)  
            IF length MODULO 2 EQUALS 0  
                SET candidate TO CONCATENATION OF new_prefix AND REVERSE OF new_prefix  
            ELSE  
                SET candidate TO CONCATENATION OF new_prefix AND REVERSE OF SUBSTRING OF new_prefix FROM START TO SECOND LAST CHARACTER  
            END IF  
            APPEND TO candidates THE INTEGER OF candidate  
        END FOR  
        
        SET original_number TO INTEGER OF n  
        REMOVE original_number FROM candidates IF PRESENT  
        
        SET closest TO THE ELEMENT IN candidates WITH MINIMAL VALUE OF (ABSOLUTE VALUE OF ELEMENT MINUS original_number, ELEMENT)  
        
        RETURN STRING OF closest  
    END FUNCTION  
END CLASS