CLASS Solution  
    FUNCTION largestOverlap(img1, img2)  
        SET n TO LENGTH OF img1  
        SET points1 TO LIST OF coordinates (i, j) WHERE i FROM 0 TO n MINUS 1 AND j FROM 0 TO n MINUS 1 AND img1 AT i AT j EQUALS 1  
        SET points2 TO LIST OF coordinates (i, j) WHERE i FROM 0 TO n MINUS 1 AND j FROM 0 TO n MINUS 1 AND img2 AT i AT j EQUALS 1  
        
        SET overlap_count TO default dictionary WITH integer default value  
        
        FOR each coordinate (x1, y1) IN points1  
            FOR each coordinate (x2, y2) IN points2  
                SET dx TO x2 MINUS x1  
                SET dy TO y2 MINUS y1  
                INCREMENT overlap_count AT key (dx, dy) BY 1  
        
        RETURN maximum value IN overlap_count OR 0 IF empty  
    END FUNCTION  
END CLASS