CLASS Solution  
    FUNCTION calculateMinimumHP(dungeon)  
        SET m TO LENGTH OF dungeon  
        SET n TO LENGTH OF dungeon AT 0  
        CREATE dp AS (m PLUS 1) BY (n PLUS 1) TABLE FILLED WITH infinity  
        SET dp AT m, (n MINUS 1) TO 1  
        SET dp AT (m MINUS 1), n TO 1  
        FOR i FROM (m MINUS 1) DOWN TO 0  
            FOR j FROM (n MINUS 1) DOWN TO 0  
                SET min_health TO MINIMUM OF dp AT (i PLUS 1), j AND dp AT i, (j PLUS 1) MINUS dungeon AT i, j  
                SET dp AT i, j TO MAXIMUM OF min_health AND 1  
        RETURN dp AT 0, 0  
    END FUNCTION  
END CLASS