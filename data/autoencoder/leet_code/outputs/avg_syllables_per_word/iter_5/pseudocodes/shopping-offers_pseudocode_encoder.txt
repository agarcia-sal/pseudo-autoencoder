CLASS Solution  
    FUNCTION shoppingOffers(price, special, needs)  
        SET special TO list of offers from special WHERE sum of offer excluding last element IS GREATER THAN 0 AND last element of offer IS LESS THAN sum of price element MULTIPLIED BY corresponding offer element excluding last  
        
        DEFINE dfs(needs) WITH CACHE  
            SET min_cost TO sum of price element MULTIPLIED BY corresponding needs element  
            
            FOR each offer IN special  
                SET new_needs TO list where each element IS needs element MINUS corresponding offer element excluding last  
                IF all elements in new_needs ARE GREATER THAN OR EQUAL TO 0 THEN  
                    SET min_cost TO minimum of min_cost AND last element of offer PLUS dfs(tuple form of new_needs)  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN dfs(tuple form of needs)  
    END FUNCTION  
END CLASS