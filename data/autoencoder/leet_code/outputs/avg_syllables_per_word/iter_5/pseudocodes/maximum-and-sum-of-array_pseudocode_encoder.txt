CLASS Solution  
    FUNCTION maximumANDSum(nums, numSlots)  
        DEFINE FUNCTION dp(index, slots) WITH CACHE  
            IF index EQUALS LENGTH OF nums THEN  
                RETURN 0  
            END IF  
            
            SET max_and_sum TO 0  
            SET slots_list TO LIST CONVERTED FROM slots  
            
            FOR i FROM 0 TO numSlots MINUS 1 DO  
                IF slots_list AT i LESS THAN 2 THEN  
                    INCREMENT slots_list AT i BY 1  
                    SET and_sum TO BITWISE AND OF nums AT index AND (i PLUS 1) PLUS dp(index PLUS 1, TUPLE OF slots_list)  
                    IF and_sum GREATER THAN max_and_sum THEN  
                        SET max_and_sum TO and_sum  
                    END IF  
                    DECREMENT slots_list AT i BY 1  
                END IF  
            END FOR  
            
            RETURN max_and_sum  
        END FUNCTION  
        
        SET initial_slots TO TUPLE OF ZEROS REPEATED numSlots TIMES  
        RETURN dp(0, initial_slots)  
    END FUNCTION  
END CLASS