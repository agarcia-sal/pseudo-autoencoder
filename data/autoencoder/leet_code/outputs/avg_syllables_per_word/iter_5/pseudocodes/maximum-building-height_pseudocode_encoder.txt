CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND [1, 0] TO restrictions  
        SORT restrictions  
        
        FOR i FROM 1 TO LENGTH OF restrictions MINUS 1  
            SET idx, height TO restrictions AT INDEX i  
            SET prev_idx, prev_height TO restrictions AT INDEX i MINUS 1  
            SET restrictions AT INDEX i AND HEIGHT POSITION TO MINIMUM OF height AND prev_height PLUS idx MINUS prev_idx  
        
        FOR i FROM LENGTH OF restrictions MINUS 2 DOWN TO 0 STEP -1  
            SET idx, height TO restrictions AT INDEX i  
            SET next_idx, next_height TO restrictions AT INDEX i PLUS 1  
            SET restrictions AT INDEX i AND HEIGHT POSITION TO MINIMUM OF height AND next_height PLUS next_idx MINUS idx  
        
        SET max_height TO 0  
        SET prev_idx, prev_height TO restrictions AT INDEX 0  
        FOR i FROM 1 TO LENGTH OF restrictions MINUS 1  
            SET idx, height TO restrictions AT INDEX i  
            SET potential_max TO idx MINUS prev_idx PLUS prev_height PLUS height DIVIDED BY 2  
            SET max_height TO MAXIMUM OF max_height AND potential_max  
            SET prev_idx, prev_height TO idx, height  
        
        SET max_height TO MAXIMUM OF max_height AND prev_height PLUS n MINUS prev_idx  
        
        RETURN max_height  
    END FUNCTION  
END CLASS