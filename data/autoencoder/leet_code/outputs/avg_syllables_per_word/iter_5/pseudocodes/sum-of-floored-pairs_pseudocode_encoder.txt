CLASS Solution  
    FUNCTION sumOfFlooredPairs(nums)  
        SET MOD TO 10 to the power of 9 plus 7  
        SET max_num TO the maximum value in nums  
        SET count TO a mapping of each unique number in nums to its frequency  
        INITIALIZE prefix_sum as a list of zeros with length max_num plus 1  
        
        FOR each num IN keys of count  
            INCREMENT prefix_sum at position num BY count at num  
        
        FOR i FROM 1 TO max_num INCLUSIVE  
            INCREMENT prefix_sum at position i BY prefix_sum at position i minus 1  
        
        SET result TO 0  
        
        FOR each num IN keys of count  
            FOR multiple FROM 1 TO max_num DIVIDED BY num INCLUSIVE  
                SET start TO num multiplied by multiple  
                SET end TO the smaller value between num multiplied by (multiple plus 1) minus 1 AND max_num  
                SET multiples_count TO prefix_sum at position end MINUS prefix_sum at position start minus 1  
                INCREMENT result BY multiples_count multiplied by multiple multiplied by count at num  
                SET result TO result MODULO MOD  
        
        RETURN result  
    END FUNCTION  
END CLASS