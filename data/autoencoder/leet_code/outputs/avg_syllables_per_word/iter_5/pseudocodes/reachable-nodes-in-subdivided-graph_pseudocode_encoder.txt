CLASS Solution  
    FUNCTION reachableNodes(edges, maxMoves, n)  
        SET graph TO dictionary mapping each integer from 0 TO n MINUS 1 TO empty list  
        FOR each u, v, cnt IN edges  
            APPEND pair (v, cnt) TO graph AT key u  
            APPEND pair (u, cnt) TO graph AT key v  
        
        SET distances TO list of size n FILLED WITH infinity  
        SET distances AT index 0 TO 0  
        SET priority_queue TO list CONTAINING pair (0, 0)  
    
        WHILE priority_queue IS NOT empty  
            EXTRACT smallest dist, node FROM priority_queue  
            IF dist GREATER THAN distances AT index node  
                CONTINUE TO next iteration  
            FOR each neighbor, cnt IN graph AT key node  
                SET new_dist TO dist PLUS cnt PLUS 1  
                IF new_dist LESS THAN distances AT index neighbor  
                    SET distances AT index neighbor TO new_dist  
                    ADD pair (new_dist, neighbor) TO priority_queue  
        
        SET reachable_nodes TO 0  
        
        FOR each d IN distances  
            IF d LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY 1  
        
        SET used_edges TO empty dictionary  
        FOR each u, v, cnt IN edges  
            SET moves_u TO maximum of 0 AND maxMoves MINUS distances AT index u  
            SET moves_v TO maximum of 0 AND maxMoves MINUS distances AT index v  
            SET reachable_new_nodes TO minimum of cnt AND moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            ASSIGN reachable_new_nodes TO used_edges AT key (u, v)  
        
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS