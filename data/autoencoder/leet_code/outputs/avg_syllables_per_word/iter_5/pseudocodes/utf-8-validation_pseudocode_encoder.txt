CLASS Solution  
    FUNCTION validUtf8(data)  
        FUNCTION get_byte_count(byte)  
            IF byte shifted right BY 7 EQUALS binary zero THEN  
                RETURN 1  
            ELSE IF byte shifted right BY 5 EQUALS binary 110 THEN  
                RETURN 2  
            ELSE IF byte shifted right BY 4 EQUALS binary 1110 THEN  
                RETURN 3  
            ELSE IF byte shifted right BY 3 EQUALS binary 11110 THEN  
                RETURN 4  
            ELSE  
                RETURN -1  
            END IF  
        END FUNCTION  

        SET i TO 0  
        WHILE i LESS THAN LENGTH OF data DO  
            SET byte_count TO get_byte_count(data AT i)  
            IF byte_count EQUALS -1 THEN  
                RETURN False  
            END IF  
            IF i PLUS byte_count GREATER THAN LENGTH OF data THEN  
                RETURN False  
            END IF  
            FOR j FROM i PLUS 1 TO i PLUS byte_count MINUS 1 DO  
                IF data AT j shifted right BY 6 NOT EQUAL binary 10 THEN  
                    RETURN False  
                END IF  
            END FOR  
            INCREMENT i BY byte_count  
        END WHILE  
        RETURN True  
    END FUNCTION  
END CLASS