CLASS Solution  
    FUNCTION permuteUnique(nums)  
        FUNCTION backtrack(path, used, res)  
            IF LENGTH OF path EQUALS LENGTH OF nums THEN  
                APPEND COPY OF path TO res  
                RETURN  
            END IF  
            FOR i FROM 0 TO LENGTH OF nums MINUS 1 DO  
                IF used[i] IS TRUE OR (i GREATER THAN 0 AND nums[i] EQUALS nums[i MINUS 1] AND used[i MINUS 1] IS FALSE) THEN  
                    CONTINUE  
                END IF  
                SET used[i] TO TRUE  
                APPEND nums[i] TO path  
                CALL backtrack WITH path, used, res  
                REMOVE LAST ELEMENT FROM path  
                SET used[i] TO FALSE  
            END FOR  
        END FUNCTION  
        
        SORT nums  
        SET res TO EMPTY LIST  
        SET used TO LIST OF FALSE WITH LENGTH OF nums  
        CALL backtrack WITH EMPTY LIST, used, res  
        RETURN res  
    END FUNCTION  
END CLASS