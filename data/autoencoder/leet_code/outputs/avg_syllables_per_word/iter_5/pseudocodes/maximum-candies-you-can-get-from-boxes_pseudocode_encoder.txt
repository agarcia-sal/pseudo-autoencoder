CLASS Solution  
    FUNCTION maxCandies(status, candies, keys, containedBoxes, initialBoxes)  
        SET boxes_we_have TO set containing items from initialBoxes  
        SET keys_we_have TO empty set  
        SET total_candies TO 0  
        
        SET progress_made TO true  
        
        WHILE progress_made  
            SET progress_made TO false  
            FOR each box IN list form of boxes_we_have  
                IF status at index box EQUALS 1 OR keys_we_have CONTAINS box  
                    INCREMENT total_candies BY candies at index box  
                    ADD all items from keys at index box TO keys_we_have  
                    ADD all items from containedBoxes at index box TO boxes_we_have  
                    REMOVE box FROM boxes_we_have  
                    SET progress_made TO true  
        RETURN total_candies  
    END FUNCTION  
END CLASS