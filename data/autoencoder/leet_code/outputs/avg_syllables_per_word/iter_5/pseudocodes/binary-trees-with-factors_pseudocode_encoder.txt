CLASS Solution  
    FUNCTION numFactoredBinaryTrees(arr)  
        SET MOD TO 10 raised to the power of 9 plus 7  
        SORT arr in ascending order  
        SET dp TO dictionary mapping each number in arr TO 1  

        FOR each index i AND number num IN arr  
            FOR each index j FROM 0 TO i exclusive  
                IF num MODULO arr at j EQUALS 0 THEN  
                    SET right_child TO num DIVIDED BY arr at j  
                    IF right_child EXISTS IN dp THEN  
                        SET dp at num TO (dp at num PLUS dp at arr at j TIMES dp at right_child) MODULO MOD  
        SET total TO sum of all values in dp  
        RETURN total MODULO MOD  
    END FUNCTION  
END CLASS