CLASS Solution  
    FUNCTION isEscapePossible(blocked, source, target)  
        IF blocked IS empty  
            RETURN True  
        
        SET blocked_set TO set of tuples created from each element in blocked  
        SET n TO length of blocked  
        SET max_steps TO n multiplied BY (n minus 1) DIVIDED BY 2  
        
        FUNCTION bfs(start, end)  
            SET queue TO deque initialized with tuple of start  
            SET visited TO set initialized with queue elements  
            
            WHILE queue IS NOT empty  
                SET x, y TO front element removed from queue  
                
                IF size of visited IS GREATER THAN max_steps OR (x EQUALS end at index 0 AND y EQUALS end at index 1)  
                    RETURN True  
                
                FOR each pair dx, dy IN list of (0,1), (0,-1), (1,0), (-1,0)  
                    SET nx TO x plus dx  
                    SET ny TO y plus dy  
                    IF nx IS GREATER THAN OR EQUAL TO 0 AND nx IS LESS THAN 10 POWER 6 AND ny IS GREATER THAN OR EQUAL TO 0 AND ny IS LESS THAN 10 POWER 6 AND tuple (nx, ny) IS NOT IN blocked_set AND tuple (nx, ny) IS NOT IN visited  
                        ADD tuple (nx, ny) TO visited  
                        APPEND tuple (nx, ny) TO queue  
            
            RETURN False  
        
        RETURN result of bfs called with source and target AND result of bfs called with target and source  
    END FUNCTION  
END CLASS