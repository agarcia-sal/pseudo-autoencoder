CLASS Solution  
    FUNCTION longestPath(parent, s)  
        FUNCTION dfs(node)  
            SET max1 TO 0  
            SET max2 TO 0  
            FOR each child IN tree[node]  
                SET child_length TO dfs(child)  
                IF s[child] IS NOT EQUAL TO s[node] THEN  
                    IF child_length IS GREATER THAN max1 THEN  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length IS GREATER THAN max2 THEN  
                        SET max2 TO child_length  
            SET self.result TO the maximum of self.result AND max1 PLUS max2 PLUS 1  
            RETURN max1 PLUS 1  
        END FUNCTION  
        
        INITIALIZE tree AS a mapping from nodes to list of child nodes  
        FOR each index i AND parent p IN parent with enumeration  
            IF p IS NOT EQUAL TO -1 THEN  
                APPEND i TO tree[p]  
        SET self.result TO 1  
        CALL dfs WITH 0  
        RETURN self.result  
    END FUNCTION  
END CLASS