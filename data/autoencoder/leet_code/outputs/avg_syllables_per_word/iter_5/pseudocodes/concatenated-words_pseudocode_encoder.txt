CLASS Trie  
    FUNCTION __init__()  
        SET children TO list of size 26 filled with None  
        SET is_end TO False  
    END FUNCTION  

    FUNCTION insert(w)  
        SET node TO self  
        FOR each character c IN w  
            SET idx TO numerical position of c relative to 'a'  
            IF node.children at idx IS None  
                SET node.children at idx TO new Trie instance  
            SET node TO node.children at idx  
        SET node.is_end TO True  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findAllConcatenatedWordsInADict(words)  
        FUNCTION dfs(w, start)  
            IF start EQUALS length of w  
                RETURN True  
            SET node TO trie  
            FOR i FROM start TO length of w MINUS 1  
                SET idx TO numerical position of character at w[i] relative to 'a'  
                IF node.children at idx IS None  
                    RETURN False  
                SET node TO node.children at idx  
                IF node.is_end IS True AND dfs(w, i PLUS 1) IS True  
                    RETURN True  
            RETURN False  
        END FUNCTION  

        SET trie TO new Trie instance  
        SET ans TO empty list  
        SORT words BY length in ascending order  
        FOR each word w IN words  
            IF w IS NOT empty  
                IF dfs(w, 0)  
                    APPEND w TO ans  
                ELSE  
                    trie.insert(w)  
        RETURN ans  
    END FUNCTION  
END CLASS