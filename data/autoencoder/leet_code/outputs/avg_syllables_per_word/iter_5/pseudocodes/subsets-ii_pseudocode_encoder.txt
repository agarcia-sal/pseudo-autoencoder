CLASS Solution  
    FUNCTION subsetsWithDup(nums)  
        SORT nums  
        SET result TO empty list  
        SET subset TO empty list  
          
        FUNCTION dfs(i)  
            IF i GREATER THAN OR EQUAL TO LENGTH OF nums THEN  
                APPEND copy of subset TO result  
                RETURN  
            END IF  
              
            APPEND nums at index i TO subset  
            CALL dfs WITH i INCREMENTED BY 1  
              
            REMOVE last element FROM subset  
            WHILE i PLUS 1 LESS THAN LENGTH OF nums AND nums at index i EQUALS nums at index i PLUS 1 DO  
                INCREMENT i BY 1  
            END WHILE  
            CALL dfs WITH i INCREMENTED BY 1  
        END FUNCTION  
          
        CALL dfs WITH 0  
        RETURN result  
    END FUNCTION  
END CLASS