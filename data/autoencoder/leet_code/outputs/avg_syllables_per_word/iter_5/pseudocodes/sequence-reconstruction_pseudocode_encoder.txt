CLASS Solution  
    FUNCTION sequenceReconstruction(nums, sequences)  
        SET n TO LENGTH OF nums  
        SET graph TO a mapping from integer to list of integers, initially empty  
        SET indegree TO a list of zeros with length n plus one  
        
        FOR each seq IN sequences  
            FOR i FROM 0 TO LENGTH OF seq MINUS 2  
                SET u TO seq at position i  
                SET v TO seq at position i plus 1  
                APPEND v TO graph at key u  
                INCREMENT indegree at position v BY 1  
        
        SET queue TO a double-ended queue containing all integers from 1 to n WHERE indegree at that integer EQUALS 0  
        
        IF LENGTH OF queue IS NOT 1  
            RETURN False  
        
        SET index TO 0  
        WHILE queue IS NOT empty  
            IF LENGTH OF queue IS NOT 1  
                RETURN False  
            
            SET node TO queue removed from left  
            IF node IS NOT EQUAL TO nums at position index  
                RETURN False  
            INCREMENT index BY 1  
            
            FOR each neighbor IN graph at key node  
                DECREMENT indegree at position neighbor BY 1  
                IF indegree at position neighbor EQUALS 0  
                    APPEND neighbor TO queue  
        
        RETURN index EQUALS n  
    END FUNCTION  
END CLASS