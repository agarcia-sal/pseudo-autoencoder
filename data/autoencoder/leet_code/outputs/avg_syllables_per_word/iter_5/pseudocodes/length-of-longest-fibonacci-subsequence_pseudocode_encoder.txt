CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO a mapping from each element x in arr to its position i  
        SET dp TO an empty mapping  
        SET max_length TO 0  
        
        FOR each k FROM 0 TO LENGTH OF arr MINUS 1  
            FOR each j FROM 0 TO k MINUS 1  
                SET i TO the value from index mapping for arr AT k MINUS arr AT j, defaulting to -1 if not found  
                IF i IS GREATER THAN OR EQUAL TO 0 AND i IS LESS THAN j THEN  
                    SET dp AT (j, k) TO the value from dp AT (i, j), defaulting to 2, PLUS 1  
                    SET max_length TO the maximum between max_length AND dp AT (j, k)  
        
        IF max_length IS GREATER THAN OR EQUAL TO 3 THEN  
            RETURN max_length  
        ELSE  
            RETURN 0  
    END FUNCTION  
END CLASS