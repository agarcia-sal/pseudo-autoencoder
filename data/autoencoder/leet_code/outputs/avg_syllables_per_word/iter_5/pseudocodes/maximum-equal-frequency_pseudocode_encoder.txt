CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO empty frequency counter  
        SET freq TO empty frequency counter  
        SET max_len TO 0  

        FOR each index i AND element num IN nums  
            INCREMENT count of num BY 1  

            IF count of num GREATER THAN 1 THEN  
                DECREMENT freq of (count of num MINUS 1) BY 1  
                IF freq of (count of num MINUS 1) EQUALS 0 THEN  
                    REMOVE freq entry for (count of num MINUS 1)  
            END IF  

            INCREMENT freq of (count of num) BY 1  

            IF LENGTH OF freq EQUALS 1 AND (freq CONTAINS key 1 OR THE ONLY freq value EQUALS 1) THEN  
                SET max_len TO i PLUS 1  
            ELSE IF LENGTH OF freq EQUALS 2 AND (freq CONTAINS key 1 AND freq of 1 EQUALS 1 OR (MAXIMUM key in freq MINUS MINIMUM key in freq EQUALS 1 AND freq of MAXIMUM key EQUALS 1)) THEN  
                SET max_len TO i PLUS 1  
            END IF  
        END FOR  

        RETURN max_len  
    END FUNCTION  
END CLASS