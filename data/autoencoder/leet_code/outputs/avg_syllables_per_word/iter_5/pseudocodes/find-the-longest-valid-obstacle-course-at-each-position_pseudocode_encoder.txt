CLASS Solution  
    FUNCTION longestObstacleCourseAtEachPosition(obstacles)  
        SET n TO LENGTH OF obstacles  
        SET ans TO empty list  
        SET increasing_subseq TO empty list  
        
        FOR each obstacle IN obstacles  
            SET idx TO position to insert obstacle in increasing_subseq to maintain non-decreasing order  
            
            IF idx IS EQUAL TO LENGTH OF increasing_subseq  
                APPEND obstacle TO increasing_subseq  
            ELSE  
                SET element at idx in increasing_subseq TO obstacle  
            
            APPEND idx INCREMENTED BY 1 TO ans  
        
        RETURN ans  
    END FUNCTION  
END CLASS