CLASS Solution  
    FUNCTION findMaxAverage(nums, k)  
        FUNCTION canFindAverage(mid)  
            SET prefix_sums TO list of zeros with length LENGTH OF nums PLUS 1  
            SET min_prefix_sum TO list of zeros with length LENGTH OF nums PLUS 1  
              
            FOR i FROM 0 TO LENGTH OF nums MINUS 1  
                SET prefix_sums at position i PLUS 1 TO prefix_sums at position i PLUS nums at position i MINUS mid  
                IF i GREATER THAN OR EQUAL TO k THEN  
                    SET min_prefix_sum at position i PLUS 1 TO minimum of min_prefix_sum at position i AND prefix_sums at position i PLUS 1 MINUS k  
                ELSE  
                    SET min_prefix_sum at position i PLUS 1 TO min_prefix_sum at position i  
                END IF  
                  
                IF i GREATER THAN OR EQUAL TO k MINUS 1 AND prefix_sums at position i PLUS 1 MINUS min_prefix_sum at position i PLUS 1 GREATER THAN OR EQUAL TO 0 THEN  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  
        
        SET low TO minimum value in nums  
        SET high TO maximum value in nums  
        WHILE high MINUS low GREATER THAN 0.00001  
            SET mid TO low PLUS high DIVIDED BY 2  
            IF canFindAverage(mid) THEN  
                SET low TO mid  
            ELSE  
                SET high TO mid  
            END IF  
        END WHILE  
        RETURN low  
    END FUNCTION  
END CLASS