CLASS Solution  
    FUNCTION smallestSubsequence(s, k, letter, repetition)  
        SET letter_count TO count of letter IN s  
        SET stack TO empty list  
        FOR each index i AND character char IN s  
            WHILE stack is not empty AND char is less than last item in stack AND length of s minus i plus length of stack minus 1 is greater than or equal to k  
                IF last item in stack is equal to letter  
                    IF letter_count is greater than repetition  
                        INCREMENT repetition BY 1  
                        REMOVE last item from stack  
                    ELSE  
                        BREAK  
                ELSE  
                    REMOVE last item from stack  
            IF length of stack is less than k  
                IF char is equal to letter  
                    APPEND char TO stack  
                    DECREMENT repetition BY 1  
                ELSE IF k minus length of stack is greater than repetition  
                    APPEND char TO stack  
                IF char is equal to letter  
                    DECREMENT letter_count BY 1  
        WHILE length of stack is less than k  
            APPEND letter TO stack  
        RETURN concatenation of items in stack  
    END FUNCTION  
END CLASS