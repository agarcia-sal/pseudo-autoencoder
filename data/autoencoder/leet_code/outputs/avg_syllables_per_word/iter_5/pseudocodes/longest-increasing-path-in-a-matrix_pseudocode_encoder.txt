CLASS Solution  
    FUNCTION longestIncreasingPath(matrix)  
        IF matrix IS empty OR matrix at index 0 IS empty THEN  
            RETURN 0  
        END IF  
        
        SET m TO LENGTH OF matrix  
        SET n TO LENGTH OF matrix at index 0  
        SET directions TO list containing (1, 0), (-1, 0), (0, 1), (0, -1)  
        SET dp TO a two-dimensional list of size m by n filled with -1  
        
        FUNCTION dfs(x, y)  
            IF dp at x and y IS NOT EQUAL TO -1 THEN  
                RETURN dp at x and y  
            END IF  
            
            SET max_length TO 1  
            FOR each dx, dy IN directions DO  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                IF nx IS GREATER THAN OR EQUAL TO 0 AND nx IS LESS THAN m AND ny IS GREATER THAN OR EQUAL TO 0 AND ny IS LESS THAN n AND matrix at nx and ny IS GREATER THAN matrix at x and y THEN  
                    SET candidate_length TO 1 PLUS dfs(nx, ny)  
                    SET max_length TO the GREATER OF max_length AND candidate_length  
                END IF  
            END FOR  
            
            SET dp at x and y TO max_length  
            RETURN max_length  
        END FUNCTION  
        
        SET longest_path TO 0  
        FOR i FROM 0 TO m MINUS 1 DO  
            FOR j FROM 0 TO n MINUS 1 DO  
                SET longest_path TO the GREATER OF longest_path AND dfs(i, j)  
            END FOR  
        END FOR  
        
        RETURN longest_path  
    END FUNCTION  
END CLASS