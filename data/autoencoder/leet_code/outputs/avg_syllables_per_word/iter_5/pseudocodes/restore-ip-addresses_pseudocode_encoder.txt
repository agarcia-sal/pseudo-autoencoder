CLASS Solution  
    FUNCTION restoreIpAddresses(s)  
        FUNCTION is_valid(segment)  
            RETURN LENGTH OF segment EQUAL TO 1 OR (FIRST CHARACTER OF segment NOT EQUAL TO '0' AND segment CONVERTED TO INTEGER LESS THAN OR EQUAL TO 255)  
        END FUNCTION  

        FUNCTION backtrack(start, path)  
            IF LENGTH OF path EQUAL TO 4 THEN  
                IF start EQUAL TO LENGTH OF s THEN  
                    APPEND JOIN path WITH '.' TO result  
                END IF  
                RETURN  
            END IF  

            FOR length FROM 1 TO 3 INCLUSIVE DO  
                IF start PLUS length LESS THAN OR EQUAL TO LENGTH OF s THEN  
                    SET segment TO SUBSTRING OF s FROM start TO start PLUS length  
                    IF is_valid(segment) THEN  
                        CALL backtrack WITH start PLUS length AND path WITH segment APPENDED  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  

        SET result TO EMPTY LIST  
        CALL backtrack WITH 0 AND EMPTY LIST  
        RETURN result  
    END FUNCTION  
END CLASS