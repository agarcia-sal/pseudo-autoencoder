CLASS Solution  
    FUNCTION maxProfit(prices)  
        IF prices IS empty  
            RETURN 0  
        SET min_price1 TO infinity  
        SET min_price2 TO infinity  
        SET max_profit1 TO 0  
        SET max_profit2 TO 0  
        FOR each price IN prices  
            SET min_price1 TO the smaller of min_price1 and price  
            SET max_profit1 TO the larger of max_profit1 and price MINUS min_price1  
            SET min_price2 TO the smaller of min_price2 and price MINUS max_profit1  
            SET max_profit2 TO the larger of max_profit2 and price MINUS min_price2  
        RETURN max_profit2  
    END FUNCTION  
END CLASS