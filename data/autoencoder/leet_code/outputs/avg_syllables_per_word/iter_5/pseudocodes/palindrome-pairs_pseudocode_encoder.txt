CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS reverse of s  
        END FUNCTION  
        
        SET word_dict TO a mapping of each word TO its index in words  
        SET result TO empty list  
        
        FOR each index i AND word IN words  
            IF word IS empty string  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string EXISTS in word_dict AND is_palindrome(word)  
                APPEND list containing i AND word_dict at empty string TO result  
                APPEND list containing word_dict at empty string AND i TO result  
            END IF  
            
            SET reversed_word TO reverse of word  
            IF reversed_word EXISTS in word_dict AND word_dict at reversed_word IS NOT i  
                APPEND list containing i AND word_dict at reversed_word TO result  
            END IF  
            
            FOR j FROM 1 TO LENGTH OF word MINUS 1  
                SET prefix TO substring of word FROM start TO j  
                SET suffix TO substring of word FROM j TO end  
                SET reversed_prefix TO reverse of prefix  
                SET reversed_suffix TO reverse of suffix  
                
                IF is_palindrome(suffix) AND reversed_prefix EXISTS in word_dict  
                    APPEND list containing i AND word_dict at reversed_prefix TO result  
                END IF  
                
                IF is_palindrome(prefix) AND reversed_suffix EXISTS in word_dict  
                    APPEND list containing word_dict at reversed_suffix AND i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS