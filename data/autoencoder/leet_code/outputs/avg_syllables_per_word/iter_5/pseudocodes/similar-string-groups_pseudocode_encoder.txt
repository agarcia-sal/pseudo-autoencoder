CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET diff TO list of positions i IN range length of s1 WHERE character at s1[i] NOT EQUAL character at s2[i]  
            IF length of diff EQUALS 0 THEN  
                RETURN true  
            ELSE IF length of diff EQUALS 2 AND character at s1 at diff position 0 EQUALS character at s2 at diff position 1 AND character at s1 at diff position 1 EQUALS character at s2 at diff position 0 THEN  
                RETURN true  
            ELSE  
                RETURN false  
        END FUNCTION  
        
        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN graph at node  
                IF neighbor NOT IN visited THEN  
                    CALL dfs(neighbor, visited)  
        END FUNCTION  
        
        SET n TO length of strs  
        SET graph TO mapping from each integer i in range n TO empty list  
        
        FOR i FROM 0 TO n MINUS 1 DO  
            FOR j FROM i PLUS 1 TO n MINUS 1 DO  
                IF are_similar(strs at i, strs at j) THEN  
                    APPEND j TO graph at i  
                    APPEND i TO graph at j  
        
        SET visited TO empty set  
        SET num_groups TO 0  
        
        FOR i FROM 0 TO n MINUS 1 DO  
            IF i NOT IN visited THEN  
                CALL dfs(i, visited)  
                INCREMENT num_groups BY 1  
        
        RETURN num_groups  
    END FUNCTION  
END CLASS