CLASS Solution  
    FUNCTION maximumRequests(n, requests)  
        SET max_requests TO 0  
        SET num_requests TO LENGTH OF requests  
        
        FOR mask FROM 0 TO (1 LEFT SHIFTED BY num_requests) MINUS 1  
            SET balance TO LIST OF n ZEROES  
            SET count TO 0  
            
            FOR i FROM 0 TO num_requests MINUS 1  
                IF mask BITWISE AND (1 LEFT SHIFTED BY i) IS NOT ZERO THEN  
                    SET from_building, to_building TO requests AT i  
                    DECREMENT balance AT from_building BY 1  
                    INCREMENT balance AT to_building BY 1  
                    INCREMENT count BY 1  
                END IF  
            END FOR  
            
            IF EVERY ELEMENT IN balance IS EQUAL TO 0 THEN  
                SET max_requests TO MAXIMUM OF max_requests AND count  
            END IF  
        END FOR  
        
        RETURN max_requests  
    END FUNCTION  
END CLASS