CLASS Solution  
    FUNCTION cherryPickup(grid)  
        SET rows TO LENGTH OF grid  
        SET cols TO LENGTH OF grid AT INDEX 0  
        
        FUNCTION dp(r, c1, c2) WITH MEMOIZATION  
            IF c1 LESS THAN 0 OR c1 GREATER THAN OR EQUAL TO cols OR c2 LESS THAN 0 OR c2 GREATER THAN OR EQUAL TO cols  
                RETURN 0  
            
            IF c1 EQUALS c2  
                SET cherries TO grid AT r AND c1  
            ELSE  
                SET cherries TO grid AT r AND c1 PLUS grid AT r AND c2  
            
            IF r EQUALS rows MINUS 1  
                RETURN cherries  
            
            SET max_cherries TO 0  
            FOR each dc1 IN LIST OF -1, 0, 1  
                FOR each dc2 IN LIST OF -1, 0, 1  
                    SET current TO dp(r PLUS 1, c1 PLUS dc1, c2 PLUS dc2)  
                    IF current GREATER THAN max_cherries  
                        SET max_cherries TO current  
            
            RETURN cherries PLUS max_cherries  
        END FUNCTION  
        
        RETURN dp(0, 0, cols MINUS 1)  
    END FUNCTION  
END CLASS