CLASS Solution  
    FUNCTION maxHappyGroups(batchSize, groups)  
        IF batchSize EQUALS 1 THEN  
            RETURN LENGTH OF groups  
        END IF  

        SET remainder_count TO LIST OF batchSize ZEROS  
        FOR each group IN groups  
            INCREMENT remainder_count AT POSITION group MODULO batchSize BY 1  
        END FOR  

        FUNCTION dp(remainder, variable length remainder_count)  
            CONVERT remainder_count TO LIST  
            SET max_happy TO 0  

            FOR i FROM 0 TO batchSize MINUS 1  
                IF remainder_count AT POSITION i EQUALS 0 THEN  
                    CONTINUE TO NEXT i  
                END IF  

                DECREMENT remainder_count AT POSITION i BY 1  
                SET new_remainder TO remainder MINUS i MODULO batchSize  

                IF remainder EQUALS 0 THEN  
                    SET happy_groups TO 1 PLUS dp(new_remainder, ALL ELEMENTS OF remainder_count)  
                ELSE  
                    SET happy_groups TO dp(new_remainder, ALL ELEMENTS OF remainder_count)  
                END IF  

                SET max_happy TO GREATER OF max_happy AND happy_groups  
                INCREMENT remainder_count AT POSITION i BY 1  
            END FOR  

            RETURN max_happy  
        END FUNCTION  

        RETURN dp(0, ALL ELEMENTS OF remainder_count)  
    END FUNCTION  
END CLASS