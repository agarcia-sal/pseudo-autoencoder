CLASS Solution  
    FUNCTION scheduleCourse WITH PARAMETER courses  
        CALL the sorting PROCEDURE ON courses BY the second element of each course item representing the end day  
        SET max_heap TO an empty list representing the max-priority queue of negative durations  
        SET current_end_day TO zero representing the cumulative duration of scheduled courses  
        
        FOR each pair of duration AND last_day IN courses  
            IF the sum of current_end_day PLUS duration IS LESS THAN OR EQUAL TO last_day THEN  
                INSERT the negative value of duration INTO max_heap to represent adding the course  
                INCREMENT current_end_day BY duration  
            ELSE IF the max_heap IS NOT empty AND the negative of the first element in max_heap IS GREATER THAN duration THEN  
                INCREMENT current_end_day BY duration PLUS the value removed from max_heap representing the longest duration removed  
                INSERT the negative value of duration INTO max_heap representing the swapped shorter course  
            END IF  
        END FOR  
        
        RETURN the length of max_heap representing the total number of scheduled courses  
    END FUNCTION  
END CLASS