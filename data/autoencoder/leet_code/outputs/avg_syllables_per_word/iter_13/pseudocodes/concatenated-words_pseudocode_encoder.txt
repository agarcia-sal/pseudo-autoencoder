CLASS Trie  
    FUNCTION __init__()  
        SET children TO a list of twenty six elements each initialized TO None  
        SET is_end TO False  
    END FUNCTION  

    FUNCTION insert(w)  
        SET node TO this Trie instance  
        FOR each character c IN the string w  
            SET idx TO the Unicode code point of character c MINUS the Unicode code point of character a  
            IF the element at position idx of node.children IS None THEN  
                SET the element at position idx of node.children TO a new instance of Trie  
            END IF  
            SET node TO the element at position idx of node.children  
        END FOR  
        SET node.is_end TO True  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findAllConcatenatedWordsInADict(words)  
        FUNCTION dfs(w, start)  
            IF start EQUALS the length of string w THEN  
                RETURN True  
            END IF  
            SET node TO the variable trie  
            FOR each integer i FROM start TO the length of string w MINUS one  
                SET idx TO the Unicode code point of the character at position i of string w MINUS the Unicode code point of character a  
                IF the element at position idx of node.children IS None THEN  
                    RETURN False  
                END IF  
                SET node TO the element at position idx of node.children  
                IF node.is_end IS True AND dfs(w, i PLUS one) IS True THEN  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  

        SET trie TO a new instance of the class Trie  
        SET ans TO an empty list  
        SORT the list words in ascending order by the length of each word  
        FOR each word w IN the list words  
            IF w IS NOT an empty string THEN  
                IF dfs(w, zero) IS True THEN  
                    APPEND w TO the list ans  
                ELSE  
                    CALL insert method of trie WITH parameter w  
                END IF  
            END IF  
        END FOR  
        RETURN the list ans  
    END FUNCTION  
END CLASS