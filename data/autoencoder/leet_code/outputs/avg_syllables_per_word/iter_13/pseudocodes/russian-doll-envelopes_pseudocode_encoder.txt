CLASS Solution  
    FUNCTION maxEnvelopes(envelopes)  
        CALL sort ON envelopes BY ascending order of element at position zero AND descending order of element at position one  
        SET dp TO an empty list  
        FOR each element in envelopes  
            ASSIGN height TO element at position one of current element  
            SET index TO the position found by binary search locating the leftmost place to insert height into dp so that dp remains sorted  
            IF index EQUALS the LENGTH OF dp  
                APPEND height TO dp  
            ELSE  
                SET element at position index of dp TO height  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS