CLASS Solution  
    FUNCTION countPairs(nums AS List OF INTEGER, k AS INTEGER) RETURNS INTEGER  
        SET gcd_count TO AN ASSIGNMENT OF A NEW Counter OBJECT  
        
        FOR each num IN nums  
            INCREMENT the ELEMENT AT the RESULT OF gcd WITH PARAMETERS num AND k IN gcd_count BY one  
        END FOR  
        
        SET total_pairs TO zero  
        
        SET gcd_values TO A LIST CONVERSION OF THE KEYS OF gcd_count  
        SET n TO THE LENGTH OF gcd_values  
        
        FOR i FROM zero TO n MINUS one  
            FOR j FROM i TO n MINUS one  
                SET gcd1 TO THE ELEMENT AT POSITION i OF gcd_values  
                SET gcd2 TO THE ELEMENT AT POSITION j OF gcd_values  
                IF THE RESULT OF gcd1 MULTIPLIED BY gcd2 MODULO k EQUALS zero THEN  
                    IF i EQUALS j THEN  
                        INCREMENT total_pairs BY THE RESULT OF THE ELEMENT AT POSITION gcd1 IN gcd_count MULTIPLIED BY THE ELEMENT AT POSITION gcd1 IN gcd_count MINUS one DIVIDED BY two  
                    ELSE  
                        INCREMENT total_pairs BY THE ELEMENT AT POSITION gcd1 IN gcd_count MULTIPLIED BY THE ELEMENT AT POSITION gcd2 IN gcd_count  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        
        RETURN total_pairs  
    END FUNCTION  
END CLASS