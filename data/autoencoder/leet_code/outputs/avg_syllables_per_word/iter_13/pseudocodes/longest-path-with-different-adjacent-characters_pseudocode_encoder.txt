CLASS Solution  
    FUNCTION longestPath(parent AS List OF INTEGER, s AS STRING)  
        CREATE tree AS a new mapping with default value as empty list  
        FOR each index i AND element p IN parent  
            IF p IS NOT EQUAL TO negative one  
                APPEND i TO the element at position p of tree  
            END IF  
        END FOR  
        
        SET self result TO one  
        
        FUNCTION dfs(node)  
            SET maximum path one TO zero  
            SET maximum path two TO zero  
            
            FOR each child IN the element at position node of tree  
                SET child length TO dfs with argument child  
                IF the character at position child of s IS NOT EQUAL TO the character at position node of s  
                    IF child length IS GREATER THAN maximum path one  
                        SET maximum path two TO maximum path one  
                        SET maximum path one TO child length  
                    ELSE IF child length IS GREATER THAN maximum path two  
                        SET maximum path two TO child length  
                    END IF  
                END IF  
            END FOR  
            
            SET self result TO the GREATER OF self result AND maximum path one PLUS maximum path two PLUS one  
            
            RETURN maximum path one PLUS one  
        END FUNCTION  
        
        CALL dfs with argument zero  
        
        RETURN self result  
    END FUNCTION  
END CLASS