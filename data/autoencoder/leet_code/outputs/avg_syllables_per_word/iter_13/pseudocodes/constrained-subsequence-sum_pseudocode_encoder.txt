CLASS Solution  
    FUNCTION constrainedSubsetSum(nums LIST OF INTEGER, k INTEGER) RETURNS INTEGER  
        SET n TO the LENGTH OF nums  
        SET dp TO a list of n zeros  
        SET the element at position zero of dp TO the element at position zero of nums  
        SET max_sum TO the element at position zero of nums  
        ASSIGN pointer TO a new double ended queue containing the element zero  
        
        FOR each i FROM one TO n MINUS one  
            IF the element at the position at the front of pointer in dp IS GREATER THAN zero  
                SET dp_element TO the element at the position at the front of pointer in dp  
            ELSE  
                SET dp_element TO zero  
            END IF  
            SET the element at position i of dp TO the element at position i of nums PLUS dp_element  
            
            IF max_sum IS LESS THAN the element at position i of dp  
                SET max_sum TO the element at position i of dp  
            END IF  
            
            WHILE pointer IS NOT empty AND the element at position i of dp IS GREATER THAN OR EQUAL TO the element at the position at the back of pointer in dp  
                REMOVE the element at the back of pointer  
            END WHILE  
            
            APPEND i TO pointer  
            
            IF the element at the front of pointer IS EQUAL TO i MINUS k  
                REMOVE the element at the front of pointer  
            END IF  
        END FOR  
        
        RETURN max_sum  
    END FUNCTION  
END CLASS