CLASS Solution  
    FUNCTION largestRectangleArea WITH parameter heights  
        SET stack TO a new list containing negative one  
        SET max_area TO zero  
        APPEND zero TO heights  
        FOR each index i AND element h IN heights WITH enumeration  
            WHILE the element at the last position of stack NOT EQUAL TO negative one AND h LESS THAN the element at the element at the last position of stack of heights  
                SET height TO the element at the result of removing the last element from stack of heights  
                SET width TO i MINUS the element at the last position of stack MINUS one  
                SET max_area TO the greater of max_area AND height MULTIPLIED BY width  
            END WHILE  
            APPEND i TO stack  
        END FOR  
        RETURN max_area  
    END FUNCTION  
END CLASS