CLASS Solution  
    FUNCTION magicalString(n)  
        IF n EQUALS zero  
            RETURN zero  
        END IF  
        IF n LESS THAN OR EQUAL TO three  
            RETURN one  
        END IF  

        SET s TO list containing integer one followed by integer two followed by integer two  
        SET count TO integer one  
        SET index TO integer two  

        WHILE the LENGTH OF s LESS THAN n  
            SET next_num TO integer three MINUS element at position the LENGTH OF s MINUS one OF s  
            FOR each element FROM one TO element at position index OF s  
                APPEND next_num TO s  
            END FOR  
            IF next_num EQUALS one  
                INCREMENT count BY element at position index OF s  
            END IF  
            INCREMENT index BY one  
        END WHILE  

        IF LENGTH OF s GREATER THAN n  
            SET excess TO LENGTH OF s MINUS n  
            DECREMENT count BY element at position the LENGTH OF s MINUS one OF s MULTIPLIED BY excess  
        END IF  

        RETURN count  
    END FUNCTION  
END CLASS