CLASS Solution  
    FUNCTION shoppingOffers(price AS list of integers, special AS list of lists of integers, needs AS list of integers) RETURNS integer  
        SET special TO a new list containing each offer IN special WHERE the sum of elements of offer excluding the last element IS GREATER THAN zero AND the last element of offer IS LESS THAN the sum of products of corresponding elements from price and offer excluding the last element  
        
        FUNCTION dfs(needs) RETURNS integer  
            SET min_cost TO the sum of products of corresponding elements from price and needs  
            
            FOR each offer IN special  
                SET new_needs TO a new list containing for each pair of elements n and o from needs and offer excluding the last element the result of n MINUS o  
                IF for all elements n in new_needs the condition n IS GREATER THAN OR EQUAL TO zero HOLDS  
                    SET min_cost TO the smaller value between min_cost AND the sum of the last element of offer AND the result of dfs with tuple converted new_needs  
                END IF  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN the result of dfs with tuple converted needs  
    END FUNCTION  
END CLASS