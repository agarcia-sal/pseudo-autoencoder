CLASS Solution  
    FUNCTION ways(pizza, k)  
        FUNCTION dfs(i, j, k)  
            IF k EQUALS zero  
                RETURN integer VALUE OF the VALUE AT position m AND n in s MINUS the VALUE AT position i AND n in s MINUS the VALUE AT position m AND j in s PLUS the VALUE AT position i AND j in s IS GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR x FROM i PLUS one TO m MINUS one  
                IF the VALUE AT position x AND n in s MINUS the VALUE AT position i AND n in s MINUS the VALUE AT position x AND j in s PLUS the VALUE AT position i AND j in s IS GREATER THAN zero  
                    INCREMENT ans BY the RESULT OF dfs WITH PARAMETERS x j k MINUS one  
                END IF  
            END FOR  
            FOR y FROM j PLUS one TO n MINUS one  
                IF the VALUE AT position m AND y in s MINUS the VALUE AT position i AND y in s MINUS the VALUE AT position m AND j in s PLUS the VALUE AT position i AND j in s IS GREATER THAN zero  
                    INCREMENT ans BY the RESULT OF dfs WITH PARAMETERS i y k MINUS one  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  
        SET mod TO one billion PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF element AT position zero in pizza  
        SET s TO a TWO DIMENSIONAL list WITH m PLUS one ROWS AND n PLUS one COLUMNS INITIALIZED TO zero  
        FOR enumeration index i AND row IN pizza STARTING FROM one  
            FOR enumeration index j AND character c IN row STARTING FROM one  
                SET the VALUE AT position i AND j in s TO the VALUE AT position i MINUS one AND j in s PLUS the VALUE AT position i AND j MINUS one in s MINUS the VALUE AT position i MINUS one AND j MINUS one in s PLUS integer VALUE OF c EQUALS character A  
            END FOR  
        END FOR  
        RETURN the RESULT OF dfs WITH PARAMETERS zero zero k MINUS one  
    END FUNCTION  
END CLASS