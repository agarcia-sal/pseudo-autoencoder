CLASS Solution  
    FUNCTION sumOfDistancesInTree(n, edges)  
        SET graph TO a dictionary mapping each node to a list of its adjacent nodes  
        FOR each pair of nodes a and b IN edges  
            APPEND node b TO the list of adjacent nodes of node a in graph  
            APPEND node a TO the list of adjacent nodes of node b in graph  
        END FOR  

        SET count TO a list of size n with every element set to one  
        SET dist TO a list of size n with every element set to zero  

        FUNCTION dfs1(u, p)  
            FOR each node v IN the adjacency list of node u in graph  
                IF node v DOES NOT EQUAL node p  
                    CALL dfs1 with parameters v and u  
                    INCREMENT element at position u of count BY element at position v of count  
                    INCREMENT element at position u of dist BY element at position v of dist PLUS element at position v of count  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs1 with parameters zero and negative one  

        FUNCTION dfs2(u, p)  
            FOR each node v IN the adjacency list of node u in graph  
                IF node v DOES NOT EQUAL node p  
                    SET element at position v of dist TO element at position u of dist MINUS element at position v of count PLUS n MINUS element at position v of count  
                    CALL dfs2 with parameters v and u  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs2 with parameters zero and negative one  

        RETURN dist  
    END FUNCTION  
END CLASS