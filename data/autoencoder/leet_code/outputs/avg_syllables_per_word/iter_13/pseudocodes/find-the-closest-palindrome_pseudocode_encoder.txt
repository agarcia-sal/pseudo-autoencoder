CLASS Solution  
    FUNCTION nearestPalindromic WITH PARAMETER n  
        SET length TO the LENGTH OF n  
        IF length EQUALS one  
            RETURN the CONVERSION TO STRING OF the CONVERSION TO INTEGER OF n MINUS one  
        END IF  
        SET candidates TO an EMPTY SET  
        ADD the VALUE OF TEN RAISED TO THE POWER OF length PLUS one TO candidates  
        ADD the VALUE OF TEN RAISED TO THE POWER OF length MINUS one MINUS one TO candidates  
        SET prefix TO the CONVERSION TO INTEGER OF the SUBSTRING FROM POSITION zero TO the INTEGER DIVISION OF length PLUS one BY two OF n  
        FOR i FROM negative one TO positive one  
            SET new_prefix TO the CONVERSION TO STRING OF the VALUE OF prefix PLUS i  
            IF length MODULO two EQUALS zero  
                SET candidate TO the CONCATENATION OF new_prefix AND the REVERSE OF new_prefix  
            ELSE  
                SET candidate TO the CONCATENATION OF new_prefix AND the REVERSE OF the SUBSTRING FROM POSITION zero TO the SECOND TO LAST POSITION OF new_prefix  
            END IF  
            ADD the CONVERSION TO INTEGER OF candidate TO candidates  
        END FOR  
        SET original_number TO the CONVERSION TO INTEGER OF n  
        REMOVE original_number FROM candidates IF IT EXISTS  
        SET closest TO the ELEMENT IN candidates THAT MINIMIZES FIRST the ABSOLUTE VALUE OF the VALUE MINUS original_number AND SECOND the VALUE ITSELF  
        RETURN the CONVERSION TO STRING OF closest  
    END FUNCTION  
END CLASS