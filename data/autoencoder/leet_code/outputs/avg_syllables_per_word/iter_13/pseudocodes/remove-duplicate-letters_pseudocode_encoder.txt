CLASS Solution  
    FUNCTION removeDuplicateLetters(s)  
        SET last_occurrence TO a mapping from each character IN s TO its last position index in s  
        SET stack TO empty list  
        SET in_stack TO empty set  
        
        FOR each position index AND character char IN s  
            IF character char IS IN in_stack  
                CONTINUE to next iteration  
            END IF  
            
            WHILE stack IS NOT empty AND character char IS lexicographically LESS THAN character at last position of stack AND position index IS LESS THAN the last occurrence position of character at last position of stack  
                SET removed_char TO the element removed from the end of stack  
                REMOVE removed_char FROM in_stack  
            END WHILE  
            
            APPEND character char TO stack  
            ADD character char TO in_stack  
        END FOR  
        
        RETURN concatenation of all elements in stack AS string  
    END FUNCTION  
END CLASS