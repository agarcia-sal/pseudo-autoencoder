CLASS Solution  
    FUNCTION sequenceReconstruction(nums AS List of Integer, sequences AS List of List of Integer) RETURNS Boolean  
        SET n TO the LENGTH OF nums  
        SET graph TO a new mapping from Integer to List  
        SET indegree TO a new list of zeroes with the LENGTH OF n PLUS one  

        FOR each seq IN sequences  
            FOR each i FROM zero TO the LENGTH OF seq MINUS one MINUS one  
                SET u TO the element at position i of seq  
                SET v TO the element at position i PLUS one of seq  
                APPEND v TO the list at key u of graph  
                INCREMENT value at position v of indegree BY one  
            END FOR  
        END FOR  

        SET queue TO a new double ended queue initialized with all integers i from one TO n WHERE the element at position i of indegree EQUALS zero  

        IF the LENGTH OF queue NOT EQUALS one  
            RETURN False  
        END IF  

        SET index TO zero  
        WHILE queue is not empty  
            IF the LENGTH OF queue NOT EQUALS one  
                RETURN False  
            END IF  

            REMOVE and RETURN the leftmost element of queue INTO node  
            IF node NOT EQUALS the element at position index of nums  
                RETURN False  
            END IF  
            INCREMENT index BY one  

            FOR each neighbor IN the list at key node of graph  
                DECREMENT value at position neighbor of indegree BY one  
                IF the value at position neighbor of indegree EQUALS zero  
                    APPEND neighbor TO queue  
                END IF  
            END FOR  
        END WHILE  

        RETURN index EQUALS n  
    END FUNCTION  
END CLASS