CLASS Solution  
    FUNCTION longestIncreasingPath WITH parameter matrix  
        IF matrix IS empty OR element at position zero of matrix IS empty  
            RETURN zero  
        END IF  
        
        SET m TO the LENGTH OF matrix  
        SET n TO the LENGTH OF element at position zero of matrix  
        SET directions TO the LIST OF tuples containing one and zero negative one and zero zero and one zero and negative one  
        
        FUNCTION dfs WITH parameters x and y  
            IF element at position x of element at position y of dp DOES NOT EQUAL negative one  
                RETURN element at position x of element at position y of dp  
            END IF  
            
            SET max_length TO one  
            FOR each pair dx and dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                IF nx IS GREATER THAN OR EQUAL TO zero AND nx IS LESS THAN m AND ny IS GREATER THAN OR EQUAL TO zero AND ny IS LESS THAN n AND element at position nx of element at position ny of matrix IS GREATER THAN element at position x of element at position y of matrix  
                    SET max_length TO THE GREATER OF max_length AND one PLUS dfs called with nx and ny  
                END IF  
            END FOR  
            
            SET element at position x of element at position y of dp TO max_length  
            RETURN max_length  
        END FUNCTION  
        
        SET longest_path TO zero  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                SET longest_path TO THE GREATER OF longest_path AND dfs called with i and j  
            END FOR  
        END FOR  
        
        RETURN longest_path  
    END FUNCTION  
END CLASS