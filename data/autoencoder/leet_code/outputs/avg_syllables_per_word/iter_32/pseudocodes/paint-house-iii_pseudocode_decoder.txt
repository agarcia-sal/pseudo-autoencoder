CLASS Solution  
    FUNCTION minCost WITH PARAMETERS houses cost m n target  
        FUNCTION dp WITH PARAMETERS i prev_color groups  
            IF i EQUALS m  
                IF groups EQUALS target  
                    RETURN zero  
                ELSE  
                    RETURN positive infinity  
                END IF  
            END IF  
            
            IF element at position i of houses NOT EQUALS zero  
                SET new_groups TO groups PLUS one IF element at position i of houses NOT EQUALS prev_color OTHERWISE groups  
                RETURN result of dp WITH PARAMETERS i PLUS one element at position i of houses new_groups  
            END IF  
            
            SET min_cost TO positive infinity  
            FOR color FROM one TO n  
                SET new_groups TO groups PLUS one IF color NOT EQUALS prev_color OTHERWISE groups  
                SET candidate_cost TO element at position i of cost at position color MINUS one PLUS result of dp WITH PARAMETERS i PLUS one color new_groups  
                IF candidate_cost LESS THAN min_cost  
                    SET min_cost TO candidate_cost  
                END IF  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        SET result TO result of dp WITH PARAMETERS zero zero zero  
        IF result NOT EQUALS positive infinity  
            RETURN result  
        ELSE  
            RETURN negative one  
        END IF  
    END FUNCTION  
END CLASS