CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND a pair consisting of one and zero TO restrictions  
        SORT restrictions in ascending order according to the first element of each pair  
  
        FOR i FROM one TO the LENGTH OF restrictions MINUS one  
            SET idx TO the first element of the pair at position i of restrictions  
            SET height TO the second element of the pair at position i of restrictions  
            SET prev_idx TO the first element of the pair at position i MINUS one of restrictions  
            SET prev_height TO the second element of the pair at position i MINUS one of restrictions  
            SET the second element of the pair at position i of restrictions TO the lesser VALUE BETWEEN height AND the sum of prev_height PLUS idx MINUS prev_idx  
        END FOR  
  
        FOR i FROM the LENGTH OF restrictions MINUS two DOWN TO zero STEP MINUS one  
            SET idx TO the first element of the pair at position i of restrictions  
            SET height TO the second element of the pair at position i of restrictions  
            SET next_idx TO the first element of the pair at position i PLUS one of restrictions  
            SET next_height TO the second element of the pair at position i PLUS one of restrictions  
            SET the second element of the pair at position i of restrictions TO the lesser VALUE BETWEEN height AND the sum of next_height PLUS next_idx MINUS idx  
        END FOR  
  
        SET max_height TO zero  
        SET prev_idx TO the first element of the pair at position zero of restrictions  
        SET prev_height TO the second element of the pair at position zero of restrictions  
        FOR i FROM one TO the LENGTH OF restrictions MINUS one  
            SET idx TO the first element of the pair at position i of restrictions  
            SET height TO the second element of the pair at position i of restrictions  
            SET candidate TO the integer quotient of the sum of idx MINUS prev_idx PLUS prev_height PLUS height DIVIDED BY two  
            SET max_height TO the greater VALUE BETWEEN max_height AND candidate  
            SET prev_idx TO idx  
            SET prev_height TO height  
        END FOR  
  
        SET candidate TO the sum of prev_height PLUS n MINUS prev_idx  
        SET max_height TO the greater VALUE BETWEEN max_height AND candidate  
  
        RETURN max_height  
    END FUNCTION  
END CLASS