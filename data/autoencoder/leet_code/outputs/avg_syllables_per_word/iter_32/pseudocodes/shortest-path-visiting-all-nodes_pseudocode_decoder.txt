CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF the LENGTH OF graph EQUALS zero THEN  
            RETURN zero  
        END IF  
        
        SET n TO the LENGTH OF graph  
        CREATE queue AS an empty double ended queue  
        FOR each node FROM zero TO n MINUS one DO  
            APPEND the tuple of node AND a bitmask with one shifted left by node positions TO queue  
        END FOR  
        
        CREATE visited AS an empty set  
        FOR each node FROM zero TO n MINUS one DO  
            ADD the tuple of node AND a bitmask with one shifted left by node positions TO visited  
        END FOR  
        
        SET steps TO zero  
        SET all_nodes_visited TO a bitmask with one shifted left by n positions MINUS one  
        
        WHILE the LENGTH OF queue GREATER THAN zero DO  
            SET current_level_size TO the LENGTH OF queue  
            FOR each index FROM zero TO current_level_size MINUS one DO  
                REMOVE the first element FROM queue AND ASSIGN TO current_node AND visited_nodes  
                
                IF visited_nodes EQUALS all_nodes_visited THEN  
                    RETURN steps  
                END IF  
                
                FOR each neighbor IN the list of neighbors for current_node in graph DO  
                    SET next_visited_nodes TO visited_nodes OR a bitmask with one shifted left by neighbor positions  
                    SET next_state TO the tuple of neighbor AND next_visited_nodes  
                    
                    IF next_state NOT IN visited THEN  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
            
            INCREMENT steps BY one  
        END WHILE  
        
        RETURN negative one  
    END FUNCTION  
END CLASS