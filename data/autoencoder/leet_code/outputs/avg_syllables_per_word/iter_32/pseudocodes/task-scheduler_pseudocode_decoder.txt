CLASS Solution  
    FUNCTION leastInterval(tasks, n)  
        SET task_counts TO result of counting the frequency of each element in tasks  
        SET max_heap TO empty list  
        FOR each count IN the values of task_counts  
            APPEND the negative of count TO max_heap  
        END FOR  
        CALL procedure to organize max_heap into a heap structure  
        
        SET time TO zero  
        SET queue TO empty list  
        
        WHILE the length of max_heap is greater than zero OR the length of queue is greater than zero  
            WHILE the length of queue is greater than zero AND the first element at position zero of the first element of queue EQUALS time  
                SET pair TO removal of the first element at position zero of queue  
                SET count TO the second element at position one of pair  
                IF count LESS THAN zero  
                    CALL procedure to add count into max_heap heap  
                END IF  
            END WHILE  
            
            IF the length of max_heap is greater than zero  
                SET count TO removal of the smallest element of max_heap heap  
                SET count TO count PLUS one  
                IF count LESS THAN zero  
                    APPEND a pair of time PLUS n PLUS one and count TO queue  
                END IF  
            END IF  
            
            INCREMENT time BY one  
        END WHILE  
        
        RETURN time  
    END FUNCTION  
END CLASS