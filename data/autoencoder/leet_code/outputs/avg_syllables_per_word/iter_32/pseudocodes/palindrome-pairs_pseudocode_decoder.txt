CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS reversed sequence of characters in s  
        END FUNCTION  
        
        SET word_dict TO empty mapping from string to integer  
        FOR each index i FROM zero TO the LENGTH OF words MINUS one  
            ASSIGN the element at position i of words TO word  
            SET the key word TO the value i IN word_dict  
        END FOR  
        
        SET result TO empty list  
        
        FOR each index i FROM zero TO the LENGTH OF words MINUS one  
            ASSIGN the element at position i of words TO word  
            
            IF word EQUALS empty string DOES NOT HOLD  
                
                IF empty string EXISTS AS a key IN word_dict AND is_palindrome with argument word RETURNS true  
                    APPEND list containing i AND the value at key empty string in word_dict TO result  
                    APPEND list containing the value at key empty string in word_dict AND i TO result  
                END IF  
                
                SET reversed_word TO the sequence of characters in word in reverse order  
                
                IF reversed_word EXISTS AS a key IN word_dict AND the value at key reversed_word in word_dict NOT EQUALS i  
                    APPEND list containing i AND the value at key reversed_word in word_dict TO result  
                END IF  
                
                FOR each integer j FROM one TO the LENGTH OF word MINUS one  
                    SET prefix TO substring of word from position zero TO position j MINUS one  
                    SET suffix TO substring of word from position j TO the end  
                    SET reversed_prefix TO the sequence of characters in prefix in reverse order  
                    SET reversed_suffix TO the sequence of characters in suffix in reverse order  
                    
                    IF is_palindrome with argument suffix RETURNS true AND reversed_prefix EXISTS AS a key IN word_dict  
                        APPEND list containing i AND the value at key reversed_prefix in word_dict TO result  
                    END IF  
                    
                    IF is_palindrome with argument prefix RETURNS true AND reversed_suffix EXISTS AS a key IN word_dict  
                        APPEND list containing the value at key reversed_suffix in word_dict AND i TO result  
                    END IF  
                END FOR  
            END IF  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS