CLASS Trie  
    FUNCTION __init__ with no parameters  
        SET children TO a list of None elements with the length of twenty six  
        SET is_end TO False  
    END FUNCTION  

    FUNCTION insert with parameter w  
        SET node TO this object  
        FOR each character c IN w  
            SET idx TO the numeric Unicode code of character c MINUS the numeric Unicode code of character a  
            IF element at position idx of node children EQUALS None THEN  
                SET element at position idx of node children TO new instance of Trie  
            END IF  
            SET node TO element at position idx of node children  
        END FOR  
        SET node is_end TO True  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findAllConcatenatedWordsInADict with parameter words  
        FUNCTION dfs with parameters w and start  
            IF start EQUALS the length of w THEN  
                RETURN True  
            END IF  
            SET node TO trie  
            FOR i FROM start TO the length of w MINUS one  
                SET idx TO the numeric Unicode code of element at position i of w MINUS the numeric Unicode code of character a  
                IF element at position idx of node children EQUALS None THEN  
                    RETURN False  
                END IF  
                SET node TO element at position idx of node children  
                IF node is_end EQUALS True AND dfs called with w and i PLUS one RETURNS True THEN  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  

        SET trie TO new instance of Trie  
        SET ans TO empty list  
        SORT words IN PLACE by the length of each element  
        FOR each w IN words  
            IF w is not empty THEN  
                IF dfs called with w and zero RETURNS True THEN  
                    APPEND w TO ans  
                ELSE  
                    CALL insert on trie with w as argument  
                END IF  
            END IF  
        END FOR  
        RETURN ans  
    END FUNCTION  
END CLASS