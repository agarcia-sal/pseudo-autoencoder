CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO an empty mapping from element to position  
        FOR each element x WITH position i IN arr  
            ASSIGN reference TO position i IN index at key x  
        END FOR  
        SET dp TO an empty mapping from pair of positions to length  
        SET max_length TO zero  
        FOR position k FROM zero TO the length of arr MINUS one  
            FOR position j FROM zero TO position k MINUS one  
                SET difference TO element at position k of arr MINUS element at position j of arr  
                SET i TO the value from index at key difference OR negative one if not present  
                IF i GREATER THAN OR EQUAL TO zero AND i LESS THAN j THEN  
                    SET dp at key pair j and k TO the value from dp at key pair i and j OR two PLUS one  
                    IF dp at key pair j and k GREATER THAN max_length THEN  
                        SET max_length TO dp at key pair j and k  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        IF max_length GREATER THAN OR EQUAL TO three THEN  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS