CLASS Solution  
    FUNCTION maximumScore(scores AS List of integers scores, edges AS List of List of integers edges)  
        ASSIGN reference TO an empty mapping with default empty lists graph  
        FOR each pair of integers u AND v IN edges  
            APPEND the pair consisting of element at position v of scores AND v TO the list at position u of graph  
            APPEND the pair consisting of element at position u of scores AND u TO the list at position v of graph  
        END FOR  
        FOR each element node IN the set of keys of graph  
            SET the list at position node of graph TO the three elements with the greatest first component from the list at position node of graph  
        END FOR  
        SET max_score TO negative one  
        FOR each pair of integers u AND v IN edges  
            FOR each pair score1 AND x IN the list at position u of graph  
                FOR each pair score2 AND y IN the list at position v of graph  
                    IF the number of distinct elements among x y u and v EQUALS four  
                        IF max_score LESS THAN score1 PLUS score2 PLUS element at position u of scores PLUS element at position v of scores  
                            SET max_score TO score1 PLUS score2 PLUS element at position u of scores PLUS element at position v of scores  
                        END IF  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        RETURN max_score  
    END FUNCTION  
END CLASS