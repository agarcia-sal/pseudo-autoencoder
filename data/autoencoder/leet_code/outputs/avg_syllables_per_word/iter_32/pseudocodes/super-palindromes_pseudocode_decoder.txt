CLASS Solution  
    FUNCTION superpalindromesInRange(left right)  
        FUNCTION is_palindrome(num)  
            SET num_string TO string representation of num  
            SET reversed_num_string TO string representation of num read from last character to first character  
            IF num_string EQUALS reversed_num_string  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  
        
        FUNCTION generate_palindromes(limit)  
            SET palindromes TO empty list  
            FOR i FROM one TO one hundred thousand MINUS one  
                SET s TO string representation of i  
                SET odd_length_palindrome_string TO concatenation of s and the substring of s from second last character TO first character in reverse order  
                CONVERT odd_length_palindrome_string TO integer and APPEND to palindromes  
                SET even_length_palindrome_string TO concatenation of s and the reverse of s  
                CONVERT even_length_palindrome_string TO integer and APPEND to palindromes  
            END FOR  
            SET filtered_palindromes TO empty list  
            FOR each p IN palindromes  
                IF p LESS THAN OR EQUAL TO limit  
                    APPEND p TO filtered_palindromes  
                END IF  
            END FOR  
            RETURN filtered_palindromes  
        END FUNCTION  
        
        SET left TO integer conversion of left  
        SET right TO integer conversion of right  
        SET limit TO integer conversion of the square root of right PLUS one  
        SET palindromes TO result of generate_palindromes invoked with limit  
        
        SET count TO zero  
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF square GREATER THAN OR EQUAL TO left AND square LESS THAN OR EQUAL TO right AND is_palindrome invoked with square RETURNS true  
                INCREMENT count BY one  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS