CLASS Solution  
    FUNCTION minNumberOfSemesters(n parameter, relations parameter, k parameter)  
        ASSIGN reference TO a default dictionary with list as default value named graph  
        ASSIGN reference TO a list named in_degree with the size of the value of n parameter PLUS one where all elements are set to zero  
        
        FOR each element named prevCourse AND each element named nextCourse IN relations parameter  
            APPEND element named nextCourse TO the list at key prevCourse in graph  
            INCREMENT element at position nextCourse of in_degree BY one  
        END FOR  
        
        ASSIGN reference TO an empty double-ended queue named queue  
        FOR each element named course FROM one TO the value of n parameter inclusive  
            IF element at position course of in_degree EQUALS zero THEN  
                APPEND element named course TO queue  
            END IF  
        END FOR  
        
        SET variable semesters TO zero  
        
        WHILE the length of queue is greater than zero DO  
            SET variable to the minimum of the value of k parameter AND the length of queue  
            FOR each index FROM one TO that variable inclusive  
                REMOVE the first element from queue and ASSIGN it TO variable current_course  
                FOR each element named next_course IN the list at key current_course in graph  
                    DECREMENT element at position next_course of in_degree BY one  
                    IF element at position next_course of in_degree EQUALS zero THEN  
                        APPEND element named next_course TO queue  
                    END IF  
                END FOR  
            END FOR  
            INCREMENT variable semesters BY one  
        END WHILE  
        
        RETURN variable semesters  
    END FUNCTION  
END CLASS