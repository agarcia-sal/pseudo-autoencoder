CLASS Solution  
    FUNCTION constrainedSubsetSum(nums, k)  
        SET n TO the LENGTH OF nums  
        SET dp TO a list of zeros with the LENGTH OF nums  
        SET the element at position zero of dp TO the element at position zero of nums  
        SET max_sum TO the element at position zero of nums  
        ASSIGN reference TO a new empty double ended queue containing the element zero  
  
        FOR i FROM one TO n MINUS one  
            IF the element at position at the front of the queue of dp IS GREATER THAN zero  
                SET dp at position i TO the element at position i of nums PLUS the element at position at the front of the queue of dp  
            ELSE  
                SET dp at position i TO the element at position i of nums  
            END IF  
            IF max_sum IS LESS THAN dp at position i  
                SET max_sum TO dp at position i  
            END IF  
            WHILE the queue is not empty AND dp at position i IS GREATER THAN OR EQUAL TO dp at position at the last element of the queue  
                REMOVE the last element from the queue  
            END WHILE  
            ADD element i to the end of the queue  
            IF the element at position zero of the queue EQUALS i MINUS k  
                REMOVE the element from the front of the queue  
            END IF  
        END FOR  
  
        RETURN max_sum  
    END FUNCTION  
END CLASS