CLASS Solution  
    FUNCTION ways(pizza, k)  
        FUNCTION dfs(i, j, k)  
            IF k EQUALS zero  
                RETURN integer value of the difference between the element at position m of s at position n MINUS the element at position i of s at position n MINUS the element at position m of s at position j PLUS the element at position i of s at position j GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR each x FROM i PLUS one TO m MINUS one  
                IF the difference between the element at position x of s at position n MINUS the element at position i of s at position n MINUS the element at position x of s at position j PLUS the element at position i of s at position j GREATER THAN zero  
                    INCREMENT ans BY dfs with parameters x, j, k MINUS one  
                END IF  
            END FOR  
            FOR each y FROM j PLUS one TO n MINUS one  
                IF the difference between the element at position m of s at position y MINUS the element at position i of s at position y MINUS the element at position m of s at position j PLUS the element at position i of s at position j GREATER THAN zero  
                    INCREMENT ans BY dfs with parameters i, y, k MINUS one  
                END IF  
            END FOR  
            RETURN the remainder of ans DIVIDED BY mod  
        END FUNCTION  
        SET mod TO one billion PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF the element at position zero of pizza  
        INITIALIZE s as a list containing m PLUS one elements each of which is a list containing n PLUS one zeros  
        FOR each i with one based index and row IN pizza  
            FOR each j with one based index and c IN row  
                SET the element at position i of s at position j TO the sum of the element at position i MINUS one of s at position j PLUS the element at position i of s at position j MINUS one MINUS the element at position i MINUS one of s at position j MINUS one PLUS integer value of the comparison whether c EQUALS capital letter A  
            END FOR  
        END FOR  
        RETURN dfs with parameters zero, zero, k MINUS one  
    END FUNCTION  
END CLASS