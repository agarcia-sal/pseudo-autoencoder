CLASS Solution  
    FUNCTION longestPath(parent WITH TYPE List OF Integer, s WITH TYPE String) RETURNS Integer  
        CREATE a mapping called tree that assigns each key TO a list of values with default empty list  
        FOR index i AND element p IN the enumeration of parent  
            IF p NOT EQUALS negative one THEN  
                APPEND index i TO the list associated with key p IN tree  
            END IF  
        END FOR  
        
        SET the attribute result TO one  
        
        FUNCTION dfs(node) RETURNS Integer  
            SET max1 TO zero  
            SET max2 TO zero  
            
            FOR each child IN the elements associated with key node IN tree  
                SET child_length TO the result of calling dfs WITH argument child  
                
                IF the character at position child of s NOT EQUALS the character at position node of s THEN  
                    IF child_length GREATER THAN max1 THEN  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length GREATER THAN max2 THEN  
                        SET max2 TO child_length  
                    END IF  
                END IF  
            END FOR  
            
            SET result TO the greater value BETWEEN the current attribute result AND max1 PLUS max2 PLUS one  
            UPDATE the attribute result TO result  
            
            RETURN max1 PLUS one  
        END FUNCTION  
        
        CALL dfs WITH argument zero  
        
        RETURN the attribute result  
    END FUNCTION  
END CLASS