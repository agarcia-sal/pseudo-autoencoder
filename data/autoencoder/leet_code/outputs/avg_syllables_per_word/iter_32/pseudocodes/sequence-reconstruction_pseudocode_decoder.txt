CLASS Solution  
    FUNCTION sequenceReconstruction(nums, sequences)  
        SET n TO the LENGTH OF nums  
        ASSIGN graph TO a new mapping from elements to empty lists by default  
        SET indegree TO a list of zeros with length n PLUS one  
        
        FOR each seq IN sequences  
            FOR i FROM zero TO the LENGTH OF seq MINUS one MINUS one  
                SET u TO element at position i of seq  
                SET v TO element at position i PLUS one of seq  
                APPEND v TO the list that is graph at u  
                INCREMENT the element at position v of indegree BY one  
            END FOR  
        END FOR  
        
        ASSIGN queue TO a new double ended queue containing each i FROM one TO n WHERE the element at position i of indegree EQUALS zero  
        
        IF the LENGTH OF queue NOT EQUALS one THEN  
            RETURN false  
        END IF  
        
        SET index TO zero  
        WHILE queue is not empty  
            IF the LENGTH OF queue NOT EQUALS one THEN  
                RETURN false  
            END IF  
            
            REMOVE and ASSIGN the first element of queue TO node  
            
            IF node NOT EQUALS element at position index of nums THEN  
                RETURN false  
            END IF  
            
            INCREMENT index BY one  
            
            FOR each neighbor IN the list that is graph at node  
                DECREMENT the element at position neighbor of indegree BY one  
                IF the element at position neighbor of indegree EQUALS zero THEN  
                    APPEND neighbor TO queue  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN index EQUALS n  
    END FUNCTION  
END CLASS