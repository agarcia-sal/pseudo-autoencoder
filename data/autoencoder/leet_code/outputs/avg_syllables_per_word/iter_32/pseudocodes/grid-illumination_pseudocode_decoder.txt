CLASS Solution  
    FUNCTION gridIllumination(n, lamps, queries)  
        INITIALIZE a dictionary named row_count that returns zero for missing keys  
        INITIALIZE a dictionary named col_count that returns zero for missing keys  
        INITIALIZE a dictionary named diag_count that returns zero for missing keys representing the difference between row and column  
        INITIALIZE a dictionary named anti_diag_count that returns zero for missing keys representing the sum of row and column  
        
        INITIALIZE an empty set named lamp_positions to keep track of current lamp locations  
        
        FOR each pair of values r and c IN lamps  
            IF the pair of values r and c is not IN lamp_positions  
                ADD the pair of values r and c TO lamp_positions  
                INCREMENT row_count at key r BY one  
                INCREMENT col_count at key c BY one  
                INCREMENT diag_count at key corresponding to r MINUS c BY one  
                INCREMENT anti_diag_count at key corresponding to r PLUS c BY one  
            END IF  
        END FOR  
        
        DEFINE a list named directions CONTAINING the nine pairs of integers representing relative positions from one position including diagonals and the position itself  
        
        INITIALIZE an empty list named result  
        
        FOR each pair of values r and c IN queries  
            IF row_count at key r IS GREATER THAN zero OR col_count at key c IS GREATER THAN zero OR diag_count at key corresponding to r MINUS c IS GREATER THAN zero OR anti_diag_count at key corresponding to r PLUS c IS GREATER THAN zero  
                APPEND one TO result  
            ELSE  
                APPEND zero TO result  
            END IF  
            
            FOR each pair of values dr and dc IN directions  
                SET variables nr TO the sum of values r PLUS dr  
                SET variable nc TO the sum of values c PLUS dc  
                
                IF the pair of values nr and nc IS IN lamp_positions  
                    REMOVE the pair of values nr and nc FROM lamp_positions  
                    DECREMENT row_count at key nr BY one  
                    DECREMENT col_count at key nc BY one  
                    DECREMENT diag_count at key corresponding to nr MINUS nc BY one  
                    DECREMENT anti_diag_count at key corresponding to nr PLUS nc BY one  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS