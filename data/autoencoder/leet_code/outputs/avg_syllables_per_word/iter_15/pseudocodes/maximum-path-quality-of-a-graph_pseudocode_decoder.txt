CLASS Solution  
    FUNCTION maximalPathQuality(values AS List OF integers, edges AS List OF List OF integers, maxTime AS integer) RETURNS integer  
        SET graph TO an empty mapping from integer to list of pairs of integer and integer  
        
        FOR each element u, v, time IN edges  
            APPEND the pair of v and time TO the list at key u in graph  
            APPEND the pair of u and time TO the list at key v in graph  
        END FOR  
        
        SET visited TO an empty set  
        SET max_quality TO zero  
        
        FUNCTION dfs(node AS integer, current_time AS integer, current_quality AS integer)  
            IF node EQUALS zero  
                SET max_quality TO the greater value BETWEEN max_quality AND current_quality  
            END IF  
            
            FOR each pair neighbor and time IN the list at key node in graph  
                IF time LESS THAN OR EQUAL TO current_time  
                    IF neighbor IS NOT IN visited  
                        ADD neighbor TO visited  
                        CALL dfs WITH neighbor, current_time MINUS time, current_quality PLUS the element at position neighbor of values  
                        REMOVE neighbor FROM visited  
                    ELSE  
                        CALL dfs WITH neighbor, current_time MINUS time, current_quality  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  
        
        ADD zero TO visited  
        CALL dfs WITH zero, maxTime, the element at position zero of values  
        
        RETURN max_quality  
    END FUNCTION  
END CLASS