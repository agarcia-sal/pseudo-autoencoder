CLASS Solution  
    FUNCTION rectangleArea(rectangles)  
        SET MOD TO one billion PLUS seven  
        
        SET y_coords TO an empty set  
        FOR each x1 comma y1 comma x2 comma y2 IN rectangles  
            ADD y1 TO y_coords  
            ADD y2 TO y_coords  
        END FOR  
        
        SET y_coords TO the sorted list of elements in y_coords  
        SET y_index TO a mapping from each y IN y_coords TO its position index in y_coords  
        SET count TO a list of zero elements with the LENGTH OF y_coords  
        
        SET events TO an empty list  
        FOR each x1 comma y1 comma x2 comma y2 IN rectangles  
            APPEND a tuple of x1 comma one comma y1 comma y2 TO events  
            APPEND a tuple of x2 comma negative one comma y1 comma y2 TO events  
        END FOR  
        
        SORT events by the first element of each tuple which is the x-coordinate  
        
        SET prev_x TO zero  
        SET area TO zero  
        
        FOR each x comma eventType comma y1 comma y2 IN events  
            SET current_length TO zero  
            FOR i FROM one TO the LENGTH OF count MINUS one  
                IF the element at position i minus one of count IS GREATER THAN zero  
                    INCREMENT current_length BY the element at position i of y_coords MINUS the element at position i minus one of y_coords  
                END IF  
            END FOR  
            
            INCREMENT area BY the product of current_length AND the difference of x MINUS prev_x  
            SET area TO the remainder of area DIVIDED BY MOD  
            
            IF eventType EQUALS one  
                FOR i FROM the position index of y1 IN y_index TO the position index of y2 IN y_index MINUS one  
                    INCREMENT the element at position i of count BY one  
                END FOR  
            ELSE  
                FOR i FROM the position index of y1 IN y_index TO the position index of y2 IN y_index MINUS one  
                    DECREMENT the element at position i of count BY one  
                END FOR  
            END IF  
            
            SET prev_x TO x  
        END FOR  
        
        RETURN area  
    END FUNCTION  
END CLASS