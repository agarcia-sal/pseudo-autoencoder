CLASS Solution  
    FUNCTION numOfWays(nums)  
        SET MOD TO one billion PLUS seven  

        FUNCTION count_ways(arr)  
            IF the LENGTH OF arr IS LESS THAN OR EQUAL TO one  
                RETURN one  
            END IF  

            SET root TO the element at position zero of arr  
            SET left_subtree TO an empty list  
            SET right_subtree TO an empty list  

            FOR each element x IN arr  
                IF x IS LESS THAN root  
                    APPEND x TO left_subtree  
                ELSE IF x IS GREATER THAN root  
                    APPEND x TO right_subtree  
                END IF  
            END FOR  

            SET ways_left TO count_ways(left_subtree)  
            SET ways_right TO count_ways(right_subtree)  

            SET total_ways TO the NUMBER OF COMBINATIONS OF the sum of the LENGTH OF left_subtree AND the LENGTH OF right_subtree CHOOSE the LENGTH OF left_subtree  

            RETURN ways_left MULTIPLIED BY ways_right MULTIPLIED BY total_ways MODULO MOD  
        END FUNCTION  

        RETURN the VALUE OF count_ways(nums) MINUS one MODULO MOD  
    END FUNCTION  
END CLASS