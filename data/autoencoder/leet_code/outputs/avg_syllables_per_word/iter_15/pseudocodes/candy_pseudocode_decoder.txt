CLASS Solution  
    FUNCTION candy WITH parameters ratings  
        SET n TO the LENGTH OF ratings  
        SET candies TO a list containing the number one REPEATED n times  
        FOR index FROM one TO n MINUS one  
            IF the element at position index of ratings IS GREATER THAN the element at position index MINUS one of ratings  
                SET the element at position index of candies TO the element at position index MINUS one of candies PLUS one  
            END IF  
        END FOR  
        FOR index FROM n MINUS two DOWN TO zero  
            IF the element at position index of ratings IS GREATER THAN the element at position index PLUS one of ratings  
                SET the element at position index of candies TO the GREATER BETWEEN the element at position index of candies AND the element at position index PLUS one of candies PLUS one  
            END IF  
        END FOR  
        RETURN the SUM OF all elements in candies  
    END FUNCTION  
END CLASS