CLASS Solution  
    FUNCTION maxEnvelopes(envelopes AS list of list of integers) RETURNS integer  
        SORT envelopes BY the element at position zero of each envelope IN ascending order AND BY the negative of the element at position one of each envelope IN descending order  
        SET dp TO an empty list  
        FOR each tuple consisting of any value ignored AND height h IN envelopes  
            SET idx TO the position found by binary searching the leftmost place in dp WHERE h CAN BE inserted without breaking order  
            IF idx EQUALS the LENGTH OF dp  
                APPEND h TO dp  
            ELSE  
                SET the element at position idx of dp TO h  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS