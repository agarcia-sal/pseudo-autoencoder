CLASS Solution  
    FUNCTION areConnected(n integer, threshold integer, queries list of list of integer) RETURNS list of boolean  
        IF threshold EQUALS zero THEN  
            RETURN a list of boolean True repeated for the LENGTH OF queries  
        END IF  

        SET parent TO a list of integers from zero TO n inclusive  

        FUNCTION find(x integer) RETURNS integer  
            IF the element at position x of parent NOT EQUALS x THEN  
                SET the element at position x of parent TO the result of find applied to the element at position x of parent  
            END IF  
            RETURN the element at position x of parent  
        END FUNCTION  

        FUNCTION union(x integer, y integer)  
            SET rootX TO find applied to x  
            SET rootY TO find applied to y  
            IF rootX NOT EQUALS rootY THEN  
                SET the element at position rootY of parent TO rootX  
            END IF  
        END FUNCTION  

        FOR i FROM threshold PLUS one TO n inclusive  
            FOR j FROM two TIMES i TO n inclusive IN STEPS OF i  
                CALL union with i and j  
            END FOR  
        END FOR  

        SET result TO an empty list  
        FOR each pair consisting of a and b IN queries  
            APPEND to result the result of the equality test of find applied to a and find applied to b  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS