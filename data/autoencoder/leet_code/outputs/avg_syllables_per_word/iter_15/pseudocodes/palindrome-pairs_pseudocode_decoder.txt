CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the REVERSE ORDER OF s  
        END FUNCTION  
        
        SET word_dict TO an EMPTY DICTIONARY  
        FOR each i AND word IN words WITH THEIR INDICES  
            SET the element at position word OF word_dict TO i  
        END FOR  
        
        SET result TO an EMPTY LIST  
        
        FOR each i AND word IN words WITH THEIR INDICES  
            IF word NOT EQUALS AN EMPTY STRING  
                
                IF an EMPTY STRING IS A KEY IN word_dict AND is_palindrome(word) HOLDS  
                    APPEND a LIST CONTAINING i AND the element at position EMPTY STRING OF word_dict TO result  
                    APPEND a LIST CONTAINING the element at position EMPTY STRING OF word_dict AND i TO result  
                END IF  
                
                SET reversed_word TO the REVERSE ORDER OF word  
                IF reversed_word IS A KEY IN word_dict AND the element at position reversed_word OF word_dict NOT EQUALS i  
                    APPEND a LIST CONTAINING i AND the element at position reversed_word OF word_dict TO result  
                END IF  
                
                FOR each j FROM one TO the LENGTH OF word MINUS one  
                    SET prefix TO the SUBSTRING FROM position zero TO j MINUS one OF word  
                    SET suffix TO the SUBSTRING FROM position j TO the END OF word  
                    SET reversed_prefix TO the REVERSE ORDER OF prefix  
                    SET reversed_suffix TO the REVERSE ORDER OF suffix  
                    
                    IF is_palindrome(suffix) HOLDS AND reversed_prefix IS A KEY IN word_dict  
                        APPEND a LIST CONTAINING i AND the element at position reversed_prefix OF word_dict TO result  
                    END IF  
                    
                    IF is_palindrome(prefix) HOLDS AND reversed_suffix IS A KEY IN word_dict  
                        APPEND a LIST CONTAINING the element at position reversed_suffix OF word_dict AND i TO result  
                    END IF  
                END FOR  
            END IF  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS