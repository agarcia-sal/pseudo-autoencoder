CLASS Solution  
    FUNCTION trap(height)  
        IF height EQUALS empty  
            RETURN zero  
        END IF  
      
        SET n TO the LENGTH OF height  
        INITIALIZE left_max AS a list OF n elements ALL SET TO zero  
        INITIALIZE right_max AS a list OF n elements ALL SET TO zero  
      
        SET element at position zero of left_max TO element at position zero of height  
        FOR index FROM one TO n MINUS one  
            SET element at position index of left_max TO the GREATER VALUE BETWEEN element at position index MINUS one of left_max AND element at position index of height  
        END FOR  
      
        SET element at position n MINUS one of right_max TO element at position n MINUS one of height  
        FOR index FROM n MINUS two DOWN TO zero  
            SET element at position index of right_max TO the GREATER VALUE BETWEEN element at position index PLUS one of right_max AND element at position index of height  
        END FOR  
      
        SET trapped_water TO zero  
        FOR index FROM zero TO n MINUS one  
            INCREMENT trapped_water BY the LESSER VALUE BETWEEN element at position index of left_max AND element at position index of right_max MINUS element at position index of height  
        END FOR  
      
        RETURN trapped_water  
    END FUNCTION  
END CLASS