CLASS Solution  
    FUNCTION loudAndRich(richer AS List of List of Integer, quiet AS List of Integer) RETURNS List of Integer  
        SET graph TO a new mapping from Integer TO List of Integer with default empty list  
        FOR each pair a AND b IN richer  
            APPEND a TO the list at key b IN graph  
        END FOR  
        SET n TO the LENGTH OF quiet  
        SET answer TO a new list of length n WITH all elements SET TO negative one  
        FUNCTION dfs(person AS Integer) RETURNS Integer  
            IF element at position person of answer EQUALS negative one THEN  
                SET element at position person of answer TO person  
                FOR each neighbor IN the list at key person IN graph  
                    SET candidate TO dfs(neighbor)  
                    IF element at position candidate of quiet LESS THAN element at position of element at position person of answer of quiet THEN  
                        SET element at position person of answer TO candidate  
                    END IF  
                END FOR  
            END IF  
            RETURN element at position person of answer  
        END FUNCTION  
        FOR i FROM zero TO n MINUS one  
            CALL dfs WITH i  
        END FOR  
        RETURN answer  
    END FUNCTION  
END CLASS