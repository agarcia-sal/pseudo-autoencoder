CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND list containing number one and number zero TO restrictions  
        SORT restrictions BY natural ordering  
        
        FOR index FROM number one TO the LENGTH OF restrictions MINUS number one  
            SET current_index TO element at position index of restrictions AT position zero  
            SET current_height TO element at position index of restrictions AT position one  
            SET previous_index TO element at position index MINUS one of restrictions AT position zero  
            SET previous_height TO element at position index MINUS one of restrictions AT position one  
            
            SET element at position index of restrictions AT position one TO the MINIMUM OF current_height AND previous_height PLUS current_index MINUS previous_index  
        END FOR  
        
        FOR index FROM the LENGTH OF restrictions MINUS two DOWN TO zero BY decrement of number one  
            SET current_index TO element at position index of restrictions AT position zero  
            SET current_height TO element at position index of restrictions AT position one  
            SET next_index TO element at position index PLUS one of restrictions AT position zero  
            SET next_height TO element at position index PLUS one of restrictions AT position one  
            
            SET element at position index of restrictions AT position one TO the MINIMUM OF current_height AND next_height PLUS next_index MINUS current_index  
        END FOR  
        
        SET max_height TO zero  
        SET previous_index TO element at position zero of restrictions AT position zero  
        SET previous_height TO element at position zero of restrictions AT position one  
        
        FOR index FROM number one TO the LENGTH OF restrictions MINUS number one  
            SET current_index TO element at position index of restrictions AT position zero  
            SET current_height TO element at position index of restrictions AT position one  
            
            SET possible_height TO current_index MINUS previous_index PLUS previous_height PLUS current_height DIVIDED BY number two  
            SET max_height TO the MAXIMUM OF max_height AND possible_height  
            
            SET previous_index TO current_index  
            SET previous_height TO current_height  
        END FOR  
        
        SET max_height TO the MAXIMUM OF max_height AND previous_height PLUS n MINUS previous_index  
        
        RETURN max_height  
    END FUNCTION  
END CLASS