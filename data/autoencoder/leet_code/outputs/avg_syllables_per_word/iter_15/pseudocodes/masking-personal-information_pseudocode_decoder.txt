CLASS Solution  
    FUNCTION maskPII(s)  
        IF the character at position one of s EQUALS the character at position one representing at sign is IN s  
            SET local TO the substring of s from position zero TO the position before the character representing at sign  
            SET domain TO the substring of s from the position after the character representing at sign TO the end of s  
            SET masked_local TO the concatenation of the character at position zero of local, five repetitions of the character representing asterisk, and the character at the last position of local  
            RETURN the lowercase form of masked_local concatenated with the character representing at sign and the lowercase form of domain  
        ELSE  
            SET digits TO the concatenation of each character filtered from s where the character is a digit  
            SET local_number TO the concatenation of three characters representing asterisk, hyphen, three characters representing asterisk, hyphen, and the substring of digits from the position at the length of digits minus four to the end  
            IF the length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the length of digits MINUS ten  
                SET country_code TO the concatenation of the character representing plus sign, the repetition of the character representing asterisk country_code_length times, and a character representing hyphen  
                RETURN the concatenation of country_code and local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS