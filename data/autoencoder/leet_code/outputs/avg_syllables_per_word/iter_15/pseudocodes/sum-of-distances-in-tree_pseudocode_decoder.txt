CLASS Solution  
    FUNCTION sumOfDistancesInTree(n, edges)  
        SET graph TO a new default dictionary with list as the default value type  
        FOR each pair of nodes a and b IN edges  
            APPEND node b TO the list at key a in graph  
            APPEND node a TO the list at key b in graph  
        END FOR  

        SET count TO a list of integer one repeated n times  
        SET dist TO a list of integer zero repeated n times  

        FUNCTION dfs1(u, p)  
            FOR each node v IN the list at key u in graph  
                IF node v is NOT EQUAL TO node p THEN  
                    CALL dfs1 with parameters v and u  
                    INCREMENT count at position u BY the value of count at position v  
                    INCREMENT dist at position u BY the value of dist at position v PLUS the value of count at position v  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs1 with parameters zero and minus one  

        FUNCTION dfs2(u, p)  
            FOR each node v IN the list at key u in graph  
                IF node v is NOT EQUAL TO node p THEN  
                    SET dist at position v TO the value of dist at position u MINUS the value of count at position v PLUS the value of n MINUS the value of count at position v  
                    CALL dfs2 with parameters v and u  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs2 with parameters zero and minus one  

        RETURN dist  
    END FUNCTION  
END CLASS