CLASS Solution  
    FUNCTION sequenceReconstruction(nums, sequences)  
        SET n TO the LENGTH OF nums  
        SET graph TO an empty mapping from key TO list initialized by DEFAULT  
        SET indegree TO a list of zeroes with length equal TO n PLUS one  
        
        FOR each sequence IN sequences  
            FOR each index i FROM zero TO the LENGTH OF sequence MINUS one MINUS one  
                SET u TO the element at position i of sequence  
                SET v TO the element at position i PLUS one of sequence  
                APPEND v TO the list associated with key u in graph  
                INCREMENT the value at position v in indegree BY one  
            END FOR  
        END FOR  
        
        SET queue TO a double ended queue containing all indices i FROM one TO n INCLUSIVE where the value at position i in indegree EQUALS zero  
        
        IF the LENGTH OF queue DOES NOT EQUAL one  
            RETURN false  
        END IF  
        
        SET index TO zero  
        WHILE queue is not empty  
            IF the LENGTH OF queue DOES NOT EQUAL one  
                RETURN false  
            END IF  
            
            REMOVE the element from the front of queue AND ASSIGN IT TO node  
            IF node DOES NOT EQUAL the element at position index of nums  
                RETURN false  
            END IF  
            INCREMENT index BY one  
            
            FOR each neighbor IN the list associated with key node in graph  
                DECREMENT the value at position neighbor in indegree BY one  
                IF the value at position neighbor in indegree EQUALS zero  
                    APPEND neighbor TO queue  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN whether index EQUALS n  
    END FUNCTION  
END CLASS