CLASS Solution  
    FUNCTION maxStudents WITH PARAMETER seats  
        SET m TO the LENGTH OF seats  
        SET n TO the LENGTH OF element at position zero of seats  
        
        SET broken TO a list of size m with all elements zero  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF element at position j of element at position i of seats EQUALS the character hash  
                    SET element at position i of broken TO element at position i of broken BITWISE OR LEFT SHIFT one BY j positions  
                END IF  
            END FOR  
        END FOR  
        
        FUNCTION is_valid WITH PARAMETER arrangement  
            RETURN the result of arrangement BITWISE AND the result of arrangement RIGHT SHIFTED BY one EQUALS zero  
        END FUNCTION  
        
        SET dp TO a list of size m where each element is an empty dictionary  
        
        FOR arrangement FROM zero TO two POWER n MINUS one  
            IF is_valid WITH arrangement RETURNS true AND arrangement BITWISE AND element at position zero of broken EQUALS zero  
                SET the value for key arrangement in element at position zero of dp TO the COUNT OF one bits in arrangement  
            END IF  
        END FOR  
        
        FOR i FROM one TO m MINUS one  
            FOR arrangement FROM zero TO two POWER n MINUS one  
                IF is_valid WITH arrangement RETURNS true AND arrangement BITWISE AND element at position i of broken EQUALS zero  
                    SET max_students TO zero  
                    FOR each prev_arrangement IN keys of element at position i MINUS one of dp  
                        IF arrangement BITWISE AND the result of prev_arrangement RIGHT SHIFTED BY one EQUALS zero AND arrangement BITWISE AND the result of prev_arrangement LEFT SHIFTED BY one EQUALS zero  
                            SET max_students TO the GREATER OF max_students AND the value for key prev_arrangement in element at position i MINUS one of dp  
                        END IF  
                    END FOR  
                    SET the value for key arrangement in element at position i of dp TO max_students PLUS the COUNT OF one bits in arrangement  
                END IF  
            END FOR  
        END FOR  
        
        IF element at position m MINUS one of dp IS NOT empty  
            RETURN the GREATEST value among all values in element at position m MINUS one of dp  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS