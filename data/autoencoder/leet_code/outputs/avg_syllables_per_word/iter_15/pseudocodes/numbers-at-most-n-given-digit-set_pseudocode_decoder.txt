CLASS Solution  
    FUNCTION atMostNGivenDigitSet(digits, n)  
        FUNCTION count_numbers_with_length(length)  
            RETURN the LENGTH OF digits RAISED TO THE POWER OF length  
        END FUNCTION  
          
        FUNCTION count_numbers_up_to_n(n)  
            SET string version of n TO str_n  
            SET the LENGTH OF str_n TO length  
            SET count TO zero  
              
            FOR each integer l FROM one TO length MINUS one  
                INCREMENT count BY count_numbers_with_length(l)  
            END FOR  
              
            FOR each integer i FROM zero TO length MINUS one  
                SET the INTEGER VALUE OF element at position i of str_n TO current_digit  
                FOR each element digit IN digits  
                    SET the INTEGER VALUE OF digit TO digit_value  
                    IF digit_value LESS THAN current_digit THEN  
                        INCREMENT count BY count_numbers_with_length(length MINUS i MINUS one)  
                    ELSE IF digit_value EQUALS current_digit THEN  
                        IF i EQUALS length MINUS one THEN  
                            INCREMENT count BY one  
                        END IF  
                    ELSE  
                        EXIT the inner FOR loop  
                    END IF  
                END FOR  
            END FOR  
              
            RETURN count  
        END FUNCTION  
          
        RETURN count_numbers_up_to_n(n)  
    END FUNCTION  
END CLASS