CLASS Solution  
    FUNCTION createSortedArray WITH PARAMETER instructions  
        SET MOD TO one billion PLUS seven  
        SET MAX TO the maximum element of instructions PLUS one  
        SET bit TO a list of zeros with LENGTH MAX  

        FUNCTION update WITH PARAMETERS idx AND val  
            WHILE idx IS LESS THAN MAX  
                INCREMENT element at position idx of bit BY val  
                INCREMENT idx BY the value of idx AND the negative of idx  
            END WHILE  
        END FUNCTION  

        FUNCTION query WITH PARAMETER idx  
            SET total TO zero  
            WHILE idx IS GREATER THAN zero  
                INCREMENT total BY element at position idx of bit  
                DECREMENT idx BY the value of idx AND the negative of idx  
            END WHILE  
            RETURN total  
        END FUNCTION  

        SET total_cost TO zero  
        FOR each pair index i AND element num IN instructions WITH their positions  
            SET less_than TO query with parameter num MINUS one  
            SET greater_than TO i MINUS query with parameter num  
            IF less_than IS LESS THAN greater_than  
                SET cost TO less_than  
            ELSE  
                SET cost TO greater_than  
            END IF  
            SET total_cost TO total_cost PLUS cost  
            SET total_cost TO total_cost MODULO MOD  
            CALL update with parameters num AND one  
        END FOR  

        RETURN total_cost  
END CLASS