CLASS Trie  
    FUNCTION __init__()  
        SET children TO a list of length twenty six with all elements set to none  
        SET is_end TO false  
    END FUNCTION  

    FUNCTION insert(w)  
        SET node TO self  
        FOR each character c IN w  
            SET idx TO the character code ordinal of c MINUS the character code ordinal of lowercase letter a  
            IF the element at position idx of node children EQUALS none THEN  
                SET the element at position idx of node children TO a new instance of Trie  
            END IF  
            SET node TO the element at position idx of node children  
        END FOR  
        SET node is_end TO true  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findAllConcatenatedWordsInADict(words)  
        FUNCTION dfs(w, start)  
            IF start EQUALS the length of w THEN  
                RETURN true  
            END IF  
            SET node TO trie  
            FOR index i FROM start TO the length of w MINUS one  
                SET idx TO the character code ordinal of the element at position i of w MINUS the character code ordinal of lowercase letter a  
                IF the element at position idx of node children EQUALS none THEN  
                    RETURN false  
                END IF  
                SET node TO the element at position idx of node children  
                IF node is_end EQUALS true AND dfs(w, i PLUS one) EQUALS true THEN  
                    RETURN true  
                END IF  
            END FOR  
            RETURN false  
        END FUNCTION  

        SET trie TO a new instance of Trie  
        SET ans TO an empty list  
        SORT words by the lengths of the elements in ascending order  
        FOR each w IN words  
            IF w is not empty THEN  
                IF dfs(w, zero) EQUALS true THEN  
                    APPEND w TO ans  
                ELSE  
                    CALL trie insert passing w  
                END IF  
            END IF  
        END FOR  
        RETURN ans  
    END FUNCTION  
END CLASS