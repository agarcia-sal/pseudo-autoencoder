CLASS Solution  
    FUNCTION constrainedSubsetSum(nums LIST OF INTEGER, k INTEGER) RETURNS INTEGER  
        SET n TO the LENGTH OF nums  
        SET dp TO a LIST OF zero FILLED WITH the LENGTH n  
        SET the element at position zero of dp TO the element at position zero of nums  
        SET max_sum TO the element at position zero of nums  
        ASSIGN pointer TO a DEQUE INITIALIZED WITH the SINGLE element zero and CALL it q  
        FOR i FROM one TO n MINUS one  
            IF the element of dp at the element at position zero of q IS GREATER THAN zero  
                SET dp at position i TO the element at position i of nums PLUS the element of dp at the element at position zero of q  
            ELSE  
                SET dp at position i TO the element at position i of nums  
            END IF  
            IF max_sum IS LESS THAN dp at position i  
                SET max_sum TO dp at position i  
            END IF  
            WHILE the deque q IS NOT EMPTY AND dp at position i IS GREATER THAN OR EQUAL TO dp at the element at the last position of q  
                REMOVE the last element FROM q  
            END WHILE  
            APPEND i TO q  
            IF the element at position zero of q EQUALS i MINUS k  
                REMOVE the element at position zero FROM q  
            END IF  
        END FOR  
        RETURN max_sum  
    END FUNCTION  
END CLASS