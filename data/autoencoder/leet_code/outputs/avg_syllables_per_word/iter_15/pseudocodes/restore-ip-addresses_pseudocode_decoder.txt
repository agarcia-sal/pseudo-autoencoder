CLASS Solution  
    FUNCTION restoreIpAddresses(s)  
        FUNCTION is_valid(segment)  
            IF the LENGTH OF segment EQUALS one OR the FIRST ELEMENT OF segment NOT EQUALS zero AND the NUMERICAL VALUE OF segment IS LESS THAN OR EQUAL TO two hundred fifty five  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  

        FUNCTION backtrack(start, path)  
            IF the LENGTH OF path EQUALS four  
                IF start EQUALS the LENGTH OF s  
                    APPEND THE concatenation of elements of path joined by dot TO result  
                END IF  
                RETURN  
            END IF  

            FOR length FROM one TO three  
                IF start PLUS length IS LESS THAN OR EQUAL TO the LENGTH OF s  
                    SET segment TO substring from position start TO position start PLUS length MINUS one of s  
                    IF is_valid(segment)  
                        CALL backtrack WITH start PLUS length AND path APPENDED WITH segment  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  

        SET result TO empty list  
        CALL backtrack WITH zero AND empty list  
        RETURN result  
    END FUNCTION  
END CLASS