CLASS Solution  
    FUNCTION maxValue(events WITH TYPE List OF List OF Integer, k WITH TYPE Integer) RETURNS Integer  
        SET events TO events SORTED BY the second element of each event in ascending order  
        SET n TO the LENGTH OF events  
        SET dp TO a two dimensional list of zeros with the first dimension of size n PLUS one and the second dimension of size k PLUS one  
        
        FOR i FROM one TO n  
            SET start TO the first element of the event at position i MINUS one of events  
            SET end TO the second element of the event at position i MINUS one of events  
            SET value TO the third element of the event at position i MINUS one of events  
            
            SET j TO the position found by locating the insertion point of start in events using binary search on the second element of events  
            
            FOR l FROM one TO k  
                SET dp at position i and l TO the maximum of the value at dp position i MINUS one and l, AND the sum of the value at dp position j and l MINUS one PLUS value  
            END FOR  
        END FOR  
        
        RETURN the value at dp position n and k  
    END FUNCTION  
END CLASS