CLASS Solution  
    FUNCTION minPushBox WITH PARAMETERS grid  
        SET directions TO list of tuples containing minus one and zero second zero and one zero and minus one zero and one  
        
        FOR i FROM zero TO the LENGTH OF grid MINUS one  
            FOR j FROM zero TO the LENGTH OF element at position zero OF grid MINUS one  
                IF element at position i OF grid AT position j IS EQUAL TO letter S  
                    SET player_start TO tuple containing i AND j  
                ELSE IF element at position i OF grid AT position j IS EQUAL TO letter B  
                    SET box_start TO tuple containing i AND j  
                ELSE IF element at position i OF grid AT position j IS EQUAL TO letter T  
                    SET target TO tuple containing i AND j  
                END IF  
            END FOR  
        END FOR  
        
        SET queue TO a double ended queue initialized WITH tuple containing player_start AND box_start AND zero  
        SET visited TO an empty set  
        ADD tuple containing player_start AND box_start TO visited  
        
        WHILE queue IS NOT empty  
            REMOVE and ASSIGN first element FROM queue TO player_pos AND box_pos AND push_count  
            
            IF box_pos IS EQUAL TO target  
                RETURN push_count  
            END IF  
            
            FOR each dx AND dy IN directions  
                SET new_player_pos TO tuple containing the element at position zero OF player_pos PLUS dx AND the element at position one OF player_pos PLUS dy  
                
                IF the result of calling is_valid_position WITH new_player_pos AND grid IS TRUE  
                    IF new_player_pos IS EQUAL TO box_pos  
                        SET new_box_pos TO tuple containing the element at position zero OF box_pos PLUS dx AND the element at position one OF box_pos PLUS dy  
                        
                        IF the result of calling is_valid_position WITH new_box_pos AND grid IS TRUE AND tuple containing new_player_pos AND new_box_pos IS NOT IN visited  
                            ADD tuple containing new_player_pos AND new_box_pos TO visited  
                            APPEND tuple containing new_player_pos AND new_box_pos AND push_count PLUS one TO queue  
                        END IF  
                    ELSE  
                        IF tuple containing new_player_pos AND box_pos IS NOT IN visited  
                            ADD tuple containing new_player_pos AND box_pos TO visited  
                            APPEND tuple containing new_player_pos AND box_pos AND push_count TO queue  
                        END IF  
                    END IF  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN minus one  
    END FUNCTION  
    
    FUNCTION is_valid_position WITH PARAMETERS position AND grid  
        SET x TO the element at position zero OF position  
        SET y TO the element at position one OF position  
        RETURN the result of x GREATER THAN OR EQUAL TO zero AND x LESS THAN the LENGTH OF grid AND y GREATER THAN OR EQUAL TO zero AND y LESS THAN the LENGTH OF element at position zero OF grid AND the element at position x OF grid AT position y IS NOT EQUAL TO character hash  
    END FUNCTION  
END CLASS