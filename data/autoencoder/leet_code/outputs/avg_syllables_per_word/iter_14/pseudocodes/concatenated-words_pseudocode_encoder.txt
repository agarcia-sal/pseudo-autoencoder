CLASS Trie  
    FUNCTION __init__  
        SET children TO a list of length twenty six with all elements set to none  
        SET is_end TO false  
    END FUNCTION  

    FUNCTION insert WITH PARAMETER w  
        SET node TO the current Trie object  
        FOR each character c IN the string w  
            SET idx TO the Unicode code point of character c MINUS the Unicode code point of character a  
            IF the element at position idx OF node's children IS none THEN  
                SET the element at position idx OF node's children TO a new Trie object  
            END IF  
            SET node TO the element at position idx OF node's children  
        END FOR  
        SET node's is_end TO true  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findAllConcatenatedWordsInADict WITH PARAMETER words AS a list of strings RETURNS a list of strings  
        FUNCTION dfs WITH PARAMETERS w AS string AND start AS integer RETURNS boolean  
            IF start IS EQUAL TO the length of the string w THEN  
                RETURN true  
            END IF  
            SET node TO the Trie object named trie  
            FOR i FROM start TO the length of the string w MINUS one  
                SET idx TO the Unicode code point of character at position i OF string w MINUS the Unicode code point of character a  
                IF the element at position idx OF node's children IS none THEN  
                    RETURN false  
                END IF  
                SET node TO the element at position idx OF node's children  
                IF node's is_end IS true AND the result of dfs WITH PARAMETERS w AND i PLUS one IS true THEN  
                    RETURN true  
                END IF  
            END FOR  
            RETURN false  
        END FUNCTION  

        SET trie TO a new Trie object  
        SET ans TO an empty list  
        SORT the list words in ascending order by the length of each string element  
        FOR each string w IN the list words  
            IF w IS NOT an empty string THEN  
                IF the result of dfs WITH PARAMETERS w AND zero IS true THEN  
                    APPEND w TO the list ans  
                ELSE  
                    CALL the insert function of trie WITH PARAMETER w  
                END IF  
            END IF  
        END FOR  
        RETURN the list ans  
    END FUNCTION  
END CLASS