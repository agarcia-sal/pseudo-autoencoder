CLASS Solution  
    FUNCTION ways(pizza, k)  
        FUNCTION dfs(i, j, k)  
            IF k EQUAL TO zero  
                RETURN integer of the expression that the value at position m and n of s MINUS the value at position i and n of s MINUS the value at position m and j of s PLUS the value at position i and j of s IS GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR x FROM i PLUS one TO m MINUS one  
                IF the value at position x and n of s MINUS the value at position i and n of s MINUS the value at position x and j of s PLUS the value at position i and j of s IS GREATER THAN zero  
                    INCREMENT ans BY the result of calling dfs with parameters x, j, k MINUS one  
                END IF  
            END FOR  
            FOR y FROM j PLUS one TO n MINUS one  
                IF the value at position m and y of s MINUS the value at position i and y of s MINUS the value at position m and j of s PLUS the value at position i and j of s IS GREATER THAN zero  
                    INCREMENT ans BY the result of calling dfs with parameters i, y, k MINUS one  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  

        SET mod TO the integer one followed by nine zeros PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF the element at position zero of pizza  
        INITIALIZE s as a two-dimensional list of zeros with m PLUS one rows and n PLUS one columns  
        FOR each index i and row in pizza starting counting at one  
            FOR each index j and character c in row starting counting at one  
                SET the element at position i and j of s TO the value at position i MINUS one and j of s PLUS the value at position i and j MINUS one of s MINUS the value at position i MINUS one and j MINUS one of s PLUS the integer of the expression that c is EQUAL TO the character A  
            END FOR  
        END FOR  
        RETURN the result of calling dfs with parameters zero, zero, k MINUS one  
    END FUNCTION  
END CLASS