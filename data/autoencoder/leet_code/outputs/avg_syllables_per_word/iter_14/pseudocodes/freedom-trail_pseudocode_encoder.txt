CLASS Solution  
    FUNCTION findRotateSteps WITH PARAMETERS ring key  
        CREATE a dictionary named char_positions THAT MAPS characters TO lists of integer positions  
        FOR each index i AND character char IN the sequence of characters OF ring  
            APPEND the index i TO the list ASSOCIATED WITH the character char IN char_positions  
        END FOR  
        
        SET n TO the LENGTH OF ring  
        
        FUNCTION dp WITH PARAMETERS i prev_pos  
            IF i EQUAL TO the LENGTH OF key THEN  
                RETURN zero  
            END IF  
            
            SET min_steps TO infinity  
            FOR each position pos IN the list ASSOCIATED WITH the character AT position i OF key IN char_positions  
                SET clockwise TO (pos MINUS prev_pos) MODULO n  
                SET anticlockwise TO (prev_pos MINUS pos) MODULO n  
                SET steps TO the minimum OF clockwise AND anticlockwise PLUS one PLUS the RESULT OF dp WITH PARAMETERS (i PLUS one) pos  
                SET min_steps TO the minimum OF min_steps AND steps  
            END FOR  
            
            RETURN min_steps  
        END FUNCTION  
        
        RETURN the RESULT OF dp WITH PARAMETERS zero zero  
    END FUNCTION  
END CLASS