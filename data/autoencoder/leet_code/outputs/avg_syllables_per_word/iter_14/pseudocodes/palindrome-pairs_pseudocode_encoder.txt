CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s IS EQUAL TO the REVERSE OF s  
        END FUNCTION  
        
        SET word_dict TO a new empty dictionary  
        SET index TO zero  
        FOR each word IN words  
            ASSIGN word_dict AT key word TO index  
            INCREMENT index BY one  
        END FOR  
        
        SET result TO a new empty list  
        
        SET i TO zero  
        FOR each word IN words  
            IF word IS EQUAL TO empty string THEN  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string IS A KEY IN word_dict AND is_palindrome OF word IS TRUE THEN  
                APPEND a list containing i AND word_dict AT key empty string TO result  
                APPEND a list containing word_dict AT key empty string AND i TO result  
            END IF  
            
            SET reversed_word TO the REVERSE OF word  
            IF reversed_word IS A KEY IN word_dict AND word_dict AT key reversed_word IS NOT EQUAL TO i THEN  
                APPEND a list containing i AND word_dict AT key reversed_word TO result  
            END IF  
            
            SET j TO one  
            WHILE j IS LESS THAN the LENGTH OF word  
                SET prefix TO the SUBSTRING OF word FROM position zero TO position j minus one  
                SET suffix TO the SUBSTRING OF word FROM position j TO the END  
                SET reversed_prefix TO the REVERSE OF prefix  
                SET reversed_suffix TO the REVERSE OF suffix  
                
                IF is_palindrome OF suffix IS TRUE AND reversed_prefix IS A KEY IN word_dict THEN  
                    APPEND a list containing i AND word_dict AT key reversed_prefix TO result  
                END IF  
                
                IF is_palindrome OF prefix IS TRUE AND reversed_suffix IS A KEY IN word_dict THEN  
                    APPEND a list containing word_dict AT key reversed_suffix AND i TO result  
                END IF  
                
                INCREMENT j BY one  
            END WHILE  
            
            INCREMENT i BY one  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS