CLASS Solution  
    FUNCTION longestPath WITH PARAMETERS parent AND s  
        CREATE tree AS A NEW DEFAULTDICTIONARY THAT RETURNS AN EMPTY LIST  
        FOR each index i AND element p IN parent WITH THEIR ORDER  
            IF p IS NOT EQUAL TO negative one  
                APPEND i TO THE LIST ASSOCIATED WITH p IN tree  
            END IF  
        END FOR  
        
        SET self.result TO one  
        
        FUNCTION dfs WITH PARAMETER node  
            SET max1 TO zero  
            SET max2 TO zero  
            
            FOR each child IN THE LIST ASSOCIATED WITH node IN tree  
                SET child_length TO THE RESULT OF CALLING dfs WITH child  
                
                IF THE CHARACTER AT POSITION child IN s IS NOT EQUAL TO THE CHARACTER AT POSITION node IN s  
                    IF child_length IS GREATER THAN max1  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length IS GREATER THAN max2  
                        SET max2 TO child_length  
                    END IF  
                END IF  
            END FOR  
            
            SET self.result TO THE GREATER OF self.result AND THE SUM OF max1 PLUS max2 PLUS one  
            
            RETURN THE SUM OF max1 PLUS one  
        END FUNCTION  
        
        CALL dfs WITH zero  
        
        RETURN self.result  
    END FUNCTION  
END CLASS