CLASS Solution  
    FUNCTION nearestPalindromic WITH PARAMETER n  
        SET length TO the LENGTH OF string n  
        IF length IS EQUAL TO one  
            SET integer_value TO the INTEGER CONVERSION OF string n  
            SET result TO integer_value MINUS one  
            RETURN the STRING CONVERSION OF result  
        END IF  
        
        INITIALIZE candidates AS an EMPTY SET OF NUMBERS  
        
        SET ten_power_length TO ten RAISED TO THE POWER OF length  
        ADD ten_power_length PLUS one TO candidates  
        
        SET ten_power_length_minus_one TO ten RAISED TO THE POWER OF length MINUS one  
        SUBTRACT one FROM ten_power_length_minus_one  
        ADD ten_power_length_minus_one TO candidates  
        
        SET half_length TO integer DIVISION OF length PLUS one BY two  
        SET prefix TO the INTEGER CONVERSION OF the SUBSTRING FROM START TO half_length OF string n  
        
        FOR each integer i FROM minus one TO two  
            SET new_prefix_value TO prefix PLUS i  
            SET new_prefix_string TO the STRING CONVERSION OF new_prefix_value  
            
            IF length MODULO two IS EQUAL TO zero  
                SET reversed_part TO the REVERSE SEQUENCE OF CHARACTERS OF new_prefix_string  
                SET candidate_string TO CONCATENATION OF new_prefix_string AND reversed_part  
            ELSE  
                SET reversed_part TO the REVERSE SEQUENCE OF CHARACTERS OF new_prefix_string FROM SECOND LAST CHARACTER TO THE START  
                SET candidate_string TO CONCATENATION OF new_prefix_string AND reversed_part  
            END IF  
            
            CONVERT candidate_string TO INTEGER candidate_integer  
            ADD candidate_integer TO candidates  
        END FOR  
        
        SET original_number TO the INTEGER CONVERSION OF n  
        REMOVE original_number FROM candidates IF IT EXISTS  
        
        DEFINE FUNCTION distance_key WITH PARAMETER x  
            RETURN a TUPLE CONSISTING OF THE ABSOLUTE VALUE OF x MINUS original_number, AND x  
        END FUNCTION  
        
        SET closest TO the MINIMUM ELEMENT OF candidates CONSIDERING THE distance_key AS THE SORTING CRITERION  
        RETURN the STRING CONVERSION OF closest  
    END FUNCTION  
END CLASS