CLASS Solution  
    FUNCTION maxEnvelopes(envelopes)  
        CALL sort_envelopes_by_width_ascending_and_height_descending ON envelopes  
        SET dp TO an empty list  
        FOR each element IN envelopes  
            SET current_height TO the second element of element  
            SET idx TO result of binary_search_left_position(dp, current_height)  
            IF idx IS EQUAL TO the LENGTH OF dp  
                APPEND current_height TO dp  
            ELSE  
                SET the element at position idx OF dp TO current_height  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS