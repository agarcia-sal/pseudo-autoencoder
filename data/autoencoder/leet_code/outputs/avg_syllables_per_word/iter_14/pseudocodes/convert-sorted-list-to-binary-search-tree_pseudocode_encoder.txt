CLASS ListNode
    FUNCTION __init__(val, next)
        SET the property val OF this object TO val
        SET the property next OF this object TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values)
    IF values IS EMPTY
        RETURN None
    END IF
    SET head TO A new ListNode initialized WITH element at position zero OF values
    SET p TO head
    FOR each val IN the elements of values STARTING FROM position one TO THE END
        SET node TO A new ListNode initialized WITH val
        SET the next property OF p TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS None AND p2 IS None
        RETURN True
    END IF
    IF p1 IS None OR p2 IS None
        RETURN False
    END IF
    RETURN the result of the expression that the val property OF p1 IS EQUAL TO the val property OF p2 AND is_same_list WITH arguments p1.next AND p2.next
END FUNCTION

CLASS TreeNode
    FUNCTION __init__(val, left, right)
        SET the property val OF this object TO val
        SET the property left OF this object TO left
        SET the property right OF this object TO right
    END FUNCTION
END CLASS

FUNCTION tree_node(values)
    IF values IS EMPTY
        RETURN None
    END IF
    SET root TO A new TreeNode initialized WITH element at position zero OF values
    SET i TO one
    SET queue TO A new deque initialized as empty
    APPEND root TO queue
    WHILE the length OF queue IS GREATER THAN zero
        SET node TO the element obtained by removing the leftmost element OF queue
        IF i IS LESS THAN the length OF values AND element at position i OF values IS NOT None
            SET the left property OF node TO A new TreeNode initialized WITH element at position i OF values
            APPEND the left property OF node TO queue
        END IF
        INCREMENT i BY one
        IF i IS LESS THAN the length OF values AND element at position i OF values IS NOT None
            SET the right property OF node TO A new TreeNode initialized WITH element at position i OF values
            APPEND the right property OF node TO queue
        END IF
        INCREMENT i BY one
    END WHILE
    RETURN root
END FUNCTION

FUNCTION is_same_tree(p, q)
    IF p IS None AND q IS None
        RETURN True
    ELSE IF p IS None OR q IS None
        RETURN False
    ELSE IF the val property OF p IS NOT EQUAL TO the val property OF q
        RETURN False
    ELSE
        RETURN the result of the expression is_same_tree WITH arguments the left property OF p AND the left property OF q AND is_same_tree WITH arguments the right property OF p AND the right property OF q
    END IF
END FUNCTION

CLASS Solution
    FUNCTION sortedListToBST(head)
        IF head IS None
            RETURN None
        END IF

        FUNCTION findMiddle(left, right)
            SET slow TO left
            SET fast TO left
            WHILE fast IS NOT EQUAL TO right AND the next property OF fast IS NOT EQUAL TO right
                SET slow TO the next property OF slow
                SET fast TO the next property OF the next property OF fast
            END WHILE
            RETURN slow
        END FUNCTION

        FUNCTION convertListToBST(left, right)
            IF left IS EQUAL TO right
                RETURN None
            END IF
            SET mid TO findMiddle WITH arguments left AND right
            SET node TO A new TreeNode initialized WITH the val property OF mid
            SET the left property OF node TO convertListToBST WITH arguments left AND mid
            SET the right property OF node TO convertListToBST WITH arguments the next property OF mid AND right
            RETURN node
        END FUNCTION

        RETURN convertListToBST WITH arguments head AND None
    END FUNCTION
END CLASS