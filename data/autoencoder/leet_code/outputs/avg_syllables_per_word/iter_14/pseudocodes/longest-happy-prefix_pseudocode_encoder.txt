CLASS Solution  
    FUNCTION longestPrefix WITH PARAMETER s  
        SET n TO LENGTH OF s  
        SET lps TO a list of zeros WITH LENGTH n  
        SET j TO zero  

        FOR i FROM one TO n MINUS one  
            WHILE j GREATER THAN zero AND element at position i OF s IS NOT EQUAL TO element at position j OF s  
                SET j TO element at position j MINUS one OF lps  
            END WHILE  

            IF element at position i OF s IS EQUAL TO element at position j OF s  
                INCREMENT j BY one  
                SET element at position i OF lps TO j  
            END IF  
        END FOR  

        SET longest_happy_prefix_length TO element at position n MINUS one OF lps  
        RETURN substring FROM position zero TO longest_happy_prefix_length MINUS one OF s  
    END FUNCTION  
END CLASS