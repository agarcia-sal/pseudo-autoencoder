CLASS Solution  
    FUNCTION findAnagrams WITH PARAMETERS s AND p  
        SET len_s TO the LENGTH OF s  
        SET len_p TO the LENGTH OF p  
        
        IF len_p IS GREATER THAN len_s THEN  
            RETURN an EMPTY list  
        END IF  
        
        SET p_count TO the FREQUENCY COUNT OF each CHARACTER IN p  
        SET s_count TO the FREQUENCY COUNT OF the SUBSTRING FROM POSITION zero TO (len_p MINUS one) OF s  
        
        SET anagrams TO an EMPTY list  
        
        IF s_count IS EQUAL TO p_count THEN  
            APPEND zero TO anagrams  
        END IF  
        
        FOR index FROM len_p TO len_s MINUS one  
            SET new_character TO the ELEMENT AT POSITION index OF s  
            INCREMENT s_count[new_character] BY one  
            
            SET old_character TO the ELEMENT AT POSITION (index MINUS len_p) OF s  
            DECREMENT s_count[old_character] BY one  
            
            IF s_count[old_character] IS EQUAL TO zero THEN  
                REMOVE old_character FROM s_count  
            END IF  
            
            IF s_count IS EQUAL TO p_count THEN  
                APPEND (index MINUS len_p PLUS one) TO anagrams  
            END IF  
        END FOR  
        
        RETURN anagrams  
    END FUNCTION  
END CLASS