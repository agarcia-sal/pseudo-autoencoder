CLASS Solution  
    FUNCTION numDistinctIslands WITH PARAMETER grid AS list of list of integers  
        FUNCTION dfs WITH PARAMETERS i AS integer j AS integer direction AS string  
            IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN the LENGTH OF grid AND j IS GREATER THAN OR EQUAL TO zero AND j IS LESS THAN the LENGTH OF element at position zero OF grid AND element at position i OF grid AT position j IS EQUAL TO one  
                SET element at position i OF grid AT position j TO zero  
                APPEND direction TO path  
                CALL dfs WITH PARAMETERS i PLUS one j direction AS string AS the string representing down  
                CALL dfs WITH PARAMETERS i MINUS one j direction AS string AS the string representing up  
                CALL dfs WITH PARAMETERS i j PLUS one direction AS string AS the string representing right  
                CALL dfs WITH PARAMETERS i j MINUS one direction AS string AS the string representing left  
                APPEND the string representing backtrack TO path  
            END IF  
            RETURN path  
        END FUNCTION  
        
        SET unique_islands TO an empty set  
        
        FOR i FROM zero TO the LENGTH OF grid MINUS one  
            FOR j FROM zero TO the LENGTH OF element at position zero OF grid MINUS one  
                IF element at position i OF grid AT position j IS EQUAL TO one  
                    SET path TO an empty list  
                    ADD the tuple of result of calling dfs WITH PARAMETERS i j the string representing origin TO unique_islands  
                END IF  
            END FOR  
        END FOR  
        
        RETURN the LENGTH OF unique_islands  
    END FUNCTION  
END CLASS