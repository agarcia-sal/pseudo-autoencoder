CLASS Solution  
    FUNCTION numOfWays WITH PARAMETER nums AS list of integers  
        SET MOD TO one billion PLUS seven  

        FUNCTION count_ways WITH PARAMETER arr AS list of integers  
            IF the LENGTH OF arr IS LESS THAN OR EQUAL TO one  
                RETURN one  
            END IF  

            SET root TO element at position zero OF arr  
            SET left_subtree TO list of elements x IN arr WHERE x IS LESS THAN root  
            SET right_subtree TO list of elements x IN arr WHERE x IS GREATER THAN root  

            SET ways_left TO count_ways CALLED WITH left_subtree  
            SET ways_right TO count_ways CALLED WITH right_subtree  

            SET total_ways TO the NUMBER OF WAYS TO CHOOSE the LENGTH OF left_subtree OUT OF the SUM OF the LENGTH OF left_subtree AND the LENGTH OF right_subtree  

            RETURN the PRODUCT OF ways_left AND ways_right AND total_ways MODULO MOD  
        END FUNCTION  

        RETURN the RESULT OF count_ways CALLED WITH nums MINUS one MODULO MOD  
    END FUNCTION  
END CLASS