CLASS Solution  
    FUNCTION countSubranges(nums1 AS List of integers, nums2 AS List of integers) RETURNS integer  
        SET n TO the LENGTH OF nums1  
        SET count TO zero  
        SET dp TO a list of length n WHERE each element IS a new dictionary that RETURNS zero FOR undefined keys  
        
        FOR index i FROM zero TO n MINUS one  
            INCREMENT the value AT key nums1 element at position i OF dp element at position i BY one  
            INCREMENT the value AT key negative nums2 element at position i OF dp element at position i BY one  
            
            IF i IS GREATER THAN zero THEN  
                FOR each key balance AND value freq IN the items OF dp element at position i MINUS one  
                    SET dp element at position i AT key balance PLUS nums1 element at position i TO the SUM OF current value AT that key AND freq MODULO MOD  
                    SET dp element at position i AT key balance MINUS nums2 element at position i TO the SUM OF current value AT that key AND freq MODULO MOD  
                END FOR  
            END IF  
            
            SET count TO the SUM OF count AND value AT key zero OF dp element at position i MODULO MOD  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS