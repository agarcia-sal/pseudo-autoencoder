CLASS Solution  
    FUNCTION countRangeSum WITH PARAMETERS nums LIST OF integers lower integer upper integer  
        SET prefix_sums TO a NEW list CONTAINING zero  
        SET current_sum TO zero  
        SET count TO zero  
        
        FOR each num IN nums  
            SET current_sum TO current_sum PLUS num  
            
            SET left TO current_sum MINUS upper  
            SET right TO current_sum MINUS lower  
            
            SET count TO count PLUS the NUMBER OF elements IN prefix_sums THAT ARE LESS THAN OR EQUAL TO right  
            MINUS the NUMBER OF elements IN prefix_sums THAT ARE LESS THAN left  
            
            INSERT current_sum INTO prefix_sums IN A POSITION THAT MAINTAINS prefix_sums IN SORTED ORDER  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS