CLASS Solution  
    FUNCTION magicalString(n)  
        IF n EQUAL TO zero THEN  
            RETURN zero  
        END IF  

        IF n LESS THAN OR EQUAL TO three THEN  
            RETURN one  
        END IF  

        SET s TO a list containing one followed BY two FOLLOWED BY two  
        SET count TO one  
        SET index TO two  

        WHILE the LENGTH OF s IS LESS THAN n  
            SET next_num TO three MINUS the element at position the LENGTH OF s MINUS one OF s  
            SET times TO the element at position index OF s  
            APPEND next_num TO s times times  
            IF next_num EQUAL TO one THEN  
                INCREMENT count BY times  
            END IF  
            INCREMENT index BY one  
        END WHILE  

        IF the LENGTH OF s IS GREATER THAN n THEN  
            SET excess TO the LENGTH OF s MINUS n  
            DECREMENT count BY the element at position the LENGTH OF s MINUS one OF s MULTIPLIED BY excess  
        END IF  

        RETURN count  
    END FUNCTION  
END CLASS