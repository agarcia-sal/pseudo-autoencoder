CLASS Solution  
    FUNCTION longestIncreasingPath WITH PARAMETER matrix  
        IF matrix IS EMPTY OR the LENGTH OF matrix AT position zero IS EQUAL TO zero  
            RETURN zero  
        END IF  

        SET m TO the LENGTH OF matrix  
        SET n TO the LENGTH OF matrix AT position zero  
        SET directions TO the LIST OF the PAIRS OF one AND zero, minus one AND zero, zero AND one, zero AND minus one  

        SET dp TO a TWO-DIMENSIONAL LIST WITH m ROWS AND n COLUMNS FILLED WITH minus one  

        FUNCTION dfs WITH PARAMETERS x AND y  
            IF the ELEMENT at position x AND y OF dp IS NOT EQUAL TO minus one  
                RETURN the ELEMENT at position x AND y OF dp  
            END IF  

            SET max_length TO one  
            FOR each pair dx AND dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                IF nx IS GREATER THAN OR EQUAL TO zero AND nx IS LESS THAN m AND ny IS GREATER THAN OR EQUAL TO zero AND ny IS LESS THAN n AND the ELEMENT at position nx AND ny OF matrix IS GREATER THAN the ELEMENT at position x AND y OF matrix  
                    SET max_length TO the GREATER OF max_length AND the SUM OF one AND dfs WITH PARAMETERS nx AND ny  
                END IF  
            END FOR  

            SET the ELEMENT at position x AND y OF dp TO max_length  
            RETURN max_length  
        END FUNCTION  

        SET longest_path TO zero  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                SET longest_path TO the GREATER OF longest_path AND dfs WITH PARAMETERS i AND j  
            END FOR  
        END FOR  

        RETURN longest_path  
    END FUNCTION  
END CLASS