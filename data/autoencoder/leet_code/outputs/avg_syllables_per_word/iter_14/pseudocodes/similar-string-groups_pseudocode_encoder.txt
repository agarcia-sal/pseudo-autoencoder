CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET diff TO empty list  
            FOR each index FROM zero TO the LENGTH OF s1 MINUS one  
                IF element at position index OF s1 IS NOT EQUAL TO element at position index OF s2  
                    APPEND index TO diff  
                END IF  
            END FOR  
            IF the LENGTH OF diff IS EQUAL TO zero  
                RETURN true  
            ELSE IF the LENGTH OF diff IS EQUAL TO two AND element at position element at position zero OF diff OF s1 IS EQUAL TO element at position element at position one OF diff OF s2 AND element at position element at position one OF diff OF s1 IS EQUAL TO element at position element at position zero OF diff OF s2  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  

        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN element at position node OF graph  
                IF neighbor IS NOT IN visited  
                    CALL dfs WITH neighbor AND visited  
                END IF  
            END FOR  
        END FUNCTION  

        SET n TO the LENGTH OF strs  
        SET graph TO an empty mapping FROM zero TO n MINUS one MAPPED TO empty lists  
        FOR i FROM zero TO n MINUS one  
            SET element at position i OF graph TO empty list  
        END FOR  

        FOR i FROM zero TO n MINUS one  
            FOR j FROM i PLUS one TO n MINUS one  
                IF are_similar(element at position i OF strs, element at position j OF strs) IS true  
                    APPEND j TO element at position i OF graph  
                    APPEND i TO element at position j OF graph  
                END IF  
            END FOR  
        END FOR  

        SET visited TO empty set  
        SET num_groups TO zero  
        FOR i FROM zero TO n MINUS one  
            IF i IS NOT IN visited  
                CALL dfs WITH i AND visited  
                INCREMENT num_groups BY one  
            END IF  
        END FOR  

        RETURN num_groups  
    END FUNCTION  
END CLASS