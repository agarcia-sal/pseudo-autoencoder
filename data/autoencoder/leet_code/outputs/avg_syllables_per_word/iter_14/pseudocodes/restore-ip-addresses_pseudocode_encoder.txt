CLASS Solution  
    FUNCTION restoreIpAddresses WITH PARAMETER s  
        FUNCTION is_valid WITH PARAMETER segment  
            IF LENGTH OF segment IS EQUAL TO one  
                RETURN TRUE  
            ELSE IF the element at position zero OF segment IS NOT EQUAL TO zero AND the INTEGER VALUE OF segment IS LESS THAN OR EQUAL TO two hundred fifty FIVE  
                RETURN TRUE  
            ELSE  
                RETURN FALSE  
            END IF  
        END FUNCTION  

        FUNCTION backtrack WITH PARAMETERS start AND path  
            IF LENGTH OF path IS EQUAL TO four  
                IF start IS EQUAL TO THE LENGTH OF s  
                    APPEND THE STRING OBTAINED BY JOINING path WITH DOT TO result  
                END IF  
                RETURN  
            END IF  
            FOR length FROM one TO three  
                IF start PLUS length IS LESS THAN OR EQUAL TO THE LENGTH OF s  
                    SET segment TO THE SUBSTRING FROM position start TO start PLUS length OF s  
                    IF is_valid WITH PARAMETER segment RETURNS TRUE  
                        CALL backtrack WITH PARAMETERS start PLUS length AND path PLUS A NEW LIST CONTAINING segment  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  

        SET result TO AN EMPTY LIST  
        CALL backtrack WITH PARAMETERS zero AND AN EMPTY LIST  
        RETURN result  
    END FUNCTION  
END CLASS