CLASS Solution  
    FUNCTION sumOfDistancesInTree(n, edges)  
        SET graph TO an empty mapping of list values with default list as empty list  
        FOR each pair a and b IN edges  
            APPEND b TO list at key a IN graph  
            APPEND a TO list at key b IN graph  
        END FOR  

        SET count TO a list of size n with all elements SET TO one  
        SET dist TO a list of size n with all elements SET TO zero  

        FUNCTION dfs1(u, p)  
            FOR each element v IN list at key u IN graph  
                IF v IS NOT EQUAL TO p THEN  
                    CALL dfs1 with v and u  
                    INCREMENT element at position u OF count BY element at position v OF count  
                    INCREMENT element at position u OF dist BY sum of element at position v OF dist AND element at position v OF count  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs1 with zero and minus one  

        FUNCTION dfs2(u, p)  
            FOR each element v IN list at key u IN graph  
                IF v IS NOT EQUAL TO p THEN  
                    SET element at position v OF dist TO element at position u OF dist MINUS element at position v OF count PLUS n MINUS element at position v OF count  
                    CALL dfs2 with v and u  
                END IF  
            END FOR  
        END FUNCTION  

        CALL dfs2 with zero and minus one  

        RETURN dist  
    END FUNCTION  
END CLASS