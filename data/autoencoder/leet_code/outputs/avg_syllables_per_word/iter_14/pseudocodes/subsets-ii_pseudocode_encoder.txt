CLASS Solution  
    FUNCTION subsetsWithDup(nums)  
        CALL nums TO BE SORTED IN ASCENDING ORDER  
        SET result TO an empty list  
        SET subset TO an empty list  
        
        FUNCTION dfs(i)  
            IF i IS GREATER THAN OR EQUAL TO the LENGTH OF nums THEN  
                APPEND A COPY OF subset TO result  
                RETURN  
            END IF  
            
            APPEND element at position i OF nums TO subset  
            CALL dfs WITH i PLUS one  
            
            REMOVE the LAST element FROM subset  
            WHILE i PLUS one IS LESS THAN the LENGTH OF nums AND element at position i OF nums IS EQUAL TO element at position i PLUS one OF nums DO  
                INCREMENT i BY one  
            END WHILE  
            CALL dfs WITH i PLUS one  
        END FUNCTION  
        
        CALL dfs WITH zero  
        RETURN result  
    END FUNCTION  
END CLASS