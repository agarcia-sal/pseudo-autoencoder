CLASS Solution  
    FUNCTION dieSimulator WITH PARAMETERS n AND rollMax  
        SET MODULO TO one followed by nine zeroes PLUS one  
          
        SET dp TO a three dimensional list where  
            the first dimension is from zero TO n INCLUSIVE,  
            the second dimension is from zero TO five INCLUSIVE,  
            the third dimension for each second dimension index is from zero TO the maximum value IN rollMax PLUS one INCLUSIVE  
            all elements INITIALIZED TO zero  
          
        FOR each j FROM zero TO five INCLUSIVE  
            SET element at position one at j at one OF dp TO one  
        END FOR  
          
        FOR each i FROM two TO n INCLUSIVE  
            FOR each j FROM zero TO five INCLUSIVE  
                FOR each k FROM one TO element at position j OF rollMax INCLUSIVE  
                    IF k IS GREATER THAN one  
                        SET element at position i at j at k OF dp TO element at position i MINUS one at j at k MINUS one OF dp  
                    ELSE  
                        SET temporary_sum TO zero  
                        FOR each x FROM zero TO five INCLUSIVE  
                            IF x IS NOT EQUAL TO j  
                                FOR each y FROM one TO element at position x OF rollMax INCLUSIVE  
                                    INCREMENT temporary_sum BY element at position i MINUS one at x at y OF dp  
                                END FOR  
                            END IF  
                        END FOR  
                        SET element at position i at j at k OF dp TO temporary_sum MODULO MODULO  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
          
        SET total_ways TO zero  
        FOR each j FROM zero TO five INCLUSIVE  
            FOR each k FROM one TO element at position j OF rollMax INCLUSIVE  
                INCREMENT total_ways BY element at position n at j at k OF dp  
            END FOR  
        END FOR  
          
        RETURN total_ways MODULO MODULO  
    END FUNCTION  
END CLASS