CLASS Solution  
    FUNCTION minCost WITH parameters houses AS list of integers cost AS list of list of integers m AS integer n AS integer target AS integer  
        FUNCTION dp WITH parameters i AS integer prev_color AS integer groups AS integer  
            IF i IS EQUAL TO m  
                IF groups IS EQUAL TO target  
                    RETURN zero  
                ELSE  
                    RETURN positive infinity  
                END IF  
            END IF

            IF element at position i OF houses IS NOT EQUAL TO zero  
                SET new_groups TO groups PLUS one IF element at position i OF houses IS NOT EQUAL TO prev_color OTHERWISE groups  
                RETURN CALL dp WITH arguments i PLUS one element at position i OF houses new_groups  
            END IF

            SET min_cost TO positive infinity  
            FOR color FROM one TO n  
                SET new_groups TO groups PLUS one IF color IS NOT EQUAL TO prev_color OTHERWISE groups  
                SET candidate_cost TO element at position i THEN position color MINUS one OF cost PLUS CALL dp WITH arguments i PLUS one color new_groups  
                IF candidate_cost IS LESS THAN min_cost  
                    SET min_cost TO candidate_cost  
                END IF  
            END FOR

            RETURN min_cost  
        END FUNCTION

        SET result TO CALL dp WITH arguments zero zero zero  
        IF result IS NOT EQUAL TO positive infinity  
            RETURN result  
        ELSE  
            RETURN negative one  
        END IF  
    END FUNCTION  
END CLASS