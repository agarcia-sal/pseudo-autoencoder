CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND a list consisting of one and zero TO restrictions  
        SORT restrictions IN ascending order  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_index TO the element at position zero OF the element at position index OF restrictions  
            SET current_height TO the element at position one OF the element at position index OF restrictions  
            SET previous_index TO the element at position zero OF the element at position index MINUS one OF restrictions  
            SET previous_height TO the element at position one OF the element at position index MINUS one OF restrictions  
            SET the element at position one OF the element at position index OF restrictions TO the smaller OF current_height AND previous_height PLUS current_index MINUS previous_index  
        END FOR  
        
        FOR index FROM the LENGTH OF restrictions MINUS two DOWN TO zero  
            SET current_index TO the element at position zero OF the element at position index OF restrictions  
            SET current_height TO the element at position one OF the element at position index OF restrictions  
            SET next_index TO the element at position zero OF the element at position index PLUS one OF restrictions  
            SET next_height TO the element at position one OF the element at position index PLUS one OF restrictions  
            SET the element at position one OF the element at position index OF restrictions TO the smaller OF current_height AND next_height PLUS next_index MINUS current_index  
        END FOR  
        
        SET max_height TO zero  
        SET previous_index TO the element at position zero OF the element at position zero OF restrictions  
        SET previous_height TO the element at position one OF the element at position zero OF restrictions  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_index TO the element at position zero OF the element at position index OF restrictions  
            SET current_height TO the element at position one OF the element at position index OF restrictions  
            SET candidate_height TO the INTEGER DIVISION OF current_index MINUS previous_index PLUS previous_height PLUS current_height BY two  
            IF candidate_height IS GREATER THAN max_height  
                SET max_height TO candidate_height  
            END IF  
            SET previous_index TO current_index  
            SET previous_height TO current_height  
        END FOR  
        
        SET candidate_height TO previous_height PLUS n MINUS previous_index  
        IF candidate_height IS GREATER THAN max_height  
            SET max_height TO candidate_height  
        END IF  
        
        RETURN max_height  
    END FUNCTION  
END CLASS