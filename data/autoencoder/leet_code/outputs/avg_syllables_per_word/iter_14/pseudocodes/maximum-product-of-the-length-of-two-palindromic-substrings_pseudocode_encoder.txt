CLASS Solution  
    FUNCTION maxProduct WITH PARAMETER s  
        SET n TO the LENGTH OF s  
        
        SET max_len_end TO a list of length n WITH every element SET TO one  
        SET max_len_start TO a list of length n WITH every element SET TO one  
        
        FUNCTION expand_around_center WITH PARAMETERS left AND right  
            WHILE left IS GREATER THAN OR EQUAL TO zero AND right IS LESS THAN n AND the CHARACTER at POSITION left OF s IS EQUAL TO the CHARACTER at POSITION right OF s  
                SET length TO right MINUS left PLUS one  
                IF max_len_end at POSITION right IS LESS THAN length  
                    SET max_len_end at POSITION right TO length  
                END IF  
                IF max_len_start at POSITION left IS LESS THAN length  
                    SET max_len_start at POSITION left TO length  
                END IF  
                DECREMENT left BY one  
                INCREMENT right BY one  
            END WHILE  
        END FUNCTION  
        
        FOR i FROM zero TO n MINUS one  
            CALL expand_around_center WITH PARAMETERS i AND i  
        END FOR  
        
        SET prefix_max TO a list of length n WITH every element SET TO zero  
        SET suffix_max TO a list of length n WITH every element SET TO zero  
        
        SET prefix_max at POSITION zero TO max_len_end at POSITION zero  
        FOR i FROM one TO n MINUS one  
            IF prefix_max at POSITION i MINUS one IS GREATER THAN prefix_max at POSITION i OR max_len_end at POSITION i IS GREATER THAN prefix_max at POSITION i MINUS one  
                SET prefix_max at POSITION i TO the GREATER VALUE BETWEEN prefix_max at POSITION i MINUS one AND max_len_end at POSITION i  
            END IF  
        END FOR  
        
        SET suffix_max at POSITION n MINUS one TO max_len_start at POSITION n MINUS one  
        FOR i FROM n MINUS two DOWN TO zero  
            IF suffix_max at POSITION i PLUS one IS GREATER THAN suffix_max at POSITION i OR max_len_start at POSITION i IS GREATER THAN suffix_max at POSITION i PLUS one  
                SET suffix_max at POSITION i TO the GREATER VALUE BETWEEN suffix_max at POSITION i PLUS one AND max_len_start at POSITION i  
            END IF  
        END FOR  
        
        SET max_product TO zero  
        FOR i FROM zero TO n MINUS two  
            SET product TO prefix_max at POSITION i MULTIPLIED BY suffix_max at POSITION i PLUS one  
            IF product IS GREATER THAN max_product  
                SET max_product TO product  
            END IF  
        END FOR  
        
        RETURN max_product  
    END FUNCTION  
END CLASS