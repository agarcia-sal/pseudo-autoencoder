CLASS Solution  
    FUNCTION partition WITH PARAMETER s  
        FUNCTION is_palindrome WITH PARAMETER sub  
            RETURN sub IS EQUAL TO sub REVERSED  
        END FUNCTION  
        
        FUNCTION backtrack WITH PARAMETERS start AND path  
            IF start IS EQUAL TO the LENGTH OF s  
                APPEND path TO result  
                RETURN  
            END IF  
            FOR end FROM start PLUS one TO the LENGTH OF s PLUS one  
                IF is_palindrome CALLED WITH PARAMETER substring FROM start TO end OF s IS TRUE  
                    CALL backtrack WITH PARAMETERS end AND path CONCATENATED WITH substring FROM start TO end OF s  
                END IF  
            END FOR  
        END FUNCTION  
        
        SET result TO an empty list  
        CALL backtrack WITH PARAMETERS zero AND an empty list  
        RETURN result  
    END FUNCTION  
END CLASS