CLASS Solution  
    FUNCTION scheduleCourse WITH PARAMETER courses  
        CALL sort FUNCTION ON courses USING the second element of each course to ORDER courses BY their end day  
        SET max_heap TO an empty list REPRESENTING a max-heap of taken course durations  
        SET current_end_day TO zero REPRESENTING the cumulative duration of taken courses  
        
        FOR each course IN courses  
            SET duration TO the first element OF course  
            SET last_day TO the second element OF course  
            
            IF current_end_day PLUS duration IS LESS THAN OR EQUAL TO last_day THEN  
                CALL push OPERATION ON max_heap WITH the NEGATIVE OF duration  
                INCREMENT current_end_day BY duration  
            ELSE  
                IF max_heap IS NOT empty AND the NEGATIVE OF the first element OF max_heap IS GREATER THAN duration THEN  
                    INCREMENT current_end_day BY duration PLUS the result OF calling pop OPERATION ON max_heap  
                    CALL push OPERATION ON max_heap WITH the NEGATIVE OF duration  
                END IF  
            END IF  
        END FOR  
        
        RETURN the LENGTH OF max_heap  
    END FUNCTION  
END CLASS