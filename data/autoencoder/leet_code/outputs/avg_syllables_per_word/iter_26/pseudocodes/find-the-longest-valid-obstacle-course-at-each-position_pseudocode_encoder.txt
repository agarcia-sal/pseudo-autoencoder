CLASS Solution
    FUNCTION longestObstacleCourseAtEachPosition(obstacles)
        SET total_number_of_obstacles TO the LENGTH OF obstacles
        SET answer_list TO an empty list
        SET increasing_subsequence_list TO an empty list
        
        FOR each obstacle_element IN obstacles
            SET found_index TO the position returned by the operation of finding the insertion point to the right side in increasing_subsequence_list for obstacle_element
            
            IF found_index EQUALS the LENGTH OF increasing_subsequence_list
                APPEND obstacle_element TO increasing_subsequence_list
            ELSE
                SET the element at position found_index OF increasing_subsequence_list TO obstacle_element
            END IF
            
            APPEND found_index PLUS one TO answer_list
        END FOR
        
        RETURN answer_list
    END FUNCTION
END CLASS