CLASS Solution
    FUNCTION maxRunTime(n, batteries)
        FUNCTION canRunFor(time)
            SET total TO zero
            FOR each battery IN batteries
                SET minimum_value TO THE smaller BETWEEN battery AND time
                INCREMENT total BY minimum_value
            END FOR
            IF total IS GREATER THAN OR EQUAL TO time MULTIPLIED BY n
                RETURN true
            ELSE
                RETURN false
            END IF
        END FUNCTION

        SET left TO zero
        SET right TO THE sum OF elements OF batteries DIVIDED BY n

        WHILE left IS LESS THAN right
            SET mid TO left PLUS right PLUS one DIVIDED BY two
            IF canRunFor(mid) HOLDS
                SET left TO mid
            ELSE
                SET right TO right MINUS one
            END IF
        END WHILE

        RETURN left
    END FUNCTION
END CLASS