CLASS Solution
    FUNCTION longestPrefix(parameter s OF TYPE string)
        SET variable n TO the LENGTH OF parameter s
        SET list lps TO a list OF zero repeated n TIMES
        SET variable j TO zero

        FOR index i FROM one TO variable n MINUS one INCLUSIVE
            WHILE variable j GREATER THAN zero AND element at position i OF parameter s NOT EQUALS element at position j OF parameter s HOLDS
                SET variable j TO element at position variable j MINUS one OF list lps
            END WHILE

            IF element at position i OF parameter s EQUALS element at position variable j OF parameter s THEN
                INCREMENT variable j BY one
                SET element at position i OF list lps TO variable j
            END IF
        END FOR

        SET variable longest_happy_prefix_length TO element at position variable n MINUS one OF list lps
        RETURN substring FROM position zero TO position variable longest_happy_prefix_length MINUS one OF parameter s
    END FUNCTION
END CLASS