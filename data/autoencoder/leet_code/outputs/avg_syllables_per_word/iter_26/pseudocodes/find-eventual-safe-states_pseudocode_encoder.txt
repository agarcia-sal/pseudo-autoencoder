CLASS Solution
    FUNCTION eventualSafeNodes(graph)
        FUNCTION is_safe(node)
            IF element at position node OF visited EQUALS one
                RETURN false
            END IF
            IF element at position node OF visited EQUALS two
                RETURN true
            END IF

            SET element at position node OF visited TO one
            FOR each neighbor IN element at position node OF graph
                IF NOT is_safe(neighbor)
                    RETURN false
                END IF
            END FOR

            SET element at position node OF visited TO two
            RETURN true
        END FUNCTION

        SET n TO the LENGTH OF graph
        INITIALIZE visited AS a list OF zero REPEATED n TIMES
        INITIALIZE safe_nodes AS an empty list

        FOR node FROM zero TO n MINUS one INCLUSIVE
            IF is_safe(node)
                APPEND node TO safe_nodes
            END IF
        END FOR

        RETURN safe_nodes
    END FUNCTION
END CLASS