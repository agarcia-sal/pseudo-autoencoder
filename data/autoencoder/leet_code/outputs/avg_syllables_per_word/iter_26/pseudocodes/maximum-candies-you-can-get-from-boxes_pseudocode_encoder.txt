CLASS Solution
    FUNCTION maxCandies(status LIST OF INTEGERS, candies LIST OF INTEGERS, keys LIST OF LIST OF INTEGERS, containedBoxes LIST OF LIST OF INTEGERS, initialBoxes LIST OF INTEGERS)
        SET boxes_we_have TO a SET CREATED FROM initialBoxes
        SET keys_we_have TO an EMPTY SET
        SET total_candies TO zero
        
        SET progress_made TO TRUE
        
        WHILE progress_made HOLDS
            SET progress_made TO FALSE
            
            FOR each box IN a LIST CREATED FROM boxes_we_have
                IF the ELEMENT AT POSITION box OF status EQUALS one OR the ELEMENT AT POSITION box OF keys_we_have IS IN keys_we_have
                    INCREMENT total_candies BY the ELEMENT AT POSITION box OF candies
                    ADD ALL ELEMENTS FROM the ELEMENT AT POSITION box OF keys TO keys_we_have
                    ADD ALL ELEMENTS FROM the ELEMENT AT POSITION box OF containedBoxes TO boxes_we_have
                    REMOVE the ELEMENT box FROM boxes_we_have
                    SET progress_made TO TRUE
                END IF
            END FOR
        END WHILE
        
        RETURN total_candies
    END FUNCTION
END CLASS