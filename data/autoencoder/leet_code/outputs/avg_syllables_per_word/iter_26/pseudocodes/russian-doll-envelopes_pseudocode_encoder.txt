CLASS Solution
    FUNCTION maxEnvelopes(envelopes AS list OF list OF integers)
        COMMENT Sort the envelopes by width in ascending order and by height in descending order
        COMMENT if the widths are the same to ensure consideration of increasing heights for the Russian doll problem
        CALL the SORT METHOD OF envelopes with a key function THAT TAKES one item AND RETURNS a tuple of the element at position zero OF that item AND the negative of the element at position one OF that item
        
        COMMENT Initialize a list to store the smallest possible height for the last envelope in the sequence of length index plus one
        SET dp TO an empty list
        
        FOR each unnamed_variable COMMA height IN envelopes
            COMMENT Use binary search to find the position to replace or extend the sequence
            SET index TO the RESULT OF CALLING a binary search that FINDS the leftmost position TO INSERT height INTO dp
            
            IF index EQUALS the LENGTH OF dp
                APPEND height TO dp
            ELSE
                SET the element AT position index OF dp TO height
            END IF
        END FOR
        
        COMMENT The length of dp is the maximum number of envelopes you can Russian doll
        RETURN the LENGTH OF dp
    END FUNCTION
END CLASS