CLASS Solution
    FUNCTION numberOfArithmeticSlices(nums)
        SET n TO the LENGTH OF nums
        IF n LESS THAN three
            RETURN zero
        END IF

        SET dp TO a list OF dictionaries mapping differences TO counts, one dictionary FOR each position FROM zero TO n MINUS one INCLUSIVE
        SET total_count TO zero

        FOR i FROM zero TO n MINUS one INCLUSIVE
            FOR j FROM zero TO i MINUS one INCLUSIVE
                SET d TO element at position i OF nums MINUS element at position j OF nums

                IF d IS A KEY IN the dictionary at position j OF dp
                    INCREMENT the value AT key d IN the dictionary at position i OF dp BY the value AT key d IN the dictionary at position j OF dp PLUS one
                    INCREMENT total_count BY the value AT key d IN the dictionary at position j OF dp
                ELSE
                    INCREMENT the value AT key d IN the dictionary at position i OF dp BY one
                END IF
            END FOR
        END FOR

        RETURN total_count
    END FUNCTION
END CLASS