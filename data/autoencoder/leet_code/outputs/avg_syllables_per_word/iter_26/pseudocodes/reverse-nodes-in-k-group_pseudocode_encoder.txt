CLASS ListNode
    FUNCTION __init__(self, val, next)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values)
    IF values EQUALS an empty list THEN
        RETURN None
    END IF
    SET head TO A NEW instance OF ListNode WITH element at position zero OF values
    SET p TO head
    FOR each val IN the SUBLIST OF values FROM position one TO the LAST position
        SET node TO A NEW instance OF ListNode WITH val
        SET p.next TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 EQUALS None AND p2 EQUALS None THEN
        RETURN True
    END IF
    IF p1 EQUALS None OR p2 EQUALS None THEN
        RETURN False
    END IF
    RETURN the COMBINATION OF the EXPRESSION that element val AT p1 EQUALS element val AT p2 AND the RECURSIVE CALL TO is_same_list WITH parameters element next AT p1 AND element next AT p2
END FUNCTION

CLASS Solution
    FUNCTION reverseKGroup(self, head, k)
        FUNCTION reverseLinkedList(start, end)
            SET prev TO None
            SET curr TO start
            WHILE curr NOT EQUALS end HOLDS
                SET next_node TO element next AT curr
                SET element next AT curr TO prev
                SET prev TO curr
                SET curr TO next_node
            END WHILE
            SET element next AT curr TO prev
            RETURN end, start
        END FUNCTION

        SET dummy TO A NEW instance OF ListNode WITH value zero
        SET element next AT dummy TO head
        SET prev_group_end TO dummy

        WHILE True HOLDS
            SET kth_node TO prev_group_end
            FOR each unnamed iteration FROM position one TO position k INCLUSIVE
                SET kth_node TO element next AT kth_node
                IF kth_node EQUALS None THEN
                    RETURN element next AT dummy
                END IF
            END FOR

            SET next_group_start TO element next AT kth_node
            SET element next AT kth_node TO None

            CALL reverseLinkedList WITH parameters element next AT prev_group_end AND kth_node AND ASSIGN RESULTS TO new_group_start AND new_group_end

            SET element next AT prev_group_end TO new_group_start
            SET element next AT new_group_end TO next_group_start

            SET prev_group_end TO new_group_end
        END WHILE
        
        RETURN element next AT dummy
    END FUNCTION
END CLASS