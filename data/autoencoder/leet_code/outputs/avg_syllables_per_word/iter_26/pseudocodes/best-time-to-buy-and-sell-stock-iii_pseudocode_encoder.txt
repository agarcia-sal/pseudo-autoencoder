CLASS Solution
    FUNCTION maxProfit(prices)
        IF prices IS EMPTY
            RETURN zero
        END IF

        SET min_price1 TO positive infinity
        SET min_price2 TO positive infinity
        SET max_profit1 TO zero
        SET max_profit2 TO zero

        FOR each price IN prices
            SET min_price1 TO THE SMALLER OF min_price1 AND price
            SET max_profit1 TO THE LARGER OF max_profit1 AND price MINUS min_price1

            SET min_price2 TO THE SMALLER OF min_price2 AND price MINUS max_profit1
            SET max_profit2 TO THE LARGER OF max_profit2 AND price MINUS min_price2
        END FOR

        RETURN max_profit2
    END FUNCTION
END CLASS