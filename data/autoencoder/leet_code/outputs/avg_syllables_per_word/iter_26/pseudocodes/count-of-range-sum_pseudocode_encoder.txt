CLASS Solution
    FUNCTION countRangeSum(nums, lower, upper)
        SET prefix_sums TO a list containing zero
        SET current_sum TO zero
        SET count TO zero

        FOR each num IN nums
            INCREMENT current_sum BY num

            SET left TO current_sum MINUS upper
            SET right TO current_sum MINUS lower

            INCREMENT count BY the result of the number of elements in prefix_sums less than or equal to right MINUS the number of elements in prefix_sums less than left

            INSERT current_sum INTO prefix_sums maintaining sorted order
        END FOR

        RETURN count
    END FUNCTION
END CLASS