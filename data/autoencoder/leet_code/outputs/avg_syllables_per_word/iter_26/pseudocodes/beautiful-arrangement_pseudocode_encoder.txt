CLASS Solution
    FUNCTION countArrangement(n)
        FUNCTION backtrack(used_list, current_position)
            IF current_position EQUALS the natural number immediately following n HOLDS
                RETURN one
            END IF

            SET arrangement_count TO zero
            FOR each integer candidate FROM one TO n INCLUSIVE
                IF the element at position candidate OF used_list EQUALS false AND
                   (candidate MODULO current_position EQUALS zero OR current_position MODULO candidate EQUALS zero) HOLDS
                    SET the element at position candidate OF used_list TO true
                    INCREMENT arrangement_count BY backtrack(used_list, current_position PLUS one)
                    SET the element at position candidate OF used_list TO false
                END IF
            END FOR

            RETURN arrangement_count
        END FUNCTION

        SET used_list TO a list of false elements of length the natural number immediately following n
        RETURN backtrack(used_list, one)
    END FUNCTION
END CLASS