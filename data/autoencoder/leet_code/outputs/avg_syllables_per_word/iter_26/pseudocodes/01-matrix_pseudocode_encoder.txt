CLASS Solution
    FUNCTION updateMatrix(mat)
        IF mat IS NOT PRESENT OR element at position zero OF mat IS NOT PRESENT
            RETURN mat
        END IF

        SET rows TO the LENGTH OF mat
        SET cols TO the LENGTH OF element at position zero OF mat

        SET dist TO a list of lists where for each row from one TO rows INCLUSIVE, 
            there is a list containing the quantity infinity repeated cols times

        ASSIGN reference TO a new double ended queue named queue

        FOR each r FROM one TO rows INCLUSIVE
            FOR each c FROM one TO cols INCLUSIVE
                IF element at position r OF mat reduced by one AND element at position c OF that element EQUALS zero
                    SET element at position r OF dist reduced by one AND element at position c OF that element TO zero
                    APPEND the tuple of r reduced by one AND c reduced by one TO queue
                END IF
            END FOR
        END FOR

        SET directions TO a list containing the tuple of minus one AND zero, the tuple of one AND zero, the tuple of zero AND minus one, and the tuple of zero AND one

        WHILE queue HOLDS ITEMS
            REMOVE and RETURN the leftmost element of queue INTO variables r AND c

            FOR each pair dr AND dc IN directions
                SET nr TO r PLUS dr
                SET nc TO c PLUS dc

                IF nr IS GREATER THAN OR EQUAL TO zero AND nr IS LESS THAN rows AND nc IS GREATER THAN OR EQUAL TO zero AND nc IS LESS THAN cols AND element at position nr OF dist AND element at position nc OF that element IS GREATER THAN element at position r OF dist AND element at position c OF that element PLUS one
                    SET element at position nr OF dist AND element at position nc OF that element TO element at position r OF dist AND element at position c OF that element PLUS one
                    APPEND the tuple of nr AND nc TO queue
                END IF
            END FOR
        END WHILE

        RETURN dist
    END FUNCTION
END CLASS