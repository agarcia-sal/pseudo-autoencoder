CLASS Solution
    FUNCTION maximumCost(n, highways, k)
        FROM collections IMPORT defaultdict
        
        SET graph TO a new empty default dictionary with list as default factory
        
        FOR each city1, city2, toll IN highways
            APPEND the tuple of city2 and toll TO the list at key city1 IN graph
            APPEND the tuple of city1 and toll TO the list at key city2 IN graph
        END FOR
        
        FUNCTION dfs(city, visited, cost, highways_used)
            NONLOCAL max_cost
            
            IF highways_used EQUALS k THEN
                SET max_cost TO the GREATER OF max_cost AND cost
                RETURN
            END IF
            
            FOR each neighbor, toll IN the list AT key city IN graph
                IF neighbor NOT IN visited THEN
                    ADD neighbor TO visited
                    CALL dfs WITH neighbor, visited, cost PLUS toll, highways_used PLUS one
                    REMOVE neighbor FROM visited
                END IF
            END FOR
        END FUNCTION
        
        SET max_cost TO negative one
        FOR start_city FROM zero TO n MINUS one INCLUSIVE
            SET visited TO a new set containing start_city
            CALL dfs WITH start_city, visited, zero, zero
        END FOR
        
        RETURN max_cost
    END FUNCTION
END CLASS