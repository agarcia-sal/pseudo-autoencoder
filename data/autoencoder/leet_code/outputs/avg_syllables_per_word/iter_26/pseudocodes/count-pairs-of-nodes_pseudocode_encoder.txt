CLASS Solution
    FUNCTION countPairs(n, edges, queries)
        SET degree TO a list of zeros with length equal TO n PLUS one
        FOR each pair of nodes u and v IN edges
            INCREMENT element at position u OF degree BY one
            INCREMENT element at position v OF degree BY one
        END FOR

        SET shared TO a new default dictionary with default value zero
        FOR each pair of nodes u and v IN edges
            IF u GREATER THAN v THEN
                SET temporary variable temp TO u
                SET u TO v
                SET v TO temp
            END IF
            INCREMENT the value at key pair consisting of u and v IN shared BY one
        END FOR

        SET sorted_degree TO the list degree sorted in ascending order

        SET answers TO an empty list
        FOR each query q IN queries
            SET count TO zero
            SET left TO one
            SET right TO n
            WHILE left LESS THAN right HOLDS
                IF element at position left OF sorted_degree PLUS element at position right OF sorted_degree GREATER THAN q THEN
                    INCREMENT count BY right MINUS left
                    DECREMENT right BY one
                ELSE
                    INCREMENT left BY one
                END IF
            END WHILE

            FOR each key pair consisting of u and v, and corresponding count_uv IN shared items
                SET degree_uv TO element at position u OF degree PLUS element at position v OF degree
                IF degree_uv GREATER THAN q AND degree_uv MINUS count_uv LESS THAN OR EQUAL TO q THEN
                    DECREMENT count BY one
                END IF
            END FOR

            APPEND count TO answers
        END FOR

        RETURN answers
    END FUNCTION
END CLASS