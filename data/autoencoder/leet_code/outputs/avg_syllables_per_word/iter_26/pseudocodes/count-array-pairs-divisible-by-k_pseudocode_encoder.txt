CLASS Solution
    FUNCTION countPairs(nums, k)
        SET gcd_count TO an empty Counter object
        
        FOR each num IN nums
            INCREMENT the element ASSOCIATED WITH THE GREATEST COMMON DIVISOR OF num AND k IN gcd_count BY one
        END FOR
        
        SET total_pairs TO zero
        
        SET gcd_values TO the LIST OF KEYS OF gcd_count
        SET n TO the LENGTH OF gcd_values
        
        FOR i FROM zero TO n MINUS one INCLUSIVE
            FOR j FROM i TO n MINUS one INCLUSIVE
                SET gcd1 TO the ELEMENT AT POSITION i OF gcd_values
                SET gcd2 TO the ELEMENT AT POSITION j OF gcd_values
                
                IF THE GREATEST COMMON DIVISOR MULTIPLIED BY THE GREATEST COMMON DIVISOR DIVIDED BY k HAS NO REMAINDER HOLDS
                    IF i EQUALS j
                        INCREMENT total_pairs BY THE PRODUCT OF THE COUNT ASSOCIATED WITH gcd1 AND THE COUNT ASSOCIATED WITH gcd1 MINUS one DIVIDED BY two
                    ELSE
                        INCREMENT total_pairs BY THE PRODUCT OF THE COUNT ASSOCIATED WITH gcd1 AND THE COUNT ASSOCIATED WITH gcd2
                    END IF
                END IF
            END FOR
        END FOR
        
        RETURN total_pairs
    END FUNCTION
END CLASS