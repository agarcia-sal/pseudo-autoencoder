CLASS Solution
    FUNCTION sumOfDistancesInTree(n, edges)
        SET graph TO a new default dictionary with list as default value
        FOR each pair a, b IN edges
            APPEND b TO the list AT KEY a IN graph
            APPEND a TO the list AT KEY b IN graph
        END FOR

        SET count TO a list where each element is initialized TO one WITH THE LENGTH OF n
        SET dist TO a list where each element is initialized TO zero WITH THE LENGTH OF n

        FUNCTION dfs1(u, p)
            FOR each element v IN the list AT KEY u IN graph
                IF v NOT EQUALS p THEN
                    CALL dfs1 WITH v AND u AS ARGUMENTS
                    INCREMENT the element AT POSITION u OF count BY the element AT POSITION v OF count
                    INCREMENT the element AT POSITION u OF dist BY the sum of the element AT POSITION v OF dist PLUS the element AT POSITION v OF count
                END IF
            END FOR
        END FUNCTION

        CALL dfs1 WITH zero AND minus one AS ARGUMENTS

        FUNCTION dfs2(u, p)
            FOR each element v IN the list AT KEY u IN graph
                IF v NOT EQUALS p THEN
                    SET the element AT POSITION v OF dist TO the element AT POSITION u OF dist MINUS the element AT POSITION v OF count PLUS the value of n MINUS the element AT POSITION v OF count
                    CALL dfs2 WITH v AND u AS ARGUMENTS
                END IF
            END FOR
        END FUNCTION

        CALL dfs2 WITH zero AND minus one AS ARGUMENTS

        RETURN dist
    END FUNCTION
END CLASS