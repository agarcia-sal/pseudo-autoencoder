CLASS Solution
    FUNCTION numOfWays(parameter nums AS list of integers)
        SET MOD TO ten raised to the power of nine PLUS one

        FUNCTION count_ways(parameter arr AS list of integers)
            IF the LENGTH OF arr LESS THAN OR EQUAL TO one HOLDS
                RETURN one
            END IF

            SET root TO the element at position zero OF arr
            SET left_subtree TO an empty list
            SET right_subtree TO an empty list
            FOR each element x IN arr
                IF x LESS THAN root HOLDS
                    APPEND x TO left_subtree
                ELSE IF x GREATER THAN root HOLDS
                    APPEND x TO right_subtree
                END IF
            END FOR

            SET ways_left TO the RESULT OF count_ways WITH left_subtree AS argument
            SET ways_right TO the RESULT OF count_ways WITH right_subtree AS argument

            SET total_ways TO the NUMBER OF COMBINATIONS OF the SUM OF the LENGTH OF left_subtree AND the LENGTH OF right_subtree CHOSEN the LENGTH OF left_subtree
            SET total_ways TO ways_left MULTIPLIED BY ways_right MULTIPLIED BY total_ways

            RETURN total_ways MODULO MOD
        END FUNCTION

        SET result TO the RESULT OF count_ways WITH nums AS argument
        SET result TO result MINUS one
        RETURN result MODULO MOD
    END FUNCTION
END CLASS