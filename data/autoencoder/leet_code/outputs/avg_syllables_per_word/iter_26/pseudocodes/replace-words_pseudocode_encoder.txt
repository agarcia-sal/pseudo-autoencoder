CLASS Solution
    FUNCTION replaceWords(dictionary AS list OF strings, sentence AS string) RETURNS string
        SORT dictionary BY the LENGTH OF each root FROM the SMALLEST TO the LARGEST
        SPLIT sentence INTO a list of words NAMED words

        FUNCTION replace(word AS string) RETURNS string
            FOR each root IN dictionary
                IF word STARTS WITH root
                    RETURN root
                END IF
            END FOR
            RETURN word
        END FUNCTION

        SET replaced_words TO an empty list
        FOR each word IN words
            APPEND the RESULT OF replace WITH word AS argument TO replaced_words
        END FOR

        JOIN replaced_words INTO a single string WITH words SEPARATED BY a single space
        RETURN the joined string
    END FUNCTION
END CLASS