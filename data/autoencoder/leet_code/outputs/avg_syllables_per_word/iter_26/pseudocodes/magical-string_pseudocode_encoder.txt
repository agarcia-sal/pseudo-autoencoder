CLASS Solution
    FUNCTION magicalString(n)
        IF n EQUALS zero
            RETURN zero
        END IF

        IF n LESS THAN OR EQUAL TO three
            RETURN one
        END IF

        SET s TO list containing one, two, two
        SET count TO one
        SET index TO two

        WHILE the LENGTH OF s LESS THAN n
            SET next_num TO three MINUS the element at position the LAST OF s OF s
            APPEND next_num REPEATED the element at position index OF s TIMES TO s

            IF next_num EQUALS one
                INCREMENT count BY the element at position index OF s
            END IF

            INCREMENT index BY one
        END WHILE

        IF the LENGTH OF s GREATER THAN n
            SET excess TO the LENGTH OF s MINUS n
            DECREMENT count BY the element at position the LAST OF s MULTIPLIED BY excess
        END IF

        RETURN count
    END FUNCTION
END CLASS