CLASS Solution
    FUNCTION ways(pizza, k)
        SET mod TO ten TO THE POWER OF nine PLUS seven
        SET m TO the LENGTH OF pizza
        SET n TO the LENGTH OF element at position zero OF pizza
        SET s TO a two dimensional list OF zeroes with the number OF rows as m PLUS one and number OF columns as n PLUS one

        FOR index i FROM one TO m INCLUSIVE
            SET row TO element at position i MINUS one OF pizza
            FOR index j FROM one TO n INCLUSIVE
                SET character TO element at position j MINUS one OF row
                SET element at position i THEN j OF s TO element at position i MINUS one THEN j OF s PLUS element at position i THEN j MINUS one OF s MINUS element at position i MINUS one THEN j MINUS one OF s PLUS
                  one IF character EQUALS letter A OTHERWISE zero
            END FOR
        END FOR

        FUNCTION dfs(i, j, k)
            IF k EQUALS zero THEN
                RETURN one IF element at position m THEN n OF s MINUS element at position i THEN n OF s MINUS element at position m THEN j OF s PLUS element at position i THEN j OF s IS GREATER THAN zero OTHERWISE zero
            END IF

            SET ans TO zero

            FOR x FROM i PLUS one TO m MINUS one INCLUSIVE
                IF element at position x THEN n OF s MINUS element at position i THEN n OF s MINUS element at position x THEN j OF s PLUS element at position i THEN j OF s IS GREATER THAN zero THEN
                    INCREMENT ans BY dfs(x, j, k MINUS one)
                END IF
            END FOR

            FOR y FROM j PLUS one TO n MINUS one INCLUSIVE
                IF element at position m THEN y OF s MINUS element at position i THEN y OF s MINUS element at position m THEN j OF s PLUS element at position i THEN j OF s IS GREATER THAN zero THEN
                    INCREMENT ans BY dfs(i, y, k MINUS one)
                END IF
            END FOR

            RETURN ans MODULO mod
        END FUNCTION

        RETURN dfs(zero, zero, k MINUS one)
    END FUNCTION
END CLASS