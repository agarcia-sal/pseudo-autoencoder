CLASS Solution
    FUNCTION constrainedSubsetSum(nums, k)
        SET n TO the LENGTH OF nums
        SET dp TO a list of zero multiples of n times
        SET element at position zero OF dp TO element at position zero OF nums
        SET max_sum TO element at position zero OF nums
        
        ASSIGN reference TO a new empty double ended queue initialized with element zero
        
        FOR i FROM one TO n MINUS one INCLUSIVE
            SET element at position i OF dp TO element at position i OF nums PLUS
                IF element at position element at position zero OF reference OF dp GREATER THAN zero THEN element at position element at position zero OF reference OF dp ELSE zero
            END IF
            
            SET max_sum TO the GREATER OF max_sum AND element at position i OF dp
            
            WHILE reference IS NOT empty AND element at position i OF dp GREATER THAN OR EQUAL TO element at position element at position LAST POSITION OF reference OF dp HOLDS
                REMOVE the LAST element FROM reference
            END WHILE
            
            APPEND i TO reference
            
            IF element at position zero OF reference EQUALS i MINUS k THEN
                REMOVE the FIRST element FROM reference
            END IF
        END FOR
        
        RETURN max_sum
    END FUNCTION
END CLASS