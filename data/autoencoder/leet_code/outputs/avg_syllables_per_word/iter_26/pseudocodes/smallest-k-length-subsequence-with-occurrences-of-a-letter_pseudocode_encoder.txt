CLASS Solution
    FUNCTION smallestSubsequence(s AS string, k AS integer, letter AS string, repetition AS integer) RETURNS string
        SET letter_count TO the NUMBER OF OCCURRENCES OF letter IN s
        SET stack TO empty list

        FOR each index i AND character char IN s
            WHILE the stack IS NOT empty AND character char IS LESS THAN the element at the LAST POSITION OF stack AND 
                  the QUANTITY OF THE LENGTH OF s MINUS i PLUS the LENGTH OF stack MINUS one IS GREATER THAN OR EQUAL TO k
                IF the element at the LAST POSITION OF stack EQUALS letter
                    IF letter_count IS GREATER THAN repetition
                        INCREMENT repetition BY one
                        REMOVE the element at the LAST POSITION OF stack FROM stack
                    ELSE
                        BREAK the WHILE LOOP
                    END IF
                ELSE
                    REMOVE the element at the LAST POSITION OF stack FROM stack
                END IF
            END WHILE

            IF the LENGTH OF stack IS LESS THAN k
                IF char EQUALS letter
                    APPEND char TO stack
                    DECREMENT repetition BY one
                ELSE IF k MINUS the LENGTH OF stack IS GREATER THAN repetition
                    APPEND char TO stack
                END IF

                IF char EQUALS letter
                    DECREMENT letter_count BY one
                END IF
            END IF
        END FOR

        WHILE the LENGTH OF stack IS LESS THAN k
            APPEND letter TO stack
        END WHILE

        RETURN the CONCATENATION OF all ELEMENTS OF stack
    END FUNCTION
END CLASS