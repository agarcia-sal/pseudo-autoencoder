CLASS Solution
    FUNCTION parseBoolExpr(expression)
        SET stk TO empty list
        FOR each character IN expression
            IF character EQUALS any one OF the characters true, false, exclamation mark, ampersand, vertical bar
                APPEND character TO stk
            ELSE IF character EQUALS closing parenthesis
                SET count_true TO zero
                SET count_false TO zero
                WHILE the last element of stk EQUALS any one OF the characters true, false
                    IF the last element of stk EQUALS true
                        INCREMENT count_true BY one
                    END IF
                    IF the last element of stk EQUALS false
                        INCREMENT count_false BY one
                    END IF
                    REMOVE the last element FROM stk
                END WHILE
                SET operator TO the last element FROM stk
                REMOVE the last element FROM stk
                IF operator EQUALS exclamation mark
                    IF count_false GREATER THAN zero
                        SET character TO true
                    ELSE
                        SET character TO false
                    END IF
                ELSE IF operator EQUALS ampersand
                    IF count_false GREATER THAN zero
                        SET character TO false
                    ELSE
                        SET character TO true
                    END IF
                ELSE IF operator EQUALS vertical bar
                    IF count_true GREATER THAN zero
                        SET character TO true
                    ELSE
                        SET character TO false
                    END IF
                END IF
                APPEND character TO stk
            END IF
        END FOR
        RETURN whether the first element of stk EQUALS true
    END FUNCTION
END CLASS