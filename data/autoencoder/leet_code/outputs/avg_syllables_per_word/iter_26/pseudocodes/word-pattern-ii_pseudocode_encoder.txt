CLASS Solution
    FUNCTION wordPatternMatch(pattern, s)
        FUNCTION backtrack(pattern_index, string_index, mapping, used)
            IF pattern_index EQUALS the LENGTH OF pattern AND string_index EQUALS the LENGTH OF s
                RETURN true
            END IF

            IF pattern_index EQUALS the LENGTH OF pattern OR string_index EQUALS the LENGTH OF s
                RETURN false
            END IF

            SET current_char TO element at position pattern_index OF pattern

            IF current_char IS IN mapping
                SET word TO mapping AT current_char
                IF substring FROM position string_index TO position string_index PLUS the LENGTH OF word MINUS one OF s NOT EQUALS word
                    RETURN false
                END IF
                IF backtrack(pattern_index PLUS one, string_index PLUS the LENGTH OF word, mapping, used) HOLDS
                    RETURN true
                END IF
            ELSE
                FOR end FROM string_index PLUS one TO the LENGTH OF s INCLUSIVE
                    SET word TO substring FROM position string_index TO position end MINUS one OF s
                    IF word IS IN used
                        CONTINUE to next iteration
                    END IF
                    SET mapping AT current_char TO word
                    ADD word TO used
                    IF backtrack(pattern_index PLUS one, end, mapping, used) HOLDS
                        RETURN true
                    END IF
                    REMOVE mapping AT current_char
                    REMOVE word FROM used
                END FOR
            END IF

            RETURN false
        END FUNCTION

        RETURN backtrack(zero, zero, empty mapping object, empty used collection)
    END FUNCTION
END CLASS