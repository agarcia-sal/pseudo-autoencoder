CLASS Solution
    FUNCTION convertArray(parameter nums AS List OF integers) RETURNS integer

        FUNCTION min_operations_to_non_decreasing(parameter nums AS List OF integers) RETURNS integer
            SET max_heap TO empty list
            SET operations TO zero
            FOR each num IN nums
                IF the max_heap IS NOT empty AND the NEGATION OF element at position zero OF max_heap GREATER THAN num
                    INCREMENT operations BY the value of NEGATION OF the result OF removing the smallest element FROM max_heap MINUS num
                    INSERT the NEGATION OF num INTO max_heap USING heap push operation
                END IF
                INSERT the NEGATION OF num INTO max_heap USING heap push operation
            END FOR
            RETURN operations
        END FUNCTION

        FUNCTION min_operations_to_non_increasing(parameter nums AS List OF integers) RETURNS integer
            SET min_heap TO empty list
            SET operations TO zero
            FOR each num IN nums
                IF the min_heap IS NOT empty AND element at position zero OF min_heap LESS THAN num
                    INCREMENT operations BY num MINUS the result OF removing the smallest element FROM min_heap
                    INSERT num INTO min_heap USING heap push operation
                END IF
                INSERT num INTO min_heap USING heap push operation
            END FOR
            RETURN operations
        END FUNCTION

        RETURN the minimum value BETWEEN the result OF min_operations_to_non_decreasing applied TO nums AND the result OF min_operations_to_non_increasing applied TO nums
    END FUNCTION
END CLASS