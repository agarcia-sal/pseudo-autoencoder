CLASS ListNode
    FUNCTION __init__(self, val EQUALS zero, next EQUALS none)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values)
    IF values IS empty
        RETURN none
    END IF
    SET head TO A new ListNode WITH element at position zero OF values
    SET p TO head
    FOR each val IN the ELEMENTS OF values EXCLUDING the element at position zero
        SET node TO A new ListNode WITH val
        SET the next element OF p TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS none AND p2 IS none
        RETURN TRUE
    END IF
    IF p1 IS none OR p2 IS none
        RETURN FALSE
    END IF
    RETURN the element val OF p1 EQUALS the element val OF p2 AND is_same_list(the next element OF p1, the next element OF p2)
END FUNCTION

CLASS Solution
    FUNCTION reverseBetween(self, head, left, right)
        IF head IS none OR left EQUALS right
            RETURN head
        END IF
        SET dummy TO A new ListNode WITH zero
        SET the next element OF dummy TO head
        SET prev TO dummy
        FOR a counting variable FROM one TO left MINUS one INCLUSIVE
            SET prev TO the next element OF prev
        END FOR
        SET current TO the next element OF prev
        FOR a counting variable FROM one TO right MINUS left INCLUSIVE
            SET next_node TO the next element OF current
            SET the next element OF current TO the next element OF next_node
            SET the next element OF next_node TO the next element OF prev
            SET the next element OF prev TO next_node
        END FOR
        RETURN the next element OF dummy
    END FUNCTION
END CLASS