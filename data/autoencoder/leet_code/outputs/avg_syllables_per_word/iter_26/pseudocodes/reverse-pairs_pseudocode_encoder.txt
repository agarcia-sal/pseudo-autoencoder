CLASS Solution
    FUNCTION reversePairs(nums)
        FUNCTION merge_and_count(nums, start, end)
            IF start GREATER THAN OR EQUAL TO end
                RETURN zero
            END IF

            SET mid TO the integer division of the sum of start AND end BY two
            SET count TO merge_and_count(nums, start, mid) PLUS merge_and_count(nums, mid PLUS one, end)

            SET j TO mid PLUS one
            FOR i FROM start TO mid INCLUSIVE
                WHILE j LESS THAN OR EQUAL TO end AND the element at position i OF nums GREATER THAN two MULTIPLIED BY the element at position j OF nums HOLDS
                    INCREMENT j BY one
                END WHILE
                INCREMENT count BY j MINUS (mid PLUS one)
            END FOR

            SET merged TO an empty list
            SET left TO start
            SET right TO mid PLUS one
            WHILE left LESS THAN OR EQUAL TO mid AND right LESS THAN OR EQUAL TO end
                IF the element at position left OF nums LESS THAN OR EQUAL TO the element at position right OF nums
                    APPEND the element at position left OF nums TO merged
                    INCREMENT left BY one
                ELSE
                    APPEND the element at position right OF nums TO merged
                    INCREMENT right BY one
                END IF
            END WHILE

            APPEND all elements from the positions from left TO mid INCLUSIVE OF nums TO merged
            APPEND all elements from the positions from right TO end INCLUSIVE OF nums TO merged

            FOR index FROM zero TO the LENGTH OF merged MINUS one INCLUSIVE
                SET the element at position start PLUS index OF nums TO the element at position index OF merged
            END FOR

            RETURN count
        END FUNCTION

        RETURN merge_and_count(nums, zero, the LENGTH OF nums MINUS one)
    END FUNCTION
END CLASS