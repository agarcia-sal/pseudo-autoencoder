CLASS Solution
    FUNCTION findMaxAverage(nums, k)
        FUNCTION canFindAverage(mid)
            SET prefix_sums TO a list of zeros with the LENGTH OF nums PLUS one
            SET min_prefix_sum TO a list of zeros with the LENGTH OF nums PLUS one

            FOR index i FROM zero TO the LENGTH OF nums MINUS one INCLUSIVE
                SET the element at position i PLUS one OF prefix_sums TO the element at position i OF prefix_sums PLUS the element at position i OF nums MINUS mid
                
                IF index i IS GREATER THAN OR EQUAL TO k
                    SET the element at position i PLUS one OF min_prefix_sum TO the MINIMUM OF the element at position i OF min_prefix_sum AND the element at position i PLUS one MINUS k OF prefix_sums
                ELSE
                    SET the element at position i PLUS one OF min_prefix_sum TO the element at position i OF min_prefix_sum
                END IF

                IF index i IS GREATER THAN OR EQUAL TO k MINUS one AND the element at position i PLUS one OF prefix_sums MINUS the element at position i PLUS one OF min_prefix_sum IS GREATER THAN OR EQUAL TO zero
                    RETURN true
                END IF
            END FOR
            RETURN false
        END FUNCTION

        SET low TO the MINIMUM VALUE WITHIN nums
        SET high TO the MAXIMUM VALUE WITHIN nums

        WHILE high MINUS low IS GREATER THAN one DIVIDED BY ten THOUSAND
            SET mid TO low PLUS high DIVIDED BY two
            
            IF canFindAverage(mid) HOLDS
                SET low TO mid
            ELSE
                SET high TO mid
            END IF
        END WHILE

        RETURN low
    END FUNCTION
END CLASS