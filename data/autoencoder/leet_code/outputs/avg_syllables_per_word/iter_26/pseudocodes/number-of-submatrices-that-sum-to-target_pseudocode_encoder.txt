CLASS Solution
    FUNCTION numSubmatrixSumTarget(matrix, target)
        FUNCTION subarraySum(nums, target)
            SET count TO zero
            ASSIGN seen_sums TO a new default dictionary with integer default values
            SET cumulative_sum TO zero
            FOR each number IN nums
                INCREMENT cumulative_sum BY number
                IF cumulative_sum EQUALS target THEN
                    INCREMENT count BY one
                END IF
                IF the difference BETWEEN cumulative_sum AND target IS A KEY IN seen_sums THEN
                    INCREMENT count BY the VALUE ASSOCIATED WITH the key of the difference BETWEEN cumulative_sum AND target IN seen_sums
                END IF
                INCREMENT the VALUE ASSOCIATED WITH cumulative_sum IN seen_sums BY one
            END FOR
            RETURN count
        END FUNCTION

        SET rows TO the LENGTH OF matrix
        SET cols TO the LENGTH OF element at position zero OF matrix
        SET total_count TO zero

        FOR top FROM zero TO rows MINUS one INCLUSIVE
            SET current_cols TO a new list consisting of zero repeated cols times
            FOR bottom FROM top TO rows MINUS one INCLUSIVE
                FOR col FROM zero TO cols MINUS one INCLUSIVE
                    INCREMENT element at position col OF current_cols BY element at position bottom OF matrix AT position col
                END FOR
                INCREMENT total_count BY subarraySum(current_cols, target)
            END FOR
        END FOR

        RETURN total_count
    END FUNCTION
END CLASS