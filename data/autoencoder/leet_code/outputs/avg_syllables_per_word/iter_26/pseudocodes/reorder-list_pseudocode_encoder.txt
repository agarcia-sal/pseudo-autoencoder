CLASS ListNode
    FUNCTION __init__(self, val EQUALS zero, next EQUALS none)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values: list)
    IF values IS NOT PRESENT
        RETURN none
    END IF
    SET head TO A NEW ListNode OBJECT WITH element at position zero OF values
    SET p TO head
    FOR each val IN the SUBLIST OF values FROM position one TO THE END
        SET node TO A NEW ListNode OBJECT WITH val
        SET p.next TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS none AND p2 IS none
        RETURN true
    END IF
    IF p1 IS none OR p2 IS none
        RETURN false
    END IF
    RETURN the VALUE OF p1.val EQUALS the VALUE OF p2.val AND is_same_list(the NEXT OF p1, the NEXT OF p2)
END FUNCTION

CLASS Solution
    FUNCTION reorderList(head: Optional OF ListNode) RETURNS none
        IF head IS none OR the NEXT OF head IS none
            RETURN
        END IF

        SET slow TO head
        SET fast TO head
        WHILE fast IS NOT none AND the NEXT OF fast IS NOT none
            SET slow TO the NEXT OF slow
            SET fast TO the NEXT OF the NEXT OF fast
        END WHILE

        SET prev TO none
        SET curr TO slow
        WHILE curr IS NOT none
            SET next_temp TO the NEXT OF curr
            SET the NEXT OF curr TO prev
            SET prev TO curr
            SET curr TO next_temp
        END WHILE

        SET first TO head
        SET second TO prev
        WHILE the NEXT OF second IS NOT none
            SET temp1 TO the NEXT OF first
            SET temp2 TO the NEXT OF second
            SET the NEXT OF first TO second
            SET the NEXT OF second TO temp1
            SET first TO temp1
            SET second TO temp2
        END WHILE
    END FUNCTION
END CLASS