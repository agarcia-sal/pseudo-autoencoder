CLASS Solution
    FUNCTION maxBuilding(n, restrictions)
        APPEND list containing the first building position and zero height TO restrictions
        SORT restrictions BY their natural order
        FOR index FROM two TO the LENGTH OF restrictions INCLUSIVE
            ASSIGN current_index TO element at position index OF restrictions AT position one
            ASSIGN current_height TO element at position index OF restrictions AT position two
            ASSIGN previous_index TO element at position index MINUS one OF restrictions AT position one
            ASSIGN previous_height TO element at position index MINUS one OF restrictions AT position two
            SET element at position index OF restrictions AT position two TO THE MINIMUM OF current_height AND previous_height PLUS current_index MINUS previous_index
        END FOR
        FOR index FROM the LENGTH OF restrictions MINUS one DOWN TO one INCLUSIVE
            ASSIGN current_index TO element at position index MINUS one OF restrictions AT position one
            ASSIGN current_height TO element at position index MINUS one OF restrictions AT position two
            ASSIGN next_index TO element at position index OF restrictions AT position one
            ASSIGN next_height TO element at position index OF restrictions AT position two
            SET element at position index MINUS one OF restrictions AT position two TO THE MINIMUM OF current_height AND next_height PLUS next_index MINUS current_index
        END FOR
        SET max_height TO zero
        ASSIGN previous_index TO element at position one OF restrictions AT position one
        ASSIGN previous_height TO element at position one OF restrictions AT position two
        FOR index FROM two TO the LENGTH OF restrictions INCLUSIVE
            ASSIGN current_index TO element at position index OF restrictions AT position one
            ASSIGN current_height TO element at position index OF restrictions AT position two
            SET possible_height TO current_index MINUS previous_index PLUS previous_height PLUS current_height DIVIDED BY two
            SET max_height TO THE MAXIMUM OF max_height AND possible_height
            ASSIGN previous_index TO current_index
            ASSIGN previous_height TO current_height
        END FOR
        SET max_height TO THE MAXIMUM OF max_height AND previous_height PLUS n MINUS previous_index
        RETURN max_height
    END FUNCTION
END CLASS