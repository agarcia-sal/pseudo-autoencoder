CLASS Solution
    FUNCTION shoppingOffers(price, special, needs)
        SET special TO a list of offers FROM special WHERE the SUM OF all elements EXCEPT the last element OF offer GREATER THAN zero AND the last element OF offer LESS THAN the SUM OF the MULTIPLICATION OF corresponding elements FROM price AND the elements EXCEPT the last element OF offer
        FUNCTION dfs(needs) WITH LRU CACHE of unlimited size
            SET min_cost TO the SUM OF the MULTIPLICATION OF corresponding elements FROM price AND needs
            FOR each offer IN special
                SET new_needs TO a list WHERE EACH element IS the CORRESPONDING element OF needs MINUS the CORRESPONDING element EXCEPT the last element OF offer
                IF all elements IN new_needs ARE GREATER THAN OR EQUAL TO zero THEN
                    SET min_cost TO the MINIMUM OF min_cost AND the SUM OF the last element OF offer AND dfs(TUPLE OF new_needs)
                END IF
            END FOR
            RETURN min_cost
        END FUNCTION
        RETURN dfs(TUPLE OF needs)
    END FUNCTION
END CLASS