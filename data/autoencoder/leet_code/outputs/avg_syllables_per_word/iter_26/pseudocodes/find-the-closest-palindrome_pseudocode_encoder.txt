CLASS Solution
    FUNCTION nearestPalindromic(n AS string) AS string
        SET length TO the LENGTH OF n
        IF length EQUALS one
            RETURN the STRING RESULT OF the INTEGER VALUE OF n MINUS one
        END IF
        
        SET candidates TO an EMPTY SET
        
        ADD the INTEGER VALUE OF ten RAISED TO THE POWER OF length PLUS one TO candidates
        ADD the INTEGER VALUE OF ten RAISED TO THE POWER OF length MINUS one MINUS one TO candidates
        
        SET prefix TO the INTEGER VALUE OF the SUBSTRING FROM position zero TO POSITION length PLUS one DIVIDED BY two EXCLUSIVE OF n
        
        FOR i FROM negative one TO positive one INCLUSIVE
            SET new_prefix TO the STRING RESULT OF prefix PLUS i
            IF length MODULO two EQUALS zero
                SET candidate TO new_prefix CONCATENATED WITH new_prefix IN REVERSE ORDER
            ELSE
                SET candidate TO new_prefix CONCATENATED WITH the SUBSTRING FROM the POSITION two LESS THAN the LENGTH OF new_prefix DOWN TO zero IN REVERSE ORDER OF new_prefix
            END IF
            ADD the INTEGER VALUE OF candidate TO candidates
        END FOR
        
        SET original_number TO the INTEGER VALUE OF n
        REMOVE original_number FROM candidates IF IT IS PRESENT
        
        SET closest TO the ELEMENT OF candidates THAT MINIMIZES FIRST the ABSOLUTE VALUE OF the DIFFERENCE BETWEEN the ELEMENT AND original_number AND SECONDLY the ELEMENT ITSELF
        
        RETURN the STRING RESULT OF closest
    END FUNCTION
END CLASS