CLASS TreeNode
    FUNCTION __init__(self, val, left, right)
        SET self.val TO val
        SET self.left TO left
        SET self.right TO right
    END FUNCTION
END CLASS

FUNCTION tree_node(values)
    IF values IS empty
        RETURN None
    END IF
    SET root TO a new TreeNode with value as the element at position zero OF values, left as None, right as None
    SET i TO one
    CREATE an empty double ended queue named queue
    APPEND root TO queue
    WHILE the LENGTH OF queue IS greater than zero HOLDS
        SET node TO the element obtained by removing the first element FROM queue
        IF i IS LESS THAN the LENGTH OF values AND the element at position i OF values IS NOT None
            SET node.left TO a new TreeNode with value as the element at position i OF values, left as None, right as None
            APPEND node.left TO queue
        END IF
        INCREMENT i BY one
        IF i IS LESS THAN the LENGTH OF values AND the element at position i OF values IS NOT None
            SET node.right TO a new TreeNode with value as the element at position i OF values, left as None, right as None
            APPEND node.right TO queue
        END IF
        INCREMENT i BY one
    END WHILE
    RETURN root
END FUNCTION

FUNCTION is_same_tree(p, q)
    IF p IS None AND q IS None
        RETURN True
    ELSE IF p IS None OR q IS None
        RETURN False
    ELSE IF the value of p IS NOT EQUALS the value of q
        RETURN False
    ELSE
        RETURN the result of is_same_tree WITH arguments as the left child of p AND the left child of q AND the result of is_same_tree WITH arguments as the right child of p AND the right child of q
    END IF
END FUNCTION

CLASS Solution
    FUNCTION recoverTree(self, root)
        SET first TO None
        SET second TO None
        SET prev TO None
        SET curr TO root
        WHILE curr IS NOT None HOLDS
            IF the left child of curr IS None
                IF prev IS NOT None AND the value of prev IS GREATER THAN the value of curr
                    IF first IS None
                        SET first TO prev
                    END IF
                    SET second TO curr
                END IF
                SET prev TO curr
                SET curr TO the right child of curr
            ELSE
                SET pred TO the left child of curr
                WHILE the right child of pred IS NOT None AND the right child of pred IS NOT curr HOLDS
                    SET pred TO the right child of pred
                END WHILE
                IF the right child of pred IS None
                    SET the right child of pred TO curr
                    SET curr TO the left child of curr
                ELSE
                    SET the right child of pred TO None
                    IF prev IS NOT None AND the value of prev IS GREATER THAN the value of curr
                        IF first IS None
                            SET first TO prev
                        END IF
                        SET second TO curr
                    END IF
                    SET prev TO curr
                    SET curr TO the right child of curr
                END IF
            END IF
        END WHILE
        IF first IS NOT None AND second IS NOT None
            SET the value of first TO the value of first PLUS the value of second
            SET the value of second TO the value of first MINUS the value of second
            SET the value of first TO the value of first MINUS the value of second
        END IF
    END FUNCTION
END CLASS