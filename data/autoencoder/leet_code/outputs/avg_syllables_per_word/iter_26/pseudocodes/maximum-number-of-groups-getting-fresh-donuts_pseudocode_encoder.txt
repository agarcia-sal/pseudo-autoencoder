CLASS Solution
    FUNCTION maxHappyGroups(batchSize, groups)
        IF batchSize EQUALS one
            RETURN the LENGTH OF groups
        END IF

        SET remainder_count TO a list of zero repeated batchSize times

        FOR each group IN groups
            INCREMENT element at position the remainder of group DIVIDED BY batchSize OF remainder_count BY one
        END FOR

        FUNCTION dp(remainder, variable number of remainder_counts)
            SET remainder_count TO the list FORM of remainder_counts
            SET max_happy TO zero

            FOR index i FROM zero TO batchSize MINUS one INCLUSIVE
                IF element at position i OF remainder_count EQUALS zero
                    CONTINUE to next iteration
                END IF

                DECREMENT element at position i OF remainder_count BY one
                SET new_remainder TO the remainder of remainder MINUS i DIVIDED BY batchSize

                IF remainder EQUALS zero
                    SET happy_groups TO one PLUS dp(new_remainder, all elements OF remainder_count)
                ELSE
                    SET happy_groups TO dp(new_remainder, all elements OF remainder_count)
                END IF

                SET max_happy TO the GREATER OF max_happy AND happy_groups

                INCREMENT element at position i OF remainder_count BY one
            END FOR

            RETURN max_happy
        END FUNCTION

        RETURN dp(zero, all elements OF remainder_count)
    END FUNCTION
END CLASS