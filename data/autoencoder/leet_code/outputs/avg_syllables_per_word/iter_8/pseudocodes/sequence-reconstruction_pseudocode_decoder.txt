CLASS Solution  
    FUNCTION sequenceReconstruction(nums, sequences)  
        SET n TO LENGTH OF nums  
        INITIALIZE graph AS map FROM integer TO list  
        INITIALIZE indegree AS list OF size n PLUS 1 WITH ALL VALUES 0  
        
        FOR each seq IN sequences  
            FOR i FROM 0 TO LENGTH OF seq MINUS 2  
                SET u TO seq AT i  
                SET v TO seq AT i PLUS 1  
                APPEND v TO graph AT u  
                INCREMENT indegree AT v BY 1  
        
        SET queue TO list OF elements i FROM 1 TO n WHERE indegree AT i EQUALS 0  
        
        IF LENGTH OF queue IS NOT EQUAL TO 1  
            RETURN False  
        
        SET index TO 0  
        WHILE queue IS NOT EMPTY  
            IF LENGTH OF queue IS NOT EQUAL TO 1  
                RETURN False  
            
            REMOVE AND SET node TO FIRST ELEMENT OF queue  
            IF node IS NOT EQUAL TO nums AT index  
                RETURN False  
            INCREMENT index BY 1  
            
            FOR each neighbor IN graph AT node  
                DECREMENT indegree AT neighbor BY 1  
                IF indegree AT neighbor EQUALS 0  
                    APPEND neighbor TO queue  
        
        RETURN index IS EQUAL TO n  
    END FUNCTION  
END CLASS