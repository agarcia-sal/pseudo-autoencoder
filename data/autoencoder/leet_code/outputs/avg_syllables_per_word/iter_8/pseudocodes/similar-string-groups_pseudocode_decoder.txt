CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET diff TO list of indices where characters at position differ between s1 and s2  
            RETURN TRUE if LENGTH OF diff EQUALS 0 OR (LENGTH OF diff EQUALS 2 AND characters at diff positions in s1 and s2 are swapped)  
        END FUNCTION  
  
        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN graph at node  
                IF neighbor NOT IN visited THEN  
                    CALL dfs(neighbor, visited)  
        END FUNCTION  
  
        SET n TO LENGTH OF strs  
        INITIALIZE graph AS a map from each integer 0 TO n MINUS 1 TO an empty list  
  
        FOR i FROM 0 TO n MINUS 1 DO  
            FOR j FROM i PLUS 1 TO n MINUS 1 DO  
                IF are_similar(strs AT i, strs AT j) THEN  
                    APPEND j TO graph AT i  
                    APPEND i TO graph AT j  
  
        INITIALIZE visited AS an empty set  
        SET num_groups TO 0  
  
        FOR i FROM 0 TO n MINUS 1 DO  
            IF i NOT IN visited THEN  
                CALL dfs(i, visited)  
                INCREMENT num_groups BY 1  
  
        RETURN num_groups  
    END FUNCTION  
END CLASS