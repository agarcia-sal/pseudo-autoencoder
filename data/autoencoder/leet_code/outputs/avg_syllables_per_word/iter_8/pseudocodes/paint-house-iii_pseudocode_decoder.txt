CLASS Solution  
    FUNCTION minCost(houses, cost, m, n, target)  
        FUNCTION dp(i, prev_color, groups) WITH CACHING  
            IF i EQUALS m THEN  
                RETURN 0 IF groups EQUALS target ELSE infinity  
            END IF  
            
            IF houses AT i IS NOT 0 THEN  
                SET new_groups TO groups PLUS 1 IF houses AT i IS NOT EQUAL TO prev_color ELSE groups  
                RETURN dp WITH PARAMETERS (i PLUS 1, houses AT i, new_groups)  
            END IF  
            
            SET min_cost TO infinity  
            FOR color FROM 1 TO n DO  
                SET new_groups TO groups PLUS 1 IF color IS NOT EQUAL TO prev_color ELSE groups  
                SET current_cost TO cost AT i AT (color MINUS 1) PLUS dp WITH PARAMETERS (i PLUS 1, color, new_groups)  
                SET min_cost TO MINIMUM OF min_cost AND current_cost  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        SET result TO dp WITH PARAMETERS (0, 0, 0)  
        RETURN result IF result IS NOT infinity ELSE -1  
    END FUNCTION  
END CLASS