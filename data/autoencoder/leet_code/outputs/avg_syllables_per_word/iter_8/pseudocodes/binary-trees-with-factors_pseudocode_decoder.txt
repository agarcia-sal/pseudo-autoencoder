CLASS Solution  
    FUNCTION numFactoredBinaryTrees(arr)  
        SET MOD TO 10 to the power of 9 PLUS 7  
        SORT arr IN ascending order  
        SET dp TO a dictionary mapping each number in arr TO 1  
        FOR each index i and number num IN arr  
            FOR each index j FROM 0 TO i MINUS 1  
                IF num MODULO arr[j] EQUALS 0 THEN  
                    SET right_child TO num DIVIDED BY arr[j]  
                    IF right_child EXISTS IN dp THEN  
                        SET dp[num] TO (dp[num] PLUS dp[arr[j]] MULTIPLIED BY dp[right_child]) MODULO MOD  
        SET total_trees TO SUM OF ALL VALUES IN dp MODULO MOD  
        RETURN total_trees  
    END FUNCTION  
END CLASS