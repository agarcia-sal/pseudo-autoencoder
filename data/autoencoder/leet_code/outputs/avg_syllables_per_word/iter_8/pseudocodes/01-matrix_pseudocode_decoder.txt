CLASS Solution  
    FUNCTION updateMatrix(mat)  
        IF mat IS EMPTY OR mat AT ZERO INDEX IS EMPTY  
            RETURN mat  
        
        SET rows TO LENGTH OF mat  
        SET cols TO LENGTH OF mat AT ZERO INDEX  
        SET dist TO A 2D LIST WITH rows ROWS AND cols COLUMNS FILLED WITH infinity  
        SET queue TO AN EMPTY DOUBLE ENDED QUEUE  
        
        FOR r FROM ZERO TO rows MINUS ONE  
            FOR c FROM ZERO TO cols MINUS ONE  
                IF mat AT r AND c EQUALS ZERO  
                    SET dist AT r AND c TO ZERO  
                    APPEND (r, c) TO queue  
        
        SET directions TO LIST OF ( -1, 0 ), ( 1, 0 ), ( 0, -1 ), ( 0, 1 )  
        
        WHILE queue IS NOT EMPTY  
            REMOVE FIRST ELEMENT FROM queue AND UNPACK TO r, c  
            FOR EACH dr, dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr IS GREATER THAN OR EQUAL TO ZERO AND nr IS LESS THAN rows AND nc IS GREATER THAN OR EQUAL TO ZERO AND nc IS LESS THAN cols AND dist AT nr AND nc IS GREATER THAN dist AT r AND c PLUS ONE  
                    SET dist AT nr AND nc TO dist AT r AND c PLUS ONE  
                    APPEND (nr, nc) TO queue  
        
        RETURN dist  
    END FUNCTION  
END CLASS