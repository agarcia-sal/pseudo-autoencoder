CLASS Solution  
    FUNCTION subarraysWithKDistinct(nums, k)  
        FUNCTION atMostKDistinct(t)  
            SET count TO new empty map with default integer 0  
            SET left TO 0  
            SET result TO 0  
            FOR right FROM 0 TO length of nums MINUS 1  
                INCREMENT count for nums at index right BY 1  
                WHILE size of count GREATER THAN t  
                    DECREMENT count for nums at index left BY 1  
                    IF count for nums at index left EQUALS 0  
                        REMOVE nums at index left FROM count  
                    INCREMENT left BY 1  
                INCREMENT result BY right MINUS left PLUS 1  
            RETURN result  
        END FUNCTION  

        RETURN atMostKDistinct(k) MINUS atMostKDistinct(k MINUS 1)  
    END FUNCTION  
END CLASS