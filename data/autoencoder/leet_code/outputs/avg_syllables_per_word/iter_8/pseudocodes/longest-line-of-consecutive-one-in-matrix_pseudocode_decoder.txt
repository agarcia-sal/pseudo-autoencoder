CLASS Solution  
    FUNCTION longestLine(mat)  
        IF mat IS EMPTY OR mat[0] IS EMPTY THEN  
            RETURN 0  
        
        SET m TO LENGTH OF mat  
        SET n TO LENGTH OF mat AT 0  
        SET directions TO LIST OF (0, 1), (1, 0), (1, 1), (1, -1)  
        SET max_length TO 0  
        
        FUNCTION check(x, y, dx, dy)  
            SET length TO 0  
            WHILE x IS GREATER THAN OR EQUAL TO 0 AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO 0 AND y IS LESS THAN n AND mat AT x AT y IS EQUAL TO 1  
                INCREMENT length BY 1  
                INCREMENT x BY dx  
                INCREMENT y BY dy  
            END WHILE  
            RETURN length  
        END FUNCTION  
        
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF mat AT i AT j IS EQUAL TO 1 THEN  
                    FOR EACH dx, dy IN directions  
                        IF i MINUS dx IS LESS THAN 0 OR j MINUS dy IS LESS THAN 0 OR j MINUS dy IS GREATER THAN OR EQUAL TO n OR mat AT (i MINUS dx) AT (j MINUS dy) IS EQUAL TO 0 THEN  
                            SET current_length TO check(i, j, dx, dy)  
                            IF current_length IS GREATER THAN max_length THEN  
                                SET max_length TO current_length  
                            END IF  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END FOR  
        
        RETURN max_length  
    END FUNCTION  
END CLASS