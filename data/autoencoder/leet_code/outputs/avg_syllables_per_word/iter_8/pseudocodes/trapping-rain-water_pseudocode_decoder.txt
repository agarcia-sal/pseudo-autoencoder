CLASS Solution  
    FUNCTION trap(height)  
        IF height IS empty  
            RETURN 0  
        END IF  

        SET n TO LENGTH OF height  
        INITIALIZE left_max AS list OF size n WITH zeros  
        INITIALIZE right_max AS list OF size n WITH zeros  

        SET left_max AT index 0 TO height AT index 0  
        FOR i FROM 1 TO n MINUS 1  
            SET left_max AT index i TO MAXIMUM OF left_max AT index i MINUS 1 AND height AT index i  
        END FOR  

        SET right_max AT index n MINUS 1 TO height AT index n MINUS 1  
        FOR i FROM n MINUS 2 DOWN TO 0  
            SET right_max AT index i TO MAXIMUM OF right_max AT index i PLUS 1 AND height AT index i  
        END FOR  

        SET trapped_water TO 0  
        FOR i FROM 0 TO n MINUS 1  
            INCREMENT trapped_water BY MINIMUM OF left_max AT index i AND right_max AT index i MINUS height AT index i  
        END FOR  

        RETURN trapped_water  
    END FUNCTION  
END CLASS