CLASS Solution  
    FUNCTION solve(board)  
        IF board is empty OR first row of board is empty  
            RETURN  
        
        SET m TO length of board  
        SET n TO length of first row of board  
        
        FUNCTION dfs(x, y)  
            IF x LESS THAN 0 OR x GREATER THAN OR EQUAL TO m OR y LESS THAN 0 OR y GREATER THAN OR EQUAL TO n OR value at board position (x, y) IS NOT 'O'  
                RETURN  
            SET value at board position (x, y) TO 'S'  
            CALL dfs with (x PLUS 1, y)  
            CALL dfs with (x MINUS 1, y)  
            CALL dfs with (x, y PLUS 1)  
            CALL dfs with (x, y MINUS 1)  
        END FUNCTION  
        
        FOR each i FROM 0 TO m MINUS 1  
            CALL dfs with (i, 0)  
            CALL dfs with (i, n MINUS 1)  
        
        FOR each j FROM 0 TO n MINUS 1  
            CALL dfs with (0, j)  
            CALL dfs with (m MINUS 1, j)  
        
        FOR each i FROM 0 TO m MINUS 1  
            FOR each j FROM 0 TO n MINUS 1  
                IF value at board position (i, j) IS 'O'  
                    SET value at board position (i, j) TO 'X'  
        
        FOR each i FROM 0 TO m MINUS 1  
            FOR each j FROM 0 TO n MINUS 1  
                IF value at board position (i, j) IS 'S'  
                    SET value at board position (i, j) TO 'O'  
    END FUNCTION  
END CLASS