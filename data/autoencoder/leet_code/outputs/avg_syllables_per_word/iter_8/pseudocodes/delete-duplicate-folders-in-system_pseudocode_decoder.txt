CLASS TrieNode  
    FUNCTION __init__()  
        SET children TO a new dictionary with default value as TrieNode  
        SET deleted TO False  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION deleteDuplicateFolder(paths)  
        SET ans TO an empty list  
        SET root TO a new TrieNode  
        SET subtreeToNodes TO a new dictionary with default value as list  

        FOR each path IN paths sorted in ascending order  
            SET node TO root  
            FOR each s IN path  
                SET node TO the child node of node corresponding to s in children dictionary  
        
        FUNCTION buildSubtreeToRoots(node)  
            SET subtree TO an opening parenthesis concatenated with  
                           the concatenation of each s concatenated with buildSubtreeToRoots called on node.children[s] for each s in node.children keys  
                           concatenated with a closing parenthesis  
            IF subtree is not equal to '()' THEN  
                APPEND node TO subtreeToNodes[subtree]  
            RETURN subtree  
        END FUNCTION  

        CALL buildSubtreeToRoots with root  

        FOR each nodes IN subtreeToNodes values  
            IF the length of nodes is greater than 1 THEN  
                FOR each node IN nodes  
                    SET node.deleted TO True  

        FUNCTION constructPath(node, path)  
            FOR each s, child IN node.children items  
                IF child.deleted is False THEN  
                    CALL constructPath with child and path appended with s  
            IF path is not empty THEN  
                APPEND path TO ans  
        END FUNCTION  

        CALL constructPath with root and an empty list  

        RETURN ans  
    END FUNCTION  
END CLASS