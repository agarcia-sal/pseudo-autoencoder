CLASS Solution  
    FUNCTION candy(ratings)  
        SET n TO LENGTH OF ratings  
        SET candies TO list of size n with all elements as 1  
        
        FOR i FROM 1 TO n MINUS 1  
            IF ratings at i GREATER THAN ratings at i MINUS 1  
                SET candies at i TO candies at i MINUS 1 PLUS 1  
        
        FOR i FROM n MINUS 2 DOWN TO 0  
            IF ratings at i GREATER THAN ratings at i PLUS 1  
                SET candies at i TO the greater of candies at i AND candies at i PLUS 1 PLUS 1  
        
        RETURN the sum of all elements in candies  
    END FUNCTION  
END CLASS