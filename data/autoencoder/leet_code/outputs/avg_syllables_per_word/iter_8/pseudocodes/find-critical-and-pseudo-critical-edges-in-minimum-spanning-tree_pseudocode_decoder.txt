CLASS UnionFind  
    FUNCTION __init__(self, n)  
        SET self.parent TO list of integers from 0 to n minus 1  
        SET self.rank TO list of 1 repeated n times  
    END FUNCTION  

    FUNCTION find(self, u)  
        IF self.parent at position u is not equal to u THEN  
            SET self.parent at position u TO self.find(self.parent at position u)  
        END IF  
        RETURN self.parent at position u  
    END FUNCTION  

    FUNCTION union(self, u, v)  
        SET rootU TO self.find(u)  
        SET rootV TO self.find(v)  

        IF rootU is not equal to rootV THEN  
            IF self.rank at position rootU is greater than self.rank at position rootV THEN  
                SET self.parent at position rootV TO rootU  
            ELSE IF self.rank at position rootU is less than self.rank at position rootV THEN  
                SET self.parent at position rootU TO rootV  
            ELSE  
                SET self.parent at position rootV TO rootU  
                INCREMENT self.rank at position rootU BY 1  
            END IF  
            RETURN True  
        END IF  
        RETURN False  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findCriticalAndPseudoCriticalEdges(self, n, edges)  
        FOR each index i and edge in edges  
            APPEND i TO edge  
        END FOR  

        SORT edges based on the third element (weight) in ascending order  

        FUNCTION mst(exclude = None, include = None)  
            SET uf TO new UnionFind with parameter n  
            SET weight TO 0  

            IF include is not None THEN  
                CALL uf.union with parameters include at positions 0 and 1  
                INCREMENT weight BY include at position 2  
            END IF  

            FOR each u, v, w, idx in edges  
                IF idx is equal to exclude THEN  
                    CONTINUE to next iteration  
                END IF  
                IF uf.union(u, v) RETURNS True THEN  
                    INCREMENT weight BY w  
                END IF  
            END FOR  

            SET root TO uf.find(0)  
            FOR i FROM 0 TO n minus 1  
                IF uf.find(i) is not equal to root THEN  
                    RETURN positive infinity  
                END IF  
            END FOR  

            RETURN weight  
        END FUNCTION  

        SET mst_weight TO result of mst() with no parameters  

        SET critical TO empty list  
        SET pseudo_critical TO empty list  

        FOR each u, v, w, idx in edges  
            IF mst(exclude = idx) is greater than mst_weight THEN  
                APPEND idx TO critical  
            ELSE IF mst(include = tuple with u, v, w) is equal to mst_weight THEN  
                APPEND idx TO pseudo_critical  
            END IF  
        END FOR  

        RETURN list containing critical and pseudo_critical  
    END FUNCTION  
END CLASS