CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO EMPTY MAPPING  
        FOR each element x and position i IN arr with enumeration  
            SET index AT key x TO i  
        SET dp TO EMPTY MAPPING  
        SET max_length TO 0  
        
        FOR each position k FROM 0 TO LENGTH OF arr MINUS 1  
            FOR each position j FROM 0 TO k MINUS 1  
                SET i TO value FROM index AT key (arr AT position k MINUS arr AT position j) OR -1 IF NOT FOUND  
                IF i IS GREATER THAN OR EQUAL TO 0 AND LESS THAN j THEN  
                    SET dp AT key (j, k) TO dp AT key (i, j) OR 2 IF NOT FOUND PLUS 1  
                    SET max_length TO GREATER VALUE BETWEEN max_length AND dp AT key (j, k)  
                END IF  
            END FOR  
        END FOR  
        
        IF max_length IS GREATER THAN OR EQUAL TO 3 THEN  
            RETURN max_length  
        ELSE  
            RETURN 0  
        END IF  
    END FUNCTION  
END CLASS