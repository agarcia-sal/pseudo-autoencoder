CLASS Solution  
    FUNCTION numberOfPatterns(m, n)  
        SET jumps TO dictionary mapping pairs of dots TO intermediate dot required between them  
        
        FUNCTION countPatternsFromDot(current, visited, length)  
            IF length EQUALS n THEN  
                RETURN 1  
            SET count TO 1 IF length GREATER THAN OR EQUAL TO m OTHERWISE 0  
            FOR each next_dot FROM 1 TO 9  
                IF visited[next_dot] IS FALSE THEN  
                    SET jump TO jumps VALUE FOR KEY (current, next_dot) OR NONE IF NOT FOUND  
                    IF jump IS NONE OR visited[jump] IS TRUE THEN  
                        SET visited[next_dot] TO TRUE  
                        INCREMENT count BY countPatternsFromDot(next_dot, visited, length INCREMENTED BY 1)  
                        SET visited[next_dot] TO FALSE  
            RETURN count  
        END FUNCTION  
        
        SET visited TO LIST OF 10 FALSE VALUES  
        SET result TO 0  
        FOR i FROM 1 TO 9  
            SET visited[i] TO TRUE  
            INCREMENT result BY countPatternsFromDot(i, visited, 1)  
            SET visited[i] TO FALSE  
        RETURN result  
    END FUNCTION  
END CLASS