CLASS Solution  
    FUNCTION pacificAtlantic(heights)  
        FUNCTION bfs(q, vis)  
            WHILE q is not empty  
                FOR each element IN copy of q length  
                    SET i, j TO remove leftmost element from q  
                    FOR each pair a, b IN [[0, negative one], [0, one], [one, 0], [negative one, 0]]  
                        SET x TO i plus a  
                        SET y TO j plus b  
                        IF x greater than or equal to zero AND x less than m AND y greater than or equal to zero AND y less than n AND (x, y) not in vis AND heights at position x, y greater than or equal to heights at position i, j  
                            ADD (x, y) TO vis  
                            APPEND (x, y) TO q  
        SET m TO length of heights  
        SET n TO length of first element in heights  
        SET vis1 TO empty set  
        SET vis2 TO empty set  
        SET q1 TO empty deque  
        SET q2 TO empty deque  
        FOR i FROM zero TO m minus one  
            FOR j FROM zero TO n minus one  
                IF i equals zero OR j equals zero  
                    ADD (i, j) TO vis1  
                    APPEND (i, j) TO q1  
                IF i equals m minus one OR j equals n minus one  
                    ADD (i, j) TO vis2  
                    APPEND (i, j) TO q2  
        CALL bfs with q1 and vis1  
        CALL bfs with q2 and vis2  
        RETURN list of (i, j) FOR i FROM zero TO m minus one FOR j FROM zero TO n minus one WHERE (i, j) in vis1 AND (i, j) in vis2  
    END FUNCTION  
END CLASS