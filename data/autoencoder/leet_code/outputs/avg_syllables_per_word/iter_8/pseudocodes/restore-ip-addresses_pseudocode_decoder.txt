CLASS Solution  
    FUNCTION restoreIpAddresses(s)  
        FUNCTION is_valid(segment)  
            IF LENGTH OF segment EQUALS 1 OR (FIRST CHARACTER OF segment NOT EQUAL TO '0' AND segment CONVERTED TO INTEGER LESS THAN OR EQUAL TO 255)  
                RETURN True  
            ELSE  
                RETURN False  
        END FUNCTION  
        
        FUNCTION backtrack(start, path)  
            IF LENGTH OF path EQUALS 4  
                IF start EQUALS LENGTH OF s  
                    APPEND CONCATENATION OF elements in path SEPARATED BY '.' TO result  
                RETURN  
            END IF  
            
            FOR length FROM 1 TO 3 INCLUSIVE  
                IF start PLUS length LESS THAN OR EQUAL TO LENGTH OF s  
                    SET segment TO SUBSTRING OF s FROM start TO start PLUS length  
                    IF is_valid(segment)  
                        CALL backtrack WITH (start PLUS length, path WITH segment APPENDED)  
        END FUNCTION  
        
        SET result TO empty list  
        CALL backtrack WITH (0, empty list)  
        RETURN result  
    END FUNCTION  
END CLASS