CLASS Solution  
    FUNCTION longestPath(parent, s)  
        CREATE tree AS mapping from node to list of children  
        FOR index, p IN enumeration of parent  
            IF p is NOT EQUAL TO -1  
                APPEND index TO tree at key p  
        
        SET self.result TO 1  
        
        FUNCTION dfs(node)  
            SET max1 TO 0  
            SET max2 TO 0  
            
            FOR each child IN tree at key node  
                SET child_length TO dfs(child)  
                
                IF character at s[child] IS NOT EQUAL TO character at s[node]  
                    IF child_length IS GREATER THAN max1  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length IS GREATER THAN max2  
                        SET max2 TO child_length  
            
            SET self.result TO maximum of self.result AND (max1 PLUS max2 PLUS 1)  
            
            RETURN max1 PLUS 1  
        
        CALL dfs with argument 0  
        
        RETURN self.result  
    END FUNCTION  
END CLASS