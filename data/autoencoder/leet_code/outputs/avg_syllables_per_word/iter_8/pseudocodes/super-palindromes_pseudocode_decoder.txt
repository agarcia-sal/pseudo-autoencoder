CLASS Solution
    FUNCTION superpalindromesInRange(left, right)
        FUNCTION is_palindrome(num)
            RETURN string representation of num IS EQUAL TO reversed string representation of num
        END FUNCTION

        FUNCTION generate_palindromes(limit)
            SET palindromes TO empty list
            FOR i FROM 1 TO 99999
                SET s TO string representation of i
                APPEND integer formed by concatenating s AND reversed substring of s excluding last character TO palindromes
                APPEND integer formed by concatenating s AND reversed s TO palindromes
            END FOR
            RETURN list of numbers FROM palindromes WHERE number IS LESS THAN OR EQUAL TO limit
        END FUNCTION

        SET left TO integer value of left
        SET right TO integer value of right
        SET limit TO integer value of square root of right PLUS 1
        SET palindromes TO generate_palindromes(limit)

        SET count TO 0
        FOR each p IN palindromes
            SET square TO p MULTIPLIED BY p
            IF left IS LESS THAN OR EQUAL TO square AND square IS LESS THAN OR EQUAL TO right AND is_palindrome(square)
                INCREMENT count BY 1
            END IF
        END FOR

        RETURN count
    END FUNCTION
END CLASS