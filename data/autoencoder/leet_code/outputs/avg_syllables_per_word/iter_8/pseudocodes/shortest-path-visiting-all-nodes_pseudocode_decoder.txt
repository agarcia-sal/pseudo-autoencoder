CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph IS empty  
            RETURN 0  
        
        SET n TO LENGTH OF graph  
        SET queue TO new deque containing pairs of (node, bitmask with only node bit set) for each node from 0 TO n minus 1  
        SET visited TO new set containing pairs of (node, bitmask with only node bit set) for each node from 0 TO n minus 1  
        
        SET steps TO 0  
        SET all_nodes_visited TO bitmask with n bits set to 1  
        
        WHILE queue IS not empty  
            SET count TO LENGTH OF queue  
            FOR iteration FROM 0 TO count minus 1  
                REMOVE first element from queue INTO current_node, visited_nodes  
                
                IF visited_nodes EQUALS all_nodes_visited  
                    RETURN steps  
                
                FOR each neighbor IN graph AT current_node  
                    SET next_visited_nodes TO visited_nodes with neighbor bit set  
                    SET next_state TO pair (neighbor, next_visited_nodes)  
                    
                    IF next_state NOT IN visited  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
            
            INCREMENT steps BY 1  
        
        RETURN negative 1  
    END FUNCTION  
END CLASS