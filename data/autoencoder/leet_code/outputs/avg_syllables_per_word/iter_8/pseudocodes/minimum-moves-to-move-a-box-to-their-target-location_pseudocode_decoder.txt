CLASS Solution  
    FUNCTION minPushBox(grid)  
        SET directions TO list of tuples (-1, 0), (1, 0), (0, -1), (0, 1)  
        
        FOR i FROM 0 TO LENGTH OF grid MINUS 1  
            FOR j FROM 0 TO LENGTH OF grid AT 0 MINUS 1  
                IF grid AT i AT j EQUALS 'S'  
                    SET player_start TO tuple (i, j)  
                ELSE IF grid AT i AT j EQUALS 'B'  
                    SET box_start TO tuple (i, j)  
                ELSE IF grid AT i AT j EQUALS 'T'  
                    SET target TO tuple (i, j)  
        
        SET queue TO deque CONTAINING tuple (player_start, box_start, 0)  
        SET visited TO empty set  
        ADD tuple (player_start, box_start) TO visited  
        
        WHILE queue IS NOT empty  
            REMOVE FIRST element FROM queue AND SET TO (player_pos, box_pos, push_count)  
            
            IF box_pos EQUALS target  
                RETURN push_count  
            
            FOR EACH (dx, dy) IN directions  
                SET new_player_pos TO tuple (player_pos AT 0 PLUS dx, player_pos AT 1 PLUS dy)  
                
                IF self.is_valid_position(new_player_pos, grid)  
                    IF new_player_pos EQUALS box_pos  
                        SET new_box_pos TO tuple (box_pos AT 0 PLUS dx, box_pos AT 1 PLUS dy)  
                        
                        IF self.is_valid_position(new_box_pos, grid) AND tuple (new_player_pos, new_box_pos) NOT IN visited  
                            ADD tuple (new_player_pos, new_box_pos) TO visited  
                            APPEND tuple (new_player_pos, new_box_pos, push_count PLUS 1) TO queue  
                    ELSE  
                        IF tuple (new_player_pos, box_pos) NOT IN visited  
                            ADD tuple (new_player_pos, box_pos) TO visited  
                            APPEND tuple (new_player_pos, box_pos, push_count) TO queue  
        
        RETURN -1  
    END FUNCTION  
    
    FUNCTION is_valid_position(position, grid)  
        SET x TO position AT 0  
        SET y TO position AT 1  
        RETURN x GREATER THAN OR EQUAL TO 0 AND x LESS THAN LENGTH OF grid AND y GREATER THAN OR EQUAL TO 0 AND y LESS THAN LENGTH OF grid AT 0 AND grid AT x AT y NOT EQUALS '#'  
    END FUNCTION  
END CLASS