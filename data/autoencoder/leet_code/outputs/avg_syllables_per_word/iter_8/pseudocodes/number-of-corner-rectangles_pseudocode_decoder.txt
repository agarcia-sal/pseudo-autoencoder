CLASS Solution  
    FUNCTION countCornerRectangles(grid)  
        IF grid IS empty OR grid AT index 0 IS empty THEN  
            RETURN 0  
        END IF  
        
        SET m TO LENGTH OF grid  
        SET n TO LENGTH OF grid AT index 0  
        SET count TO 0  
        
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM i PLUS 1 TO m MINUS 1  
                SET cols_with_ones TO 0  
                FOR k FROM 0 TO n MINUS 1  
                    IF grid AT i AND k EQUALS 1 AND grid AT j AND k EQUALS 1 THEN  
                        INCREMENT cols_with_ones BY 1  
                    END IF  
                END FOR  
                
                IF cols_with_ones IS GREATER THAN OR EQUAL TO 2 THEN  
                    INCREMENT count BY cols_with_ones MULTIPLIED BY (cols_with_ones MINUS 1) DIVIDED BY 2  
                END IF  
            END FOR  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS