CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET length TO LENGTH OF n  
        IF length EQUALS 1  
            RETURN STRING OF (INTEGER OF n MINUS 1)  
        END IF  
        
        SET candidates TO EMPTY SET  
        
        ADD TEN RAISED TO length PLUS 1 TO candidates  
        ADD TEN RAISED TO (length MINUS 1) MINUS 1 TO candidates  
        
        SET prefix TO INTEGER OF SUBSTRING OF n FROM START TO (length PLUS 1) DIVIDED BY 2  
        FOR i FROM -1 TO 1 INCLUSIVE  
            SET new_prefix TO STRING OF (prefix PLUS i)  
            IF length MODULO 2 EQUALS 0  
                SET candidate TO CONCATENATION OF new_prefix AND REVERSE OF new_prefix  
            ELSE  
                SET candidate TO CONCATENATION OF new_prefix AND REVERSE OF SUBSTRING OF new_prefix FROM START TO SECOND LAST CHARACTER  
            END IF  
            ADD INTEGER OF candidate TO candidates  
        END FOR  
        
        SET original_number TO INTEGER OF n  
        REMOVE original_number FROM candidates IF PRESENT  
        
        SET closest TO ELEMENT IN candidates WITH MINIMUM VALUE OF (ABSOLUTE VALUE OF ELEMENT MINUS original_number, ELEMENT)  
        
        RETURN STRING OF closest  
    END FUNCTION  
END CLASS