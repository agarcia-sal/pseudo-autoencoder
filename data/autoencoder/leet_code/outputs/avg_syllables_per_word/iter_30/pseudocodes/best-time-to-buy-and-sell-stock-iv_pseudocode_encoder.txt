CLASS Solution  
    FUNCTION maxProfit(k, prices)  
        IF the LENGTH OF prices EQUALS zero OR k EQUALS zero  
            RETURN zero  
        END IF  

        SET n TO the LENGTH OF prices  

        IF k GREATER THAN OR EQUAL TO n DIVIDED BY two  
            SET profit TO zero  
            FOR index FROM one TO n MINUS one  
                IF the element at position index OF prices GREATER THAN the element at position index MINUS one OF prices  
                    INCREMENT profit BY the element at position index OF prices MINUS the element at position index MINUS one OF prices  
                END IF  
            END FOR  
            RETURN profit  
        END IF  

        INITIALIZE hold AS a list of length k PLUS one FILLED WITH negative infinity  
        INITIALIZE release AS a list of length k PLUS one FILLED WITH zero  

        FOR each price IN prices  
            FOR i FROM one TO k  
                SET hold at position i TO the maximum of hold at position i AND release at position i MINUS one MINUS price  
                SET release at position i TO the maximum of release at position i AND hold at position i PLUS price  
            END FOR  
        END FOR  

        RETURN release at position k  
    END FUNCTION  
END CLASS