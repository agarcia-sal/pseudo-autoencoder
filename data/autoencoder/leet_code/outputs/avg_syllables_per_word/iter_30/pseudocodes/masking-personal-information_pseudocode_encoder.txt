CLASS Solution  
    FUNCTION maskPII WITH PARAMETER s  
        IF the character at position one of s EQUALS the character at position one of the string formed by the character at position one of s  
            SET local TO substring from position zero TO position of the character before the character at position of the character at position one of s OF s  
            SET domain TO substring from position after the position of the character at position one of s TO the end OF s  
            SET masked_local TO concatenate the character at position zero OF local PLUS five repetitions of the word asterisk PLUS the character at position at the last position OF local  
            RETURN concatenate the lowercase conversion of masked_local PLUS the character at position zero OF the string formed by the character at position one of s PLUS the lowercase conversion of domain  
        ELSE  
            SET digits TO the concatenation of all characters of s for which the condition of being a digit character holds  
            SET local_number TO the concatenation of the string formed by three asterisks PLUS the character hyphen PLUS three asterisks PLUS the character hyphen PLUS the last four characters of digits  
            IF the length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the length of digits MINUS ten  
                SET country_code TO concatenate the character plus PLUS the repetition of the word asterisk country_code_length times PLUS the character hyphen  
                RETURN concatenate country_code PLUS local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS