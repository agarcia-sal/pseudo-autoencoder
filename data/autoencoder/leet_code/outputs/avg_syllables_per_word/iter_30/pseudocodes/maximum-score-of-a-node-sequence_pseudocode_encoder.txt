CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        SET graph TO an empty mapping with default value as empty list  
        FOR each pair of elements u and v IN edges  
            APPEND a pair consisting of the element at position v OF scores and v TO the list at key u OF graph  
            APPEND a pair consisting of the element at position u OF scores and u TO the list at key v OF graph  
        END FOR  
        FOR each element node IN graph  
            SET the list at key node OF graph TO the three largest elements of the list at key node OF graph based on the first element of each pair  
        END FOR  
        SET max_score TO negative one  
        FOR each pair of elements u and v IN edges  
            FOR each pair of elements score1 and x IN the list at key u OF graph  
                FOR each pair of elements score2 and y IN the list at key v OF graph  
                    IF the size of the set consisting of elements x, y, u, and v EQUALS four  
                        SET max_score TO the greater value between max_score and the sum of score1, score2, the element at position u OF scores, and the element at position v OF scores  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        RETURN max_score  
    END FUNCTION  
END CLASS