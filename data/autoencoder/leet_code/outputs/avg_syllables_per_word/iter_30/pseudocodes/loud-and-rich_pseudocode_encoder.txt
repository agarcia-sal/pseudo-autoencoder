CLASS Solution  
    FUNCTION loudAndRich WITH PARAMETERS richer AND quiet  
        ASSIGN reference TO an empty mapping from integers to list of integers NAMED graph  
        FOR each pair a and b IN richer  
            APPEND a TO list at key b IN graph  
        END FOR  
        SET n TO the LENGTH OF quiet  
        SET answer TO a list of length n FILLED WITH negative one  
        FUNCTION dfs WITH PARAMETER person  
            IF answer at position person EQUALS negative one  
                SET answer at position person TO person  
                FOR each neighbor IN graph at key person  
                    SET candidate TO the RESULT OF dfs WITH neighbor  
                    IF quiet at position candidate LESS THAN quiet at position answer at person  
                        SET answer at position person TO candidate  
                    END IF  
                END FOR  
            END IF  
            RETURN answer at position person  
        END FUNCTION  
        FOR i FROM zero TO n MINUS one  
            CALL dfs WITH i  
        END FOR  
        RETURN answer  
    END FUNCTION  
END CLASS