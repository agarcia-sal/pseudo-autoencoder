CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the reverse of s  
        END FUNCTION  
        
        SET word_dict TO an empty mapping from word to index  
        FOR each index and word IN words with their positions  
            SET word_dict at word TO index  
        END FOR  
        
        SET result TO an empty list  
        
        FOR each index and word IN words with their positions  
            IF word EQUALS empty string  
                CONTINUE  
            END IF  
            
            IF empty string EXISTS IN word_dict AND is_palindrome(word)  
                APPEND a list with index and word_dict at empty string TO result  
                APPEND a list with word_dict at empty string and index TO result  
            END IF  
            
            SET reversed_word TO the reverse of word  
            IF reversed_word EXISTS IN word_dict AND word_dict at reversed_word NOT EQUALS index  
                APPEND a list with index and word_dict at reversed_word TO result  
            END IF  
            
            FOR position FROM one TO the length of word MINUS one  
                SET prefix TO substring from position zero TO position of word  
                SET suffix TO substring from position TO the end of word  
                SET reversed_prefix TO the reverse of prefix  
                SET reversed_suffix TO the reverse of suffix  
                
                IF is_palindrome(suffix) AND reversed_prefix EXISTS IN word_dict  
                    APPEND a list with index and word_dict at reversed_prefix TO result  
                END IF  
                
                IF is_palindrome(prefix) AND reversed_suffix EXISTS IN word_dict  
                    APPEND a list with word_dict at reversed_suffix and index TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS