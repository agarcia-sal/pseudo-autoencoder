CLASS Solution  
    FUNCTION maximumRequests WITH PARAMETERS n AND requests  
        SET max_requests TO zero  
        SET num_requests TO the LENGTH OF requests  
        FOR mask FROM zero TO the VALUE OF two RAISED TO THE POWER OF num_requests MINUS one  
            SET balance TO a LIST OF zero REPEATED n TIMES  
            SET count TO zero  
            FOR i FROM zero TO num_requests MINUS one  
                IF bitwise AND OF mask AND the VALUE OF two RAISED TO THE POWER OF i DOES NOT EQUAL zero  
                    SET from_building TO element at position i AT position zero OF requests  
                    SET to_building TO element at position i AT position one OF requests  
                    DECREMENT element at position from_building OF balance BY one  
                    INCREMENT element at position to_building OF balance BY one  
                    INCREMENT count BY one  
                END IF  
            END FOR  
            IF all elements OF balance EQUAL zero  
                IF max_requests LESS THAN count  
                    SET max_requests TO count  
                END IF  
            END IF  
        END FOR  
        RETURN max_requests  
    END FUNCTION  
END CLASS