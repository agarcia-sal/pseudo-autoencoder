CLASS Solution  
    FUNCTION gridIllumination(n, lamps, queries)  
        ASSIGN reference TO empty dictionary with default zero for row_count  
        ASSIGN reference TO empty dictionary with default zero for col_count  
        ASSIGN reference TO empty dictionary with default zero for diag_count  
        ASSIGN reference TO empty dictionary with default zero for anti_diag_count  
        ASSIGN reference TO empty set for lamp_positions  
        
        FOR each pair of values r and c IN lamps  
            IF pair of values r and c NOT IN lamp_positions  
                APPEND pair of values r and c TO lamp_positions  
                INCREMENT row_count at key r BY one  
                INCREMENT col_count at key c BY one  
                INCREMENT diag_count at key of r MINUS c BY one  
                INCREMENT anti_diag_count at key of r PLUS c BY one  
            END IF  
        END FOR  
        
        ASSIGN reference TO list of pairs of directions including each combination of negative one, zero, and one for row and column plus the zero zero pair for directions  
        
        ASSIGN reference TO empty list for result  
        
        FOR each pair of values r and c IN queries  
            IF value at row_count with key r GREATER THAN zero OR value at col_count with key c GREATER THAN zero OR value at diag_count with key of r MINUS c GREATER THAN zero OR value at anti_diag_count with key of r PLUS c GREATER THAN zero  
                APPEND one TO result  
            ELSE  
                APPEND zero TO result  
            END IF  
            
            FOR each pair of values dr and dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF pair of values nr and nc IN lamp_positions  
                    REMOVE pair of values nr and nc FROM lamp_positions  
                    DECREMENT row_count at key nr BY one  
                    DECREMENT col_count at key nc BY one  
                    DECREMENT diag_count at key of nr MINUS nc BY one  
                    DECREMENT anti_diag_count at key of nr PLUS nc BY one  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS