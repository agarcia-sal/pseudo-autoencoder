CLASS Solution  
    FUNCTION reachableNodes(edges, maxMoves, n)  
        SET graph TO empty mapping from integer TO empty list FOR each integer FROM zero TO n MINUS one  
        FOR each u, v, cnt IN edges  
            APPEND a pair of neighbor v and count cnt TO list at key u IN graph  
            APPEND a pair of neighbor u and count cnt TO list at key v IN graph  
        END FOR  
        
        SET distances TO list of infinite values WITH length n  
        SET element at position zero OF distances TO zero  
        SET priority_queue TO list containing a pair of zero and zero  
        
        WHILE priority_queue is not empty  
            SET dist, node TO the result of removing the pair with smallest first element FROM priority_queue  
            IF dist GREATER THAN element at position node OF distances  
                CONTINUE  
            END IF  
            FOR each neighbor, cnt IN list at key node IN graph  
                SET new_dist TO dist PLUS cnt PLUS one  
                IF new_dist LESS THAN element at position neighbor OF distances  
                    SET element at position neighbor OF distances TO new_dist  
                    INSERT pair of new_dist and neighbor INTO priority_queue maintaining order  
                END IF  
            END FOR  
        END WHILE  
        
        SET reachable_nodes TO zero  
        
        FOR each d IN distances  
            IF d LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  
        
        SET used_edges TO empty mapping  
        FOR each u, v, cnt IN edges  
            SET moves_u TO zero IF maxMoves MINUS element at position u OF distances LESS THAN zero ELSE maxMoves MINUS element at position u OF distances  
            SET moves_v TO zero IF maxMoves MINUS element at position v OF distances LESS THAN zero ELSE maxMoves MINUS element at position v OF distances  
            SET reachable_new_nodes TO minimum of cnt AND moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            ASSIGN reachable_new_nodes TO key of pair u and v IN used_edges  
        END FOR  
        
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS