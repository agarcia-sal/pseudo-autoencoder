CLASS Solution  
    FUNCTION frequencySort WITH PARAMETER s  
        FUNCTION key_function WITH PARAMETER x  
            RETURN frequency at position x  
        END FUNCTION  
        ASSIGN reference TO the count of each character in s AS frequency  
        SET sorted_characters TO the list of keys of frequency sorted by key_function in descending order  
        SET result TO the concatenation of each character repeated frequency at position character times for each character in sorted_characters  
        RETURN result  
    END FUNCTION  
END CLASS