CLASS Solution  
    FUNCTION checkWays(pairs)  
        CREATE graph AS a mapping from element TO a collection of elements  
        FOR each x and y IN pairs  
            ADD y TO the collection at x IN graph  
            ADD x TO the collection at y IN graph  
        END FOR  
  
        SET max_degree TO the element in graph with the largest size of its collection  
        SET n TO the size of graph  
  
        IF the size of the collection at max_degree IN graph NOT EQUALS n MINUS one  
            RETURN zero  
        END IF  
  
        FUNCTION can_be_parent(u, v)  
            RETURN that for every neighbor in the collection at v IN graph, the neighbor IS IN the collection at u IN graph OR neighbor IS EQUAL TO u  
        END FUNCTION  
  
        SET ways TO one  
  
        FOR each u IN graph  
            IF u IS EQUAL TO max_degree  
                CONTINUE  
            END IF  
            SET parent TO null  
            FOR each v IN the collection at u IN graph  
                IF v IS IN graph AND the size of the collection at v IN graph IS GREATER THAN OR EQUAL TO the size of the collection at u IN graph AND can_be_parent(v, u) IS true  
                    IF parent IS null OR the size of the collection at v IN graph IS LESS THAN the size of the collection at parent IN graph  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  
            IF parent IS null  
                RETURN zero  
            END IF  
            IF the size of the collection at parent IN graph IS EQUAL TO the size of the collection at u IN graph  
                SET ways TO two  
            END IF  
        END FOR  
  
        RETURN ways  
    END FUNCTION  
END CLASS