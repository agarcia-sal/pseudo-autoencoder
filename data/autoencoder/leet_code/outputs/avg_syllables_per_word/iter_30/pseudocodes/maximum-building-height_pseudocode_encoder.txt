CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND list containing one and zero TO restrictions  
        SORT restrictions in ascending order  
        FOR index FROM one TO the length of restrictions MINUS one  
            SET current_index TO element at position index zero OF restrictions  
            SET current_height TO element at position index one OF restrictions  
            SET previous_index TO element at position index MINUS one zero OF restrictions  
            SET previous_height TO element at position index MINUS one one OF restrictions  
            SET element at position index one OF restrictions TO the minimum of current_height AND previous_height PLUS current_index MINUS previous_index  
        END FOR  
        FOR index FROM the length of restrictions MINUS two DOWN TO zero  
            SET current_index TO element at position index zero OF restrictions  
            SET current_height TO element at position index one OF restrictions  
            SET next_index TO element at position index PLUS one zero OF restrictions  
            SET next_height TO element at position index PLUS one one OF restrictions  
            SET element at position index one OF restrictions TO the minimum of current_height AND next_height PLUS next_index MINUS current_index  
        END FOR  
        SET max_height TO zero  
        SET previous_index TO element at position zero zero OF restrictions  
        SET previous_height TO element at position zero one OF restrictions  
        FOR index FROM one TO the length of restrictions MINUS one  
            SET current_index TO element at position index zero OF restrictions  
            SET current_height TO element at position index one OF restrictions  
            SET candidate_height TO current_index MINUS previous_index PLUS previous_height PLUS current_height DIVIDED BY two  
            SET max_height TO the maximum of max_height AND candidate_height  
            SET previous_index TO current_index  
            SET previous_height TO current_height  
        END FOR  
        SET max_height TO the maximum of max_height AND previous_height PLUS n MINUS previous_index  
        RETURN max_height  
    END FUNCTION  
END CLASS