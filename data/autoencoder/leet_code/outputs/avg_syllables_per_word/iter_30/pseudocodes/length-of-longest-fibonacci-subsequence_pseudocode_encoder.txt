CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO empty mapping  
        FOR each element x WITH position i IN arr  
            SET element x IN index TO position i  
        END FOR  
        SET dp TO empty mapping  
        SET max_length TO zero  
        FOR position k FROM zero TO the LENGTH OF arr MINUS one  
            FOR position j FROM zero TO position k MINUS one  
                SET i TO the position FROM index OF the element at position k OF arr MINUS the element at position j OF arr OR minus one IF NOT FOUND  
                IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN j  
                    SET value AT positions j AND k OF dp TO value AT positions i AND j OF dp OR two PLUS one  
                    SET max_length TO the GREATER OF max_length AND value AT positions j AND k OF dp  
                END IF  
            END FOR  
        END FOR  
        IF max_length IS GREATER THAN OR EQUAL TO three  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS