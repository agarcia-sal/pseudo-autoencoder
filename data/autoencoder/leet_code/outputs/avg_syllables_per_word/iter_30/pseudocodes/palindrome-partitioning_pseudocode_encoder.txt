CLASS Solution  
    FUNCTION partition WITH PARAMETERS s  
        FUNCTION is_palindrome WITH PARAMETERS sub  
            RETURN sub EQUALS substring from position LENGTH OF sub MINUS one DOWNTO position zero OF sub  
        END FUNCTION  
        
        FUNCTION backtrack WITH PARAMETERS start, path  
            IF start EQUALS LENGTH OF s  
                APPEND path TO result  
                RETURN  
            END IF  
            FOR end FROM start PLUS one TO LENGTH OF s  
                IF is_palindrome WITH ARGUMENT substring from position start TO position end OF s  
                    CALL backtrack WITH ARGUMENTS end, path PLUS list containing substring from position start TO position end OF s  
                END IF  
            END FOR  
        END FUNCTION  
        
        SET result TO empty list  
        CALL backtrack WITH ARGUMENTS zero, empty list  
        RETURN result  
    END FUNCTION  
END CLASS