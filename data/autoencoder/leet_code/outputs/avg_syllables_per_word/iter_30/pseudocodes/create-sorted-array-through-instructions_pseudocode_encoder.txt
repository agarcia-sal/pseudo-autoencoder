CLASS Solution  
    FUNCTION createSortedArray WITH PARAMETER instructions  
        SET MODULO TO one billion PLUS seven  
        SET MAXIMUM TO maximum element in instructions PLUS one  
        SET BIT to a list of zero repeated MAXIMUM times  
        
        FUNCTION update WITH PARAMETERS index AND value  
            WHILE index LESS THAN MAXIMUM  
                INCREMENT element at position index OF BIT BY value  
                SET index TO index PLUS index AND negative index  
            END WHILE  
        END FUNCTION  
        
        FUNCTION query WITH PARAMETER index  
            SET total TO zero  
            WHILE index GREATER THAN zero  
                INCREMENT total BY element at position index OF BIT  
                SET index TO index MINUS index AND negative index  
            END WHILE  
            RETURN total  
        END FUNCTION  
        
        SET total_cost TO zero  
        FOR each index AND number IN instructions WITH enumeration  
            SET less_than TO query of number MINUS one  
            SET greater_than TO index MINUS query of number  
            IF less_than LESS THAN greater_than  
                SET cost TO less_than  
            ELSE  
                SET cost TO greater_than  
            END IF  
            SET total_cost TO total_cost PLUS cost  
            SET total_cost TO total_cost MODULO MODULO  
            CALL update WITH number AND one  
        END FOR  
        
        RETURN total_cost  
    END FUNCTION  
END CLASS