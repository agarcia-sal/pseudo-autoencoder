CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET diff TO empty list  
            FOR index FROM zero TO length of s1 MINUS one  
                IF character at position index OF s1 NOT EQUALS character at position index OF s2  
                    APPEND index TO diff  
                END IF  
            END FOR  
            RETURN length of diff EQUALS zero OR (length of diff EQUALS two AND character at position element at position zero OF diff OF s1 EQUALS character at position element at position one OF diff OF s2 AND character at position element at position one OF diff OF s1 EQUALS character at position element at position zero OF diff OF s2)  
        END FUNCTION  
        
        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN graph at position node  
                IF neighbor NOT IN visited  
                    CALL dfs WITH neighbor AND visited  
                END IF  
            END FOR  
        END FUNCTION  
        
        SET n TO length of strs  
        SET graph TO empty mapping FROM zero TO n MINUS one WITH empty list  
        
        FOR i FROM zero TO n MINUS one  
            FOR j FROM i PLUS one TO n MINUS one  
                IF CALL are_similar WITH element at position i OF strs AND element at position j OF strs  
                    APPEND j TO graph at position i  
                    APPEND i TO graph at position j  
                END IF  
            END FOR  
        END FOR  
        
        SET visited TO empty set  
        SET num_groups TO zero  
        
        FOR i FROM zero TO n MINUS one  
            IF i NOT IN visited  
                CALL dfs WITH i AND visited  
                INCREMENT num_groups BY one  
            END IF  
        END FOR  
        
        RETURN num_groups  
    END FUNCTION  
END CLASS