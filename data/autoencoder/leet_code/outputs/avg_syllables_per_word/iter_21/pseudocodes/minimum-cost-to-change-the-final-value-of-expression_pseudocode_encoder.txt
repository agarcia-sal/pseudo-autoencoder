CLASS Solution  
    FUNCTION minOperationsToFlip(expression)  
        SET stack TO an empty list  

        FOR each element e IN expression  
            IF e IS IN the collection of characters open parenthesis AND ampersand AND vertical bar  
                APPEND the pair consisting of e AND zero TO stack  
                CONTINUE to the next iteration  
            END IF  
            IF e EQUALS the closing parenthesis character  
                SET lastPair TO the last element removed from stack  
                REMOVE the last element from stack  
            ELSE  
                SET lastPair TO the pair consisting of e AND one  
            END IF  
            IF stack IS NOT empty AND the first element of the last pair in stack IS IN ampersand AND vertical bar  
                SET op TO the first element removed from the last pair in stack  
                SET a AND costA TO the values removed from stack  
                SET b AND costB TO the values from lastPair  
                IF op EQUALS ampersand  
                    IF a EQUALS character zero AND b EQUALS character zero  
                        SET lastPair TO the pair consisting of character zero AND one PLUS the minimum of costA AND costB  
                    ELSE IF a EQUALS character zero AND b EQUALS character one  
                        SET lastPair TO the pair consisting of character zero AND one  
                    ELSE IF a EQUALS character one AND b EQUALS character zero  
                        SET lastPair TO the pair consisting of character zero AND one  
                    ELSE  
                        SET lastPair TO the pair consisting of character one AND the minimum of costA AND costB  
                    END IF  
                ELSE  
                    IF a EQUALS character zero AND b EQUALS character zero  
                        SET lastPair TO the pair consisting of character zero AND the minimum of costA AND costB  
                    ELSE IF a EQUALS character zero AND b EQUALS character one  
                        SET lastPair TO the pair consisting of character one AND one  
                    ELSE IF a EQUALS character one AND b EQUALS character zero  
                        SET lastPair TO the pair consisting of character one AND one  
                    ELSE  
                        SET lastPair TO the pair consisting of character one AND one PLUS the minimum of costA AND costB  
                    END IF  
                END IF  
            END IF  
            APPEND lastPair TO stack  
        END FOR  

        RETURN the second element of the last pair in stack  
    END FUNCTION  
END CLASS