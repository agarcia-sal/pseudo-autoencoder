CLASS Solution  
    FUNCTION waysToPartition(nums, k)  
        SET total_sum TO the SUM OF nums  
        SET n TO the LENGTH OF nums  
        
        CALL left_diff ASSIGN TO A NEW DEFAULTDICTIONARY OF INTEGER  
        CALL right_diff ASSIGN TO A NEW DEFAULTDICTIONARY OF INTEGER  
        
        SET current_sum TO zero  
        FOR index FROM zero TO n MINUS one  
            INCREMENT current_sum BY element at position index OF nums  
            SET diff TO total_sum MINUS two MULTIPLIED BY current_sum  
            INCREMENT the VALUE at key diff OF right_diff BY one  
        END FOR  
        
        SET max_ways TO the VALUE at key zero OF right_diff  
        
        SET current_sum TO zero  
        FOR index FROM zero TO n MINUS one  
            INCREMENT current_sum BY element at position index OF nums  
            
            SET diff_change TO k MINUS element at position index OF nums  
            
            SET new_ways TO the VALUE at key negative diff_change OF left_diff PLUS the VALUE at key diff_change OF right_diff  
            
            IF new_ways GREATER THAN max_ways  
                SET max_ways TO new_ways  
            END IF  
            
            SET diff TO total_sum MINUS two MULTIPLIED BY current_sum  
            DECREMENT the VALUE at key diff OF right_diff BY one  
            INCREMENT the VALUE at key diff OF left_diff BY one  
        END FOR  
        
        RETURN max_ways  
    END FUNCTION  
END CLASS