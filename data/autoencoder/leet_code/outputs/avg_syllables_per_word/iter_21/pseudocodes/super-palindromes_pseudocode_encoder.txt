CLASS Solution  
    FUNCTION superpalindromesInRange(left, right)  
        FUNCTION is_palindrome(num)  
            SET num_string TO CONVERT num TO STRING  
            SET reversed_num_string TO REVERSE num_string  
            IF num_string EQUALS reversed_num_string  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  

        FUNCTION generate_palindromes(limit)  
            SET palindromes TO an empty list  
            FOR i FROM one TO one hundred thousand MINUS one  
                SET s TO CONVERT i TO STRING  
                SET odd_length_palindrome_string TO CONCATENATE s WITH THE SUBSTRING OF s FROM the SECOND LAST CHARACTER DOWN TO THE FIRST CHARACTER IN REVERSE ORDER  
                SET odd_length_palindrome TO CONVERT odd_length_palindrome_string TO INTEGER  
                APPEND odd_length_palindrome TO palindromes  
                SET even_length_palindrome_string TO CONCATENATE s WITH THE REVERSE OF s  
                SET even_length_palindrome TO CONVERT even_length_palindrome_string TO INTEGER  
                APPEND even_length_palindrome TO palindromes  
            END FOR  
            SET filtered_palindromes TO an empty list  
            FOR each p IN palindromes  
                IF p IS LESS THAN OR EQUAL TO limit  
                    APPEND p TO filtered_palindromes  
                END IF  
            END FOR  
            RETURN filtered_palindromes  
        END FUNCTION  

        SET left TO CONVERT left TO INTEGER  
        SET right TO CONVERT right TO INTEGER  
        SET limit TO the INTEGER VALUE OF the SQUARE ROOT OF right PLUS one  
        SET palindromes TO CALL generate_palindromes WITH PARAMETERS limit  

        SET count TO zero  
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF left IS LESS THAN OR EQUAL TO square AND square IS LESS THAN OR EQUAL TO right AND CALL is_palindrome WITH PARAMETERS square RETURNS true  
                INCREMENT count BY one  
            END IF  
        END FOR  

        RETURN count  
    END FUNCTION  
END CLASS