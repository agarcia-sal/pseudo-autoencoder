CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO CALL Counter WITH PARAMETERS  
        SET freq TO CALL Counter WITH PARAMETERS  
        SET max_len TO zero  
        
        FOR each index_and_number IN ENUMERATE OF nums  
            SET i TO the element at position zero OF index_and_number  
            SET num TO the element at position one OF index_and_number  
            
            INCREMENT the element at position num OF count BY one  
            
            IF the element at position num OF count IS GREATER THAN one  
                DECREMENT the element at position the element at position num OF count MINUS one OF freq BY one  
                IF the element at position the element at position num OF count MINUS one OF freq EQUALS zero  
                    REMOVE the element at position the element at position num OF count MINUS one FROM freq  
                END IF  
            END IF  
            
            INCREMENT the element at position the element at position num OF count OF freq BY one  
            
            IF the LENGTH OF freq EQUALS one AND (the key one IS IN freq OR the element at position zero OF THE VALUES OF freq EQUALS one)  
                SET max_len TO i PLUS one  
            ELSE IF the LENGTH OF freq EQUALS two AND ((the key one IS IN freq AND the element at position one OF freq EQUALS one) OR (the MAXIMUM KEY OF freq MINUS the MINIMUM KEY OF freq EQUALS one AND the element at position the MAXIMUM KEY OF freq OF freq EQUALS one))  
                SET max_len TO i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS