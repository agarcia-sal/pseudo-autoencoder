CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        CALL APPEND a list containing one and zero TO restrictions  
        CALL SORT restrictions IN ascending order  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_index TO element at position index of restrictions at position zero  
            SET current_height TO element at position index of restrictions at position one  
            SET previous_index TO element at position index MINUS one of restrictions at position zero  
            SET previous_height TO element at position index MINUS one of restrictions at position one  
            
            SET element at position index of restrictions at position one TO the MINIMUM OF current_height AND previous_height PLUS current_index MINUS previous_index  
        END FOR  
        
        FOR index FROM the LENGTH OF restrictions MINUS two DOWN TO zero STEP minus one  
            SET current_index TO element at position index of restrictions at position zero  
            SET current_height TO element at position index of restrictions at position one  
            SET next_index TO element at position index PLUS one of restrictions at position zero  
            SET next_height TO element at position index PLUS one of restrictions at position one  
            
            SET element at position index of restrictions at position one TO the MINIMUM OF current_height AND next_height PLUS next_index MINUS current_index  
        END FOR  
        
        SET maximum_height TO zero  
        SET previous_index TO element at position zero of restrictions at position zero  
        SET previous_height TO element at position zero of restrictions at position one  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_index TO element at position index of restrictions at position zero  
            SET current_height TO element at position index of restrictions at position one  
            
            SET candidate_height TO (current_index MINUS previous_index PLUS previous_height PLUS current_height) DIVIDED BY two  
            SET maximum_height TO the MAXIMUM OF maximum_height AND candidate_height  
            
            SET previous_index TO current_index  
            SET previous_height TO current_height  
        END FOR  
        
        SET maximum_height TO the MAXIMUM OF maximum_height AND previous_height PLUS n MINUS previous_index  
        
        RETURN maximum_height  
    END FUNCTION  
END CLASS