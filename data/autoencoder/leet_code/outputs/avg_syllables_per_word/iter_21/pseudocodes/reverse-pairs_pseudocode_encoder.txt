CLASS Solution  
    FUNCTION reversePairs(nums)  
        FUNCTION merge_and_count(nums, start, end)  
            IF start GREATER THAN OR EQUAL TO end THEN  
                RETURN zero  
            END IF  
            
            SET mid TO the INTEGER RESULT OF start PLUS end DIVIDED BY two  
            SET count TO the RESULT OF CALLING merge_and_count WITH PARAMETERS nums start mid PLUS the RESULT OF CALLING merge_and_count WITH PARAMETERS nums mid PLUS one end  
            
            SET j TO mid PLUS one  
            FOR i FROM start TO mid  
                WHILE j LESS THAN OR EQUAL TO end AND element at position i OF nums GREATER THAN two MULTIPLIED BY element at position j OF nums HOLDS  
                    INCREMENT j BY one  
                END WHILE  
                INCREMENT count BY j MINUS (mid PLUS one)  
            END FOR  
            
            SET merged TO an empty list  
            SET left TO start  
            SET right TO mid PLUS one  
            WHILE left LESS THAN OR EQUAL TO mid AND right LESS THAN OR EQUAL TO end HOLDS  
                IF element at position left OF nums LESS THAN OR EQUAL TO element at position right OF nums THEN  
                    APPEND element at position left OF nums TO merged  
                    INCREMENT left BY one  
                ELSE  
                    APPEND element at position right OF nums TO merged  
                    INCREMENT right BY one  
                END IF  
            END WHILE  
            
            FOR index FROM left TO mid  
                APPEND element at position index OF nums TO merged  
            END FOR  
            FOR index FROM right TO end  
                APPEND element at position index OF nums TO merged  
            END FOR  
            
            FOR index FROM start TO end  
                SET element at position index OF nums TO element at position index MINUS start OF merged  
            END FOR  
            
            RETURN count  
        END FUNCTION  
        
        RETURN CALLING merge_and_count WITH PARAMETERS nums zero the LENGTH OF nums MINUS one  
    END FUNCTION  
END CLASS