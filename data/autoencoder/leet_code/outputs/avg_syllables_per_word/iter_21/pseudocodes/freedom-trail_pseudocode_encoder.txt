CLASS Solution  
    FUNCTION findRotateSteps(ring, key)  
        FUNCTION dp(i, prev_pos)  
            IF i EQUALS the LENGTH OF key  
                RETURN zero  
            END IF  
            
            SET min_steps TO infinity  
            FOR each pos IN the list of positions of the character at position i OF key  
                SET clockwise TO the remainder of pos MINUS prev_pos DIVIDED BY n  
                SET anticlockwise TO the remainder of prev_pos MINUS pos DIVIDED BY n  
                SET steps TO the minimum value BETWEEN clockwise AND anticlockwise PLUS one PLUS CALL dp WITH PARAMETERS i PLUS one AND pos  
                IF steps LESS THAN min_steps  
                    SET min_steps TO steps  
                END IF  
            END FOR  
            
            RETURN min_steps  
        END FUNCTION  
        
        SET char_positions TO the result of calling defaultdict WITH PARAMETERS list  
        FOR index FROM zero TO the LENGTH OF ring MINUS one  
            APPEND index TO the list at position character at position index OF ring IN char_positions  
        END FOR  
        
        SET n TO the LENGTH OF ring  
        
        RETURN CALL dp WITH PARAMETERS zero AND zero  
    END FUNCTION  
END CLASS