CLASS Solution  
    FUNCTION shoppingOffers(price, special, needs)  
        SET filtered_special TO a new empty list  
        FOR each offer IN special  
            SET sum_of_offer_items TO the sum of all elements except the last in offer  
            SET sum_of_regular_price TO zero  
            FOR index FROM zero TO the LENGTH OF price MINUS one  
                INCREMENT sum_of_regular_price BY element at position index OF price MULTIPLIED BY element at position index OF offer except the last element  
            END FOR  
            IF sum_of_offer_items GREATER THAN zero AND last element of offer LESS THAN sum_of_regular_price  
                APPEND offer TO filtered_special  
            END IF  
        END FOR  
        SET special TO filtered_special  
        
        FUNCTION dfs(needs)  
            SET min_cost TO zero  
            FOR index FROM zero TO the LENGTH OF price MINUS one  
                INCREMENT min_cost BY element at position index OF price MULTIPLIED BY element at position index OF needs  
            END FOR  
            
            FOR each offer IN special  
                SET new_needs TO an empty list  
                FOR index FROM zero TO the LENGTH OF needs MINUS one  
                    SET new_need_element TO element at position index OF needs MINUS element at position index OF offer except the last element  
                    APPEND new_need_element TO new_needs  
                END FOR  
                SET can_use_offer TO true  
                FOR each need_element IN new_needs  
                    IF need_element LESS THAN zero  
                        SET can_use_offer TO false  
                    END IF  
                END FOR  
                IF can_use_offer IS true  
                    SET candidate_cost TO last element of offer PLUS CALL dfs WITH PARAMETERS tuple representation of new_needs  
                    IF candidate_cost LESS THAN min_cost  
                        SET min_cost TO candidate_cost  
                    END IF  
                END IF  
            END FOR  
            RETURN min_cost  
        END FUNCTION  
        
        RETURN CALL dfs WITH PARAMETERS tuple representation of needs  
    END FUNCTION  
END CLASS