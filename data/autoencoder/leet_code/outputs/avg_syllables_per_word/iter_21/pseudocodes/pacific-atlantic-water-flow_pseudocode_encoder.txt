CLASS Solution  
    FUNCTION pacificAtlantic(heights)  
        FUNCTION bfs(q, vis)  
            WHILE the LENGTH OF q IS GREATER THAN zero  
                FOR counter FROM zero TO the LENGTH OF q MINUS one  
                    SET i, j TO the FIRST element AT position zero OF q, the SECOND element AT position one OF q  
                    REMOVE the FIRST element FROM q  
                    FOR each pair a, b IN the collection consisting of zero AND minus one, zero AND one, one AND zero, minus one AND zero  
                        SET x TO i PLUS a  
                        SET y TO j PLUS b  
                        IF x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND the tuple consisting of x, y IS NOT IN vis AND the element at position x OF heights AT position y IS GREATER THAN OR EQUAL TO the element at position i OF heights AT position j  
                            ADD the tuple consisting of x, y TO vis  
                            APPEND the tuple consisting of x, y TO q  
                        END IF  
                    END FOR  
                END FOR  
            END WHILE  
        END FUNCTION  

        SET m TO the LENGTH OF heights  
        SET n TO the LENGTH OF the element at position zero OF heights  
        SET vis1 TO an empty set  
        SET vis2 TO an empty set  
        SET q1 TO an empty double-ended queue  
        SET q2 TO an empty double-ended queue  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF i EQUALS zero OR j EQUALS zero  
                    ADD the tuple consisting of i, j TO vis1  
                    APPEND the tuple consisting of i, j TO q1  
                END IF  
                IF i EQUALS m MINUS one OR j EQUALS n MINUS one  
                    ADD the tuple consisting of i, j TO vis2  
                    APPEND the tuple consisting of i, j TO q2  
                END IF  
            END FOR  
        END FOR  
        CALL bfs WITH PARAMETERS q1, vis1  
        CALL bfs WITH PARAMETERS q2, vis2  
        SET result TO an empty list  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF the tuple consisting of i, j IS IN vis1 AND the tuple consisting of i, j IS IN vis2  
                    APPEND the tuple consisting of i, j TO result  
                END IF  
            END FOR  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS