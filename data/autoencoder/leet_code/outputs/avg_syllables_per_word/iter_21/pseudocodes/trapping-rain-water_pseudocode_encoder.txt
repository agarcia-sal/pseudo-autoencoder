CLASS Solution  
    FUNCTION trap(height)  
        IF the LENGTH OF height EQUALS zero  
            RETURN zero  
        END IF  

        SET n TO the LENGTH OF height  
        SET left_max TO a list of zero repeated n times  
        SET right_max TO a list of zero repeated n times  

        SET the element at position zero OF left_max TO the element at position zero OF height  
        FOR i FROM one TO n MINUS one  
            SET the element at position i OF left_max TO the GREATER OF the element at position i MINUS one OF left_max AND the element at position i OF height  
        END FOR  

        SET the element at position n MINUS one OF right_max TO the element at position n MINUS one OF height  
        FOR i FROM n MINUS two DOWN TO zero  
            SET the element at position i OF right_max TO the GREATER OF the element at position i PLUS one OF right_max AND the element at position i OF height  
        END FOR  

        SET trapped_water TO zero  
        FOR i FROM zero TO n MINUS one  
            INCREMENT trapped_water BY the SMALLER OF the element at position i OF left_max AND the element at position i OF right_max MINUS the element at position i OF height  
        END FOR  

        RETURN trapped_water  
    END FUNCTION  
END CLASS