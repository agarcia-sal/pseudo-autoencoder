CLASS ListNode  
    FUNCTION __init__(self, val EQUALS zero, next EQUALS None)  
        SET self.val TO val  
        SET self.next TO next  
    END FUNCTION  
END CLASS  

FUNCTION list_node(values)  
    IF values IS empty  
        RETURN None  
    END IF  
    SET head TO CALL ListNode WITH PARAMETERS element at position zero OF values  
    SET p TO head  
    FOR each val IN collection of elements from position one TO the end OF values  
        SET node TO CALL ListNode WITH PARAMETERS val  
        SET p.next TO node  
        SET p TO node  
    END FOR  
    RETURN head  
END FUNCTION  

FUNCTION is_same_list(p1, p2)  
    IF p1 EQUALS None AND p2 EQUALS None  
        RETURN True  
    END IF  
    IF p1 EQUALS None OR p2 EQUALS None  
        RETURN False  
    END IF  
    RETURN (element val AT p1 EQUALS element val AT p2) AND CALL is_same_list WITH PARAMETERS element next AT p1, element next AT p2  
END FUNCTION  

CLASS Solution  
    FUNCTION reverseBetween(head, left, right)  
        IF head EQUALS None OR left EQUALS right  
            RETURN head  
        END IF  
        SET dummy TO CALL ListNode WITH PARAMETERS zero  
        SET dummy.next TO head  
        SET prev TO dummy  
        FOR index FROM zero TO left MINUS one MINUS one  
            SET prev TO element next AT prev  
        END FOR  
        SET current TO element next AT prev  
        FOR index FROM zero TO right MINUS left MINUS one  
            SET next_node TO element next AT current  
            SET element next AT current TO element next AT next_node  
            SET element next AT next_node TO element next AT prev  
            SET element next AT prev TO next_node  
        END FOR  
        RETURN element next AT dummy  
    END FUNCTION  
END CLASS