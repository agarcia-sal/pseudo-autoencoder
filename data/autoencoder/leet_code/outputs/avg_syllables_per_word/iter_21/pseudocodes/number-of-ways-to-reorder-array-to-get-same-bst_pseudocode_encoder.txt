CLASS Solution  
    FUNCTION numOfWays(nums)  
        SET MOD TO one billion PLUS seven

        FUNCTION count_ways(arr)  
            IF the LENGTH OF arr IS LESS THAN OR EQUAL TO one  
                RETURN one  
            END IF

            SET root TO element at position zero OF arr  
            SET left_subtree TO an empty list  
            SET right_subtree TO an empty list

            FOR each element x IN arr  
                IF x IS LESS THAN root  
                    APPEND x TO left_subtree  
                ELSE IF x IS GREATER THAN root  
                    APPEND x TO right_subtree  
                END IF  
            END FOR

            SET ways_left TO CALL count_ways WITH PARAMETERS left_subtree  
            SET ways_right TO CALL count_ways WITH PARAMETERS right_subtree

            SET total_ways TO the number of COMBINATIONS OF the sum OF the LENGTH OF left_subtree AND the LENGTH OF right_subtree TAKEN the LENGTH OF left_subtree AT A TIME

            RETURN the REMAINDER OF the MULTIPLICATION OF ways_left AND ways_right AND total_ways DIVIDED BY MOD  
        END FUNCTION

        RETURN the REMAINDER OF the DIFFERENCE BETWEEN CALL count_ways WITH PARAMETERS nums AND one DIVIDED BY MOD  
    END FUNCTION  
END CLASS