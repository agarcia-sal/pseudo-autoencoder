CLASS Solution  
    FUNCTION trapRainWater(heightMap)  
        IF heightMap IS EMPTY OR element at position zero OF heightMap IS EMPTY  
            RETURN zero  
        END IF  

        SET m TO the LENGTH OF heightMap  
        SET n TO the LENGTH OF element at position zero OF heightMap  

        SET visited TO a two-dimensional list with m rows and n columns each initialized to FALSE  
        SET min_heap TO an empty list  

        FOR i FROM zero TO m MINUS one  
            CALL heap push operation TO insert a tuple containing element at position i and zero OF heightMap, i, zero INTO min_heap  
            CALL heap push operation TO insert a tuple containing element at position i and n MINUS one OF heightMap, i, n MINUS one INTO min_heap  
            SET element at position i and zero OF visited TO TRUE  
            SET element at position i and n MINUS one OF visited TO TRUE  
        END FOR  

        FOR j FROM zero TO n MINUS one  
            CALL heap push operation TO insert a tuple containing element at position zero and j OF heightMap, zero, j INTO min_heap  
            CALL heap push operation TO insert a tuple containing element at position m MINUS one and j OF heightMap, m MINUS one, j INTO min_heap  
            SET element at position zero and j OF visited TO TRUE  
            SET element at position m MINUS one and j OF visited TO TRUE  
        END FOR  

        SET directions TO a list of tuples each containing a pair of integers representing up, down, left, right moves as negative one and zero, one and zero, zero and negative one, zero and one respectively  
        SET water_trapped TO zero  

        WHILE min_heap HOLDS elements  
            CALL heap pop operation TO remove and obtain a tuple containing height, x, y FROM min_heap  

            FOR each tuple dx, dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  

                IF nx GREATER THAN OR EQUAL TO zero AND nx LESS THAN m AND ny GREATER THAN OR EQUAL TO zero AND ny LESS THAN n AND element at position nx and ny OF visited IS FALSE  
                    SET element at position nx and ny OF visited TO TRUE  
                    INCREMENT water_trapped BY the RESULT OF comparing zero AND height MINUS element at position nx and ny OF heightMap AND RETURNING the GREATER value  
                    CALL heap push operation TO insert a tuple containing the GREATER value BETWEEN height AND element at position nx and ny OF heightMap, nx, ny INTO min_heap  
                END IF  
            END FOR  
        END WHILE  

        RETURN water_trapped  
    END FUNCTION  
END CLASS