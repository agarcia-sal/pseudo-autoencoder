CLASS Solution  
    FUNCTION sumOfDistancesInTree(n, edges)  
        SET graph TO a default dictionary mapping each key to an empty list  
        FOR each pair a and b IN edges  
            APPEND b TO the list at key a IN graph  
            APPEND a TO the list at key b IN graph  
        END FOR  
  
        SET count TO a list of size n FILLED WITH value one  
        SET dist TO a list of size n FILLED WITH value zero  
  
        FUNCTION dfs1(u, p)  
            FOR each element v IN the list at key u IN graph  
                IF v NOT EQUALS p THEN  
                    CALL dfs1 WITH PARAMETERS v AND u  
                    INCREMENT count at position u BY the value at position v IN count  
                    INCREMENT dist at position u BY the sum of the value at position v IN dist PLUS the value at position v IN count  
                END IF  
            END FOR  
        END FUNCTION  
  
        CALL dfs1 WITH PARAMETERS zero AND minus one  
  
        FUNCTION dfs2(u, p)  
            FOR each element v IN the list at key u IN graph  
                IF v NOT EQUALS p THEN  
                    SET dist at position v TO the value at position u IN dist MINUS the value at position v IN count PLUS the difference between n AND the value at position v IN count  
                    CALL dfs2 WITH PARAMETERS v AND u  
                END IF  
            END FOR  
        END FUNCTION  
  
        CALL dfs2 WITH PARAMETERS zero AND minus one  
  
        RETURN dist  
    END FUNCTION  
END CLASS