CLASS Solution  
    FUNCTION numBusesToDestination(routes, source, target)  
        IF source EQUALS target THEN  
            RETURN zero  
        END IF  
  
        SET stop_to_buses TO CALL a new default dictionary of list TYPE  
  
        FOR each pair bus AND route OBTAINED BY enumerating routes  
            FOR each stop IN route  
                APPEND bus TO the list at stop in stop_to_buses  
            END FOR  
        END FOR  
  
        SET bus_queue TO CALL a new deque  
        SET visited_buses TO a new empty set  
        SET visited_stops TO a new empty set  
  
        FOR each bus IN the list at source in stop_to_buses  
            APPEND a tuple of bus AND one TO bus_queue  
            ADD bus TO visited_buses  
            ADD source TO visited_stops  
        END FOR  
  
        WHILE bus_queue HOLDS  
            REMOVE and ASSIGN the leftmost element of bus_queue TO current_bus AND bus_count  
  
            FOR each stop IN the list at position current_bus OF routes  
                IF stop EQUALS target THEN  
                    RETURN bus_count  
                END IF  
  
                IF stop NOT IN visited_stops THEN  
                    ADD stop TO visited_stops  
                    FOR each next_bus IN the list at stop in stop_to_buses  
                        IF next_bus NOT IN visited_buses THEN  
                            ADD next_bus TO visited_buses  
                            APPEND a tuple of next_bus AND bus_count PLUS one TO bus_queue  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END WHILE  
  
        RETURN negative one  
    END FUNCTION  
END CLASS