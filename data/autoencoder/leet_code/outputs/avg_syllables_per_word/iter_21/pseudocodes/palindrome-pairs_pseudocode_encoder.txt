CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the REVERSE OF s  
        END FUNCTION  

        SET word_dict TO a NEW EMPTY DICTIONARY  
        FOR each index i WITH value word IN words  
            SET the element at key word IN word_dict TO i  
        END FOR  

        SET result TO a NEW EMPTY LIST  

        FOR each index i WITH value word IN words  
            IF word EQUALS an empty string THEN  
                CONTINUE TO the next iteration  
            END IF  

            IF the empty string IS A KEY IN word_dict AND is_palindrome(word) HOLDS THEN  
                APPEND a LIST CONTAINING i AND the element at key empty string IN word_dict TO result  
                APPEND a LIST CONTAINING the element at key empty string IN word_dict AND i TO result  
            END IF  

            SET reversed_word TO the REVERSE OF word  
            IF reversed_word IS A KEY IN word_dict AND the element at key reversed_word IN word_dict DOES NOT EQUAL i THEN  
                APPEND a LIST CONTAINING i AND the element at key reversed_word IN word_dict TO result  
            END IF  

            FOR j FROM one TO the LENGTH OF word MINUS one DO  
                SET prefix TO the SUBSTRING FROM STARTING POSITION zero TO j MINUS one OF word  
                SET suffix TO the SUBSTRING FROM POSITION j TO the END OF word  
                SET reversed_prefix TO the REVERSE OF prefix  
                SET reversed_suffix TO the REVERSE OF suffix  

                IF is_palindrome(suffix) HOLDS AND reversed_prefix IS A KEY IN word_dict THEN  
                    APPEND a LIST CONTAINING i AND the element at key reversed_prefix IN word_dict TO result  
                END IF  

                IF is_palindrome(prefix) HOLDS AND reversed_suffix IS A KEY IN word_dict THEN  
                    APPEND a LIST CONTAINING the element at key reversed_suffix IN word_dict AND i TO result  
                END IF  
            END FOR  
        END FOR  

        RETURN result  
    END FUNCTION  
END CLASS