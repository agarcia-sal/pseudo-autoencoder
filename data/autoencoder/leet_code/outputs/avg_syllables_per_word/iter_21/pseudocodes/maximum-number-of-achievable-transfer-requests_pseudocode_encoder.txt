CLASS Solution  
    FUNCTION maximumRequests(n, requests)  
        SET max_requests TO zero  
        SET num_requests TO the LENGTH OF requests  
      
        FOR mask FROM zero TO one MULTIPLIED BY num_requests TWO TO THE POWER  minus one  
            CALL create_zero_list WITH PARAMETERS n  
            ASSIGN balance TO the RESULT OF create_zero_list  
            SET count TO zero  
          
            FOR i FROM zero TO num_requests MINUS one  
                IF the BITWISE AND of mask AND one MULTIPLIED BY i TO THE POWER OF one IS GREATER THAN zero  
                    SET from_building TO the FIRST element AT position i OF requests  
                    SET to_building TO the SECOND element AT position i OF requests  
                    DECREMENT the element AT position from_building OF balance BY one  
                    INCREMENT the element AT position to_building OF balance BY one  
                    INCREMENT count BY one  
                END IF  
            END FOR  
          
            IF every element b IN balance EQUALS zero HOLDS  
                SET max_requests TO the GREATER OF max_requests AND count  
            END IF  
        END FOR  
      
        RETURN max_requests  
    END FUNCTION  
  
    FUNCTION create_zero_list(size)  
        SET result TO an EMPTY list  
        FOR index FROM zero TO size MINUS one  
            APPEND zero TO result  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS