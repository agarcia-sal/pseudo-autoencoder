CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph EQUALS an empty collection THEN  
            RETURN zero  
        END IF  
        
        SET n TO the LENGTH OF graph  
        
        DEFINE queue AS a double-ended queue containing tuples of each node AND the bitmask with the bit at position node SET TO one FOR each node FROM zero TO n MINUS one  
        
        DEFINE visited AS a set containing tuples of each node AND the bitmask with the bit at position node SET TO one FOR each node FROM zero TO n MINUS one  
        
        SET steps TO zero  
        
        SET all_nodes_visited TO the bitmask where all bits FROM zero TO n MINUS one ARE SET TO one  
        
        WHILE queue IS NOT EMPTY  
            FOR index FROM zero TO the LENGTH OF queue MINUS one DO  
                REMOVE the first element FROM queue AND ASSIGN to current_node, visited_nodes  
                
                IF visited_nodes EQUALS all_nodes_visited THEN  
                    RETURN steps  
                END IF  
                
                FOR each neighbor IN the element at position current_node OF graph  
                    SET next_visited_nodes TO the bitwise OR OF visited_nodes AND the bitmask with the bit at position neighbor SET TO one  
                    
                    SET next_state TO the tuple OF neighbor AND next_visited_nodes  
                    
                    IF next_state IS NOT IN visited THEN  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
            
            INCREMENT steps BY one  
        END WHILE  
        
        RETURN minus one  
    END FUNCTION  
END CLASS