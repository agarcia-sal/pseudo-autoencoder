CLASS Solution  
    FUNCTION maxProfit(k, prices)  
        IF prices IS empty OR k EQUALS zero  
            RETURN zero  
        END IF  
        
        SET n TO the LENGTH OF prices  
        
        IF k GREATER THAN OR EQUAL TO n DIVIDED BY two  
            SET profit TO zero  
            FOR index FROM one TO n MINUS one  
                IF element at position index OF prices GREATER THAN element at position index MINUS one OF prices  
                    INCREMENT profit BY element at position index OF prices MINUS element at position index MINUS one OF prices  
                END IF  
            END FOR  
            RETURN profit  
        END IF  
        
        FUNCTION initialize_hold_and_release_arrays(limit)  
            SET hold_array TO a list of length limit PLUS one WITH all elements SET TO negative infinity  
            SET release_array TO a list of length limit PLUS one WITH all elements SET TO zero  
            RETURN hold_array AND release_array  
        END FUNCTION  
        
        CALL initialize_hold_and_release_arrays WITH PARAMETERS k STORE RESULTS IN hold AND release  
        
        FOR each price IN prices  
            FOR transaction_index FROM one TO k  
                SET hold[transaction_index] TO the maximum VALUE BETWEEN hold[transaction_index] AND release[transaction_index MINUS one] MINUS price  
                SET release[transaction_index] TO the maximum VALUE BETWEEN release[transaction_index] AND hold[transaction_index] PLUS price  
            END FOR  
        END FOR  
        
        RETURN element at position k OF release  
    END FUNCTION  
END CLASS