CLASS Solution  
    FUNCTION leastInterval(tasks, n)  
        SET task_counts TO the RESULT OF calling Counter WITH PARAMETERS tasks  
        SET max_heap TO an EMPTY LIST  
        FOR each count IN the VALUES OF task_counts  
            APPEND the NEGATIVE OF count TO max_heap  
        END FOR  
        CALL heapify FROM heapq WITH PARAMETERS max_heap  
        
        SET time TO zero  
        SET queue TO an EMPTY LIST  
        
        WHILE max_heap IS NOT EMPTY OR queue IS NOT EMPTY  
            WHILE queue IS NOT EMPTY AND the FIRST element at position zero OF queue at position zero EQUALS time  
                SET _, count TO the RESULT OF REMOVING the FIRST element FROM queue  
                IF count IS LESS THAN zero  
                    CALL heappush FROM heapq WITH PARAMETERS max_heap AND count  
                END IF  
            END WHILE  
            
            IF max_heap IS NOT EMPTY  
                SET count TO the RESULT OF CALL HEAPPOP FROM heapq WITH PARAMETERS max_heap  
                INCREMENT count BY one  
                IF count IS LESS THAN zero  
                    APPEND the TUPLE of time PLUS n PLUS one AND count TO queue  
                END IF  
            END IF  
            
            INCREMENT time BY one  
        END WHILE  
        
        RETURN time  
    END FUNCTION  
END CLASS