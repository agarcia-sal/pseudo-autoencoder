CLASS Solution  
    FUNCTION robotSim(commands, obstacles)  
        SET directions TO list containing tuple zero and one then tuple one and zero then tuple zero and negative one then tuple negative one and zero  
        SET x TO zero  
        SET y TO zero  
        SET dir_index TO zero  
        SET obstacles_set TO CALL convert_obstacles_to_set WITH PARAMETERS obstacles  
        SET max_distance TO zero  
        
        FOR each command IN commands  
            IF command EQUALS negative two  
                SET dir_index TO the remainder of dir_index MINUS one DIVIDED BY four  
            ELSE IF command EQUALS negative one  
                SET dir_index TO the remainder of dir_index PLUS one DIVIDED BY four  
            ELSE  
                SET dx TO the element at position zero OF element at position dir_index OF directions  
                SET dy TO the element at position one OF element at position dir_index OF directions  
                
                FOR step FROM one TO command  
                    SET next_x TO x PLUS dx  
                    SET next_y TO y PLUS dy  
                    IF tuple next_x and next_y IS IN obstacles_set  
                        BREAK out of the loop  
                    END IF  
                    SET x TO next_x  
                    SET y TO next_y  
                END FOR  
                
                SET current_distance TO x MULTIPLIED BY x PLUS y MULTIPLIED BY y  
                IF current_distance GREATER THAN max_distance  
                    SET max_distance TO current_distance  
                END IF  
            END IF  
        END FOR  
        
        RETURN max_distance  
    END FUNCTION  
      
    FUNCTION convert_obstacles_to_set(obstacles)  
        SET result_set TO an empty set  
        FOR each obstacle IN obstacles  
            CONVERT obstacle to tuple form  
            ADD converted tuple TO result_set  
        END FOR  
        RETURN result_set  
    END FUNCTION  
END CLASS