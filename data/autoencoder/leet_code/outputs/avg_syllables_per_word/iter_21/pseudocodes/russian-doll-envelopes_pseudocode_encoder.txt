CLASS Solution  
    FUNCTION maxEnvelopes(envelopes)  
        CALL envelopes.sort WITH PARAMETERS key AS a FUNCTION THAT TAKES x AND RETURNS a TUPLE OF the element at position zero OF x AND the NEGATIVE OF the element at position one OF x  
        SET dp TO an EMPTY LIST  
        FOR each element WHICH IS an UNNAMED VARIABLE AND h IN envelopes  
            CALL bisect_left WITH PARAMETERS dp AND h AND ASSIGN RESULT TO idx  
            IF idx EQUALS the LENGTH OF dp THEN  
                APPEND h TO dp  
            ELSE  
                SET the element at position idx OF dp TO h  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS