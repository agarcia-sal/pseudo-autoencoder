CLASS Solution  
    FUNCTION countComponents(n, edges)  
        SET graph TO CALL create_adjacency_list WITH PARAMETERS n, edges  
        SET visited TO CALL create_empty_set WITH NO PARAMETERS  
        
        FUNCTION dfs(node)  
            IF node IS IN visited THEN  
                RETURN  
            END IF  
            CALL add_element TO visited WITH PARAMETERS node  
            FOR each neighbor IN element at position node OF graph  
                CALL dfs WITH PARAMETERS neighbor  
            END FOR  
        END FUNCTION  
        
        SET components TO zero  
        FOR node FROM zero TO n MINUS one  
            IF node IS NOT IN visited THEN  
                CALL dfs WITH PARAMETERS node  
                INCREMENT components BY one  
            END IF  
        END FOR  
        
        RETURN components  
    END FUNCTION

    FUNCTION create_adjacency_list(n, edges)  
        SET adjacency TO empty mapping FROM integers TO empty lists  
        FOR index FROM zero TO n MINUS one  
            ASSIGN element at position index OF adjacency TO empty list  
        END FOR  
        FOR each pair a AND b IN edges  
            APPEND b TO element at position a OF adjacency  
            APPEND a TO element at position b OF adjacency  
        END FOR  
        RETURN adjacency  
    END FUNCTION

    FUNCTION create_empty_set()  
        RETURN empty set  
    END FUNCTION  
END CLASS