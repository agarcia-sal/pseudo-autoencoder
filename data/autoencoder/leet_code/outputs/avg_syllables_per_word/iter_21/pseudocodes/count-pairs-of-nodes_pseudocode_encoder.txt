CLASS Solution  
    FUNCTION countPairs(n, edges, queries)  
        SET degree TO a list of zeros of length n PLUS one  
        FOR each pair u AND v IN edges  
            INCREMENT the element at position u OF degree BY one  
            INCREMENT the element at position v OF degree BY one  
        END FOR  
        
        SET shared TO an empty mapping with integer default  
        FOR each pair u AND v IN edges  
            IF u IS GREATER THAN v THEN  
                SET temporary TO u  
                SET u TO v  
                SET v TO temporary  
            END IF  
            INCREMENT the value corresponding to the pair of u AND v IN shared BY one  
        END FOR  
        
        SET sorted_degree TO the list degree sorted in ascending order  
        
        SET answers TO an empty list  
        FOR each element q IN queries  
            SET count TO zero  
            SET left TO one  
            SET right TO n  
            WHILE left IS LESS THAN right  
                IF the element at position left OF sorted_degree PLUS the element at position right OF sorted_degree IS GREATER THAN q THEN  
                    INCREMENT count BY right MINUS left  
                    DECREMENT right BY one  
                ELSE  
                    INCREMENT left BY one  
                END IF  
            END WHILE  
            
            FOR each pair (u, v) AND value count_uv IN the items of shared  
                SET degree_uv TO the element at position u OF degree PLUS the element at position v OF degree  
                IF degree_uv IS GREATER THAN q AND degree_uv MINUS count_uv IS LESS THAN OR EQUAL TO q THEN  
                    DECREMENT count BY one  
                END IF  
            END FOR  
            
            APPEND count TO answers  
        END FOR  
        RETURN answers  
    END FUNCTION  
END CLASS