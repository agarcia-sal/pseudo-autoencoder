CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the reverse of s  
        END FUNCTION  
  
        SET word_dict TO an empty mapping from words to indices in words  
        FOR index FROM zero TO the LENGTH OF words MINUS one  
            SET word AT position index of words TO the key  
            SET index TO the value  
            SET word_dict AT key word TO the value index  
        END FOR  
  
        SET result TO an empty list  
  
        FOR i FROM zero TO the LENGTH OF words MINUS one  
            SET word AT position i of words TO the current word  
            IF word EQUALS empty string THEN  
                CONTINUE  
            END IF  
  
            IF the empty string EXISTS AS A key IN word_dict AND is_palindrome(word) THEN  
                APPEND the list consisting of i AND the value AT key empty string in word_dict TO result  
                APPEND the list consisting of the value AT key empty string in word_dict AND i TO result  
            END IF  
  
            SET reversed_word TO the reverse of word  
  
            IF reversed_word EXISTS AS A key IN word_dict AND the value AT key reversed_word in word_dict NOT EQUALS i THEN  
                APPEND the list consisting of i AND the value AT key reversed_word in word_dict TO result  
            END IF  
  
            FOR j FROM one TO the LENGTH OF word MINUS one  
                SET prefix TO the substring of word FROM position zero UP TO position j  
                SET suffix TO the substring of word FROM position j TO the end  
  
                SET reversed_prefix TO the reverse of prefix  
                SET reversed_suffix TO the reverse of suffix  
  
                IF is_palindrome(suffix) AND reversed_prefix EXISTS AS A key IN word_dict THEN  
                    APPEND the list consisting of i AND the value AT key reversed_prefix in word_dict TO result  
                END IF  
  
                IF is_palindrome(prefix) AND reversed_suffix EXISTS AS A key IN word_dict THEN  
                    APPEND the list consisting of the value AT key reversed_suffix in word_dict AND i TO result  
                END IF  
            END FOR  
        END FOR  
  
        RETURN result  
    END FUNCTION  
END CLASS