CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO AN EMPTY MAPPING FROM ELEMENTS OF arr TO THEIR POSITIONS IN arr  
        SET dp TO AN EMPTY MAPPING FROM PAIRS OF INDICES TO INTEGERS  
        SET max_length TO zero  
        FOR index k FROM zero TO THE LENGTH OF arr MINUS one  
            FOR index j FROM zero TO k MINUS one  
                SET i TO THE VALUE AT KEY WHICH IS THE RESULT OF THE ELEMENT AT POSITION k OF arr MINUS THE ELEMENT AT POSITION j OF arr IN index OR negative one IF KEY NOT FOUND  
                IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN j THEN  
                    SET dp AT KEY PAIR j AND k TO THE VALUE AT KEY PAIR i AND j IN dp OR two IF KEY NOT FOUND PLUS one  
                    SET max_length TO THE GREATER OF max_length AND THE VALUE AT KEY PAIR j AND k IN dp  
                END IF  
            END FOR  
        END FOR  
        IF max_length IS GREATER THAN OR EQUAL TO three THEN  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS