CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new Counter object  
        SET freq TO a new Counter object  
        SET max_len TO zero  
          
        FOR each index and number IN the enumeration of nums  
            INCREMENT the frequency count of the number in count by one  
              
            IF the frequency count of the number in count is greater than one  
                DECREMENT the frequency of the frequency of the number minus one in freq by one  
                IF the frequency of the frequency of the number minus one in freq EQUALS zero  
                    REMOVE the frequency of the frequency of the number minus one from freq  
                END IF  
            END IF  
              
            INCREMENT the frequency of the frequency of the number in count by one in freq  
              
            IF the number of distinct frequencies in freq EQUALS one AND (the frequency one IS IN freq OR the only value in freq EQUALS one)  
                SET max_len TO index PLUS one  
            ELSE IF the number of distinct frequencies in freq EQUALS two AND ((the frequency one IS IN freq AND the frequency at one in freq EQUALS one) OR (the difference between the maximum frequency key and the minimum frequency key EQUALS one AND the frequency at the maximum frequency key EQUALS one))  
                SET max_len TO index PLUS one  
            END IF  
        END FOR  
          
        RETURN max_len  
    END FUNCTION  
END CLASS