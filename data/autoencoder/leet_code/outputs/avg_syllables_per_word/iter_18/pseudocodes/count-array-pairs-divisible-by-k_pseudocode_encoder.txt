CLASS Solution  
    FUNCTION countPairs(nums AS List OF integer COMMA k AS integer) RETURNS integer  
        SET gcd_count TO a new Counter object  
  
        FOR each num IN nums  
            INCREMENT the element at key gcd of num AND k in gcd_count BY one  
        END FOR  
  
        SET total_pairs TO zero  
  
        SET gcd_values TO the list of all keys in gcd_count  
        SET n TO the length of gcd_values  
  
        FOR i FROM zero TO n MINUS one  
            FOR j FROM i TO n MINUS one  
                SET gcd1 TO the element at position i of gcd_values  
                SET gcd2 TO the element at position j of gcd_values  
  
                IF the product of gcd1 AND gcd2 modulo k EQUALS zero THEN  
                    IF i EQUALS j THEN  
                        INCREMENT total_pairs BY the integer division of the product of gcd_count at gcd1 AND gcd_count at gcd1 MINUS one DIVIDED BY two  
                    ELSE  
                        INCREMENT total_pairs BY the product of gcd_count at gcd1 AND gcd_count at gcd2  
                    END IF  
                END IF  
            END FOR  
        END FOR  
  
        RETURN total_pairs  
    END FUNCTION  
END CLASS