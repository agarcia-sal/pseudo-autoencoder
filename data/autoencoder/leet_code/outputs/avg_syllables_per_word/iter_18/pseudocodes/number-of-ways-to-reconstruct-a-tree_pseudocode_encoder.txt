CLASS Solution  
    FUNCTION checkWays WITH parameter pairs AS a list OF lists OF integers  
        SET graph TO the result of calling an auxiliary FUNCTION create_default_dictionary_with_sets  
        FOR each element x AND element y IN pairs  
            APPEND element y TO the set associated with key x IN graph  
            APPEND element x TO the set associated with key y IN graph  
        END FOR  
        SET max_degree TO the element IN graph WITH the maximum size of the set associated with that element  
        SET n TO the size OF graph  
        IF the size OF the set associated with max_degree IN graph IS NOT EQUAL TO n MINUS one  
            RETURN zero  
        END IF  
        FUNCTION can_be_parent WITH parameters u AND v  
            RETURN whether for every neighbor in the set associated with v IN graph either neighbor IS IN the set associated with u IN graph OR neighbor IS EQUAL TO u  
        END FUNCTION  
        SET ways TO one  
        FOR each element u IN graph  
            IF u IS EQUAL TO max_degree  
                CONTINUE  
            END IF  
            SET parent TO none  
            FOR each element v IN the set associated with u IN graph  
                IF v IS IN graph AND the size of the set associated with v IN graph IS GREATER THAN OR EQUAL TO the size of the set associated with u IN graph AND can_be_parent WITH arguments v AND u RETURNS true  
                    IF parent IS none OR the size of the set associated with v IN graph IS LESS THAN the size of the set associated with parent IN graph  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  
            IF parent IS none  
                RETURN zero  
            END IF  
            IF the size of the set associated with parent IN graph IS EQUAL TO the size of the set associated with u IN graph  
                SET ways TO two  
            END IF  
        END FOR  
        RETURN ways  
    END FUNCTION  
END CLASS