CLASS Solution  
    FUNCTION reversePairs(nums OF LIST OF INTEGER) RETURNS INTEGER  
        FUNCTION merge_and_count(nums OF LIST OF INTEGER, start OF INTEGER, end OF INTEGER) RETURNS INTEGER  
            IF start GREATER THAN OR EQUAL TO end THEN  
                RETURN zero  
            END IF  
            SET mid TO the INTEGER PART OF the RESULT OF the SUM OF start PLUS end DIVIDED BY two  
            SET count TO the RESULT OF merge_and_count WITH nums AND start AND mid PLUS the RESULT OF merge_and_count WITH nums AND mid PLUS one AND end  
            SET j TO mid PLUS one  
            FOR i FROM start TO mid  
                WHILE j LESS THAN OR EQUAL TO end AND the ELEMENT AT POSITION i OF nums GREATER THAN two MULTIPLIED BY the ELEMENT AT POSITION j OF nums  
                    INCREMENT j BY one  
                END WHILE  
                INCREMENT count BY the RESULT OF j MINUS mid MINUS one  
            END FOR  
            SET merged TO an EMPTY LIST  
            SET left TO start  
            SET right TO mid PLUS one  
            WHILE left LESS THAN OR EQUAL TO mid AND right LESS THAN OR EQUAL TO end  
                IF the ELEMENT AT POSITION left OF nums LESS THAN OR EQUAL TO the ELEMENT AT POSITION right OF nums THEN  
                    APPEND the ELEMENT AT POSITION left OF nums TO merged  
                    INCREMENT left BY one  
                ELSE  
                    APPEND the ELEMENT AT POSITION right OF nums TO merged  
                    INCREMENT right BY one  
                END IF  
            END WHILE  
            FOR each element FROM the ELEMENTS starting AT left UP TO AND INCLUDING mid OF nums  
                APPEND element TO merged  
            END FOR  
            FOR each element FROM the ELEMENTS starting AT right UP TO AND INCLUDING end OF nums  
                APPEND element TO merged  
            END FOR  
            FOR index FROM zero TO the LENGTH OF merged MINUS one  
                SET the ELEMENT AT POSITION start PLUS index OF nums TO the ELEMENT AT POSITION index OF merged  
            END FOR  
            RETURN count  
        END FUNCTION  
        RETURN the RESULT OF merge_and_count WITH nums AND zero AND the LENGTH OF nums MINUS one  
    END FUNCTION  
END CLASS