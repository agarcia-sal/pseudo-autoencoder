CLASS Solution  
    FUNCTION maxTotalFruits WITH PARAMETERS fruits AND startPos AND k  
        SET max_fruits TO zero  
        SET total_fruits TO zero  
        SET left TO zero  
        FOR right FROM zero TO the LENGTH OF fruits MINUS one  
            SET position TO element at position right IN fruits AT position zero of element  
            SET amount TO element at position right IN fruits AT position one of element  
            INCREMENT total_fruits BY amount  
            WHILE left IS LESS THAN OR EQUAL TO right AND THE FOLLOWING CONDITION DOES NOT HOLD  
                THE value at position zero of element at position left IN fruits IS GREATER THAN OR EQUAL TO startPos MINUS k  
                AND THE value at position zero of element at position left IN fruits IS LESS THAN OR EQUAL TO startPos PLUS k  
                AND THE value at position zero of element at position right IN fruits IS GREATER THAN OR EQUAL TO startPos MINUS k  
                AND THE value at position zero of element at position right IN fruits IS LESS THAN OR EQUAL TO startPos PLUS k  
                AND THE MINIMUM OF THE ABSOLUTE VALUE OF THE value at position zero of element at position right IN fruits MINUS startPos AND THE ABSOLUTE VALUE OF THE value at position zero of element at position left IN fruits MINUS startPos  
                PLUS THE value at position zero of element at position right IN fruits MINUS THE value at position zero of element at position left IN fruits  
                IS LESS THAN OR EQUAL TO k  
                DECREMENT total_fruits BY the value at position one of element at position left IN fruits  
                INCREMENT left BY one  
            END WHILE  
            SET max_fruits TO THE GREATER OF max_fruits AND total_fruits  
        END FOR  
        RETURN max_fruits  
    END FUNCTION  
END CLASS