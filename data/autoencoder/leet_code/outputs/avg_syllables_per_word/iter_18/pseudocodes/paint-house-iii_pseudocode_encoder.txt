CLASS Solution  
    FUNCTION minCost WITH PARAMETERS houses AS List of integers cost AS List of List of integers m AS integer n AS integer target AS integer  
        FUNCTION dp WITH PARAMETERS i AS integer prev_color AS integer groups AS integer  
            IF i EQUALS m THEN  
                IF groups EQUALS target THEN  
                    RETURN zero  
                ELSE  
                    RETURN infinite value  
                END IF  
            ELSE IF element at position i of houses NOT EQUALS zero THEN  
                SET new_groups TO groups PLUS one IF element at position i of houses NOT EQUALS prev_color OTHERWISE groups  
                RETURN dp WITH ARGUMENTS i PLUS one element at position i of houses new_groups  
            ELSE  
                SET min_cost TO infinite value  
                FOR each color FROM one TO n DO  
                    SET new_groups TO groups PLUS one IF color NOT EQUALS prev_color OTHERWISE groups  
                    SET min_cost TO the lesser BETWEEN min_cost AND the sum of element at position i and position color MINUS one of cost AND dp WITH ARGUMENTS i PLUS one color new_groups  
                END FOR  
                RETURN min_cost  
            END IF  
        END FUNCTION  
        SET result TO dp WITH ARGUMENTS zero zero zero  
        IF result NOT EQUALS infinite value THEN  
            RETURN result  
        ELSE  
            RETURN minus one  
        END IF  
    END FUNCTION  
END CLASS