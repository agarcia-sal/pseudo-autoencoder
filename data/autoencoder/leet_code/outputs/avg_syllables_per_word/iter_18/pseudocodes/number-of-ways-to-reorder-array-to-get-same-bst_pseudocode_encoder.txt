CLASS Solution  
    FUNCTION numOfWays WITH PARAMETER nums AS List OF integers  
        SET MOD TO ten raised to the power of nine PLUS one  

        FUNCTION count_ways WITH PARAMETER arr  
            IF the LENGTH OF arr IS LESS THAN OR EQUAL TO one  
                RETURN one  
            END IF  
            
            SET root TO element at position zero of arr  
            SET left_subtree TO empty list  
            FOR each element x IN arr  
                IF x IS LESS THAN root  
                    APPEND x TO left_subtree  
                END IF  
            END FOR  
            SET right_subtree TO empty list  
            FOR each element x IN arr  
                IF x IS GREATER THAN root  
                    APPEND x TO right_subtree  
                END IF  
            END FOR  
            
            SET ways_left TO the RESULT OF count_ways WITH PARAMETER left_subtree  
            SET ways_right TO the RESULT OF count_ways WITH PARAMETER right_subtree  
            
            SET total_length TO the LENGTH OF left_subtree PLUS the LENGTH OF right_subtree  
            SET total_ways TO the COMBINATION OF total_length CHOOSE the LENGTH OF left_subtree  
            
            RETURN ways_left MULTIPLIED BY ways_right MULTIPLIED BY total_ways MODULO MOD  
        END FUNCTION  
        
        SET result TO the RESULT OF count_ways WITH PARAMETER nums MINUS one  
        RETURN result MODULO MOD  
    END FUNCTION  
END CLASS