CLASS Solution  
    FUNCTION updateMatrix WITH PARAMETER mat  
        IF mat IS empty OR element at position zero of mat IS empty  
            RETURN mat  
        END IF  
        
        SET rows TO the LENGTH OF mat  
        SET cols TO the LENGTH OF element at position zero of mat  
        SET dist TO a two dimensional collection with rows COUNT OF rows and columns COUNT OF cols each element SET TO infinity  
        SET queue TO a new empty double ended queue  
        
        FOR each row_index FROM zero TO rows MINUS one  
            FOR each column_index FROM zero TO cols MINUS one  
                IF element at position row_index and column_index of mat EQUALS zero  
                    SET element at position row_index and column_index of dist TO zero  
                    APPEND the tuple of row_index and column_index TO queue  
                END IF  
            END FOR  
        END FOR  
        
        SET directions TO the list of tuples consisting of negative one and zero and one and zero and zero and negative one and zero and one  
        
        WHILE queue IS NOT empty  
            SET r and c TO the element popped from the front of queue  
            FOR each dr and dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr IS GREATER THAN OR EQUAL TO zero AND nr IS LESS THAN rows AND nc IS GREATER THAN OR EQUAL TO zero AND nc IS LESS THAN cols AND element at position nr and nc of dist IS GREATER THAN element at position r and c of dist PLUS one  
                    SET element at position nr and nc of dist TO element at position r and c of dist PLUS one  
                    APPEND the tuple of nr and nc TO queue  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN dist  
    END FUNCTION  
END CLASS