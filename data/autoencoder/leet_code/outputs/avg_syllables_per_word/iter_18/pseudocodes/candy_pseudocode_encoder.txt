CLASS Solution  
    FUNCTION candy WITH PARAMETER ratings AS list of integer  
        SET n TO the LENGTH OF ratings  
        SET candies TO list containing the repetition of the integer one the number of times n  
        FOR index FROM one TO n MINUS one  
            IF the element at position index of ratings GREATER THAN the element at position index MINUS one of ratings  
                SET the element at position index of candies TO the element at position index MINUS one of candies PLUS one  
            END IF  
        END FOR  
        FOR index FROM n MINUS two DOWN TO zero STEP minus one  
            IF the element at position index of ratings GREATER THAN the element at position index PLUS one of ratings  
                SET the element at position index of candies TO the GREATER OF the element at position index of candies AND the element at position index PLUS one of candies PLUS one  
            END IF  
        END FOR  
        SET total_candies TO zero  
        FOR each number IN candies  
            INCREMENT total_candies BY number  
        END FOR  
        RETURN total_candies  
    END FUNCTION  
END CLASS