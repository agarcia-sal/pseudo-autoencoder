CLASS Solution  
    FUNCTION maxBuilding(n AS integer, restrictions AS list of lists of integer) RETURNS integer  
        APPEND list containing one and zero TO restrictions  
        SORT restrictions IN ascending order  
          
        FOR index_position FROM one TO the LENGTH OF restrictions MINUS one  
            SET idx TO element at position index_position and zero of restrictions  
            SET height TO element at position index_position and one of restrictions  
            SET prev_idx TO element at position index_position MINUS one and zero of restrictions  
            SET prev_height TO element at position index_position MINUS one and one of restrictions  
            SET element at position index_position and one of restrictions TO THE MINIMUM OF height AND prev_height PLUS idx MINUS prev_idx  
        END FOR  
          
        FOR index_position FROM the LENGTH OF restrictions MINUS two DOWN TO zero  
            SET idx TO element at position index_position and zero of restrictions  
            SET height TO element at position index_position and one of restrictions  
            SET next_idx TO element at position index_position PLUS one and zero of restrictions  
            SET next_height TO element at position index_position PLUS one and one of restrictions  
            SET element at position index_position and one of restrictions TO THE MINIMUM OF height AND next_height PLUS next_idx MINUS idx  
        END FOR  
          
        SET max_height TO zero  
        SET prev_idx TO element at position zero and zero of restrictions  
        SET prev_height TO element at position zero and one of restrictions  
          
        FOR index_position FROM one TO the LENGTH OF restrictions MINUS one  
            SET idx TO element at position index_position and zero of restrictions  
            SET height TO element at position index_position and one of restrictions  
            SET candidate_height TO idx MINUS prev_idx PLUS prev_height PLUS height DIVIDED BY two  
            SET max_height TO THE MAXIMUM OF max_height AND candidate_height  
            SET prev_idx TO idx  
            SET prev_height TO height  
        END FOR  
          
        SET max_height TO THE MAXIMUM OF max_height AND prev_height PLUS n MINUS prev_idx  
          
        RETURN max_height  
    END FUNCTION  
END CLASS