CLASS Solution
    FUNCTION longestLine WITH PARAMETERS mat AS list of list of integers
        IF mat IS empty OR element at position zero of mat IS empty
            RETURN zero
        END IF

        SET m TO the LENGTH OF mat
        SET n TO the LENGTH OF element at position zero of mat
        SET directions TO the list containing elements zero and one AND one and zero AND one and one AND one and negative one
        SET max_length TO zero

        FUNCTION check WITH PARAMETERS x AS integer y AS integer dx AS integer dy AS integer
            SET length TO zero
            WHILE x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND element at position x of mat AND element at position y of element at position x of mat EQUALS one
                INCREMENT length BY one
                INCREMENT x BY dx
                INCREMENT y BY dy
            END WHILE
            RETURN length
        END FUNCTION

        FOR index i FROM zero TO m MINUS one
            FOR index j FROM zero TO n MINUS one
                IF element at position i of mat AND element at position j of element at position i of mat EQUALS one
                    FOR each dx AND dy IN directions
                        IF i MINUS dx IS LESS THAN zero OR j MINUS dy IS LESS THAN zero OR j MINUS dy IS GREATER THAN OR EQUAL TO n OR element at position i MINUS dx of mat AND element at position j MINUS dy of element at position i MINUS dx of mat EQUALS zero
                            SET max_length TO the GREATER OF max_length AND the RESULT OF check WITH ARGUMENTS i j dx dy
                        END IF
                    END FOR
                END IF
            END FOR
        END FOR

        RETURN max_length
    END FUNCTION
END CLASS