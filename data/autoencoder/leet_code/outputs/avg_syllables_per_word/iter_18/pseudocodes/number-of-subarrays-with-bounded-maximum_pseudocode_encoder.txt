CLASS Solution  
    FUNCTION numSubarrayBoundedMax(nums AS list of integers left AS integer right AS integer) RETURNS integer  
        FUNCTION count(max_value AS integer) RETURNS integer  
            SET total_count TO zero  
            SET current_length TO zero  
            FOR each number IN nums  
                IF number LESS THAN OR EQUAL TO max_value THEN  
                    INCREMENT current_length BY one  
                    INCREMENT total_count BY current_length  
                ELSE  
                    SET current_length TO zero  
                END IF  
            END FOR  
            RETURN total_count  
        END FUNCTION  
        RETURN value obtained by EXECUTING count with max_value EQUAL TO right MINUS value obtained by EXECUTING count with max_value EQUAL TO left MINUS one  
    END FUNCTION  
END CLASS