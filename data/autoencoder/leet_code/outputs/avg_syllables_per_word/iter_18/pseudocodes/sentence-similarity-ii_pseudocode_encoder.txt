CLASS Solution
    FUNCTION areSentencesSimilarTwo WITH PARAMETERS sentence1 sentence2 similarPairs
        IF the LENGTH OF sentence1 NOT EQUALS the LENGTH OF sentence2
            RETURN false
        END IF

        SET parent TO an empty mapping

        FUNCTION find WITH PARAMETER x
            IF the value associated with key x in parent NOT EQUALS x
                SET the value associated with key x in parent TO the result of find with parameter the value associated with key x in parent
            END IF
            RETURN the value associated with key x in parent
        END FUNCTION

        FUNCTION union WITH PARAMETERS x y
            SET rootX TO the result of find with parameter x
            SET rootY TO the result of find with parameter y
            IF rootX NOT EQUALS rootY
                SET the value associated with key rootY in parent TO rootX
            END IF
        END FUNCTION

        FOR each pair IN similarPairs
            FOR each word IN pair
                IF word NOT IN keys of parent
                    SET the value associated with key word in parent TO word
                END IF
            END FOR
        END FOR

        FOR each x and y IN similarPairs
            CALL union with parameters x and y
        END FOR

        FOR each w1 and w2 IN sentence1 and sentence2 simultaneously
            IF w1 NOT IN keys of parent
                SET the value associated with key w1 in parent TO w1
            END IF
            IF w2 NOT IN keys of parent
                SET the value associated with key w2 in parent TO w2
            END IF
            IF the result of find with parameter w1 NOT EQUALS the result of find with parameter w2
                RETURN false
            END IF
        END FOR

        RETURN true
    END FUNCTION
END CLASS