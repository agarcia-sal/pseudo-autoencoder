CLASS Solution  
    FUNCTION convertArray(nums AS List OF integers) RETURNS integer  
        FUNCTION min_operations_to_non_decreasing(nums AS List OF integers) RETURNS integer  
            SET max_heap TO empty list  
            SET operations TO zero  
            FOR each num IN nums  
                IF max_heap IS NOT empty AND the NEGATION OF the element at position zero of max_heap GREATER THAN num  
                    INCREMENT operations BY the NEGATION OF the REMOVAL OF element at position zero of max_heap MINUS num  
                    INSERT the NEGATION OF num INTO max_heap PRESERVING HEAP PROPERTY  
                END IF  
                INSERT the NEGATION OF num INTO max_heap PRESERVING HEAP PROPERTY  
            END FOR  
            RETURN operations  
        END FUNCTION  

        FUNCTION min_operations_to_non_increasing(nums AS List OF integers) RETURNS integer  
            SET min_heap TO empty list  
            SET operations TO zero  
            FOR each num IN nums  
                IF min_heap IS NOT empty AND the element at position zero of min_heap LESS THAN num  
                    INCREMENT operations BY num MINUS the REMOVAL OF element at position zero of min_heap  
                    INSERT num INTO min_heap PRESERVING HEAP PROPERTY  
                END IF  
                INSERT num INTO min_heap PRESERVING HEAP PROPERTY  
            END FOR  
            RETURN operations  
        END FUNCTION  

        SET result_to_minimum OF the CALL TO min_operations_to_non_decreasing WITH nums AND min_operations_to_non_increasing WITH nums  
        RETURN result_to_minimum  
    END FUNCTION  
END CLASS