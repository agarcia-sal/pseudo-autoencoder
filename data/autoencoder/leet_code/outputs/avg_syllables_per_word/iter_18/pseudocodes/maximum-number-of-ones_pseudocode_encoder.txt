CLASS Solution  
    FUNCTION maximumNumberOfOnes WITH PARAMETERS width height sideLength maxOnes  
        SET frequency_list TO a list of zero values with the LENGTH EQUAL TO sideLength MULTIPLIED BY sideLength  
        FOR each integer i FROM zero TO width MINUS one  
            FOR each integer j FROM zero TO height MINUS one  
                SET position_in_submatrix TO the remainder of integer i DIVIDED BY sideLength MULTIPLIED BY sideLength PLUS the remainder of integer j DIVIDED BY sideLength  
                INCREMENT the element at position position_in_submatrix OF frequency_list BY one  
            END FOR  
        END FOR  
        SORT frequency_list IN descending order  
        SET sum_of_top_frequencies TO zero  
        FOR each integer k FROM zero TO maxOnes MINUS one  
            INCREMENT sum_of_top_frequencies BY the element at position k OF frequency_list  
        END FOR  
        RETURN sum_of_top_frequencies  
    END FUNCTION  
END CLASS