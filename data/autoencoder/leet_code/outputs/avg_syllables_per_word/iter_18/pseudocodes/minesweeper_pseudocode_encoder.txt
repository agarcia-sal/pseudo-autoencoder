CLASS Solution  
    FUNCTION updateBoard WITH PARAMETERS board AND click  
        FUNCTION count_adjacent_mines WITH PARAMETERS r AND c  
            SET count TO zero  
            FOR i FROM r MINUS one TO r PLUS one INCLUSIVE  
                FOR j FROM c MINUS one TO c PLUS one INCLUSIVE  
                    IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN the LENGTH OF board AND j IS GREATER THAN OR EQUAL TO zero AND j IS LESS THAN the LENGTH OF element at position zero of board AND element at position i and j of board EQUALS the character representing a mine  
                        INCREMENT count BY one  
                    END IF  
                END FOR  
            END FOR  
            RETURN count  
        END FUNCTION  
          
        FUNCTION dfs WITH PARAMETERS r AND c  
            IF r IS LESS THAN zero OR r IS GREATER THAN OR EQUAL TO the LENGTH OF board OR c IS LESS THAN zero OR c IS GREATER THAN OR EQUAL TO the LENGTH OF element at position zero of board  
                RETURN  
            END IF  
            IF element at position r and c of board IS NOT EQUAL TO the character representing an empty square  
                RETURN  
            END IF  
              
            SET mine_count TO THE RESULT OF count_adjacent_mines USING r AND c  
            IF mine_count IS GREATER THAN zero  
                SET element at position r and c of board TO the string representation of mine_count  
            ELSE  
                SET element at position r and c of board TO the character representing a blank revealed square  
                FOR i FROM r MINUS one TO r PLUS one INCLUSIVE  
                    FOR j FROM c MINUS one TO c PLUS one INCLUSIVE  
                        CALL dfs WITH PARAMETERS i AND j  
                    END FOR  
                END FOR  
            END IF  
        END FUNCTION  
          
        SET row TO element at position zero of click  
        SET col TO element at position one of click  
        IF element at position row and col of board EQUALS the character representing a mine  
            SET element at position row and col of board TO the character representing a detonated mine  
            RETURN board  
        END IF  
          
        CALL dfs WITH PARAMETERS row AND col  
        RETURN board  
    END FUNCTION  
END CLASS