CLASS Solution  
    FUNCTION superpalindromesInRange(left AS string, right AS string) RETURNS integer  
        FUNCTION is_palindrome(num) RETURNS boolean  
            SET string_representation TO string version of num  
            SET reversed_string TO string representation of num with characters in reversed order  
            IF string_representation EQUALS reversed_string THEN  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  
        
        FUNCTION generate_palindromes(limit) RETURNS list of integers  
            SET palindromes TO empty list  
            FOR i FROM one TO one hundred thousand MINUS one DO  
                SET s TO string version of i  
                SET odd_length_palindrome_string TO concatenation of s and all characters of s excluding last character in reversed order  
                SET even_length_palindrome_string TO concatenation of s and all characters of s in reversed order  
                APPEND integer conversion of odd_length_palindrome_string TO palindromes  
                APPEND integer conversion of even_length_palindrome_string TO palindromes  
            END FOR  
            SET filtered_palindromes TO empty list  
            FOR each p IN palindromes DO  
                IF p LESS THAN OR EQUAL TO limit THEN  
                    APPEND p TO filtered_palindromes  
                END IF  
            END FOR  
            RETURN filtered_palindromes  
        END FUNCTION  
        
        SET left TO integer conversion of left parameter  
        SET right TO integer conversion of right parameter  
        SET limit TO integer conversion of the square root of right PLUS one  
        SET palindromes TO result of generate_palindromes with limit parameter  
        
        SET count TO zero  
        FOR each p IN palindromes DO  
            SET square TO p MULTIPLIED BY p  
            IF square GREATER THAN OR EQUAL TO left AND square LESS THAN OR EQUAL TO right THEN  
                IF result of is_palindrome with square parameter IS true THEN  
                    INCREMENT count BY one  
                END IF  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS