CLASS Solution  
    FUNCTION eventualSafeNodes(graph AS List OF List OF Integer) RETURNS List OF Integer  
        FUNCTION is_safe(node AS Integer) RETURNS Boolean  
            IF element at position node of visited EQUALS one THEN  
                RETURN False  
            END IF  
            IF element at position node of visited EQUALS two THEN  
                RETURN True  
            END IF  
              
            SET element at position node of visited TO one  
            FOR each neighbor IN element at position node of graph  
                IF NOT is_safe(neighbor) THEN  
                    RETURN False  
                END IF  
            END FOR  
              
            SET element at position node of visited TO two  
            RETURN True  
        END FUNCTION  
          
        SET n TO the LENGTH OF graph  
        SET visited TO list of zeros with the LENGTH OF n  
        SET safe_nodes TO empty list  
          
        FOR node FROM zero TO n MINUS one  
            IF is_safe(node) THEN  
                APPEND node TO safe_nodes  
            END IF  
        END FOR  
          
        RETURN safe_nodes  
    END FUNCTION  
END CLASS