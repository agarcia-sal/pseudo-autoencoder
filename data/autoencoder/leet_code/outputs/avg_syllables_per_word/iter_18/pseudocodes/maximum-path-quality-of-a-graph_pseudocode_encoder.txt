CLASS Solution  
    FUNCTION maximalPathQuality(values AS List OF integer, edges AS List OF List OF integer, maxTime AS integer) RETURNS integer  
        SET graph TO an empty mapping from integer TO list  
        
        FOR each u AND v AND time IN edges  
            APPEND pair of v AND time TO the list at key u in graph  
            APPEND pair of u AND time TO the list at key v in graph  
        END FOR  
        
        SET visited TO an empty set  
        SET max_quality TO zero  
        
        FUNCTION dfs(node AS integer, current_time AS integer, current_quality AS integer)  
            IF node EQUALS zero THEN  
                IF max_quality LESS THAN current_quality THEN  
                    SET max_quality TO current_quality  
                END IF  
            END IF  
            
            FOR each neighbor AND time IN the list at key node in graph  
                IF time LESS THAN OR EQUAL TO current_time THEN  
                    IF neighbor NOT IN visited THEN  
                        ADD neighbor TO visited  
                        CALL dfs WITH neighbor AND current_time MINUS time AND current_quality PLUS element at position neighbor of values  
                        REMOVE neighbor FROM visited  
                    ELSE  
                        CALL dfs WITH neighbor AND current_time MINUS time AND current_quality  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  
        
        ADD zero TO visited  
        CALL dfs WITH zero AND maxTime AND element at position zero of values  
        
        RETURN max_quality  
    END FUNCTION  
END CLASS