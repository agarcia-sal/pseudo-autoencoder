CLASS Solution  
    FUNCTION countComponents WITH PARAMETERS n AND edges  
        SET graph TO empty mapping WITH keys FROM zero TO n MINUS one AND values TO empty list  
        FOR each pair a AND b IN edges  
            APPEND b TO list at key a IN graph  
            APPEND a TO list at key b IN graph  
        END FOR  
        
        SET visited TO empty set  
        
        FUNCTION dfs WITH PARAMETER node  
            IF node IS IN visited THEN  
                RETURN  
            END IF  
            APPEND node TO visited  
            FOR each neighbor IN list at key node IN graph  
                CALL dfs WITH neighbor  
            END FOR  
        END FUNCTION  
        
        SET components TO zero  
        FOR node FROM zero TO n MINUS one  
            IF node IS NOT IN visited THEN  
                CALL dfs WITH node  
                INCREMENT components BY one  
            END IF  
        END FOR  
        
        RETURN components  
    END FUNCTION  
END CLASS