CLASS Solution  
    FUNCTION waysToPartition WITH PARAMETERS nums and k  
        SET total_sum TO the summation of all elements in nums  
        SET n TO the number of elements in nums  
          
        CREATE a mapping left_diff with default integer zero for all keys  
        CREATE a mapping right_diff with default integer zero for all keys  
          
        SET current_sum TO zero  
        FOR each index i FROM zero TO the number before n minus one  
            INCREMENT current_sum BY element at position i of nums  
            SET diff TO total_sum MINUS two MULTIPLIED BY current_sum  
            INCREMENT the value at key diff in right_diff BY one  
        END FOR  
          
        SET max_ways TO the value at key zero in right_diff  
          
        SET current_sum TO zero  
        FOR each index i FROM zero TO the number before n  
            INCREMENT current_sum BY element at position i of nums  
              
            SET diff_change TO k MINUS element at position i of nums  
              
            SET new_ways TO the sum of the value at key negative diff_change in left_diff AND the value at key diff_change in right_diff  
            IF new_ways GREATER THAN max_ways THEN  
                SET max_ways TO new_ways  
            END IF  
              
            SET diff TO total_sum MINUS two MULTIPLIED BY current_sum  
            DECREMENT the value at key diff in right_diff BY one  
            INCREMENT the value at key diff in left_diff BY one  
        END FOR  
          
        RETURN max_ways  
    END FUNCTION  
END CLASS