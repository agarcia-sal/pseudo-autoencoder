CLASS Solution  
    FUNCTION ways WITH PARAMETERS pizza AND k  
        SET mod TO ten TO THE POWER OF nine PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF element at position zero of pizza  
        INITIALIZE s AS a two dimensional list with dimensions m PLUS one and n PLUS one FILLED WITH zero  
        FOR index i FROM one TO m  
            SET row TO element at position i MINUS one of pizza  
            FOR index j FROM one TO n  
                SET c TO character at position j MINUS one of row  
                SET element at position i of s AT position j TO element at position i MINUS one of s AT position j PLUS element at position i of s AT position j MINUS one MINUS element at position i MINUS one of s AT position j MINUS one PLUS ONE IF c EQUALS capital A OTHERWISE zero  
            END FOR  
        END FOR  
        FUNCTION dfs WITH PARAMETERS i AND j AND k  
            IF k EQUALS zero THEN  
                RETURN integer value of element at position m of s AT position n MINUS element at position i of s AT position n MINUS element at position m of s AT position j PLUS element at position i of s AT position j GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR x FROM i PLUS one TO m MINUS one  
                IF element at position x of s AT position n MINUS element at position i of s AT position n MINUS element at position x of s AT position j PLUS element at position i of s AT position j GREATER THAN zero THEN  
                    INCREMENT ans BY dfs WITH ARGUMENTS x AND j AND k MINUS one  
                END IF  
            END FOR  
            FOR y FROM j PLUS one TO n MINUS one  
                IF element at position m of s AT position y MINUS element at position i of s AT position y MINUS element at position m of s AT position j PLUS element at position i of s AT position j GREATER THAN zero THEN  
                    INCREMENT ans BY dfs WITH ARGUMENTS i AND y AND k MINUS one  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  
        RETURN dfs WITH ARGUMENTS zero AND zero AND k MINUS one  
END CLASS