CLASS Solution  
    FUNCTION largestRectangleArea WITH parameter heights  
        SET stack TO a list containing negative one  
        SET max_area TO zero  
        CALL append zero TO heights  
        FOR each index i AND each height h IN heights with enumeration  
            WHILE element at position negative one of stack NOT EQUALS negative one AND height h LESS THAN element at position element at position negative one of stack OF heights holds  
                SET height TO element at position stack popped FROM heights  
                SET width TO i MINUS element at position negative one of stack MINUS one  
                SET max_area TO the GREATER OF max_area AND height MULTIPLIED BY width  
            END WHILE  
            CALL append i TO stack  
        END FOR  
        RETURN max_area  
    END FUNCTION  
END CLASS