CLASS Trie  
    FUNCTION __init__  
        SET children TO a list of twenty six None elements  
        SET is_end TO False  
    END FUNCTION  

    FUNCTION insert WITH PARAMETER w  
        SET node TO the current instance  
        FOR each character c IN w  
            SET idx TO the numerical position of character c MINUS the numerical position of character a  
            IF element at position idx in node children EQUALS None THEN  
                ASSIGN reference TO a new instance of Trie at element position idx in node children  
            END IF  
            ASSIGN reference TO element at position idx in node children of node  
        END FOR  
        SET is_end attribute of node TO True  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findAllConcatenatedWordsInADict WITH PARAMETER words AS a list of strings RETURNS a list of strings  
        FUNCTION dfs WITH PARAMETERS w AND start RETURNS a Boolean value  
            IF start EQUALS the length of w THEN  
                RETURN True  
            END IF  
            SET node TO trie  
            FOR index i FROM start TO the length of w MINUS one  
                SET idx TO the numerical position of character at position i of w MINUS the numerical position of character a  
                IF element at position idx in children of node EQUALS None THEN  
                    RETURN False  
                END IF  
                ASSIGN reference TO element at position idx in children of node  
                IF is_end attribute of node IS True AND dfs invoked with parameters w AND i plus one RETURNS True THEN  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  

        ASSIGN reference TO a new instance of Trie NAMED trie  
        SET ans TO an empty list  
        SORT words in increasing order by the length of each word  
        FOR each word w IN words  
            IF w IS NOT empty THEN  
                IF dfs invoked with parameters w AND zero RETURNS True THEN  
                    APPEND w TO ans  
                ELSE  
                    INVOKE insert method of trie WITH parameter w  
                END IF  
            END IF  
        END FOR  
        RETURN ans  
    END FUNCTION  
END CLASS