CLASS Solution  
    FUNCTION robotSim(commands AS List of integer, obstacles AS List of List of integer) RETURNS integer  
        SET directions TO list consisting of tuple zero and one then tuple one and zero then tuple zero and negative one then tuple negative one and zero  
        SET x TO zero  
        SET y TO zero  
        SET dir_index TO zero  
        SET obstacles_set TO the result of mapping each element in obstacles into tuple and then the set of these tuples  
        SET max_distance TO zero  
        
        FOR each command IN commands  
            IF command EQUALS negative two THEN  
                SET dir_index TO dir_index MINUS one MODULO four  
            ELSE IF command EQUALS negative one THEN  
                SET dir_index TO dir_index PLUS one MODULO four  
            ELSE  
                SET dx TO the first element at position dir_index of directions  
                SET dy TO the second element at position dir_index of directions  
                FOR each iteration FROM one TO command  
                    SET next_x TO x PLUS dx  
                    SET next_y TO y PLUS dy  
                    IF the tuple consisting of next_x AND next_y IS IN obstacles_set THEN  
                        BREAK  
                    END IF  
                    SET x TO next_x  
                    SET y TO next_y  
                END FOR  
                SET max_distance TO the greater of max_distance AND the sum of x MULTIPLIED BY x AND y MULTIPLIED BY y  
            END IF  
        END FOR  
        RETURN max_distance  
    END FUNCTION  
END CLASS