CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET difference_positions TO empty list  
            FOR each position FROM zero TO the LENGTH OF s1 MINUS one  
                IF character at position of s1 NOT EQUALS character at position of s2 THEN  
                    APPEND position TO difference_positions  
                END IF  
            END FOR  
            IF the LENGTH OF difference_positions EQUALS zero OR  
               the LENGTH OF difference_positions EQUALS two AND  
               character at position at zero of difference_positions OF s1 EQUALS character at position at one of difference_positions OF s2 AND  
               character at position at one of difference_positions OF s1 EQUALS character at position at zero of difference_positions OF s2 THEN  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  
  
        FUNCTION dfs(node, visited)  
            APPEND node TO visited  
            FOR each neighbor IN element at position node of graph  
                IF neighbor NOT IN visited THEN  
                    CALL dfs WITH neighbor AND visited  
                END IF  
            END FOR  
        END FUNCTION  
  
        SET n TO the LENGTH OF strs  
        SET graph TO empty mapping FROM each index FROM zero TO n MINUS one TO empty list  
  
        FOR each i FROM zero TO n MINUS one  
            FOR each j FROM i PLUS one TO n MINUS one  
                IF CALL are_similar WITH element at position i of strs AND element at position j of strs THEN  
                    APPEND j TO element at position i of graph  
                    APPEND i TO element at position j of graph  
                END IF  
            END FOR  
        END FOR  
  
        SET visited TO empty set  
        SET num_groups TO zero  
  
        FOR each i FROM zero TO n MINUS one  
            IF i NOT IN visited THEN  
                CALL dfs WITH i AND visited  
                INCREMENT num_groups BY one  
            END IF  
        END FOR  
  
        RETURN num_groups  
    END FUNCTION  
END CLASS