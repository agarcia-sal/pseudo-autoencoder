CLASS Solution  
    FUNCTION isRectangleCover WITH PARAMETER rectangles AS List of List of integer  
        SET X1 TO positive infinity  
        SET Y1 TO positive infinity  
        SET X2 TO negative infinity  
        SET Y2 TO negative infinity  
          
        SET points TO empty set  
        SET area TO zero  
          
        FOR each list x1 y1 x2 y2 IN rectangles  
            SET X1 TO the lesser of X1 and x1  
            SET Y1 TO the lesser of Y1 and y1  
            SET X2 TO the greater of X2 and x2  
            SET Y2 TO the greater of Y2 and y2  
              
            INCREMENT area BY the product of the difference between x2 and x1 and the difference between y2 and y1  
              
            FOR each point p IN the list containing the pairs consisting of x1 y1 and x1 y2 and x2 y1 and x2 y2  
                IF p is contained in points  
                    REMOVE p FROM points  
                ELSE  
                    ADD p TO points  
                END IF  
            END FOR  
        END FOR  
          
        IF area is not equal to the product of the difference between X2 and X1 and the difference between Y2 and Y1  
            RETURN false  
        END IF  
          
        IF points is not equal to the set containing the pairs consisting of X1 Y1 and X1 Y2 and X2 Y1 and X2 Y2  
            RETURN false  
        END IF  
          
        RETURN true  
    END FUNCTION  
END CLASS