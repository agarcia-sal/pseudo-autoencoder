CLASS Solution  
    FUNCTION subarraysWithKDistinct(nums AS list OF integers, k AS integer) RETURNS integer  
        FUNCTION atMostKDistinct(t AS integer) RETURNS integer  
            SET count TO a mapping with default integer zero  
            SET left TO zero  
            SET result TO zero  
            FOR each right FROM zero TO the LENGTH OF nums MINUS one  
                INCREMENT the value in count at key element at position right of nums BY one  
                WHILE the NUMBER OF UNIQUE keys IN count IS GREATER THAN t  
                    DECREMENT the value in count at key element at position left of nums BY one  
                    IF the value in count at key element at position left of nums EQUALS zero  
                        REMOVE the key element at position left of nums FROM count  
                    END IF  
                    INCREMENT left BY one  
                END WHILE  
                INCREMENT result BY the value of right MINUS left PLUS one  
            END FOR  
            RETURN result  
        END FUNCTION  
        SET result_with_k TO CALL atMostKDistinct WITH parameter k  
        SET result_with_k_minus_one TO CALL atMostKDistinct WITH parameter k MINUS one  
        RETURN result_with_k MINUS result_with_k_minus_one  
    END FUNCTION  
END CLASS