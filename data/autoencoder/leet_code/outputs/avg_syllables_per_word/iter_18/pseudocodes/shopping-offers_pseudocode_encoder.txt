CLASS Solution  
    FUNCTION shoppingOffers(price AS list of integers special AS list of lists of integers needs AS list of integers) RETURNS integer  
        SET special TO FILTERED list of offers FROM special WHERE the SUM of elements at all positions except the last position of offer IS GREATER THAN zero AND the element at the last position of offer IS LESS THAN the SUM of each element at corresponding position of price MULTIPLIED BY element at corresponding position of offer at all positions except the last position  
        
        FUNCTION dfs(needs_tuple)  
            SET min_cost TO the SUM of each element at corresponding position of price MULTIPLIED BY element at corresponding position of needs_tuple  
            
            FOR each offer IN special  
                SET new_needs TO list of elements where each element IS element at position in needs_tuple MINUS element at corresponding position in offer at all positions except the last position  
                
                IF the condition that every element in new_needs IS GREATER THAN OR EQUAL TO zero HOLDS  
                    SET min_cost TO the minimum of min_cost AND the element at the last position of offer PLUS the RESULT OF invoking dfs WITH new_needs converted to tuple  
                END IF  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN RESULT OF invoking dfs WITH needs converted to tuple  
    END FUNCTION  
END CLASS