CLASS Solution  
    FUNCTION maskPII WITH PARAMETER s AS string  
        IF the character at any position in s EQUALS the at symbol  
            SET local TO the substring before the at symbol in s  
            SET domain TO the substring after the at symbol in s  
            SET masked_local TO the first character of local PLUS the repetition of the character asterisk five times PLUS the last character of local  
            RETURN the lowercase form of masked_local PLUS the at symbol PLUS the lowercase form of domain  
        ELSE  
            SET digits TO the concatenation of each character in s WHERE each character passes the condition of being a digit  
            SET local_number TO the concatenation of three asterisks PLUS a hyphen PLUS three asterisks PLUS a hyphen PLUS the substring of digits consisting of the last four characters  
            IF the length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the length of digits MINUS ten  
                SET country_code TO the plus symbol PLUS the repetition of the character asterisk country_code_length times PLUS a hyphen  
                RETURN country_code PLUS local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS