CLASS Solution
    FUNCTION maxStudents(seats)
        SET m TO the LENGTH OF seats
        SET n TO the LENGTH OF the element at position zero of seats
        
        SET broken TO a list of zeroes with size m
        FOR index i FROM zero TO m MINUS one
            FOR index j FROM zero TO n MINUS one
                IF the element at position j of the element at position i of seats EQUALS the character hash
                    SET the element at position i of broken TO the element at position i of broken BITWISE OR LEFT SHIFT one BY j
                END IF
            END FOR
        END FOR
        
        FUNCTION is_valid(arrangement)
            RETURN the result of arrangement BITWISE AND the result of arrangement RIGHT SHIFT one EQUALS zero
        END FUNCTION
        
        SET dp TO a list of empty dictionaries with size m
        
        FOR arrangement FROM zero TO TWO POWER n MINUS one
            IF is_valid(arrangement) AND arrangement BITWISE AND the element at position zero of broken EQUALS zero
                SET the element at position zero of dp at key arrangement TO the number of ones in the binary representation of arrangement
            END IF
        END FOR
        
        FOR index i FROM one TO m MINUS one
            FOR arrangement FROM zero TO TWO POWER n MINUS one
                IF is_valid(arrangement) AND arrangement BITWISE AND the element at position i of broken EQUALS zero
                    SET max_students TO zero
                    FOR each prev_arrangement IN the keys of the element at position i MINUS one of dp
                        IF arrangement BITWISE AND prev_arrangement RIGHT SHIFT one EQUALS zero AND arrangement BITWISE AND prev_arrangement LEFT SHIFT one EQUALS zero
                            IF the value at key prev_arrangement of the element at position i MINUS one of dp GREATER THAN max_students
                                SET max_students TO that value
                            END IF
                        END IF
                    END FOR
                    SET the element at position i of dp at key arrangement TO max_students PLUS the number of ones in the binary representation of arrangement
                END IF
            END FOR
        END FOR
        
        IF the element at position m MINUS one of dp is not empty
            RETURN the maximum value among the values of the element at position m MINUS one of dp
        ELSE
            RETURN zero
        END IF
    END FUNCTION
END CLASS