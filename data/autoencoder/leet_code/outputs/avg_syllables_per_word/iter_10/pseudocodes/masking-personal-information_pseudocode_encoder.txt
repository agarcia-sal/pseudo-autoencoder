CLASS Solution  
    FUNCTION maskPII(s)  
        IF s CONTAINS the character at symbol  
            SPLIT s INTO local PART AND domain PART USING the character at symbol  
            SET masked_local TO first character of local PLUS the character star REPEATED five TIMES PLUS last character of local  
            RETURN masked_local CONVERTED TO lowercase CONCATENATED WITH the character at symbol CONCATENATED WITH domain CONVERTED TO lowercase  
        ELSE  
            SET digits TO the concatenation of all characters IN s THAT ARE digits  
            SET local_number TO the string star star star DASH star star star DASH CONCATENATED WITH last four characters of digits  
            IF the LENGTH OF digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the LENGTH OF digits MINUS ten  
                SET country_code TO the character plus SIGN PLUS the character star REPEATED country_code_length TIMES PLUS DASH  
                RETURN country_code CONCATENATED WITH local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS