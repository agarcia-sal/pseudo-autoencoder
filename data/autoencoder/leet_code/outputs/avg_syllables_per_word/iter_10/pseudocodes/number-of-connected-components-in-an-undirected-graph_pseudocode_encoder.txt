CLASS Solution  
    FUNCTION countComponents(n, edges)  
        SET graph TO a new empty mapping from integers to empty lists  
        FOR index FROM zero TO n MINUS one  
            SET graph at position index TO empty list  
        END FOR  
        FOR each pair a and b IN edges  
            APPEND b TO the list at position a in graph  
            APPEND a TO the list at position b in graph  
        END FOR  
        SET visited TO an empty set  
        FUNCTION dfs(node)  
            IF node IS IN visited  
                RETURN  
            END IF  
            ADD node TO visited  
            FOR each neighbor IN the list at position node in graph  
                CALL dfs(neighbor)  
            END FOR  
        END FUNCTION  
        SET components TO zero  
        FOR node FROM zero TO n MINUS one  
            IF node IS NOT IN visited  
                CALL dfs(node)  
                INCREMENT components BY one  
            END IF  
        END FOR  
        RETURN components  
    END FUNCTION  
END CLASS