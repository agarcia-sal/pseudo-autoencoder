CLASS Solution  
    FUNCTION countSmaller(nums)  
        SET sorted_nums TO unique elements of nums sorted in ascending order  
        SET rank TO an empty dictionary  
        SET index TO zero  
        FOR each value IN sorted_nums  
            INCREMENT index BY one  
            SET rank at key value TO index  
        END FOR  
        
        SET bit TO a list of zeros with length equal to the LENGTH OF sorted_nums PLUS one  
        
        FUNCTION get_sum(idx)  
            SET res TO zero  
            WHILE idx GREATER THAN zero  
                INCREMENT res BY element at position idx of bit  
                SET idx TO idx MINUS the value of idx AND negative idx  
            END WHILE  
            RETURN res  
        END FUNCTION  
        
        FUNCTION update(idx, delta)  
            WHILE idx LESS THAN LENGTH OF bit  
                INCREMENT element at position idx of bit BY delta  
                SET idx TO idx PLUS the value of idx AND negative idx  
            END WHILE  
        END FUNCTION  
        
        SET counts TO an empty list  
        FOR each num IN nums iterated from last element to first element  
            SET r TO value at key num in rank  
            APPEND get_sum(r MINUS one) TO counts  
            CALL update with parameters r and one  
        END FOR  
        
        RETURN counts reversed in order  
    END FUNCTION  
END CLASS