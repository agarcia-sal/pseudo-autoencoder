CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        SET graph TO a new mapping from keys to empty lists  
        FOR each u, v IN edges  
            APPEND pair of the element at position v of scores AND v TO the list at key u of graph  
            APPEND pair of the element at position u of scores AND u TO the list at key v of graph  
        END FOR  
        
        FOR each node IN graph  
            SET the list at key node of graph TO the three pairs with the highest first elements in that list  
        END FOR  
        
        SET max_score TO negative one  
        
        FOR each u, v IN edges  
            FOR each score1, x IN the list at key u of graph  
                FOR each score2, y IN the list at key v of graph  
                    IF the number of distinct elements in the set containing x, y, u, and v EQUALS four  
                        SET current_score TO score1 PLUS score2 PLUS the element at position u of scores PLUS the element at position v of scores  
                        IF current_score GREATER THAN max_score  
                            SET max_score TO current_score  
                        END IF  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        
        RETURN max_score  
    END FUNCTION  
END CLASS