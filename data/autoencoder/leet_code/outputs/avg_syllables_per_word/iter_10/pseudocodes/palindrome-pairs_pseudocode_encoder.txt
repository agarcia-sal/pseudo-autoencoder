CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the reverse of s  
        END FUNCTION  
        
        SET word_dict TO empty dictionary mapping word TO index  
        FOR each i FROM zero TO the LENGTH OF words MINUS one  
            SET word TO element at position i of words  
            SET word_dict at key word TO i  
        END FOR  
        
        SET result TO empty list  
        
        FOR each i FROM zero TO the LENGTH OF words MINUS one  
            SET word TO element at position i of words  
            IF word IS empty string THEN  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string IS in word_dict AND is_palindrome(word) THEN  
                APPEND list consisting of i and word_dict at key empty string TO result  
                APPEND list consisting of word_dict at key empty string and i TO result  
            END IF  
            
            SET reversed_word TO the reverse of word  
            IF reversed_word IS in word_dict AND word_dict at key reversed_word NOT EQUALS i THEN  
                APPEND list consisting of i and word_dict at key reversed_word TO result  
            END IF  
            
            FOR each j FROM one TO the LENGTH OF word MINUS one  
                SET prefix TO substring of word FROM zero TO j MINUS one  
                SET suffix TO substring of word FROM j TO end  
                SET reversed_prefix TO the reverse of prefix  
                SET reversed_suffix TO the reverse of suffix  
                
                IF is_palindrome(suffix) AND reversed_prefix IS in word_dict THEN  
                    APPEND list consisting of i and word_dict at key reversed_prefix TO result  
                END IF  
                
                IF is_palindrome(prefix) AND reversed_suffix IS in word_dict THEN  
                    APPEND list consisting of word_dict at key reversed_suffix and i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS