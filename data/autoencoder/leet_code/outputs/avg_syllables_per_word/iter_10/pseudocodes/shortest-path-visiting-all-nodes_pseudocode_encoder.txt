CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph EQUALS empty  
            RETURN zero  
        END IF  
          
        SET n TO the LENGTH OF graph  
        SET queue TO empty double-ended queue  
        FOR node FROM zero TO n MINUS one  
            APPEND the pair of node AND one SHIFTED LEFT BY node TO queue  
        END FOR  
          
        SET visited TO empty set  
        FOR node FROM zero TO n MINUS one  
            ADD the pair of node AND one SHIFTED LEFT BY node TO visited  
        END FOR  
          
        SET steps TO zero  
        SET all_nodes_visited TO one SHIFTED LEFT BY n MINUS one  
          
        WHILE queue IS NOT empty  
            SET current_level_length TO LENGTH OF queue  
            FOR index FROM zero TO current_level_length MINUS one  
                REMOVE first element FROM queue AND SET TO current_node AND visited_nodes  
                  
                IF visited_nodes EQUALS all_nodes_visited  
                    RETURN steps  
                END IF  
                  
                FOR each neighbor IN element at position current_node OF graph  
                    SET next_visited_nodes TO visited_nodes OR one SHIFTED LEFT BY neighbor  
                    SET next_state TO the pair of neighbor AND next_visited_nodes  
                      
                    IF next_state NOT IN visited  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
              
            INCREMENT steps BY one  
        END WHILE  
          
        RETURN minus one  
    END FUNCTION  
END CLASS