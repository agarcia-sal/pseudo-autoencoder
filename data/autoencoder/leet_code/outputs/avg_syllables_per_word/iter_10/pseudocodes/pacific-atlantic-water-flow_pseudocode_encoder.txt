CLASS Solution  
    FUNCTION pacificAtlantic(heights)  
        FUNCTION bfs(q, vis)  
            WHILE the LENGTH OF q IS GREATER THAN zero  
                FOR each index FROM zero TO LENGTH OF q MINUS one  
                    SET i, j TO the first element FROM q  
                    REMOVE first element FROM q  
                    FOR each pair a, b IN the list consisting OF zero MINUS one, zero PLUS one, one zero, MINUS one zero  
                        SET x TO i PLUS a  
                        SET y TO j PLUS b  
                        IF x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND the tuple of x, y IS NOT IN vis AND the element at position x OF heights AT position y IS GREATER THAN OR EQUAL TO the element at position i OF heights AT position j THEN  
                            ADD the tuple of x, y TO vis  
                            APPEND the tuple of x, y TO q  
                        END IF  
                    END FOR  
                END FOR  
            END WHILE  
        END FUNCTION  
        
        SET m TO the LENGTH OF heights  
        SET n TO the LENGTH OF the element at position zero OF heights  
        SET vis1 TO an empty set  
        SET vis2 TO an empty set  
        SET q1 TO an empty deque  
        SET q2 TO an empty deque  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF i EQUALS zero OR j EQUALS zero THEN  
                    ADD the tuple of i, j TO vis1  
                    APPEND the tuple of i, j TO q1  
                END IF  
                IF i EQUALS m MINUS one OR j EQUALS n MINUS one THEN  
                    ADD the tuple of i, j TO vis2  
                    APPEND the tuple of i, j TO q2  
                END IF  
            END FOR  
        END FOR  
        CALL bfs WITH q1, vis1  
        CALL bfs WITH q2, vis2  
        SET result TO an empty list  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF the tuple of i, j IS IN vis1 AND the tuple of i, j IS IN vis2 THEN  
                    APPEND the tuple of i, j TO result  
                END IF  
            END FOR  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS