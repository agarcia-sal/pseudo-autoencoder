CLASS Solution  
    FUNCTION trap(height)  
        IF the LENGTH OF height EQUALS zero  
            RETURN zero  
        END IF  

        SET n TO the LENGTH OF height  
        CALL initialize_list WITH parameters zero and n, SET TO left_max  
        CALL initialize_list WITH parameters zero and n, SET TO right_max  

        SET element at position zero of left_max TO element at position zero of height  
        FOR i FROM one TO n MINUS one  
            SET element at position i of left_max TO the GREATER OF element at position i MINUS one of left_max AND element at position i of height  
        END FOR  

        SET element at position n MINUS one of right_max TO element at position n MINUS one of height  
        FOR i FROM n MINUS two DOWNTO zero  
            SET element at position i of right_max TO the GREATER OF element at position i PLUS one of right_max AND element at position i of height  
        END FOR  

        SET trapped_water TO zero  
        FOR i FROM zero TO n MINUS one  
            INCREMENT trapped_water BY the SMALLER OF element at position i of left_max AND element at position i of right_max MINUS element at position i of height  
        END FOR  

        RETURN trapped_water  
    END FUNCTION  

    FUNCTION initialize_list(value, length)  
        CREATE a new list with length elements each SET TO value  
        RETURN the new list  
    END FUNCTION  
END CLASS