CLASS Solution  
    FUNCTION checkWays(pairs)  
        SET graph TO a new defaultdict of sets  
        FOR each element pair consisting of x and y IN pairs  
            APPEND y TO the set associated with x in graph  
            APPEND x TO the set associated with y in graph  
        END FOR  
        
        SET max_degree TO the element in graph with maximum number of neighbors  
        SET n TO the number of elements in graph  
        
        IF the number of neighbors of max_degree NOT EQUALS n MINUS one  
            RETURN zero  
        END IF  
        
        FUNCTION can_be_parent(u, v)  
            RETURN true IF for every neighbor of element v it is true that the neighbor is in the set associated with u in graph OR the neighbor EQUALS u  
            OTHERWISE RETURN false  
        END FUNCTION  
        
        SET ways TO one  
        
        FOR each element u IN graph  
            IF u EQUALS max_degree  
                CONTINUE to next iteration  
            END IF  
            
            SET parent TO none  
            FOR each element v IN the set associated with u in graph  
                IF v is in graph AND the number of neighbors of v GREATER THAN OR EQUAL TO the number of neighbors of u AND can_be_parent of v and u RETURNS true  
                    IF parent is none OR the number of neighbors of v LESS THAN the number of neighbors of parent  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  
            
            IF parent is none  
                RETURN zero  
            END IF  
            
            IF the number of neighbors of parent EQUALS the number of neighbors of u  
                SET ways TO two  
            END IF  
        END FOR  
        
        RETURN ways  
    END FUNCTION  
END CLASS