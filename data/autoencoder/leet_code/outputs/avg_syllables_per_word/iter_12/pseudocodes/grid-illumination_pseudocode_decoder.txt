CLASS Solution  
    FUNCTION gridIllumination(n, lamps, queries)  
        SET row_count TO a default dictionary with integer default value  
        SET col_count TO a default dictionary with integer default value  
        SET diag_count TO a default dictionary with integer default value  
        SET anti_diag_count TO a default dictionary with integer default value  
          
        SET lamp_positions TO an empty set  
          
        FOR each r, c IN lamps  
            IF the pair of r and c is NOT IN lamp_positions  
                ADD the pair of r and c TO lamp_positions  
                INCREMENT the value at key r in row_count BY one  
                INCREMENT the value at key c in col_count BY one  
                INCREMENT the value at key r MINUS c in diag_count BY one  
                INCREMENT the value at key r PLUS c in anti_diag_count BY one  
            END IF  
        END FOR  
          
        SET directions TO the list of pairs: one MINUS one, one zero, one one, zero MINUS one, zero zero, zero one, one MINUS one, one zero, one one  
          
        SET result TO an empty list  
          
        FOR each r, c IN queries  
            IF the value at key r in row_count GREATER THAN zero OR the value at key c in col_count GREATER THAN zero OR the value at key r MINUS c in diag_count GREATER THAN zero OR the value at key r PLUS c in anti_diag_count GREATER THAN zero  
                APPEND one TO result  
            ELSE  
                APPEND zero TO result  
            END IF  
              
            FOR each dr, dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF the pair of nr and nc IS IN lamp_positions  
                    REMOVE the pair of nr and nc FROM lamp_positions  
                    DECREMENT the value at key nr in row_count BY one  
                    DECREMENT the value at key nc in col_count BY one  
                    DECREMENT the value at key nr MINUS nc in diag_count BY one  
                    DECREMENT the value at key nr PLUS nc in anti_diag_count BY one  
                END IF  
            END FOR  
        END FOR  
          
        RETURN result  
    END FUNCTION  
END CLASS