CLASS Solution  
    FUNCTION maxCandies(status, candies, keys, containedBoxes, initialBoxes)  
        SET boxes_we_have TO new empty set  
        FOR each box IN initialBoxes  
            ADD box TO boxes_we_have  
        END FOR  
        SET keys_we_have TO new empty set  
        SET total_candies TO zero  
        SET progress_made TO true  
        WHILE progress_made EQUALS true  
            SET progress_made TO false  
            FOR each box IN a new list created from all elements of boxes_we_have  
                IF element at position box of status EQUALS one OR box IS IN keys_we_have  
                    INCREMENT total_candies BY element at position box of candies  
                    FOR each key IN element at position box of keys  
                        ADD key TO keys_we_have  
                    END FOR  
                    FOR each contained_box IN element at position box of containedBoxes  
                        ADD contained_box TO boxes_we_have  
                    END FOR  
                    REMOVE box FROM boxes_we_have  
                    SET progress_made TO true  
                END IF  
            END FOR  
        END WHILE  
        RETURN total_candies  
    END FUNCTION  
END CLASS