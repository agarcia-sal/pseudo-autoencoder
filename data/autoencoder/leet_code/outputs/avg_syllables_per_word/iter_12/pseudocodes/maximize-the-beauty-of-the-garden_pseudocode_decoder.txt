CLASS Solution  
    FUNCTION maximumBeauty(flowers)  
        SET indices TO dictionary with default value as empty list  
        SET prefix_sum TO list of zeros with length equal to the length of flowers PLUS one  
        FOR index FROM zero TO length of flowers MINUS one  
            SET element_at_index_of_prefix_sum TO element at index of prefix_sum PLUS one  
            SET element_at_index_of_prefix_sum TO element at index of prefix_sum PLUS maximum of element at index of flowers AND zero  
            APPEND index TO list at key element at index of flowers in indices  
        END FOR  
        SET max_beauty TO negative infinity  
        FOR each beauty IN keys of indices  
            IF length of list at key beauty in indices GREATER THAN OR EQUAL TO two  
                SET first TO element at position zero of list at key beauty in indices  
                SET last TO element at last position of list at key beauty in indices  
                SET current_beauty TO two MULTIPLIED BY beauty PLUS element at position last of prefix_sum MINUS element at position first PLUS one of prefix_sum  
                SET max_beauty TO maximum of max_beauty AND current_beauty  
            END IF  
        END FOR  
        RETURN max_beauty  
    END FUNCTION  
END CLASS