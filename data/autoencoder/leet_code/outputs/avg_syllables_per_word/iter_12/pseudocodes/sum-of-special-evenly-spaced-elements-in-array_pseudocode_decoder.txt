CLASS Solution  
    FUNCTION solve(nums, queries)  
        SET MOD TO one billion PLUS seven  
        SET n TO the LENGTH OF nums  
        
        SET max_y TO the MAXIMUM y where y is the second element IN each pair OF queries  
        FUNCTION initialize_prefix_sums(max_y, n)  
            SET list_of_lists TO empty list  
            FOR y FROM zero TO max_y  
                SET list_of_zeros TO list containing zero repeated n times  
                APPEND list_of_zeros TO list_of_lists  
            END FOR  
            RETURN list_of_lists  
        END FUNCTION  
        
        SET prefix_sums TO initialize_prefix_sums(max_y, n)  
        
        FOR y FROM one TO max_y  
            FOR i FROM n MINUS one DOWN TO zero  
                IF i PLUS y LESS THAN n  
                    SET element at position i OF prefix_sums at position y TO element at position i OF nums PLUS element at position i PLUS y OF prefix_sums at position y  
                ELSE  
                    SET element at position i OF prefix_sums at position y TO element at position i OF nums  
                END IF  
            END FOR  
        END FOR  
        
        SET answer TO empty list  
        FOR each pair x and y IN queries  
            SET result TO element at position x OF prefix_sums at position y  
            SET modulo_result TO result MODULO MOD  
            APPEND modulo_result TO answer  
        END FOR  
        
        RETURN answer  
    END FUNCTION  
END CLASS