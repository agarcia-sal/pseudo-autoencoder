CLASS Solution
    FUNCTION areSentencesSimilarTwo(sentence1, sentence2, similarPairs)
        IF the LENGTH OF sentence1 NOT EQUALS the LENGTH OF sentence2
            RETURN False
        END IF

        SET parent TO an empty mapping

        FUNCTION find(x)
            IF the element at key x of parent NOT EQUALS x
                SET the element at key x of parent TO find(the element at key x of parent)
            END IF
            RETURN the element at key x of parent
        END FUNCTION

        FUNCTION union(x, y)
            SET rootX TO find(x)
            SET rootY TO find(y)
            IF rootX NOT EQUALS rootY
                SET the element at key rootY of parent TO rootX
            END IF
        END FUNCTION

        FOR each pair IN similarPairs
            FOR each word IN pair
                IF word NOT IN parent
                    SET the element at key word of parent TO word
                END IF
            END FOR
        END FOR

        FOR each pair consisting of elements x and y IN similarPairs
            union(x, y)
        END FOR

        FOR each pair consisting of elements w1 and w2 IN the paired elements of sentence1 and sentence2
            IF w1 NOT IN parent
                SET the element at key w1 of parent TO w1
            END IF
            IF w2 NOT IN parent
                SET the element at key w2 of parent TO w2
            END IF
            IF find(w1) NOT EQUALS find(w2)
                RETURN False
            END IF
        END FOR

        RETURN True
    END FUNCTION
END CLASS