CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new Counter collection  
        SET freq TO a new Counter collection  
        SET max_len TO zero  
        
        FOR each i FROM zero TO the LENGTH OF nums MINUS one  
            SET num TO element at position i of nums  
            INCREMENT the count at position num BY one  
            
            IF the count at position num IS GREATER THAN one  
                DECREMENT the frequency at position (the count at position num MINUS one) BY one  
                IF the frequency at position (the count at position num MINUS one) EQUALS zero  
                    REMOVE the frequency at position (the count at position num MINUS one)  
                END IF  
            END IF  
            
            INCREMENT the frequency at position (the count at position num) BY one  
            
            IF the LENGTH OF freq EQUALS one AND (the frequency at position one EXISTS OR the first value in freq EQUALS one)  
                SET max_len TO i PLUS one  
            ELSE IF the LENGTH OF freq EQUALS two AND ((the frequency at position one EXISTS AND the frequency at position one EQUALS one) OR (the maximum key in freq MINUS the minimum key in freq EQUALS one AND the frequency at the maximum key in freq EQUALS one))  
                SET max_len TO i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS