CLASS Solution
    FUNCTION reachableNodes(edges, maxMoves, n)
        SET graph TO empty mapping from integer to empty list
        FOR index FROM zero TO n MINUS one
            SET graph at position index TO empty list
        END FOR

        FOR each triple element u, v, cnt IN edges
            APPEND pair of element v and element cnt TO list at graph position u
            APPEND pair of element u and element cnt TO list at graph position v
        END FOR

        SET distances TO list of length n with each element set TO infinity
        SET element at position zero of distances TO zero
        SET priority_queue TO list containing pair of zero and zero

        WHILE priority_queue is not empty
            REMOVE first element FROM priority_queue and unpack TO dist and node
            IF dist GREATER THAN element at position node of distances
                CONTINUE with next iteration
            END IF
            FOR each pair neighbor and cnt IN list at graph position node
                SET new_dist TO dist PLUS cnt PLUS one
                IF new_dist LESS THAN element at position neighbor of distances
                    SET element at position neighbor of distances TO new_dist
                    APPEND pair of new_dist and neighbor TO priority_queue
                END IF
            END FOR
        END WHILE

        SET reachable_nodes TO zero

        FOR each element d IN distances
            IF d LESS THAN OR EQUAL TO maxMoves
                INCREMENT reachable_nodes BY one
            END IF
        END FOR

        SET used_edges TO empty mapping

        FOR each triple element u, v, cnt IN edges
            SET moves_u TO maximum of zero and maxMoves MINUS element at position u of distances
            SET moves_v TO maximum of zero and maxMoves MINUS element at position v of distances
            SET reachable_new_nodes TO minimum of cnt and moves_u PLUS moves_v
            INCREMENT reachable_nodes BY reachable_new_nodes

            SET element at key pair u and v of used_edges TO reachable_new_nodes
        END FOR

        RETURN reachable_nodes
    END FUNCTION
END CLASS