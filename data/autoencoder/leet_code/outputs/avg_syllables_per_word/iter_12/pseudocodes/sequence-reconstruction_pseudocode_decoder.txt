CLASS Solution
    FUNCTION sequenceReconstruction(nums, sequences)
        SET n TO the LENGTH OF nums
        SET graph TO an empty map from element to list
        SET indegree TO a list of zero repeated n PLUS one times
        
        FOR each seq IN sequences
            FOR index FROM zero TO the LENGTH OF seq MINUS one MINUS one
                SET u TO element at position index of seq
                SET v TO element at position index PLUS one of seq
                APPEND v TO the list at graph at u
                INCREMENT element at position v of indegree BY one
            END FOR
        END FOR
        
        SET queue TO an empty double-ended queue
        FOR i FROM one TO n
            IF element at position i of indegree EQUALS zero
                APPEND i TO queue
            END IF
        END FOR
        
        IF the LENGTH OF queue NOT EQUALS one
            RETURN False
        END IF
        
        SET index TO zero
        WHILE queue is not empty
            IF the LENGTH OF queue NOT EQUALS one
                RETURN False
            END IF
            
            REMOVE first element FROM queue AND SET TO node
            IF node NOT EQUALS element at position index of nums
                RETURN False
            END IF
            INCREMENT index BY one
            
            FOR each neighbor IN the list at graph at node
                DECREMENT element at position neighbor of indegree BY one
                IF element at position neighbor of indegree EQUALS zero
                    APPEND neighbor TO queue
                END IF
            END FOR
        END WHILE
        
        RETURN index EQUALS n
    END FUNCTION
END CLASS