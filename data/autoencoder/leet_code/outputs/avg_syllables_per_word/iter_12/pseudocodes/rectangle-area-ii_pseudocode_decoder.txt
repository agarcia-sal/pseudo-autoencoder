CLASS Solution  
    FUNCTION rectangleArea(rectangles)  
        SET MOD TO one billion PLUS seven  
        
        SET y_coords TO an empty set  
        FOR each rectangle WHERE x1, y1, x2, y2 ARE elements of rectangle IN rectangles  
            ADD y1 TO y_coords  
            ADD y2 TO y_coords  
        END FOR  
        
        SET y_coords TO sorted list of elements in y_coords  
        SET y_index TO an empty dictionary  
        FOR each element y AND index i IN y_coords with their positions  
            SET y_index AT key y TO i  
        END FOR  
        
        SET count TO a list of zeros with LENGTH EQUAL TO LENGTH OF y_coords  
        
        SET events TO an empty list  
        FOR each rectangle WHERE x1, y1, x2, y2 ARE elements of rectangle IN rectangles  
            APPEND tuple of x1, one, y1, y2 TO events  
            APPEND tuple of x2, negative one, y1, y2 TO events  
        END FOR  
        
        SORT events BY the first element of each tuple (x-coordinate ascending)  
        
        SET prev_x TO zero  
        SET area TO zero  
        
        FOR each event WHERE x, eventType, y1, y2 ARE elements of event IN events  
            SET current_length TO zero  
            FOR index i FROM one TO LENGTH OF count MINUS one  
                IF element at position i MINUS one of count IS GREATER THAN zero  
                    INCREMENT current_length BY element at position i of y_coords MINUS element at position i MINUS one of y_coords  
                END IF  
            END FOR  
            
            INCREMENT area BY current_length MULTIPLIED BY (x MINUS prev_x)  
            SET area TO area MODULO MOD  
            
            IF eventType EQUALS one  
                FOR index i FROM y_index AT key y1 TO y_index AT key y2 MINUS one  
                    INCREMENT element at position i of count BY one  
                END FOR  
            ELSE  
                FOR index i FROM y_index AT key y1 TO y_index AT key y2 MINUS one  
                    DECREMENT element at position i of count BY one  
                END FOR  
            END IF  
            
            SET prev_x TO x  
        END FOR  
        
        RETURN area  
    END FUNCTION  
END CLASS