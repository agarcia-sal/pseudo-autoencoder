CLASS Solution
    FUNCTION numSimilarGroups(strs)
        FUNCTION are_similar(s1, s2)
            SET diff TO empty list
            FOR index FROM zero TO LENGTH OF s1 MINUS one
                IF element at position index of s1 NOT EQUALS element at position index of s2
                    APPEND index TO diff
                END IF
            END FOR
            IF LENGTH OF diff EQUALS zero OR (LENGTH OF diff EQUALS two AND element at position element at position zero of diff of s1 EQUALS element at position element at position one of diff of s2 AND element at position element at position one of diff of s1 EQUALS element at position element at position zero of diff of s2)
                RETURN true
            ELSE
                RETURN false
            END IF
        END FUNCTION

        FUNCTION dfs(node, visited)
            CALL visited.add WITH node
            FOR each neighbor IN element at position node of graph
                IF neighbor NOT IN visited
                    CALL dfs WITH neighbor AND visited
                END IF
            END FOR
        END FUNCTION

        SET n TO LENGTH OF strs
        SET graph TO empty dictionary
        FOR index FROM zero TO n MINUS one
            SET element at position index of graph TO empty list
        END FOR

        FOR i FROM zero TO n MINUS one
            FOR j FROM i PLUS one TO n MINUS one
                IF CALL are_similar WITH element at position i of strs AND element at position j of strs
                    APPEND j TO element at position i of graph
                    APPEND i TO element at position j of graph
                END IF
            END FOR
        END FOR

        SET visited TO empty set
        SET num_groups TO zero

        FOR i FROM zero TO n MINUS one
            IF i NOT IN visited
                CALL dfs WITH i AND visited
                INCREMENT num_groups BY one
            END IF
        END FOR

        RETURN num_groups
    END FUNCTION
END CLASS