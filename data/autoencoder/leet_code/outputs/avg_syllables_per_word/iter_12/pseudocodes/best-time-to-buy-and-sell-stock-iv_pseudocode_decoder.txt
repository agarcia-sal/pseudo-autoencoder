CLASS Solution  
    FUNCTION maxProfit(k, prices)  
        IF prices EQUALS empty OR k EQUALS zero  
            RETURN zero  
        END IF  
        
        SET n TO the LENGTH OF prices  
        
        IF k GREATER THAN OR EQUAL TO n DIVIDED BY two  
            SET profit TO zero  
            FOR i FROM one TO n MINUS one  
                IF element at position i of prices GREATER THAN element at position (i MINUS one) of prices  
                    SET profit TO profit PLUS (element at position i of prices MINUS element at position (i MINUS one) of prices)  
                END IF  
            END FOR  
            RETURN profit  
        END IF  
        
        SET hold TO a list of length (k PLUS one) WITH all elements SET TO negative infinity  
        SET release TO a list of length (k PLUS one) WITH all elements SET TO zero  
        
        FOR each price IN prices  
            FOR i FROM one TO k  
                SET hold at position i TO the GREATER OF hold at position i AND (release at position (i MINUS one) MINUS price)  
                SET release at position i TO the GREATER OF release at position i AND (hold at position i PLUS price)  
            END FOR  
        END FOR  
        
        RETURN release at position k  
    END FUNCTION  
END CLASS