CLASS Solution  
    FUNCTION superpalindromesInRange(left, right)  
        FUNCTION is_palindrome(num)  
            RETURN the string representation of num EQUALS the reverse of the string representation of num  
        END FUNCTION  
        
        FUNCTION generate_palindromes(limit)  
            SET palindromes TO empty list  
            FOR i FROM one TO ninety nine thousand nine hundred ninety nine  
                SET s TO the string representation of i  
                APPEND the integer represented by concatenating s AND the reverse of the substring of s from second last character TO first character TO palindromes  
                APPEND the integer represented by concatenating s AND the reverse of s TO palindromes  
            END FOR  
            RETURN the list of elements p IN palindromes WHERE p IS LESS THAN OR EQUAL TO limit  
        END FUNCTION  
        
        SET left TO the integer representation of left  
        SET right TO the integer representation of right  
        SET limit TO the integer value of the square root of right PLUS one  
        SET palindromes TO the result of generate_palindromes WITH limit  
        
        SET count TO zero  
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF left IS LESS THAN OR EQUAL TO square AND square IS LESS THAN OR EQUAL TO right AND is_palindrome WITH square RETURNS true  
                INCREMENT count BY one  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS