CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO an empty mapping from number to position  
        FOR each position i FROM zero TO length of arr MINUS one  
            SET element x TO element at position i of arr  
            SET mapping of x TO i in index  
        END FOR  
        
        SET dp TO an empty mapping from pair of positions to length  
        SET max_length TO zero  
        
        FOR each position k FROM zero TO length of arr MINUS one  
            FOR each position j FROM zero TO k MINUS one  
                SET required_element TO element at position k of arr MINUS element at position j of arr  
                SET i TO value corresponding to required_element in index IF EXISTS OTHERWISE negative one  
                IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN j  
                    SET current_length TO value at key (i, j) in dp IF EXISTS OTHERWISE two  
                    SET dp at key (j, k) TO current_length PLUS one  
                    IF dp at key (j, k) IS GREATER THAN max_length  
                        SET max_length TO dp at key (j, k)  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        
        IF max_length IS GREATER THAN OR EQUAL TO three  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS