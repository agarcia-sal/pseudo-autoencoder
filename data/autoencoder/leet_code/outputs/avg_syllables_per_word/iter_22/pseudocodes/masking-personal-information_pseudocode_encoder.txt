CLASS Solution  
    FUNCTION maskPII(s)  
        IF the string s CONTAINS the character at symbol  
            SET local TO the substring of s BEFORE the character at symbol  
            SET domain TO the substring of s AFTER the character at symbol  
            SET masked_local TO the first character of local PLUS the character star repeated five times PLUS the last character of local  
            RETURN the concatenation of the lowercase of masked_local PLUS the character at symbol PLUS the lowercase of domain  
        ELSE  
            SET digits TO the string constructed by concatenating each character in s for which the character is a digit  
            SET local_number TO the concatenation of the characters star repeated three times PLUS the character hyphen PLUS the characters star repeated three times PLUS the character hyphen PLUS the last four characters of digits  
            IF the length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the length of digits MINUS ten  
                SET country_code TO the character plus sign PLUS the character star repeated country_code_length times PLUS the character hyphen  
                RETURN the concatenation of country_code PLUS local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS