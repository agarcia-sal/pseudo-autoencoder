CLASS Solution  
    FUNCTION maxProfit(prices)  
        IF the collection prices EQUALS empty  
            RETURN zero  
        END IF  
        SET min_price1 TO infinity  
        SET min_price2 TO infinity  
        SET max_profit1 TO zero  
        SET max_profit2 TO zero  
        FOR each element price IN the collection prices  
            IF min_price1 LESS THAN price  
                SET min_price1 TO min_price1  
            ELSE  
                SET min_price1 TO price  
            END IF  
            IF max_profit1 GREATER THAN price MINUS min_price1  
                SET max_profit1 TO max_profit1  
            ELSE  
                SET max_profit1 TO price MINUS min_price1  
            END IF  
            IF min_price2 LESS THAN price MINUS max_profit1  
                SET min_price2 TO min_price2  
            ELSE  
                SET min_price2 TO price MINUS max_profit1  
            END IF  
            IF max_profit2 GREATER THAN price MINUS min_price2  
                SET max_profit2 TO max_profit2  
            ELSE  
                SET max_profit2 TO price MINUS min_price2  
            END IF  
        END FOR  
        RETURN max_profit2  
    END FUNCTION  
END CLASS