CLASS Solution  
    FUNCTION trapRainWater(heightMap)  
        IF heightMap EQUALS empty OR element at position zero of heightMap EQUALS empty THEN  
            RETURN zero  
        END IF  
        
        SET m TO the LENGTH OF heightMap  
        SET n TO the LENGTH OF element at position zero of heightMap  
        SET visited TO a new list containing m elements each being a new list of n elements each set to False  
        SET min_heap TO an empty list  
        
        FOR i FROM zero TO m MINUS one  
            CALL function to push element at position i position zero of heightMap height along with i and zero INTO min_heap  
            CALL function to push element at position i position n MINUS one of heightMap height along with i and n MINUS one INTO min_heap  
            SET element at position i position zero of visited TO True  
            SET element at position i position n MINUS one of visited TO True  
        END FOR  
        
        FOR j FROM zero TO n MINUS one  
            CALL function to push element at position zero position j of heightMap height along with zero and j INTO min_heap  
            CALL function to push element at position m MINUS one position j of heightMap height along with m MINUS one and j INTO min_heap  
            SET element at position zero position j of visited TO True  
            SET element at position m MINUS one position j of visited TO True  
        END FOR  
        
        SET directions TO a new list containing the pairs of minus one and zero one and zero zero and minus one zero and one  
        SET water_trapped TO zero  
        
        WHILE min_heap HOLDS elements  
            SET height x y TO result of function to pop smallest element from min_heap  
            
            FOR each dx dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                
                IF nx GREATER THAN OR EQUAL TO zero AND nx LESS THAN m AND ny GREATER THAN OR EQUAL TO zero AND ny LESS THAN n AND element at position nx position ny of visited EQUALS False THEN  
                    SET element at position nx position ny of visited TO True  
                    INCREMENT water_trapped BY the maximum between zero AND height MINUS element at position nx position ny of heightMap  
                    CALL function to push maximum between height AND element at position nx position ny of heightMap along with nx and ny INTO min_heap  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN water_trapped  
    END FUNCTION  
END CLASS