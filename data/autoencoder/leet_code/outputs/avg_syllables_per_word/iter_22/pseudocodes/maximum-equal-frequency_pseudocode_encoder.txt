CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new empty frequency counter  
        SET freq TO a new empty frequency counter  
        SET max_len TO zero  
        
        FOR index FROM zero TO the LENGTH OF nums MINUS one  
            SET num TO element at position index of nums  
            INCREMENT the frequency count of num in count BY one  
            
            IF the frequency count of num in count GREATER THAN one  
                DECREMENT the frequency count of the frequency count of num in count MINUS one in freq BY one  
                IF the frequency count of the frequency count of num in count MINUS one in freq EQUALS zero  
                    REMOVE the frequency count of num in count MINUS one FROM freq  
                END IF  
            END IF  
            
            INCREMENT the frequency count of the frequency count of num in count in freq BY one  
            
            IF the number of distinct keys in freq EQUALS one AND (freq CONTAINS the key one OR the single value in freq EQUALS one)  
                SET max_len TO index PLUS one  
            ELSE IF the number of distinct keys in freq EQUALS two AND ((freq CONTAINS the key one AND the frequency count for key one in freq EQUALS one) OR ((maximum key in freq MINUS minimum key in freq) EQUALS one AND the frequency count for the maximum key in freq EQUALS one))  
                SET max_len TO index PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS