CLASS Solution  
    FUNCTION ways(pizza, k)  
        FUNCTION dfs(i, j, k)  
            IF k EQUALS zero  
                RETURN whether the number of apples in the rectangle from row i to the last row and from column j to the last column IS GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR x FROM i PLUS one TO m MINUS one  
                IF the number of apples in the rectangle from row x to the last row and from column j to the last column IS GREATER THAN zero  
                    INCREMENT ans BY dfs with parameters x j and k MINUS one  
                END IF  
            END FOR  
            FOR y FROM j PLUS one TO n MINUS one  
                IF the number of apples in the rectangle from row i to the last row and from column y to the last column IS GREATER THAN zero  
                    INCREMENT ans BY dfs with parameters i y and k MINUS one  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  
        
        SET mod TO one billion PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF element at position zero of pizza  
        
        INITIALIZE s AS a two dimensional list with m PLUS one rows and n PLUS one columns FILLED WITH zero  
        
        FOR each row index i and row in pizza STARTING FROM one  
            FOR each column index j and character c in row STARTING FROM one  
                SET element at position i j of s TO element at position (i MINUS one) j of s PLUS element at position i (j MINUS one) of s MINUS element at position (i MINUS one) (j MINUS one) of s PLUS one IF c EQUALS character A OTHERWISE zero  
            END FOR  
        END FOR  
        
        RETURN dfs with parameters zero zero and k MINUS one  
    END FUNCTION  
END CLASS