CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET length TO the LENGTH OF n  
        IF length EQUALS one  
            SET result_string TO the STRING REPRESENTATION OF the INTEGER VALUE OF n MINUS one  
            RETURN result_string  
        END IF  
        
        SET candidates TO an EMPTY SET  
        
        ADD the INTEGER VALUE OF ten RAISED TO THE POWER OF length PLUS one TO candidates  
        ADD the INTEGER VALUE OF ten RAISED TO THE POWER OF length MINUS one MINUS one TO candidates  
        
        SET prefix TO the INTEGER VALUE OF the SUBSTRING of n FROM position zero TO the INTEGER VALUE OF the INTEGER DIVISION OF length PLUS one BY two  
        
        FOR i FROM negative one TO positive one  
            SET new_prefix TO the STRING REPRESENTATION OF prefix PLUS i  
            
            IF the MODULO of length BY two EQUALS zero  
                SET candidate_string TO new_prefix CONCATENATED WITH the REVERSED STRING OF new_prefix  
            ELSE  
                SET candidate_string TO new_prefix CONCATENATED WITH the REVERSED STRING OF the SUBSTRING of new_prefix FROM the SECOND LAST CHARACTER TO the FIRST CHARACTER IN REVERSE ORDER  
            END IF  
            
            ADD the INTEGER VALUE OF candidate_string TO candidates  
        END FOR  
        
        SET original_number TO the INTEGER VALUE OF n  
        REMOVE original_number FROM candidates IF PRESENT  
        
        SET closest TO the ELEMENT IN candidates WITH the MINIMUM VALUE OF the TUPLE OF the ABSOLUTE VALUE OF the ELEMENT MINUS original_number AND the ELEMENT ITSELF  
        
        SET result_string TO the STRING REPRESENTATION OF closest  
        RETURN result_string  
    END FUNCTION  
END CLASS