CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS the reverse of s  
        END FUNCTION  
        
        CREATE word_dict AS an empty mapping from word TO index  
        FOR index FROM zero TO the LENGTH OF words MINUS one  
            SET word_dict[element at position index of words] TO index  
        END FOR  
        
        CREATE result AS an empty list  
        
        FOR i FROM zero TO the LENGTH OF words MINUS one  
            SET word TO element at position i of words  
            
            IF word NOT EQUALS empty string  
                
                IF the empty string EXISTS AS a key IN word_dict AND is_palindrome(word)  
                    APPEND the list containing i AND the element at the key empty string of word_dict TO result  
                    APPEND the list containing the element at the key empty string of word_dict AND i TO result  
                END IF  
                
                SET reversed_word TO the reverse of word  
                IF reversed_word EXISTS AS a key IN word_dict AND the element at the key reversed_word of word_dict NOT EQUALS i  
                    APPEND the list containing i AND the element at the key reversed_word of word_dict TO result  
                END IF  
                
                FOR j FROM one TO the LENGTH OF word MINUS one  
                    SET prefix TO the substring from position zero TO position j MINUS one of word  
                    SET suffix TO the substring from position j TO the end of word  
                    SET reversed_prefix TO the reverse of prefix  
                    SET reversed_suffix TO the reverse of suffix  
                    
                    IF is_palindrome(suffix) AND reversed_prefix EXISTS AS a key IN word_dict  
                        APPEND the list containing i AND the element at the key reversed_prefix of word_dict TO result  
                    END IF  
                    
                    IF is_palindrome(prefix) AND reversed_suffix EXISTS AS a key IN word_dict  
                        APPEND the list containing the element at the key reversed_suffix of word_dict AND i TO result  
                    END IF  
                END FOR  
            END IF  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS