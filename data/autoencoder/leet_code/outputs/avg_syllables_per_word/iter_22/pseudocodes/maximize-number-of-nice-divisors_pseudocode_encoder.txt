CLASS Solution  
    FUNCTION maxNiceDivisors WITH PARAMETER primeFactors  
        SET MOD TO one billion PLUS seven  
        IF primeFactors LESS THAN OR EQUAL TO three  
            RETURN primeFactors  
        END IF  
        SET num_threes TO integer division of primeFactors BY three  
        SET remainder TO modulo of primeFactors BY three  
        IF remainder EQUALS zero  
            RETURN three RAISED TO THE POWER num_threes MODULO MOD  
        ELSE IF remainder EQUALS one  
            RETURN three RAISED TO THE POWER num_threes MINUS one MODULO MOD MULTIPLIED BY four MODULO MOD  
        ELSE  
            RETURN three RAISED TO THE POWER num_threes MODULO MOD MULTIPLIED BY two MODULO MOD  
        END IF  
    END FUNCTION  
END CLASS