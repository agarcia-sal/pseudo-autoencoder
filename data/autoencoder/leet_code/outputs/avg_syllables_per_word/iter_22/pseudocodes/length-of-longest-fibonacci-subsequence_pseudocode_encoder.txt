CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO empty mapping  
        FOR each element x WITH position i IN the enumeration of arr  
            ASSIGN reference TO i in index AT key x  
        END FOR  
        SET dp TO empty mapping  
        SET max_length TO zero  
          
        FOR k FROM zero TO the LENGTH OF arr MINUS one  
            FOR j FROM zero TO k MINUS one  
                SET difference_value TO element at position k of arr MINUS element at position j of arr  
                SET i TO the value FROM index AT key difference_value OR negative one IF key is not present  
                IF i GREATER THAN OR EQUAL TO zero AND i LESS THAN j THEN  
                    SET previous_length TO the value FROM dp AT key pair of i and j OR two IF key is not present  
                    SET dp AT key pair of j and k TO previous_length PLUS one  
                    IF max_length LESS THAN dp AT key pair of j and k THEN  
                        SET max_length TO dp AT key pair of j and k  
                    END IF  
                END IF  
            END FOR  
        END FOR  
          
        IF max_length GREATER THAN OR EQUAL TO three THEN  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS