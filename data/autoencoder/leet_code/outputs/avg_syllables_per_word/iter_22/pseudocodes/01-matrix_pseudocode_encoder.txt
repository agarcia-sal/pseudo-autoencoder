CLASS Solution  
    FUNCTION updateMatrix WITH PARAMETER mat  
        IF mat EQUALS to an empty value OR element at position zero of mat EQUALS to an empty value  
            RETURN mat  
        END IF  

        SET rows TO the LENGTH OF mat  
        SET cols TO the LENGTH OF element at position zero of mat  
        SET dist TO a new list with rows elements where each element is a list with cols elements each SET TO infinity  
        SET queue TO a new empty double ended queue  

        FOR r FROM zero TO rows MINUS one  
            FOR c FROM zero TO cols MINUS one  
                IF element at position r of mat THEN element at position c EQUALS zero  
                    SET element at position r of dist THEN element at position c TO zero  
                    APPEND the pair of r and c TO queue  
                END IF  
            END FOR  
        END FOR  

        SET directions TO a new list containing the pairs of negative one AND zero, one AND zero, zero AND negative one, zero AND one  

        WHILE queue is not empty  
            REMOVE and RETURN the element at the front of queue INTO r AND c  
            FOR each pair dr AND dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr IS GREATER THAN OR EQUAL TO zero AND nr IS LESS THAN rows AND nc IS GREATER THAN OR EQUAL TO zero AND nc IS LESS THAN cols AND element at position nr of dist THEN element at position nc IS GREATER THAN element at position r of dist THEN element at position c PLUS one  
                    SET element at position nr of dist THEN element at position nc TO element at position r of dist THEN element at position c PLUS one  
                    APPEND the pair of nr AND nc TO queue  
                END IF  
            END FOR  
        END WHILE  

        RETURN dist  
    END FUNCTION  
END CLASS