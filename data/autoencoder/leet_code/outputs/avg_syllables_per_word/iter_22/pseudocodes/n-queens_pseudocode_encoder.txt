CLASS Solution  
    FUNCTION solveNQueens(n)  
        FUNCTION is_not_under_attack(row, col)  
            RETURN NOT (element at position col of cols PLUS element at position row MINUS col of hills PLUS element at position row PLUS col of dales)  
        END FUNCTION  

        FUNCTION place_queen(row, col)  
            ADD pair of row and col TO queens  
            SET element at position col of cols TO one  
            SET element at position row MINUS col of hills TO one  
            SET element at position row PLUS col of dales TO one  
        END FUNCTION  

        FUNCTION remove_queen(row, col)  
            REMOVE pair of row and col FROM queens  
            SET element at position col of cols TO zero  
            SET element at position row MINUS col of hills TO zero  
            SET element at position row PLUS col of dales TO zero  
        END FUNCTION  

        FUNCTION add_solution()  
            SET solution TO empty list  
            FOR each pair_of_row_and_col IN queens SORTED BY first element of pair_of_row_and_col AND second element of pair_of_row_and_col  
                SET col TO second element of pair_of_row_and_col  
                SET row_string TO string consisting of col times character dot PLUS character Q PLUS string consisting of n MINUS col MINUS one times character dot  
                APPEND row_string TO solution  
            END FOR  
            APPEND solution TO output  
        END FUNCTION  

        FUNCTION backtrack(row SET TO zero)  
            FOR col FROM zero TO n MINUS one  
                IF is_not_under_attack(row, col) EQUALS true THEN  
                    place_queen(row, col)  
                    IF row PLUS one EQUALS n THEN  
                        add_solution()  
                    ELSE  
                        backtrack(row PLUS one)  
                    END IF  
                    remove_queen(row, col)  
                END IF  
            END FOR  
        END FUNCTION  

        SET cols TO list of zero repeated n times  
        SET hills TO list of zero repeated two times MULTIPLIED BY n MINUS one times  
        SET dales TO list of zero repeated two times MULTIPLIED BY n MINUS one times  
        SET queens TO empty set  
        SET output TO empty list  
        CALL backtrack()  
        RETURN output  
    END FUNCTION  
END CLASS