class Solution:
    def minMalwareSpread(self, graph, initial):
        def dfs(node, component):
            if node in visited:
                return
            visited.add(node)
            component.add(node)
            for neighbor, connected in enumerate(graph[node]):
                if connected == 1 and neighbor not in visited:
                    dfs(neighbor, component)

        visited = set()
        components = []
        n = len(graph)
        for node in range(n):
            if node not in visited:
                component = set()
                dfs(node, component)
                components.append(component)

        infected_count = [0] * n
        for node in initial:
            infected_count[node] = 1

        component_infected_count = [0] * len(components)
        for node in initial:
            for i, component in enumerate(components):
                if node in component:
                    component_infected_count[i] += 1

        max_saving = 0
        best_node = min(initial)
        for node in initial:
            for i, component in enumerate(components):
                if node in component and component_infected_count[i] == 1:
                    saving = len(component)
                    if saving > max_saving or (saving == max_saving and node < best_node):
                        max_saving = saving
                        best_node = node

        return best_node