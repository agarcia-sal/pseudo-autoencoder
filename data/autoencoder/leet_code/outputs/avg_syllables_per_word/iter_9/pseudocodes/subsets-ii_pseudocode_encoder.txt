CLASS Solution  
    FUNCTION subsetsWithDup(self, nums)  
        CALL nums SORT IN ASCENDING ORDER  
        SET result TO empty list  
        SET subset TO empty list  
        
        FUNCTION dfs(i)  
            IF i GREATER THAN OR EQUALS TO length of nums THEN  
                APPEND a copy of subset TO result  
                RETURN  
            END IF  
            
            APPEND element at index i of nums TO subset  
            CALL dfs WITH argument i INCREMENTED BY one  
            
            REMOVE last element FROM subset  
            WHILE i PLUS one LESS THAN length of nums AND element at index i of nums EQUALS element at index i PLUS one of nums DO  
                INCREMENT i BY one  
            END WHILE  
            CALL dfs WITH argument i INCREMENTED BY one  
        END FUNCTION  
        
        CALL dfs WITH argument zero  
        RETURN result  
    END FUNCTION  
END CLASS