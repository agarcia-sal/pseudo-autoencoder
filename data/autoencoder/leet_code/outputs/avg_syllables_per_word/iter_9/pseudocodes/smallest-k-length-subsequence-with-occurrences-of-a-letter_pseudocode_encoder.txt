CLASS Solution  
    FUNCTION smallestSubsequence(self, s, k, letter, repetition)  
        SET letter_count TO the count of letter in s  
        SET stack TO an empty list  

        FOR each index i and character char IN s  
            WHILE stack is not empty AND char is less than the last element in stack AND the length of s MINUS i PLUS the length of stack MINUS one is greater than or equal to k  
                IF the last element in stack EQUALS letter THEN  
                    IF letter_count GREATER THAN repetition THEN  
                        INCREMENT repetition BY one  
                        REMOVE the last element FROM stack  
                    ELSE  
                        BREAK the while loop  
                    END IF  
                ELSE  
                    REMOVE the last element FROM stack  
                END IF  
            END WHILE  

            IF the length of stack LESS THAN k THEN  
                IF char EQUALS letter THEN  
                    APPEND char TO stack  
                    DECREMENT repetition BY one  
                ELSE IF k MINUS the length of stack GREATER THAN repetition THEN  
                    APPEND char TO stack  
                END IF  
                IF char EQUALS letter THEN  
                    DECREMENT letter_count BY one  
                END IF  
            END IF  
        END FOR  

        WHILE the length of stack LESS THAN k  
            APPEND letter TO stack  
        END WHILE  

        RETURN the concatenation of all elements in stack  
    END FUNCTION  
END CLASS