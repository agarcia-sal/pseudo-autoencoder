CLASS Solution  
    FUNCTION maxHappyGroups(self, batchSize, groups)  
        IF batchSize EQUALS 1 THEN  
            RETURN the length of groups  
        END IF  

        SET remainder_count TO a list of zeros with length batchSize  

        FOR each group IN groups  
            INCREMENT remainder_count at index (group MODULO batchSize) BY one  
        END FOR  

        FUNCTION dp(remainder, variable number of remainder_count arguments)  
            CONVERT remainder_count arguments TO a list  
            SET max_happy TO zero  

            FOR index FROM zero TO batchSize MINUS one  
                IF remainder_count at index EQUALS zero THEN  
                    CONTINUE to next iteration  
                END IF  

                DECREMENT remainder_count at index BY one  
                SET new_remainder TO (remainder MINUS index) MODULO batchSize  

                IF remainder EQUALS zero THEN  
                    SET happy_groups TO one PLUS dp called with new_remainder and updated remainder_count unpacked  
                ELSE  
                    SET happy_groups TO dp called with new_remainder and updated remainder_count unpacked  
                END IF  

                SET max_happy TO the maximum of max_happy and happy_groups  
                INCREMENT remainder_count at index BY one  
            END FOR  

            RETURN max_happy  
        END FUNCTION  

        RETURN dp called with zero and remainder_count unpacked  
    END FUNCTION  
END CLASS