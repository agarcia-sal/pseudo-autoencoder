CLASS Solution  
    FUNCTION solve(self, nums, queries)  
        SET MOD TO one billion plus seven  
        SET n TO length of nums  
        
        SET max_y TO the maximum y value extracted from each pair in queries  
        CALL prefix_sums AS empty list of lists, each inner list of length n initialized with zero, for indices from zero to max_y inclusive  
        
        FOR y FROM one TO max_y  
            FOR i FROM n minus one DOWN TO zero  
                IF i plus y LESS THAN n THEN  
                    SET prefix_sums at index y and position i TO nums at i PLUS prefix_sums at index y and position i plus y  
                ELSE  
                    SET prefix_sums at index y and position i TO nums at i  
                END IF  
            END FOR  
        END FOR  
        
        SET answer TO empty list  
        FOR each pair x, y IN queries  
            APPEND prefix_sums at index y and position x modulo MOD TO answer  
        END FOR  
        
        RETURN answer  
    END FUNCTION  
END CLASS