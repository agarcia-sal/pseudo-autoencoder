CLASS Solution  
    FUNCTION restoreIpAddresses(self, s)  
        FUNCTION is_valid(segment)  
            IF length of segment EQUALS 1 OR (first character of segment NOT EQUALS '0' AND segment converted to integer LESS THAN OR EQUAL TO 255) THEN  
                RETURN true  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  

        FUNCTION backtrack(start, path)  
            IF length of path EQUALS 4 THEN  
                IF start EQUALS length of s THEN  
                    APPEND concatenation of elements of path separated by '.' TO result  
                END IF  
                RETURN  
            END IF  

            FOR length FROM 1 TO 3  
                IF start PLUS length LESS THAN OR EQUAL TO length of s THEN  
                    SET segment TO substring of s from start to start PLUS length  
                    IF is_valid(segment) THEN  
                        CALL backtrack with start PLUS length AND path appended with segment  
                    END IF  
                END IF  
            END FOR  
        END FUNCTION  

        SET result TO empty list  
        CALL backtrack with 0 AND empty list  
        RETURN result  
    END FUNCTION  
END CLASS