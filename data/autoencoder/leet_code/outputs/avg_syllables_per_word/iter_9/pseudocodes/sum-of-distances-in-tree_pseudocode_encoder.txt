CLASS Solution  
    FUNCTION sumOfDistancesInTree(self, n, edges)  
        SET graph TO a mapping from keys to lists of elements  
        
        FOR each pair a, b IN edges  
            APPEND b TO graph associated with a  
            APPEND a TO graph associated with b  
        END FOR  
        
        SET count TO a list of size n with each element set to one  
        SET dist TO a list of size n with each element set to zero  
        
        FUNCTION dfs1(u, p)  
            FOR each element v IN graph associated with u  
                IF v NOT EQUALS p THEN  
                    CALL dfs1 with arguments v and u  
                    INCREMENT count at index u BY count at index v  
                    INCREMENT dist at index u BY dist at index v PLUS count at index v  
                END IF  
            END FOR  
        END FUNCTION  
        
        CALL dfs1 with arguments zero and negative one  
        
        FUNCTION dfs2(u, p)  
            FOR each element v IN graph associated with u  
                IF v NOT EQUALS p THEN  
                    SET dist at index v TO dist at index u MINUS count at index v PLUS n MINUS count at index v  
                    CALL dfs2 with arguments v and u  
                END IF  
            END FOR  
        END FUNCTION  
        
        CALL dfs2 with arguments zero and negative one  
        
        RETURN dist  
    END FUNCTION  
END CLASS