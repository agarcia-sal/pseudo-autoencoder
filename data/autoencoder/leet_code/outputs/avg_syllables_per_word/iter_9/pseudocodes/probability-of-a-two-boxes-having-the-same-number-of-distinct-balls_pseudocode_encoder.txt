CLASS Solution  
    FUNCTION getProbability(self, balls)  
        FUNCTION dfs(i, j, diff)  
            IF i GREATER THAN OR EQUAL TO k THEN  
                IF j EQUALS 0 AND diff EQUALS 0 THEN  
                    RETURN 1  
                ELSE  
                    RETURN 0  
                END IF  
            END IF  
            IF j LESS THAN 0 THEN  
                RETURN 0  
            END IF  
            SET ans TO 0  
            FOR x FROM 0 TO balls at position i INCLUSIVE  
                IF x EQUALS balls at position i THEN  
                    SET y TO 1  
                ELSE IF x EQUALS 0 THEN  
                    SET y TO NEGATIVE 1  
                ELSE  
                    SET y TO 0  
                END IF  
                SET ans TO ans PLUS dfs(i PLUS 1, j MINUS x, diff PLUS y) MULTIPLIED BY comb(balls at position i, x)  
            END FOR  
            RETURN ans  
        END FUNCTION  

        SET n TO sum of balls DIVIDED BY 2  
        SET k TO length of balls  
        RETURN dfs(0, n, 0) DIVIDED BY comb(n MULTIPLIED BY 2, n)  
    END FUNCTION  
END CLASS