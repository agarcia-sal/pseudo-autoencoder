CLASS Solution  
    FUNCTION isScramble(self, s1, s2)  
        IF s1 EQUALS s2 THEN  
            RETURN True  
        END IF  

        IF sorted characters of s1 NOT EQUALS sorted characters of s2 THEN  
            RETURN False  
        END IF  

        SET n TO length of s1  
        FOR index FROM 1 TO n MINUS 1  
            IF self.isScramble(substring of s1 from start TO index) AND self.isScramble(substring of s2 from start TO index) THEN  
                RETURN True  
            END IF  
            IF self.isScramble(substring of s1 from start TO index) AND self.isScramble(substring of s2 from end MINUS index TO end MINUS 1) AND self.isScramble(substring of s1 from index TO end) AND self.isScramble(substring of s2 from start TO end MINUS index MINUS 1) THEN  
                RETURN True  
            END IF  
        END FOR  

        RETURN False  
    END FUNCTION  
END CLASS