CLASS Solution  
    FUNCTION numDistinctIslands(self, grid)  
        FUNCTION dfs(i, j, direction)  
            IF i GREATER THAN OR EQUAL TO zero AND i LESS THAN length of grid AND j GREATER THAN OR EQUAL TO zero AND j LESS THAN length of first element of grid AND element at grid position [i][j] EQUALS one THEN  
                SET element at grid position [i][j] TO zero  
                APPEND direction TO path  
                CALL dfs WITH (i PLUS one, j, 'd')  
                CALL dfs WITH (i MINUS one, j, 'u')  
                CALL dfs WITH (i, j PLUS one, 'r')  
                CALL dfs WITH (i, j MINUS one, 'l')  
                APPEND 'b' TO path  
            END IF  
            RETURN path  
        END FUNCTION  

        SET unique_islands TO empty set  

        FOR i FROM zero TO length of grid MINUS one  
            FOR j FROM zero TO length of first element of grid MINUS one  
                IF element at grid position [i][j] EQUALS one THEN  
                    SET path TO empty list  
                    ADD tuple of result of dfs(i, j, 'o') TO unique_islands  
                END IF  
            END FOR  
        END FOR  

        RETURN length of unique_islands  
    END FUNCTION  
END CLASS