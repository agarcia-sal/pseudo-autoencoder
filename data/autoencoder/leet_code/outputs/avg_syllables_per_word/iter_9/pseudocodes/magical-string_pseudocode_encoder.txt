CLASS Solution  
    FUNCTION magicalString(self, n)  
        IF n EQUALS 0 THEN  
            RETURN 0  
        END IF  

        IF n LESS THAN OR EQUAL TO 3 THEN  
            RETURN 1  
        END IF  

        SET s TO a list containing 1, 2, and 2  
        SET count TO 1  
        SET index TO 2  

        WHILE length of s LESS THAN n DO  
            SET next_num TO 3 MINUS the last element of s  
            EXTEND s BY next_num REPEATED s[index] TIMES  
            IF next_num EQUALS 1 THEN  
                INCREMENT count BY s[index]  
            END IF  
            INCREMENT index BY 1  
        END WHILE  

        IF length of s GREATER THAN n THEN  
            DECREMENT count BY the last element of s MULTIPLIED BY (length of s MINUS n)  
        END IF  

        RETURN count  
    END FUNCTION  
END CLASS