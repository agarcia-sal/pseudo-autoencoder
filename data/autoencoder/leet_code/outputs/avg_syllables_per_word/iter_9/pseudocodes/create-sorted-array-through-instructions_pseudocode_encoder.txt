CLASS Solution  
    FUNCTION createSortedArray(self, instructions)  
        SET MODULO TO one billion plus seven  
        SET MAXIMUM TO maximum value in instructions PLUS one  
        SET BIT_ARRAY TO list of zeros of length MAXIMUM  

        FUNCTION update(index, value)  
            WHILE index LESS THAN MAXIMUM DO  
                INCREMENT BIT_ARRAY at position index BY value  
                INCREMENT index BY the bitwise AND of index and negative index  
            END WHILE  
        END FUNCTION  

        FUNCTION query(index)  
            SET total TO zero  
            WHILE index GREATER THAN zero DO  
                INCREMENT total BY BIT_ARRAY at position index  
                DECREMENT index BY the bitwise AND of index and negative index  
            END WHILE  
            RETURN total  
        END FUNCTION  

        SET total_cost TO zero  
        FOR each position and number IN instructions DO  
            SET less_than TO result of query at number MINUS one  
            SET greater_than TO position MINUS result of query at number  
            SET cost TO minimum of less_than and greater_than  
            SET total_cost TO remainder of total_cost PLUS cost when divided by MODULO  
            CALL update with number and one  
        END FOR  

        RETURN total_cost  
    END FUNCTION  
END CLASS