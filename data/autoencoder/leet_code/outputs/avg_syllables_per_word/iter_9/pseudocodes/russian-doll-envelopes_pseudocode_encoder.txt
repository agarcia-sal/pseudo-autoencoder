CLASS Solution  
    FUNCTION maxEnvelopes(self, envelopes)  
        SORT envelopes BY first element in ascending order AND second element in descending order  
        SET dp TO an empty list  
        FOR each pair IN envelopes  
            SET h TO second element of pair  
            SET idx TO position in dp where h can be inserted to maintain sorted order using binary search from left  
            IF idx EQUALS length of dp THEN  
                APPEND h TO dp  
            ELSE  
                SET element at idx in dp TO h  
            END IF  
        END FOR  
        RETURN length of dp  
    END FUNCTION  
END CLASS