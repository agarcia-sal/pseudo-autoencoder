CLASS Solution
    FUNCTION maxEqualFreq(self, nums)
        SET count TO a new empty frequency counter
        SET freq TO a new empty frequency counter
        SET max_len TO zero

        FOR each index i AND element num IN nums
            INCREMENT the frequency count of num BY one in count

            IF the frequency count of num in count GREATER THAN one THEN
                DECREMENT the frequency count of the previous frequency of num BY one in freq
                IF the frequency count of the previous frequency of num EQUALS zero THEN
                    REMOVE the previous frequency of num FROM freq
                END IF
            END IF

            INCREMENT the frequency count of the current frequency of num BY one in freq

            IF the number of distinct frequencies in freq EQUALS one AND
               (one EXISTS AS a frequency IN freq OR the single frequency count VALUE in freq EQUALS one) THEN
                SET max_len TO i PLUS one
            ELSE IF the number of distinct frequencies in freq EQUALS two AND
                    (one EXISTS AS a frequency IN freq AND the frequency count of one EQUALS one
                     OR the difference BETWEEN the maximum frequency key AND the minimum frequency key EQUALS one
                     AND the frequency count of the maximum frequency key EQUALS one) THEN
                SET max_len TO i PLUS one
            END IF
        END FOR

        RETURN max_len
    END FUNCTION
END CLASS