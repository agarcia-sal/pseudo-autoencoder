CLASS UnionFind  
    FUNCTION __init__(self, n)  
        SET self.parent TO list of integers from zero TO n MINUS one  
        SET self.rank TO list of ones of length n  
    END FUNCTION  

    FUNCTION find(self, u)  
        IF self.parent at index u NOT EQUALS u THEN  
            SET self.parent at index u TO result of self.find called with argument self.parent at index u  
        END IF  
        RETURN self.parent at index u  
    END FUNCTION  

    FUNCTION union(self, u, v)  
        SET rootU TO result of self.find called with argument u  
        SET rootV TO result of self.find called with argument v  

        IF rootU NOT EQUALS rootV THEN  
            IF self.rank at index rootU GREATER THAN self.rank at index rootV THEN  
                SET self.parent at index rootV TO rootU  
            ELSE IF self.rank at index rootU LESS THAN self.rank at index rootV THEN  
                SET self.parent at index rootU TO rootV  
            ELSE  
                SET self.parent at index rootV TO rootU  
                INCREMENT self.rank at index rootU BY one  
            END IF  
            RETURN True  
        END IF  
        RETURN False  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION findCriticalAndPseudoCriticalEdges(self, n, edges)  
        FOR each pair i, edge IN enumeration of edges  
            APPEND i TO edge  
        END FOR  

        SORT edges based on the third element of each edge (weight) in ascending order  

        FUNCTION mst(exclude = None, include = None)  
            SET uf TO new UnionFind instance initialized with n  
            SET weight TO zero  

            IF include IS NOT None THEN  
                CALL uf.union with first element of include and second element of include  
                INCREMENT weight BY third element of include  
            END IF  

            FOR each u, v, w, idx IN edges  
                IF idx EQUALS exclude THEN  
                    CONTINUE to next iteration  
                END IF  
                IF uf.union called with u and v RETURNS True THEN  
                    INCREMENT weight BY w  
                END IF  
            END FOR  

            SET root TO uf.find called with zero  
            FOR i FROM zero TO n MINUS one  
                IF uf.find called with i NOT EQUALS root THEN  
                    RETURN infinity  
                END IF  
            END FOR  

            RETURN weight  
        END FUNCTION  

        SET mst_weight TO result of mst called with no arguments  
        SET critical TO empty list  
        SET pseudo_critical TO empty list  

        FOR each u, v, w, idx IN edges  
            IF mst called with exclude equal to idx GREATER THAN mst_weight THEN  
                APPEND idx TO critical  
            ELSE IF mst called with include equal to tuple of u, v, w EQUALS mst_weight THEN  
                APPEND idx TO pseudo_critical  
            END IF  
        END FOR  

        RETURN list containing critical and pseudo_critical  
    END FUNCTION  
END CLASS