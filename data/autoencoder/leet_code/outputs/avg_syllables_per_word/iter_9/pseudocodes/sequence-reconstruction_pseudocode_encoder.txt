CLASS Solution  
    FUNCTION sequenceReconstruction(self, nums, sequences)  
        SET n TO the length of nums  
        SET graph TO a default dictionary with lists as default values  
        SET indegree TO a list of zeros with length n PLUS one  
        
        FOR each sequence IN sequences  
            FOR index FROM zero TO the length of sequence MINUS one MINUS one  
                SET u TO sequence at index  
                SET v TO sequence at index PLUS one  
                APPEND v TO graph at key u  
                INCREMENT indegree at index v BY one  
            END FOR  
        END FOR  
        
        SET queue TO a new deque containing elements i FOR each i FROM one TO n WHERE indegree at i EQUALS zero  
        
        IF the length of queue NOT EQUALS one THEN  
            RETURN False  
        END IF  
        
        SET index TO zero  
        WHILE queue is not empty  
            IF the length of queue NOT EQUALS one THEN  
                RETURN False  
            END IF  
            
            SET node TO the first element removed from queue  
            IF node NOT EQUALS nums at index THEN  
                RETURN False  
            END IF  
            INCREMENT index BY one  
            
            FOR each neighbor IN graph at key node  
                DECREMENT indegree at neighbor BY one  
                IF indegree at neighbor EQUALS zero THEN  
                    APPEND neighbor TO queue  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN index EQUALS n  
    END FUNCTION  
END CLASS