CLASS Solution  
    FUNCTION longestIncreasingPath(self, matrix)  
        IF matrix EQUALS empty OR first element of matrix EQUALS empty THEN  
            RETURN zero  
        END IF  
        
        SET m TO length of matrix  
        SET n TO length of first element of matrix  
        SET directions TO list containing (one, zero), (negative one, zero), (zero, one), and (zero, negative one)  
        SET dp TO two dimensional list of size m by n with all elements set to negative one  
        
        FUNCTION dfs(x, y)  
            IF element at dp[x][y] NOT EQUALS negative one THEN  
                RETURN element at dp[x][y]  
            END IF  
            
            SET max_length TO one  
            FOR each pair dx, dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                IF nx GREATER THAN OR EQUAL TO zero AND nx LESS THAN m AND ny GREATER THAN OR EQUAL TO zero AND ny LESS THAN n AND element at matrix[nx][ny] GREATER THAN element at matrix[x][y] THEN  
                    SET max_length TO greater of max_length AND one PLUS dfs(nx, ny)  
                END IF  
            END FOR  
            
            SET dp[x][y] TO max_length  
            RETURN max_length  
        END FUNCTION  
        
        SET longest_path TO zero  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                SET longest_path TO greater of longest_path AND dfs(i, j)  
            END FOR  
        END FOR  
        
        RETURN longest_path  
    END FUNCTION  
END CLASS