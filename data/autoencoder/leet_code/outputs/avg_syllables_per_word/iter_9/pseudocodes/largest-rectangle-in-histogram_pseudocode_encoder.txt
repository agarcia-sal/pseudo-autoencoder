CLASS Solution  
    FUNCTION largestRectangleArea(self, heights)  
        SET stack TO list containing single element negative one  
        SET max_area TO zero  
        APPEND zero TO heights  
        
        FOR each index i AND element h IN heights with indices  
            WHILE last element in stack NOT EQUALS negative one AND h LESS THAN element in heights at last element in stack DO  
                SET height TO element in heights at value popped from stack  
                SET width TO i MINUS last element in stack MINUS one  
                SET max_area TO maximum of max_area AND height MULTIPLIED BY width  
            END WHILE  
            APPEND i TO stack  
        END FOR  
        
        RETURN max_area  
    END FUNCTION  
END CLASS