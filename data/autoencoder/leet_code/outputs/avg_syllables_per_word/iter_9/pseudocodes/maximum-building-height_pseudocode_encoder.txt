CLASS Solution  
    FUNCTION maxBuilding(self, n, restrictions)  
        APPEND list containing 1 and 0 TO restrictions  
        SORT restrictions IN ascending order  
        
        FOR i FROM 1 TO length of restrictions MINUS 1  
            SET idx, height TO elements of restrictions at position i  
            SET prev_idx, prev_height TO elements of restrictions at position i MINUS 1  
            SET restrictions at position i and height index TO minimum of height AND prev_height PLUS idx MINUS prev_idx  
        END FOR  
        
        FOR i FROM length of restrictions MINUS 2 DOWN TO 0  
            SET idx, height TO elements of restrictions at position i  
            SET next_idx, next_height TO elements of restrictions at position i PLUS 1  
            SET restrictions at position i and height index TO minimum of height AND next_height PLUS next_idx MINUS idx  
        END FOR  
        
        SET max_height TO 0  
        SET prev_idx, prev_height TO elements of restrictions at position 0  
        
        FOR i FROM 1 TO length of restrictions MINUS 1  
            SET idx, height TO elements of restrictions at position i  
            SET max_height TO maximum of max_height AND (idx MINUS prev_idx PLUS prev_height PLUS height) DIVIDED BY 2  
            SET prev_idx, prev_height TO idx, height  
        END FOR  
        
        SET max_height TO maximum of max_height AND prev_height PLUS n MINUS prev_idx  
        
        RETURN max_height  
    END FUNCTION  
END CLASS