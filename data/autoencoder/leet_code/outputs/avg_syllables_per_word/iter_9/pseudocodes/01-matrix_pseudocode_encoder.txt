CLASS Solution  
    FUNCTION updateMatrix(self, mat)  
        IF mat IS empty OR mat at first index IS empty THEN  
            RETURN mat  
        END IF  

        SET rows TO length of mat  
        SET cols TO length of mat at first index  
        SET dist TO auxiliary FUNCTION to create a matrix of size rows by cols each element set to positive infinity  
        SET queue TO auxiliary FUNCTION to create an empty double ended queue  

        FOR each r FROM zero TO rows MINUS one  
            FOR each c FROM zero TO cols MINUS one  
                IF mat element at r and c EQUALS zero THEN  
                    SET dist element at r and c TO zero  
                    APPEND tuple of r and c TO queue  
                END IF  
            END FOR  
        END FOR  

        SET directions TO list containing tuples of minus one and zero, one and zero, zero and minus one, zero and one  

        WHILE queue IS not empty  
            SET pair r and c TO element removed from front of queue  
            FOR each pair dr and dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr GREATER THAN OR EQUAL TO zero AND nr LESS THAN rows AND nc GREATER THAN OR EQUAL TO zero AND nc LESS THAN cols AND dist element at nr and nc GREATER THAN dist element at r and c PLUS one THEN  
                    SET dist element at nr and nc TO dist element at r and c PLUS one  
                    APPEND tuple of nr and nc TO queue  
                END IF  
            END FOR  
        END WHILE  

        RETURN dist  
    END FUNCTION  
END CLASS