CLASS Solution  
    FUNCTION maximumScore(self, scores, edges)  
        SET graph TO an empty mapping from elements to list of pairs of score and index  
        FOR each pair u, v IN edges  
            APPEND the pair of scores at index v and v TO graph at key u  
            APPEND the pair of scores at index u and u TO graph at key v  
        END FOR  

        FOR each node IN graph keys  
            SET graph at node TO the three pairs with highest first value from graph at node  
        END FOR  

        SET max_score TO negative one  

        FOR each pair u, v IN edges  
            FOR each pair score1, x IN graph at u  
                FOR each pair score2, y IN graph at v  
                    IF the set of elements x, y, u, v HAS size equal to four THEN  
                        SET max_score TO the greater of max_score and sum of score1, score2, scores at u, and scores at v  
                    END IF  
                END FOR  
            END FOR  
        END FOR  

        RETURN max_score  
    END FUNCTION  
END CLASS