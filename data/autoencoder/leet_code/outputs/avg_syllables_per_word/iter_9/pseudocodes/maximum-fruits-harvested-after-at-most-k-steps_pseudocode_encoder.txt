CLASS Solution  
    FUNCTION maxTotalFruits(self, fruits, startPos, k)  
        SET max_fruits TO zero  
        SET total_fruits TO zero  
        SET left TO zero  
        
        FOR right FROM zero TO length of fruits MINUS one  
            SET position TO fruit position at index right  
            SET amount TO fruit amount at index right  
            INCREMENT total_fruits BY amount  
            
            WHILE left LESS THAN OR EQUAL TO right AND NOT (position at fruits[left] GREATER THAN OR EQUAL TO startPos MINUS k AND position at fruits[left] LESS THAN OR EQUAL TO startPos PLUS k AND position at fruits[right] GREATER THAN OR EQUAL TO startPos MINUS k AND position at fruits[right] LESS THAN OR EQUAL TO startPos PLUS k AND minimum of absolute value of position at fruits[right] MINUS startPos AND absolute value of position at fruits[left] MINUS startPos PLUS position at fruits[right] MINUS position at fruits[left] LESS THAN OR EQUAL TO k)  
                DECREMENT total_fruits BY fruit amount at index left  
                INCREMENT left BY one  
            END WHILE  
            
            SET max_fruits TO maximum of max_fruits AND total_fruits  
        END FOR  
        
        RETURN max_fruits  
    END FUNCTION  
END CLASS