CLASS Solution  
    FUNCTION calculateMinimumHP(self, dungeon)  
        SET m TO length of dungeon  
        SET n TO length of first element in dungeon  

        CALL auxiliary FUNCTION initializeDP with parameters m and n, SET result TO dp  

        SET value at dp at row m and column (n minus 1) TO 1  
        SET value at dp at row (m minus 1) and column n TO 1  

        FOR i FROM (m minus 1) DOWNTO 0  
            FOR j FROM (n minus 1) DOWNTO 0  
                SET minimum health needed TO minimum of value at dp at (i plus 1, j) AND value at dp at (i, j plus 1) MINUS value at dungeon at (i, j)  
                SET value at dp at (i, j) TO maximum of minimum health needed AND 1  
            END FOR  
        END FOR  

        RETURN value at dp at (0, 0)  
    END FUNCTION  

    FUNCTION initializeDP(m, n)  
        CREATE data structure dp with dimensions (m plus 1) rows and (n plus 1) columns  
        FOR each row in dp  
            INITIALIZE each element in row TO infinity  
        END FOR  
        RETURN dp  
    END FUNCTION  
END CLASS