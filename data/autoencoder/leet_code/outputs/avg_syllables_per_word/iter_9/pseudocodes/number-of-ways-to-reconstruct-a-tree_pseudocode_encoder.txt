CLASS Solution  
    FUNCTION checkWays(self, pairs)  
        SET graph TO a default dictionary of sets  
        FOR each pair (x, y) IN pairs  
            ADD y TO graph at key x  
            ADD x TO graph at key y  
        END FOR  

        SET max_degree TO the element in graph with maximum length of graph at that element  
        SET n TO the length of graph  

        IF length of graph at max_degree NOT EQUALS n MINUS 1 THEN  
            RETURN zero  
        END IF  

        FUNCTION can_be_parent(u, v)  
            RETURN whether for all neighbor in graph at v, neighbor is in graph at u OR neighbor EQUALS u  
        END FUNCTION  

        SET ways TO one  

        FOR each u IN graph  
            IF u EQUALS max_degree THEN  
                CONTINUE to next u  
            END IF  

            SET parent TO null  

            FOR each v IN graph at u  
                IF v IN graph AND length of graph at v GREATER THAN OR EQUAL TO length of graph at u AND can_be_parent(v, u) THEN  
                    IF parent IS null OR length of graph at v LESS THAN length of graph at parent THEN  
                        SET parent TO v  
                    END IF  
                END IF  
            END FOR  

            IF parent IS null THEN  
                RETURN zero  
            END IF  

            IF length of graph at parent EQUALS length of graph at u THEN  
                SET ways TO two  
            END IF  
        END FOR  

        RETURN ways  
    END FUNCTION  
END CLASS