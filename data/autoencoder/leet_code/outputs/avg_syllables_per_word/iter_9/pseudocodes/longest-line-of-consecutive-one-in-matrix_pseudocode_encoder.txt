CLASS Solution  
    FUNCTION longestLine(self, mat)  
        IF mat IS EMPTY OR first element of mat IS EMPTY THEN  
            RETURN zero  
        END IF  
        
        SET m TO length of mat  
        SET n TO length of first element of mat  
        SET directions TO list containing (zero, one), (one, zero), (one, one), (one, negative one)  
        SET max_length TO zero  
        
        FUNCTION check(x, y, dx, dy)  
            SET length TO zero  
            WHILE x GREATER THAN OR EQUAL TO zero AND x LESS THAN m AND y GREATER THAN OR EQUAL TO zero AND y LESS THAN n AND element at mat at position x, y EQUALS one DO  
                INCREMENT length BY one  
                INCREMENT x BY dx  
                INCREMENT y BY dy  
            END WHILE  
            RETURN length  
        END FUNCTION  
        
        FOR i FROM zero TO m MINUS one DO  
            FOR j FROM zero TO n MINUS one DO  
                IF element at mat at position i, j EQUALS one THEN  
                    FOR each pair dx, dy IN directions DO  
                        IF i MINUS dx LESS THAN zero OR j MINUS dy LESS THAN zero OR j MINUS dy GREATER THAN OR EQUAL TO n OR element at mat at position i MINUS dx, j MINUS dy EQUALS zero THEN  
                            SET max_length TO the greater between max_length AND result of check(i, j, dx, dy)  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END FOR  
        
        RETURN max_length  
    END FUNCTION  
END CLASS