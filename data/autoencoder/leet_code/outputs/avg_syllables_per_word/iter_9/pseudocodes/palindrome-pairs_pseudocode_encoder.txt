CLASS Solution  
    FUNCTION palindromePairs(self, words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS s reversed  
        END FUNCTION  
        
        SET word_dict TO empty mapping  
        FOR each index i and element word IN words  
            SET word_dict[word] TO i  
        END FOR  
        
        SET result TO empty list  
        
        FOR each index i and element word IN words  
            IF word EQUALS empty string THEN  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string IN word_dict AND is_palindrome(word) THEN  
                APPEND list of i and word_dict at empty string TO result  
                APPEND list of word_dict at empty string and i TO result  
            END IF  
            
            SET reversed_word TO word reversed  
            IF reversed_word IN word_dict AND word_dict at reversed_word NOT EQUALS i THEN  
                APPEND list of i and word_dict at reversed_word TO result  
            END IF  
            
            FOR each integer j FROM one TO length of word MINUS one  
                SET prefix TO first j characters of word  
                SET suffix TO characters of word from position j onwards  
                SET reversed_prefix TO prefix reversed  
                SET reversed_suffix TO suffix reversed  
                
                IF is_palindrome(suffix) AND reversed_prefix IN word_dict THEN  
                    APPEND list of i and word_dict at reversed_prefix TO result  
                END IF  
                
                IF is_palindrome(prefix) AND reversed_suffix IN word_dict THEN  
                    APPEND list of word_dict at reversed_suffix and i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS