CLASS Solution  
    FUNCTION numSimilarGroups(self, strs)  
        FUNCTION are_similar(s1, s2)  
            SET diff TO empty list  
            FOR index FROM zero TO length of s1 MINUS one  
                IF character at position index in s1 NOT EQUALS character at position index in s2 THEN  
                    APPEND index TO diff  
                END IF  
            END FOR  
            IF length of diff EQUALS zero THEN  
                RETURN true  
            ELSE IF length of diff EQUALS two THEN  
                RETURN character at position first element of diff in s1 EQUALS character at position second element of diff in s2 AND  
                       character at position second element of diff in s1 EQUALS character at position first element of diff in s2  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  

        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN graph at key node  
                IF neighbor NOT IN visited THEN  
                    CALL dfs WITH neighbor AND visited  
                END IF  
            END FOR  
        END FUNCTION  

        SET n TO length of strs  
        SET graph TO empty mapping with keys from zero TO n MINUS one, each mapped to empty list  

        FOR i FROM zero TO n MINUS one  
            FOR j FROM i PLUS one TO n MINUS one  
                IF are_similar with strs at i AND strs at j RETURNS true THEN  
                    APPEND j TO graph at key i  
                    APPEND i TO graph at key j  
                END IF  
            END FOR  
        END FOR  

        SET visited TO empty set  
        SET num_groups TO zero  

        FOR i FROM zero TO n MINUS one  
            IF i NOT IN visited THEN  
                CALL dfs WITH i AND visited  
                INCREMENT num_groups BY one  
            END IF  
        END FOR  

        RETURN num_groups  
    END FUNCTION  
END CLASS