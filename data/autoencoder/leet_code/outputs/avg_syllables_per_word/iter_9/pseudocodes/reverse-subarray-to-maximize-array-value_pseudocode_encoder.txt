CLASS Solution  
    FUNCTION maxValueAfterReverse(self, nums)  
        SET n TO the length of nums  
        
        IF n EQUALS 2 THEN  
            RETURN the absolute difference between nums at position zero and nums at position one  
        END IF  
        
        SET initial_value TO zero  
        FOR index FROM one TO n MINUS one  
            INCREMENT initial_value BY the absolute difference between nums at position index and nums at position index MINUS one  
        END FOR  
        
        SET max_edge_gain TO zero  
        FOR index FROM one TO n MINUS one  
            SET max_edge_gain TO the larger of max_edge_gain and the difference between the absolute difference of nums at position zero and nums at position index and the absolute difference of nums at position index and nums at position index MINUS one  
        END FOR  
        
        FOR index FROM zero TO n MINUS two  
            SET max_edge_gain TO the larger of max_edge_gain and the difference between the absolute difference of nums at position n MINUS one and nums at position index and the absolute difference of nums at position index PLUS one and nums at position index  
        END FOR  
        
        SET min_pair TO the smallest among all the larger values between nums at position i and nums at position i PLUS one for index i FROM zero TO n MINUS two  
        SET max_pair TO the largest among all the smaller values between nums at position i and nums at position i PLUS one for index i FROM zero TO n MINUS two  
        
        SET general_gain TO the larger of zero and two MULTIPLIED BY the difference between max_pair and min_pair  
        
        RETURN the sum of initial_value and the larger of max_edge_gain and general_gain  
    END FUNCTION  
END CLASS