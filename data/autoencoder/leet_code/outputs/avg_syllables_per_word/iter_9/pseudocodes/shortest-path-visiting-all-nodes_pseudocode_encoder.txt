CLASS Solution  
    FUNCTION shortestPathLength(self, graph)  
        IF graph IS empty THEN  
            RETURN zero  
        END IF  
        
        SET n TO length of graph  
        SET queue TO a double-ended queue containing tuples each formed by node FROM zero TO n MINUS one, combined with bitmask having ONE shifted LEFT BY node position  
        SET visited TO a set containing the same tuples as in queue  
        
        SET steps TO zero  
        SET all_nodes_visited TO bitmask having ONE shifted LEFT BY n position MINUS one  
        
        WHILE queue IS NOT empty  
            FOR each element FROM zero TO length of queue MINUS one  
                REMOVE the first element from queue and UNPACK into current_node and visited_nodes  
                
                IF visited_nodes EQUALS all_nodes_visited THEN  
                    RETURN steps  
                END IF  
                
                FOR each neighbor IN graph at position current_node  
                    SET next_visited_nodes TO bitwise OR of visited_nodes and bitmask ONE shifted LEFT BY neighbor position  
                    SET next_state TO tuple of neighbor and next_visited_nodes  
                    
                    IF next_state NOT IN visited THEN  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
            
            INCREMENT steps BY one  
        END WHILE  
        
        RETURN negative one  
    END FUNCTION  
END CLASS