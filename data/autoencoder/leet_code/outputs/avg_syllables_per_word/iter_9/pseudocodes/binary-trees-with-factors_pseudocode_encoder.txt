CLASS Solution  
    FUNCTION numFactoredBinaryTrees(self, arr)  
        SET MOD TO one billion plus seven  
        SORT arr in ascending order  
        INITIALIZE dp AS a mapping from each number in arr TO one  

        FOR each index i and element num IN arr  
            FOR each index j FROM zero TO i minus one  
                IF num modulo arr at j EQUALS zero THEN  
                    SET right_child TO num divided by arr at j  
                    IF right_child EXISTS in dp THEN  
                        SET dp at num TO (dp at num PLUS dp at arr at j MULTIPLIED BY dp at right_child) modulo MOD  
                    END IF  
                END IF  
            END FOR  
        END FOR  

        RETURN the summation of all values in dp modulo MOD  
    END FUNCTION  
END CLASS