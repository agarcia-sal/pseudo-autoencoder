CLASS Solution  
    FUNCTION candy(self, ratings)  
        SET n TO length of ratings  
        SET candies TO list of size n with each element set to one  
        
        FOR i FROM one TO n MINUS one  
            IF ratings at position i GREATER THAN ratings at position i MINUS one THEN  
                SET candies at position i TO candies at position i MINUS one PLUS one  
            END IF  
        END FOR  
        
        FOR i FROM n MINUS two DOWN TO zero  
            IF ratings at position i GREATER THAN ratings at position i PLUS one THEN  
                SET candies at position i TO the greater of candies at position i AND candies at position i PLUS one PLUS one  
            END IF  
        END FOR  
        
        RETURN the sum of all elements in candies  
    END FUNCTION  
END CLASS