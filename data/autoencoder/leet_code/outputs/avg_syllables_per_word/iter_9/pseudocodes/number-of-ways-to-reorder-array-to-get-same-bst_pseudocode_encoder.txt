CLASS Solution  
    FUNCTION numOfWays(self, nums)  
        SET MOD TO ten raised to the power of nine PLUS one  

        FUNCTION count_ways(arr)  
            IF length of arr LESS THAN OR EQUAL TO one THEN  
                RETURN one  
            END IF  
            
            SET root TO first element of arr  
            SET left_subtree TO new list containing elements in arr that are LESS THAN root  
            SET right_subtree TO new list containing elements in arr that are GREATER THAN root  
            
            SET ways_left TO result of calling count_ways with left_subtree  
            SET ways_right TO result of calling count_ways with right_subtree  
            
            SET total_ways TO combination of length of left_subtree PLUS length of right_subtree taken length of left_subtree at a time  
            
            RETURN product of ways_left, ways_right, and total_ways modulo MOD  
        END FUNCTION  
        
        SET result TO result of calling count_ways with nums MINUS one  
        RETURN result modulo MOD  
    END FUNCTION  
END CLASS