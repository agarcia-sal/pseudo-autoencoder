CLASS Solution  
    FUNCTION longestPath(self, parent, s)  
        FUNCTION defaultdict_list()  
            [create a dictionary that returns a new empty list for missing keys]  
        END FUNCTION  

        SET tree TO defaultdict_list()  
        FOR each index i, element p IN parent  
            IF p NOT EQUALS minus one THEN  
                APPEND i TO tree at key p  
            END IF  
        END FOR  

        SET self.result TO one  

        FUNCTION dfs(node)  
            SET max1 TO zero  
            SET max2 TO zero  

            FOR each child IN tree at key node  
                SET child_length TO dfs with parameter child  

                IF character at index child in s NOT EQUALS character at index node in s THEN  
                    IF child_length GREATER THAN max1 THEN  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length GREATER THAN max2 THEN  
                        SET max2 TO child_length  
                    END IF  
                END IF  
            END FOR  

            SET self.result TO maximum of self.result and max1 PLUS max2 PLUS one  

            RETURN max1 PLUS one  
        END FUNCTION  

        CALL dfs with parameter zero  

        RETURN self.result  
    END FUNCTION  
END CLASS