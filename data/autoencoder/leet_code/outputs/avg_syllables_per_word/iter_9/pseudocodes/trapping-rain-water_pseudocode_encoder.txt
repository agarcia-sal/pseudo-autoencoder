CLASS Solution  
    FUNCTION trap(self, height)  
        IF height EQUALS empty THEN  
            RETURN zero  
        END IF  

        SET n TO length of height  
        SET left_max TO list of zero repeated n times  
        SET right_max TO list of zero repeated n times  

        SET left_max at position zero TO height at position zero  
        FOR i FROM one TO n MINUS one  
            SET left_max at position i TO greater value BETWEEN left_max at position i MINUS one AND height at position i  
        END FOR  

        SET right_max at position n MINUS one TO height at position n MINUS one  
        FOR i FROM n MINUS two DOWN TO zero  
            SET right_max at position i TO greater value BETWEEN right_max at position i PLUS one AND height at position i  
        END FOR  

        SET trapped_water TO zero  
        FOR i FROM zero TO n MINUS one  
            INCREMENT trapped_water BY smaller value BETWEEN left_max at position i AND right_max at position i MINUS height at position i  
        END FOR  

        RETURN trapped_water  
    END FUNCTION  
END CLASS