```
if nums empty: return 0
write = 0
for i in 0 to min(2,len(nums))-1: nums[write]=nums[i]; write+=1
for i in 2 to len(nums)-1:
    if nums[i] != nums[write-2]: nums[write]=nums[i]; write+=1
return write
```