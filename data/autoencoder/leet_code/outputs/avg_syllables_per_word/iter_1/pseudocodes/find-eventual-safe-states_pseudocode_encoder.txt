```
inf = ∞

function eventualSafeNodes(graph):
    n ← length(graph)
    visited ← array of 0 with size n  # 0=unvisited,1=visiting,2=safe
    
    function is_safe(node):
        if visited[node] = 1: return False
        if visited[node] = 2: return True
        visited[node] ← 1
        for nbr in graph[node]:
            if not is_safe(nbr): return False
        visited[node] ← 2
        return True

    safe_nodes ← []
    for node in 0 to n-1:
        if is_safe(node): safe_nodes.append(node)
    return safe_nodes
```