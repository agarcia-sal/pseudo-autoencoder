```
n = len(dist)
dp = [[âˆž]*(n+1) for _ in range(n)]
total = sum(dist)
if total/speed > hoursBefore: return -1

dp[0][:n] = [dist[0]]*(n)

for i in 1 to n-1:
  for j in 0 to i:
    if j < i:
      dp[i][j] = ceil(dp[i-1][j]/speed)*speed + dist[i]
    if j > 0:
      dp[i][j] = min(dp[i][j], dp[i-1][j-1] + dist[i])

for j in 0 to n-1:
  if dp[n-1][j] <= hoursBefore*speed: return j

return -1
```