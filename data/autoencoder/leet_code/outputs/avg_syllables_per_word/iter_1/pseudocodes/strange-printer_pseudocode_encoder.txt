```
define strangePrinter(s):
  define dp(i, j, memo):
    if i > j: return 0
    if (i,j) in memo: return memo[(i,j)]
    res = dp(i, j-1, memo) + 1
    for k in range(i, j):
      if s[k] == s[j]:
        res = min(res, dp(i, k-1, memo) + dp(k, j-1, memo))
    memo[(i,j)] = res
    return res
  return dp(0, len(s)-1, {})
```