```
for each point i:
    init map slopes = {}
    for each point j != i:
        s = slope(i, j) = inf if x_i = x_j else (y_i - y_j)/(x_i - x_j)
        slopes[s] += 1
    update max_points = max(max_points, max(slopes.values(), default=0))
return max_points + 1 if points else 0
```