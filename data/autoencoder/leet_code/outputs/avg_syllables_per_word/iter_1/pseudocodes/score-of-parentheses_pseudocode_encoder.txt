```
init stack = []
init score = 0
for each char in s:
    if char = '(':
        push score onto stack
        score = 0
    else:
        score = pop stack + (1 if score = 0 else 2 * score)
return score
```