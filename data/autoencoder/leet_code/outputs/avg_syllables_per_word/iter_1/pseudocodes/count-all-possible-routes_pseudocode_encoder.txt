```
MOD ← 10^9 + 7
n ← length(locations)

function dp(city, fuel_left):
    if fuel_left < 0: return 0
    routes ← 1 if city = finish else 0
    for next_city in [0..n-1] where next_city ≠ city:
        cost ← abs(locations[city] - locations[next_city])
        if fuel_left ≥ cost:
            routes ← (routes + dp(next_city, fuel_left - cost)) mod MOD
    return routes

return dp(start, fuel)
```