```
def partition(head, x):
    less_head, greater_head = ListNode(0), ListNode(0)
    less, greater, curr = less_head, greater_head, head
    while curr:
        if curr.val < x: less.next, less = curr, curr
        else: greater.next, greater = curr, curr
        curr = curr.next
    less.next, greater.next = greater_head.next, None
    return less_head.next
```