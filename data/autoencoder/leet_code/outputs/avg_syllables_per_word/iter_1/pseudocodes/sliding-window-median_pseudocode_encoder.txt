```
init lo = max-heap (store neg vals), hi = min-heap

balance_heaps():
    if len(lo) > len(hi) + 1: move top from lo to hi
    elif len(hi) > len(lo): move top from hi to lo

add_num(num):
    if lo empty or num â‰¤ -lo[0]: push -num to lo
    else: push num to hi
    balance_heaps()

remove_num(num):
    if num â‰¤ -lo[0]: remove -num from lo, heapify lo if not empty
    else: remove num from hi, heapify hi if not empty
    balance_heaps()

get_median():
    if len(lo) > len(hi): return -lo[0]
    else: return ((-lo[0] + hi[0]) / 2)

for i in [0..k-1]: add_num(nums[i])
medians = [get_median()]

for i in [k..len(nums)-1]:
    add_num(nums[i])
    remove_num(nums[i-k])
    medians.append(get_median())

return medians
```