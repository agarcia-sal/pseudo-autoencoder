```
build graph adj from edges  
count = [1]*n; dist = [0]*n

dfs1(u,p): 
  for v in adj[u] if v!=p:
    dfs1(v,u)
    count[u]+=count[v]
    dist[u]+=dist[v]+count[v]

dfs2(u,p):
  for v in adj[u] if v!=p:
    dist[v] = dist[u]-count[v]+(n-count[v])
    dfs2(v,u)

dfs1(0,-1)
dfs2(0,-1)
return dist
```