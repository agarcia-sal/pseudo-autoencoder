```
set MOD = 10^9+7
init dp[0] = 1, last = empty map
for i in 1 to n:
    c = s[i-1]
    dp[i] = (2 * dp[i-1]) mod MOD
    if c in last:
        dp[i] = (dp[i] - dp[last[c]-1] + MOD) mod MOD
    last[c] = i
return (dp[n] - 1) mod MOD
```