```
parse tokens from expression (numbers, vars, ops, parentheses)
map evalvars to evalints: var_map
init output stack, operators stack

define apply_operator():
    r = output.pop(); l = output.pop(); op = operators.pop()
    if op == '+': output.append(l.add(r))
    if op == '-': output.append(l.subtract(r))
    if op == '*': output.append(l.multiply(r))

for each token in tokens:
    if digit: push Expression with Term(coef=token, vars=[])
    if var:
        coef = var_map.get(token, 1)
        if coef == 1: push Expression with Term(1, [token])
        else: push Expression with Term(coef, [])
    if '(': push to operators
    if ')': pop/apply operators until '(' removed
    if operator '+', '-', '*':
        while operators and top not '(' and (token in '+-' or top=='*'):
            apply_operator()
        push operator

while operators: apply_operator()

simplify output[0]
return list of "coef*vars" or "coef" strings
```