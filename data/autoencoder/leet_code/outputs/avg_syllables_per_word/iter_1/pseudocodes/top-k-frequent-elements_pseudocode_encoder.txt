```
count freq_map ← freq of each num in nums
max_freq ← max value in freq_map
buckets ← list of empty lists size max_freq+1
for num, f in freq_map: buckets[f].append(num)
res ← []
for f from max_freq down to 1:
    if buckets[f] not empty:
        extend res by buckets[f]
        if len(res) ≥ k: return first k of res
return res
```