```
init char_count = {}
left, max_len = 0, 0
for right in 0..len(s)-1:
    char_count[s[right]] += 1
    while size(char_count) > 2:
        char_count[s[left]] -= 1
        if char_count[s[left]] == 0: remove s[left] from char_count
        left += 1
    max_len = max(max_len, right - left + 1)
return max_len
```