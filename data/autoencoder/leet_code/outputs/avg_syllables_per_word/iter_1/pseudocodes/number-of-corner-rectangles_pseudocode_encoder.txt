```
if grid empty: return 0
m, n = size of grid
count = 0
for i in [0..m-1]:
  for j in [i+1..m-1]:
    cols = count of k in [0..n-1] where grid[i][k] == 1 and grid[j][k] == 1
    if cols >= 2: count += cols*(cols-1)//2
return count
```