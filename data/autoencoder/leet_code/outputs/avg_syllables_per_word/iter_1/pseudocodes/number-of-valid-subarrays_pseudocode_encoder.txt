```
init stack = []
init count = 0
for num in nums:
    while stack and top(stack) > num:
        pop(stack)
    push(stack, num)
    count += len(stack)
return count
```