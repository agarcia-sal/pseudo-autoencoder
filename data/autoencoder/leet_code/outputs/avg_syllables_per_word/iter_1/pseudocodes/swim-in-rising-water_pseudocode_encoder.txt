```
n ← size of grid
visited ← {(0,0)}
heap ← [(grid[0][0], 0, 0)]
dirs ← [(0,1),(1,0),(0,-1),(-1,0)]

while heap not empty:
    t, i, j ← pop min from heap
    if (i,j) = (n-1, n-1): return t
    for di,dj in dirs:
        ni, nj ← i+di, j+dj
        if 0 ≤ ni,nj < n and (ni,nj) not in visited:
            visited.add((ni,nj))
            push heap (max(t, grid[ni][nj]), ni, nj)
return -1
```