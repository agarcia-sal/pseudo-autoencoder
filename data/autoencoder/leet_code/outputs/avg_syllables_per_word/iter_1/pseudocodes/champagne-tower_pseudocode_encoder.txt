```
init row = [poured]
for r in 1 to query_row:
    nxt = zeros(r+1)
    for i in 0 to len(row)-1:
        if row[i] > 1:
            ex = (row[i]-1)/2
            nxt[i] += ex
            nxt[i+1] += ex
    row = nxt
return min(row[query_glass], 1)
```