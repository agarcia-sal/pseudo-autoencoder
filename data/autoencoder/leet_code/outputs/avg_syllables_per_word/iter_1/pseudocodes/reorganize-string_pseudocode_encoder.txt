```
count ← frequency map of s
max_heap ← max-heap of (−freq, char) from count
prev_char, prev_freq ← None, 0
result ← empty list

while max_heap or prev_freq < 0:
  if max_heap empty and prev_freq < 0: return ""
  freq, char ← pop max_heap
  append char to result
  freq ← freq + 1
  if prev_freq < 0: push (prev_freq, prev_char) to max_heap
  prev_char, prev_freq ← char, freq

return join result
```