```
ip_to_int(ip) = sum(part << (8*(3-i)) for i, part in enumerate(ip.split('.')))
int_to_ip(num) = join '.' ( (num >> (8*i)) & 255 for i in [3..0] )
largest_cidr_size(start, n) =
  if start & 1: 1
  else x=1; while x <= n and (start & (x-1))==0: x <<=1; x >> 1

start = ip_to_int(ip)
res = []
while n>0:
  size = largest_cidr_size(start, n)
  res.append(int_to_ip(start) + '/' + str(32-(size.bit_length()-1)))
  start += size
  n -= size
return res
```