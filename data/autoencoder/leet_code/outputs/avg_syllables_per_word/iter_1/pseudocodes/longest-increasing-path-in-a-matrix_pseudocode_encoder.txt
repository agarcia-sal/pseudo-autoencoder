```
if matrix empty return 0
m, n = dims of matrix
dirs = [(1,0),(-1,0),(0,1),(0,-1)]
dp = m×n grid filled with -1

fn dfs(x,y):
  if dp[x][y] ≠ -1 return dp[x][y]
  max_len = 1
  for dx,dy in dirs:
    nx, ny = x+dx, y+dy
    if 0 ≤ nx < m and 0 ≤ ny < n and matrix[nx][ny] > matrix[x][y]:
      max_len = max(max_len, 1 + dfs(nx, ny))
  dp[x][y] = max_len
  return max_len

res = 0
for i in [0..m-1]:
  for j in [0..n-1]:
    res = max(res, dfs(i,j))

return res
```