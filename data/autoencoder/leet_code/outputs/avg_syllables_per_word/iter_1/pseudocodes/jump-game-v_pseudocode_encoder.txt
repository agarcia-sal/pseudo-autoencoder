```
dp(i) = 1 + max(dp(j) for j in neighbors(i) if arr[j] < arr[i]) or 1 if no neighbors
neighbors(i) = indices j within d steps left/right from i where arr[j] < arr[i], stopping at first j with arr[j] >= arr[i]
return max(dp(i) for i in 0..n-1)
```