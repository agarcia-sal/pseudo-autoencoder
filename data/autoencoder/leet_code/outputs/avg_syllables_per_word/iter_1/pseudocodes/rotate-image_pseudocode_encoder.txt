```
n = len(matrix)
for i in 0 to n-1:
    for j in i to n-1:
        swap matrix[i][j] and matrix[j][i]
for each row in matrix:
    reverse row
```