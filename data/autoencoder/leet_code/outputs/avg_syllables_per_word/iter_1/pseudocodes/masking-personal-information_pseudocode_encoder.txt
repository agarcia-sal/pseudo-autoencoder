```
if '@' in s:
    local, domain = split s at '@'
    return (first_char(local) + "*****" + last_char(local)).lower() + "@" + domain.lower()
else:
    digits = filter digits from s
    local_num = "***-***-" + last4(digits)
    if length(digits) == 10:
        return local_num
    else:
        cc = "+" + "*" * (length(digits) - 10) + "-"
        return cc + local_num
```