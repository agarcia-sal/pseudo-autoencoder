```
init domain_count as map with default int 0

for each cpdomain in cpdomains:
    split cpdomain into count_str and domain
    count = int(count_str)
    subdomains = split domain by '.'
    for i in 0 to length(subdomains)-1:
        subdomain = join subdomains[i:] with '.'
        domain_count[subdomain] += count

return list of strings "count domain" for each (domain, count) in domain_count
```