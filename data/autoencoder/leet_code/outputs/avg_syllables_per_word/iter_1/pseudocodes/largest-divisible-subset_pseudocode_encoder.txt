```
sort nums
n ← len(nums)
f ← [1]*n
k ← 0
for i in [0..n-1]:
    for j in [0..i-1]:
        if nums[i] mod nums[j] = 0: f[i] ← max(f[i], f[j]+1)
    if f[k] < f[i]: k ← i
m ← f[k]
i ← k
ans ← []
while m > 0:
    if nums[k] mod nums[i] = 0 and f[i] = m:
        append nums[i] to ans
        k ← i
        m ← m - 1
    i ← i - 1
return ans
```