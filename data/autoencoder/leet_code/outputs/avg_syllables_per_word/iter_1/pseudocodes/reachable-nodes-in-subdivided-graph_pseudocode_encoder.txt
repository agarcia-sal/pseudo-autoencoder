```
init graph: map node → list of (neighbor, cnt)
for (u,v,cnt) in edges:
  graph[u].append((v,cnt)); graph[v].append((u,cnt))

dist = array of size n with inf; dist[0] = 0
pq = min-heap[(0,0)]  # (dist,node)
while pq not empty:
  d,node = pop pq
  if d > dist[node]: continue
  for (nbr,cnt) in graph[node]:
    nd = d + cnt + 1
    if nd < dist[nbr]:
      dist[nbr] = nd
      push pq (nd,nbr)

res = count of nodes with dist ≤ maxMoves
for (u,v,cnt) in edges:
  mu = max(0, maxMoves - dist[u])
  mv = max(0, maxMoves - dist[v])
  res += min(cnt, mu + mv)

return res
```