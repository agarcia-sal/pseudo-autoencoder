```
for i from len(shifts)-2 down to 0:
    shifts[i] += shifts[i+1]
result = []
for i in 0 to len(s)-1:
    c = chr((ord(s[i]) - ord('a') + shifts[i]) % 26 + ord('a'))
    append c to result
return join result
```