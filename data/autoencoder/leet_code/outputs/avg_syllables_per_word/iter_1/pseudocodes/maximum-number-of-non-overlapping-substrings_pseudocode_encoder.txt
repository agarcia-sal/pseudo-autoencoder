``` 
first = map char -> first index in s
last = map char -> last index in s
for i, c in s:
    if c not in first: first[c] = i
    last[c] = i

intervals = []
for c in first:
    start, end = first[c], last[c]
    i = start
    while i â‰¤ end:
        if first[s[i]] < start: break
        end = max(end, last[s[i]])
        i += 1
    else:
        intervals.append((start, end))

sort intervals by end ascending

result = [], prev_end = -1
for start, end in intervals:
    if start > prev_end:
        add s[start:end+1] to result
        prev_end = end

return result
```