```
inf = ∞

func kSimilarity(s1, s2):
  func neighbors(s):
    i = first index where s[i] ≠ s2[i]
    for j in (i+1) to end:
      if s[j] = s2[i] and s[j] ≠ s2[j]:
        yield s with chars at i and j swapped

  queue ← deque([(s1, 0)])
  visited ← {s1}

  while queue not empty:
    s, swaps ← queue.pop_front()
    if s = s2:
      return swaps
    for n in neighbors(s):
      if n ∉ visited:
        visited.add(n)
        queue.append((n, swaps+1))
```