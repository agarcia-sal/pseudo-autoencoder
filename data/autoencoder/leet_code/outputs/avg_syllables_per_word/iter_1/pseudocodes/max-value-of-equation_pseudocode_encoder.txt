```
init max_val = -âˆž
init dq = empty deque

for (xj, yj) in points:
    while dq not empty and xj - dq[0].x > k: pop left from dq
    if dq not empty: max_val = max(max_val, yj + xj + dq[0].val)
    while dq not empty and yj - xj >= dq[-1].val: pop right from dq
    append (val = yj - xj, x = xj) to dq

return max_val
```