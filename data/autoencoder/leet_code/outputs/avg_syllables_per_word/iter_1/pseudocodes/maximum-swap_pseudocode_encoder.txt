```
convert num â†’ digits list
last = {digit: last index for digit, idx in digits}
for i, d in digits:
  for d2 from 9 down to d+1:
    if last[d2] > i:
      swap digits[i], digits[last[d2]]
      return int(join digits)
return num
```