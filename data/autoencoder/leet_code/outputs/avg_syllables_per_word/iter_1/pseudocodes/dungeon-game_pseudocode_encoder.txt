```
m, n ← size(dungeon)
dp ← matrix(m+1, n+1) filled with ∞
dp[m][n-1] ← dp[m-1][n] ← 1

for i from m-1 down to 0:
  for j from n-1 down to 0:
    need ← min(dp[i+1][j], dp[i][j+1]) - dungeon[i][j]
    dp[i][j] ← max(need, 1)

return dp[0][0]
```