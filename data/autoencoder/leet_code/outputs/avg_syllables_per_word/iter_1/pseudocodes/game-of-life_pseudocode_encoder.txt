```
if board empty return
m, n = dims of board
dirs = [(-1,-1),(-1,0),(-1,1),(0,-1),(0,1),(1,-1),(1,0),(1,1)]

for i in 0..m-1:
  for j in 0..n-1:
    cnt = count neighbours with board[ni][nj] in {1,3}
    if board[i][j] == 1 and (cnt < 2 or cnt > 3): board[i][j] = 3
    if board[i][j] == 0 and cnt == 3: board[i][j] = 2

for i in 0..m-1:
  for j in 0..n-1:
    if board[i][j] == 2: board[i][j] = 1
    if board[i][j] == 3: board[i][j] = 0
```