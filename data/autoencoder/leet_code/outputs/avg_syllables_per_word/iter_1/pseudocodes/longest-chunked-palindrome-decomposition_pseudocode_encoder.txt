```
init L=0, R=len(text)-1, LP="", RP="", k=0
while L < R:
  append text[L] to LP
  prepend text[R] to RP
  if LP == RP:
    k += 2; LP=RP=""
  L+=1; R-=1
if LP != "" or L == R: k += 1
return k
```