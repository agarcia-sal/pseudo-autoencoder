```
if board empty: return
m, n = dims of board

dfs(x,y):
  if x<0 or x≥m or y<0 or y≥n or board[x][y] ≠ 'O': return
  board[x][y] = 'S'
  dfs(x+1,y); dfs(x-1,y); dfs(x,y+1); dfs(x,y-1)

for i in 0..m-1: dfs(i,0); dfs(i,n-1)
for j in 0..n-1: dfs(0,j); dfs(m-1,j)

for i in 0..m-1:
  for j in 0..n-1:
    if board[i][j] = 'O': board[i][j] = 'X'

for i in 0..m-1:
  for j in 0..n-1:
    if board[i][j] = 'S': board[i][j] = 'O'
```