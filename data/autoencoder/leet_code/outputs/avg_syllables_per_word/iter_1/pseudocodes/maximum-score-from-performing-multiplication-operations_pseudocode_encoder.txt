```
m, n = len(muls), len(nums)
dp = [0]*(m+1)
for i in reverse(0..m-1):
    new_dp = [0]*(m+1)
    for left in 0..i:
        right = n-1-(i-left)
        new_dp[left] = max(muls[i]*nums[left] + dp[left+1], muls[i]*nums[right] + dp[left])
    dp = new_dp
return dp[0]
```