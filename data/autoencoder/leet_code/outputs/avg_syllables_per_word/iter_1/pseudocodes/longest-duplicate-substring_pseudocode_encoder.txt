```
set inf = ∞

method longestDupSubstring(s):
  define search(len):
    set seen = {}
    for i in 0 to |s|-len:
      sub = s[i : i+len]
      if sub in seen: return sub
      add sub to seen
    return ""

  left, right, longest = 1, |s|-1, ""
  while left ≤ right:
    mid = (left + right) // 2
    cand = search(mid)
    if cand ≠ "":
      longest = cand
      left = mid + 1
    else:
      right = mid - 1
  return longest
```