```
if k ≤ 1: return s
freq ← count chars in s
max_heap ← heap of (-freq, char) from freq
wait ← []
res ← []

while max_heap:
  c, ch ← pop max_heap
  append ch to res
  append (c+1, ch) to wait
  if size(wait) = k:
    c2, ch2 ← pop front wait
    if c2 < 0: push (c2, ch2) to max_heap

return "" if len(res) ≠ len(s) else join res
```