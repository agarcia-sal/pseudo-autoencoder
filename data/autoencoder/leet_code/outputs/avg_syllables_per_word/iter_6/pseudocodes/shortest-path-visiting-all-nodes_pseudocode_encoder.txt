CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph IS EMPTY  
            RETURN 0  
        
        SET n TO LENGTH OF graph  
        INITIALIZE queue WITH pairs of each node AND bitmask having only that node visited  
        INITIALIZE visited SET with same pairs as in queue  
        
        SET steps TO 0  
        SET all_nodes_visited TO bitmask with all n nodes visited  
        
        WHILE queue IS NOT EMPTY  
            FOR index FROM 1 TO LENGTH OF queue  
                SET current_node, visited_nodes TO REMOVE FIRST ELEMENT FROM queue  
                
                IF visited_nodes EQUALS all_nodes_visited  
                    RETURN steps  
                
                FOR each neighbor IN adjacency list of current_node FROM graph  
                    SET next_visited_nodes TO visited_nodes OR bitmask with neighbor node visited  
                    SET next_state TO pair of neighbor AND next_visited_nodes  
                    
                    IF next_state NOT IN visited  
                        ADD next_state TO visited  
                        ADD next_state TO queue  
            INCREMENT steps BY 1  
        
        RETURN negative one  
    END FUNCTION  
END CLASS