CLASS Solution  
    FUNCTION maximumCost(n, highways, k)  
        DEFINE FUNCTION dfs(city, visited, cost, highways_used)  
            IF highways_used EQUALS k THEN  
                SET max_cost TO maximum value BETWEEN max_cost AND cost  
                RETURN  
            FOR each neighbor, toll IN graph AT city  
                IF neighbor NOT IN visited THEN  
                    ADD neighbor TO visited  
                    CALL dfs WITH neighbor, visited, cost PLUS toll, highways_used PLUS 1  
                    REMOVE neighbor FROM visited  
            END FOR  
        END FUNCTION  
        
        SET graph TO mapping FROM cities TO list OF neighbors AND tolls  
        FOR each city1, city2, toll IN highways  
            APPEND tuple OF city2 AND toll TO graph AT city1  
            APPEND tuple OF city1 AND toll TO graph AT city2  
        END FOR  
        
        SET max_cost TO negative one  
        FOR each start_city FROM zero TO n MINUS one  
            SET visited TO set CONTAINING start_city  
            CALL dfs WITH start_city, visited, zero, zero  
        END FOR  
        
        RETURN max_cost  
    END FUNCTION  
END CLASS