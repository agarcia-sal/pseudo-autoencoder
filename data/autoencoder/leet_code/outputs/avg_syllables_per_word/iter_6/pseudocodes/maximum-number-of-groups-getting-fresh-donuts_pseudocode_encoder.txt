CLASS Solution  
    FUNCTION maxHappyGroups(batchSize, groups)  
        IF batchSize EQUALS 1 THEN  
            RETURN LENGTH OF groups  
        END IF  

        SET remainder_count TO list of zeros with length batchSize  
        FOR each group IN groups  
            INCREMENT remainder_count AT INDEX (group MODULO batchSize) BY 1  
        END FOR  

        FUNCTION dp(remainder, variable number of remainder_count_values)  
            SET remainder_count TO list created from remainder_count_values  
            SET max_happy TO 0  

            FOR i FROM 0 TO batchSize MINUS 1  
                IF remainder_count AT INDEX i EQUALS 0 THEN  
                    CONTINUE  
                END IF  

                DECREMENT remainder_count AT INDEX i BY 1  
                SET new_remainder TO (remainder MINUS i) MODULO batchSize  

                IF remainder EQUALS 0 THEN  
                    SET happy_groups TO 1 PLUS CALL dp WITH new_remainder AND unpacked remainder_count  
                ELSE  
                    SET happy_groups TO CALL dp WITH new_remainder AND unpacked remainder_count  
                END IF  

                IF happy_groups GREATER THAN max_happy THEN  
                    SET max_happy TO happy_groups  
                END IF  

                INCREMENT remainder_count AT INDEX i BY 1  
            END FOR  

            RETURN max_happy  
        END FUNCTION  

        RETURN CALL dp WITH 0 AND unpacked remainder_count  
    END FUNCTION  
END CLASS