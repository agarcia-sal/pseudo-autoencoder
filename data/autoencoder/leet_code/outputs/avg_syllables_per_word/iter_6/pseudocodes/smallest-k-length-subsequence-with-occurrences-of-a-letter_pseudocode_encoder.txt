CLASS Solution  
    FUNCTION smallestSubsequence(s, k, letter, repetition)  
        SET letter_count TO number of occurrences of letter in s  
        SET stack TO empty list  
        FOR each index i AND character char IN s  
            WHILE stack is not empty AND char is less than top element of stack AND length of s minus i plus length of stack minus 1 is greater than or equal to k  
                IF top element of stack EQUALS letter  
                    IF letter_count is greater than repetition  
                        INCREMENT repetition BY 1  
                        REMOVE top element FROM stack  
                    ELSE  
                        BREAK  
                ELSE  
                    REMOVE top element FROM stack  
            IF length of stack is less than k  
                IF char EQUALS letter  
                    APPEND char TO stack  
                    DECREMENT repetition BY 1  
                ELSE IF k MINUS length of stack is greater than repetition  
                    APPEND char TO stack  
                IF char EQUALS letter  
                    DECREMENT letter_count BY 1  
        WHILE length of stack is less than k  
            APPEND letter TO stack  
        RETURN concatenation of elements in stack  
    END FUNCTION  
END CLASS