CLASS Solution  
    FUNCTION loudAndRich(richer, quiet)  
        SET graph TO empty mapping from keys to lists  
        FOR each pair a, b IN richer  
            APPEND a TO graph AT key b  
        SET n TO LENGTH OF quiet  
        SET answer TO list of length n FILLED WITH value MINUS ONE  
        
        FUNCTION dfs(person)  
            IF answer AT index person EQUALS MINUS ONE  
                SET answer AT index person TO person  
                FOR each neighbor IN graph AT key person  
                    SET candidate TO CALL dfs WITH neighbor  
                    IF quiet AT candidate LESS THAN quiet AT answer AT person  
                        SET answer AT index person TO candidate  
            RETURN answer AT index person  
        END FUNCTION  
        
        FOR i FROM ZERO TO n MINUS ONE  
            CALL dfs WITH i  
        RETURN answer  
    END FUNCTION  
END CLASS