CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        CREATE graph AS mapping WITH default empty list  
        FOR each u, v IN edges  
            APPEND pair of scores AT v AND v TO graph AT u  
            APPEND pair of scores AT u AND u TO graph AT v  
        FOR each node IN graph  
            SET graph AT node TO top three pairs FROM graph AT node BY highest score  
        SET max_score TO negative one  
        FOR each u, v IN edges  
            FOR each score1, x IN graph AT u  
                FOR each score2, y IN graph AT v  
                    IF size OF set OF x, y, u, v EQUALS four  
                        SET max_score TO maximum OF max_score AND sum OF score1, score2, scores AT u, scores AT v  
        RETURN max_score  
    END FUNCTION  
END CLASS