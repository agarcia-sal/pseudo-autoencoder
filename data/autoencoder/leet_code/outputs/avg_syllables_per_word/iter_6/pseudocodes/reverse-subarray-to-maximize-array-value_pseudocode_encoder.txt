CLASS Solution  
    FUNCTION maxValueAfterReverse(nums)  
        SET n TO LENGTH OF nums  
        IF n EQUALS 2  
            RETURN absolute difference BETWEEN nums AT index 0 AND nums AT index 1  
        END IF  
        
        SET initial_value TO 0  
        FOR index FROM 1 TO n MINUS 1  
            INCREMENT initial_value BY absolute difference BETWEEN nums AT index AND nums AT index MINUS 1  
        END FOR  
        
        SET max_edge_gain TO 0  
        FOR index FROM 1 TO n MINUS 1  
            SET candidate_gain TO absolute difference BETWEEN nums AT index 0 AND nums AT index MINUS absolute difference BETWEEN nums AT index AND nums AT index MINUS 1  
            IF candidate_gain GREATER THAN max_edge_gain  
                SET max_edge_gain TO candidate_gain  
            END IF  
        END FOR  
        
        FOR index FROM 0 TO n MINUS 2  
            SET candidate_gain TO absolute difference BETWEEN nums AT index n MINUS 1 AND nums AT index MINUS absolute difference BETWEEN nums AT index PLUS 1 AND nums AT index  
            IF candidate_gain GREATER THAN max_edge_gain  
                SET max_edge_gain TO candidate_gain  
            END IF  
        END FOR  
        
        SET min_pair TO minimum OF maximum OF (nums AT index, nums AT index PLUS 1) FOR index FROM 0 TO n MINUS 2  
        SET max_pair TO maximum OF minimum OF (nums AT index, nums AT index PLUS 1) FOR index FROM 0 TO n MINUS 2  
        
        SET general_gain TO maximum OF 0 AND 2 MULTIPLIED BY (max_pair MINUS min_pair)  
        
        RETURN initial_value PLUS maximum OF max_edge_gain AND general_gain  
    END FUNCTION  
END CLASS