CLASS Solution  
    FUNCTION longestPath(parent, s)  
        IMPORT defaultdict FROM collections  
        
        SET tree TO defaultdict with list as default value  
        
        FOR index FROM 0 TO LENGTH OF parent MINUS 1  
            SET p TO parent at index  
            IF p NOT EQUALS MINUS 1  
                APPEND index TO tree at key p  
        
        SET self.result TO 1  
        
        FUNCTION dfs(node)  
            SET max1 TO 0  
            SET max2 TO 0  
            
            FOR each child IN tree at key node  
                SET child_length TO CALL dfs WITH argument child  
                
                IF character at s at child NOT EQUALS character at s at node  
                    IF child_length GREATER THAN max1  
                        SET max2 TO max1  
                        SET max1 TO child_length  
                    ELSE IF child_length GREATER THAN max2  
                        SET max2 TO child_length  
            
            SET self.result TO MAXIMUM OF self.result AND max1 PLUS max2 PLUS 1  
            
            RETURN max1 PLUS 1  
        END FUNCTION  
        
        CALL dfs WITH argument 0  
        
        RETURN self.result  
    END FUNCTION  
END CLASS