CLASS Solution  
    FUNCTION subarraysWithKDistinct(nums, k)  
        FUNCTION atMostKDistinct(t)  
            SET count TO empty map with default zero  
            SET left TO 0  
            SET result TO 0  
            FOR right FROM 0 TO LENGTH OF nums MINUS 1  
                INCREMENT count VALUE AT nums[right] BY 1  
                WHILE SIZE OF count IS GREATER THAN t  
                    DECREMENT count VALUE AT nums[left] BY 1  
                    IF count VALUE AT nums[left] EQUALS 0  
                        REMOVE nums[left] FROM count  
                    INCREMENT left BY 1  
                INCREMENT result BY right MINUS left PLUS 1  
            RETURN result  
        END FUNCTION  
        RETURN CALL atMostKDistinct WITH k MINUS CALL atMostKDistinct WITH k MINUS 1  
    END FUNCTION  
END CLASS