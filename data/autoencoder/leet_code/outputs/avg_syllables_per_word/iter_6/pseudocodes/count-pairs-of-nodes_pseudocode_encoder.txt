CLASS Solution  
    FUNCTION countPairs(n, edges, queries)  
        SET degree TO list of zeros with length n PLUS 1  
        
        FOR each pair u, v IN edges  
            INCREMENT degree at position u BY 1  
            INCREMENT degree at position v BY 1  
        
        SET shared TO empty mapping with default integer value  
        FOR each pair u, v IN edges  
            IF u GREATER THAN v THEN  
                SET temporary TO u  
                SET u TO v  
                SET v TO temporary  
            INCREMENT shared value at key (u, v) BY 1  
        
        SET sorted_degree TO degree sorted in ascending order  
        
        SET answers TO empty list  
        FOR each q IN queries  
            SET count TO 0  
            SET left TO 1  
            SET right TO n  
            
            WHILE left LESS THAN right  
                IF value at sorted_degree[left] PLUS value at sorted_degree[right] GREATER THAN q THEN  
                    INCREMENT count BY right MINUS left  
                    DECREMENT right BY 1  
                ELSE  
                    INCREMENT left BY 1  
            
            FOR each key (u, v) and value count_uv IN shared  
                SET degree_uv TO degree[u] PLUS degree[v]  
                IF degree_uv GREATER THAN q AND degree_uv MINUS count_uv LESS THAN OR EQUAL TO q THEN  
                    DECREMENT count BY 1  
            
            APPEND count TO answers  
        
        RETURN answers  
    END FUNCTION  
END CLASS