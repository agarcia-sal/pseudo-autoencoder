CLASS Solution  
    FUNCTION sequenceReconstruction(nums, sequences)  
        SET n TO LENGTH OF nums  
        SET graph TO new mapping from keys to empty lists  
        SET indegree TO list of zeros with length n PLUS 1  
        
        FOR each seq IN sequences  
            FOR index FROM 0 TO LENGTH OF seq MINUS 2  
                SET u TO seq AT index  
                SET v TO seq AT index PLUS 1  
                APPEND v TO graph AT u  
                INCREMENT indegree AT v BY 1  
        
        SET queue TO new deque containing each integer i FROM 1 TO n WHERE indegree AT i EQUALS 0  
        
        IF LENGTH OF queue NOT EQUALS 1  
            RETURN False  
        
        SET index TO 0  
        WHILE queue IS NOT EMPTY  
            IF LENGTH OF queue NOT EQUALS 1  
                RETURN False  
            
            SET node TO REMOVE FIRST ELEMENT FROM queue  
            IF node NOT EQUALS nums AT index  
                RETURN False  
            INCREMENT index BY 1  
            
            FOR each neighbor IN graph AT node  
                DECREMENT indegree AT neighbor BY 1  
                IF indegree AT neighbor EQUALS 0  
                    APPEND neighbor TO queue  
        
        RETURN index EQUALS n  
    END FUNCTION  
END CLASS