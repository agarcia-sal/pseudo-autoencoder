CLASS Solution  
    FUNCTION maskPII(s)  
        IF s CONTAINS '@' THEN  
            SPLIT s INTO local AND domain USING '@'  
            SET masked_local TO CONCATENATE FIRST CHARACTER OF local PLUS FIVE ASTERISKS PLUS LAST CHARACTER OF local  
            RETURN CONCATENATE masked_local CONVERTED TO LOWERCASE PLUS '@' PLUS domain CONVERTED TO LOWERCASE  
        ELSE  
            EXTRACT ALL DIGITS FROM s AND SET TO digits  
            SET local_number TO CONCATENATE THREE ASTERISKS PLUS DASH PLUS THREE ASTERISKS PLUS DASH PLUS LAST FOUR CHARACTERS OF digits  
            IF LENGTH OF digits EQUALS 10 THEN  
                RETURN local_number  
            ELSE  
                SET country_code_length TO LENGTH OF digits MINUS 10  
                SET country_code TO CONCATENATE PLUS SIGN PLUS country_code_length ASTERISKS PLUS DASH  
                RETURN CONCATENATE country_code PLUS local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS