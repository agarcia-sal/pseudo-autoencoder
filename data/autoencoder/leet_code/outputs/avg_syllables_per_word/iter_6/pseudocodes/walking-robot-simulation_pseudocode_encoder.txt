CLASS Solution  
    FUNCTION robotSim(commands, obstacles)  
        SET directions TO list of tuples representing North, East, South, West increments  
        SET x TO 0  
        SET y TO 0  
        SET dir_index TO 0  
        SET obstacles_set TO set created from tuples of obstacles  
        SET max_distance TO 0  
        
        FOR each command IN commands  
            IF command EQUALS -2 THEN  
                SET dir_index TO dir_index MINUS 1 MODULO 4  
            ELSE IF command EQUALS -1 THEN  
                SET dir_index TO dir_index PLUS 1 MODULO 4  
            ELSE  
                SET dx, dy TO element at dir_index in directions  
                FOR step FROM 1 TO command  
                    SET next_x TO x PLUS dx  
                    SET next_y TO y PLUS dy  
                    IF tuple of next_x and next_y IN obstacles_set THEN  
                        BREAK  
                    SET x TO next_x  
                    SET y TO next_y  
                SET current_distance TO x MULTIPLIED BY x PLUS y MULTIPLIED BY y  
                IF current_distance GREATER THAN max_distance THEN  
                    SET max_distance TO current_distance  
        
        RETURN max_distance  
    END FUNCTION  
END CLASS