CLASS Solution  
    FUNCTION candy(ratings)  
        SET n TO LENGTH OF ratings  
        SET candies TO list of length n with each element SET TO 1  
        
        FOR i FROM 1 TO n MINUS 1  
            IF ratings AT i GREATER THAN ratings AT i MINUS 1  
                SET candies AT i TO candies AT i MINUS 1 PLUS 1  
        
        FOR i FROM n MINUS 2 DOWN TO 0  
            IF ratings AT i GREATER THAN ratings AT i PLUS 1  
                SET candies AT i TO maximum of candies AT i AND candies AT i PLUS 1 PLUS 1  
        
        SET total_candies TO 0  
        FOR each candy IN candies  
            INCREMENT total_candies BY candy  
        
        RETURN total_candies  
    END FUNCTION  
END CLASS