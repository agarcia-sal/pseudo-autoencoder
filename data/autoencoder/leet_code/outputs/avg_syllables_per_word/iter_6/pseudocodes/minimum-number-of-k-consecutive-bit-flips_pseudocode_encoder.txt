CLASS Solution  
    FUNCTION minKBitFlips(nums, k)  
        SET n TO LENGTH OF nums  
        SET flip_count TO 0  
        SET flipped TO list of zeros with length n PLUS 1  
        SET flip_state TO 0  
        
        FOR i FROM 0 TO n MINUS 1  
            SET flip_state TO flip_state XOR flipped AT i  
            
            IF nums AT i EQUALS flip_state  
                IF i PLUS k GREATER THAN n  
                    RETURN MINUS 1  
                SET flip_state TO flip_state XOR 1  
                SET flipped AT i PLUS k TO flipped AT i PLUS k XOR 1  
                INCREMENT flip_count BY 1  
        RETURN flip_count  
    END FUNCTION  
END CLASS