CLASS Solution  
    FUNCTION shoppingOffers(price, special, needs)  
        SET filtered_special TO empty list  
        
        FOR each offer IN special  
            SET total_items_in_offer TO sum of all elements in offer except the last one  
            SET total_price_without_offer TO sum of each price element MULTIPLIED BY corresponding offer item count  
            IF total_items_in_offer GREATER THAN 0 AND last element of offer LESS THAN total_price_without_offer THEN  
                APPEND offer TO filtered_special  
        
        FUNCTION dfs(needs)  
            SET min_cost TO sum of each price element MULTIPLIED BY corresponding needs element  
            
            FOR each offer IN filtered_special  
                SET new_needs TO empty list  
                FOR each pair (n, o) IN needs and offer excluding last element  
                    APPEND n MINUS o TO new_needs  
                IF all elements in new_needs GREATER THAN OR EQUAL TO 0 THEN  
                    SET cost_with_offer TO last element of offer PLUS CALL dfs WITH new_needs converted to tuple  
                    SET min_cost TO min_cost OR cost_with_offer, whichever is less  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN CALL dfs WITH needs converted to tuple  
    END FUNCTION  
END CLASS