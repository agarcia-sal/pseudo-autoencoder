CLASS Solution  
    FUNCTION updateMatrix(mat)  
        IF mat IS EMPTY OR mat AT INDEX 0 IS EMPTY THEN  
            RETURN mat  
        SET rows TO LENGTH OF mat  
        SET cols TO LENGTH OF mat AT INDEX 0  
        SET dist TO new matrix of size rows BY cols FILLED WITH infinity  
        SET queue TO new empty double-ended queue  
        
        FOR r FROM 0 TO rows MINUS 1  
            FOR c FROM 0 TO cols MINUS 1  
                IF mat AT INDEX r AT INDEX c EQUALS 0 THEN  
                    SET dist AT INDEX r AT INDEX c TO 0  
                    APPEND tuple (r, c) TO queue  
        
        SET directions TO list of tuples: (-1, 0), (1, 0), (0, -1), (0, 1)  
        
        WHILE queue IS NOT EMPTY  
            REMOVE first element FROM queue AND ASSIGN TO (r, c)  
            FOR each (dr, dc) IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr GREATER THAN OR EQUAL TO 0 AND nr LESS THAN rows AND nc GREATER THAN OR EQUAL TO 0 AND nc LESS THAN cols AND dist AT INDEX nr AT INDEX nc GREATER THAN dist AT INDEX r AT INDEX c PLUS 1 THEN  
                    SET dist AT INDEX nr AT INDEX nc TO dist AT INDEX r AT INDEX c PLUS 1  
                    APPEND tuple (nr, nc) TO queue  
        
        RETURN dist  
    END FUNCTION  
END CLASS