CLASS Solution  
    FUNCTION waysToPartition(nums, k)  
        SET total_sum TO sum of elements in nums  
        SET n TO length of nums  
        
        SET left_diff TO a dictionary with default integer zero  
        SET right_diff TO a dictionary with default integer zero  
        
        SET current_sum TO 0  
        FOR index FROM 0 TO n MINUS 2  
            INCREMENT current_sum BY element at index in nums  
            SET diff TO total_sum MINUS 2 MULTIPLIED BY current_sum  
            INCREMENT right_diff at key diff BY 1  
        
        SET max_ways TO value at key 0 in right_diff  
        
        SET current_sum TO 0  
        FOR index FROM 0 TO n MINUS 1  
            INCREMENT current_sum BY element at index in nums  
            
            SET diff_change TO k MINUS element at index in nums  
            
            SET new_ways TO value at key NEGATIVE diff_change in left_diff PLUS value at key diff_change in right_diff  
            SET max_ways TO maximum of max_ways and new_ways  
            
            SET diff TO total_sum MINUS 2 MULTIPLIED BY current_sum  
            DECREMENT right_diff at key diff BY 1  
            INCREMENT left_diff at key diff BY 1  
        
        RETURN max_ways  
    END FUNCTION  
END CLASS