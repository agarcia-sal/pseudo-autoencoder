CLASS Solution  
    FUNCTION maxProfit(k, prices)  
        IF prices IS EMPTY OR k EQUALS 0  
            RETURN 0  
        
        SET n TO LENGTH OF prices  
        
        IF k GREATER THAN OR EQUAL TO n DIVIDED BY 2  
            SET profit TO 0  
            FOR index FROM 1 TO n MINUS 1  
                IF prices AT index GREATER THAN prices AT index MINUS 1  
                    INCREMENT profit BY prices AT index MINUS prices AT index MINUS 1  
            RETURN profit  
        
        SET hold TO LIST OF LENGTH k PLUS 1 FILLED WITH NEGATIVE INFINITY  
        SET release TO LIST OF LENGTH k PLUS 1 FILLED WITH 0  
        
        FOR each price IN prices  
            FOR i FROM 1 TO k  
                SET hold AT i TO MAXIMUM OF hold AT i AND release AT i MINUS 1 MINUS price  
                SET release AT i TO MAXIMUM OF release AT i AND hold AT i PLUS price  
        
        RETURN release AT k  
    END FUNCTION  
END CLASS