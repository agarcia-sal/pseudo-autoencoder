CLASS Solution  
    FUNCTION partition(s)  
        FUNCTION is_palindrome(sub)  
            RETURN whether sub EQUALS reverse of sub  
        END FUNCTION  

        FUNCTION backtrack(start, path)  
            IF start EQUALS length of s  
                APPEND path TO result  
                RETURN  
            FOR end FROM start PLUS 1 TO length of s PLUS 1  
                IF CALL is_palindrome WITH s sliced from start TO end IS TRUE  
                    CALL backtrack WITH end AND path PLUS list containing s sliced from start TO end  
        END FUNCTION  

        SET result TO empty list  
        CALL backtrack WITH 0 AND empty list  
        RETURN result  
    END FUNCTION  
END CLASS