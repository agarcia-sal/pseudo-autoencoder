CLASS Solution  
    FUNCTION trap(height)  
        IF height IS EMPTY  
            RETURN 0  
        SET n TO LENGTH OF height  
        SET left_max TO list of size n initialized with 0  
        SET right_max TO list of size n initialized with 0  

        SET left_max at index 0 TO height at index 0  
        FOR i FROM 1 TO n MINUS 1  
            SET left_max at index i TO greater value BETWEEN left_max at index i MINUS 1 AND height at index i  

        SET right_max at index n MINUS 1 TO height at index n MINUS 1  
        FOR i FROM n MINUS 2 DOWN TO 0  
            SET right_max at index i TO greater value BETWEEN right_max at index i PLUS 1 AND height at index i  

        SET trapped_water TO 0  
        FOR i FROM 0 TO n MINUS 1  
            INCREMENT trapped_water BY smaller value BETWEEN left_max at index i AND right_max at index i MINUS height at index i  

        RETURN trapped_water  
    END FUNCTION  
END CLASS