CLASS Solution  
    FUNCTION visiblePoints(points, angle, location)  
        SET angles TO empty list  
        SET extra_points TO 0  

        FOR each x, y IN points  
            IF x EQUALS location AT first position AND y EQUALS location AT second position  
                INCREMENT extra_points BY 1  
                CONTINUE TO next iteration  
            END IF  
            SET angle_rad TO CALL arctangent WITH y MINUS location AT second position, x MINUS location AT first position  
            SET angle_deg TO CALL degrees conversion WITH angle_rad  
            APPEND angle_deg TO angles  
        END FOR  

        CALL sort ON angles  

        SET extended_angles TO concatenation of angles AND each element in angles INCREMENTED BY 360  
        SET angles TO extended_angles  

        SET max_visible TO 0  
        SET left TO 0  

        FOR right FROM 0 TO LENGTH OF angles MINUS 1  
            WHILE angles AT right MINUS angles AT left GREATER THAN angle  
                INCREMENT left BY 1  
            END WHILE  
            SET window_size TO right MINUS left PLUS 1  
            IF window_size GREATER THAN max_visible  
                SET max_visible TO window_size  
            END IF  
        END FOR  

        RETURN max_visible PLUS extra_points  
    END FUNCTION  
END CLASS