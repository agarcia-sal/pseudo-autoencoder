CLASS Solution  
    FUNCTION cherryPickup(grid)  
        SET rows TO LENGTH OF grid  
        SET cols TO LENGTH OF first element IN grid  
        
        FUNCTION dp(r, c1, c2)  
            IF c1 LESS THAN 0 OR c1 GREATER THAN OR EQUAL TO cols OR c2 LESS THAN 0 OR c2 GREATER THAN OR EQUAL TO cols THEN  
                RETURN 0  
            END IF  
            
            IF c1 EQUALS c2 THEN  
                SET cherries TO value AT grid position r AND c1  
            ELSE  
                SET cherries TO value AT grid position r AND c1 PLUS value AT grid position r AND c2  
            END IF  
            
            IF r EQUALS rows MINUS 1 THEN  
                RETURN cherries  
            END IF  
            
            SET max_cherries TO 0  
            FOR each dc1 IN list of -1, 0, 1  
                FOR each dc2 IN list of -1, 0, 1  
                    SET candidate TO CALL dp WITH r PLUS 1, c1 PLUS dc1, c2 PLUS dc2  
                    IF candidate GREATER THAN max_cherries THEN  
                        SET max_cherries TO candidate  
                    END IF  
                END FOR  
            END FOR  
            
            RETURN cherries PLUS max_cherries  
        END FUNCTION  
        
        RETURN CALL dp WITH 0, 0, cols MINUS 1  
    END FUNCTION  
END CLASS