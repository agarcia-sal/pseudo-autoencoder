CLASS Solution  
    FUNCTION superpalindromesInRange(left, right)  
        FUNCTION is_palindrome(num)  
            RETURN string representation of num EQUALS reversed string representation of num  
        END FUNCTION  

        FUNCTION generate_palindromes(limit)  
            SET palindromes TO empty list  
            FOR i FROM 1 TO 99999  
                SET s TO string representation of i  
                APPEND integer formed by concatenating s AND s excluding last character reversed TO palindromes  
                APPEND integer formed by concatenating s AND s reversed TO palindromes  
            FILTER palindromes TO contain only numbers LESS THAN OR EQUAL TO limit  
            RETURN filtered palindromes  
        END FUNCTION  

        SET left TO integer value of left  
        SET right TO integer value of right  
        SET limit TO integer value of square root of right PLUS 1  
        SET palindromes TO CALL generate_palindromes WITH limit  
        
        SET count TO 0  
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF left LESS THAN OR EQUAL TO square AND square LESS THAN OR EQUAL TO right AND CALL is_palindrome WITH square IS TRUE  
                INCREMENT count BY 1  
        RETURN count  
    END FUNCTION  
END CLASS