CLASS Solution  
    FUNCTION validUtf8(data)  
        FUNCTION get_byte_count(byte)  
            IF byte SHIFTED RIGHT BY 7 EQUALS 0 THEN  
                RETURN 1  
            ELSE IF byte SHIFTED RIGHT BY 5 EQUALS binary 110 THEN  
                RETURN 2  
            ELSE IF byte SHIFTED RIGHT BY 4 EQUALS binary 1110 THEN  
                RETURN 3  
            ELSE IF byte SHIFTED RIGHT BY 3 EQUALS binary 11110 THEN  
                RETURN 4  
            ELSE  
                RETURN -1  
        END FUNCTION  

        SET i TO 0  
        WHILE i LESS THAN LENGTH OF data DO  
            SET byte_count TO CALL get_byte_count WITH data AT i  
            IF byte_count EQUALS -1 THEN  
                RETURN False  
            END IF  
            IF i PLUS byte_count GREATER THAN LENGTH OF data THEN  
                RETURN False  
            END IF  
            FOR j FROM i PLUS 1 TO i PLUS byte_count MINUS 1 DO  
                IF data AT j SHIFTED RIGHT BY 6 NOT EQUALS binary 10 THEN  
                    RETURN False  
                END IF  
            END FOR  
            INCREMENT i BY byte_count  
        END WHILE  
        RETURN True  
    END FUNCTION  
END CLASS