CLASS Solution
    FUNCTION maxBuilding(n, restrictions)
        APPEND list containing 1 and 0 TO restrictions
        CALL sort ON restrictions

        FOR i FROM 1 TO LENGTH OF restrictions MINUS 1
            SET idx TO restrictions AT i AT 0
            SET height TO restrictions AT i AT 1
            SET prev_idx TO restrictions AT i MINUS 1 AT 0
            SET prev_height TO restrictions AT i MINUS 1 AT 1
            SET restrictions AT i AT 1 TO MINIMUM OF height AND prev_height PLUS idx MINUS prev_idx
        END FOR

        FOR i FROM LENGTH OF restrictions MINUS 2 DOWN TO 0
            SET idx TO restrictions AT i AT 0
            SET height TO restrictions AT i AT 1
            SET next_idx TO restrictions AT i PLUS 1 AT 0
            SET next_height TO restrictions AT i PLUS 1 AT 1
            SET restrictions AT i AT 1 TO MINIMUM OF height AND next_height PLUS next_idx MINUS idx
        END FOR

        SET max_height TO 0
        SET prev_idx TO restrictions AT 0 AT 0
        SET prev_height TO restrictions AT 0 AT 1

        FOR i FROM 1 TO LENGTH OF restrictions MINUS 1
            SET idx TO restrictions AT i AT 0
            SET height TO restrictions AT i AT 1
            SET possible_height TO idx MINUS prev_idx PLUS prev_height PLUS height DIVIDED BY 2
            SET max_height TO MAXIMUM OF max_height AND possible_height
            SET prev_idx TO idx
            SET prev_height TO height
        END FOR

        SET max_height TO MAXIMUM OF max_height AND prev_height PLUS n MINUS prev_idx
        
        RETURN max_height
    END FUNCTION
END CLASS