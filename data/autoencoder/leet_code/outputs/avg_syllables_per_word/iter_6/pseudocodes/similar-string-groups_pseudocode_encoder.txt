CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET diff TO empty list  
            FOR index FROM 0 TO LENGTH OF s1 MINUS 1  
                IF character at s1[index] NOT EQUALS character at s2[index]  
                    APPEND index TO diff  
            IF LENGTH OF diff EQUALS 0  
                RETURN TRUE  
            ELSE IF LENGTH OF diff EQUALS 2 AND character at s1[diff[0]] EQUALS character at s2[diff[1]] AND character at s1[diff[1]] EQUALS character at s2[diff[0]]  
                RETURN TRUE  
            ELSE  
                RETURN FALSE  
        END FUNCTION  
        
        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN graph[node]  
                IF neighbor NOT IN visited  
                    CALL dfs WITH neighbor AND visited  
        END FUNCTION  
        
        SET n TO LENGTH OF strs  
        SET graph TO dictionary mapping each index FROM 0 TO n MINUS 1 TO empty list  
        
        FOR i FROM 0 TO n MINUS 1  
            FOR j FROM i PLUS 1 TO n MINUS 1  
                IF CALL are_similar WITH strs[i] AND strs[j] IS TRUE  
                    APPEND j TO graph[i]  
                    APPEND i TO graph[j]  
        
        SET visited TO empty set  
        SET num_groups TO 0  
        
        FOR i FROM 0 TO n MINUS 1  
            IF i NOT IN visited  
                CALL dfs WITH i AND visited  
                INCREMENT num_groups BY 1  
        
        RETURN num_groups  
    END FUNCTION  
END CLASS