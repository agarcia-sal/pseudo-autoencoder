CLASS Solution  
    FUNCTION longestLine(mat)  
        IF mat IS EMPTY OR mat AT INDEX 0 IS EMPTY  
            RETURN 0  
        
        SET m TO LENGTH OF mat  
        SET n TO LENGTH OF mat AT INDEX 0  
        SET directions TO list of tuples (0 and 1 combinations representing right, down, down-right, down-left)  
        SET max_length TO 0  
        
        FUNCTION check(x, y, dx, dy)  
            SET length TO 0  
            WHILE x GREATER THAN OR EQUAL TO 0 AND x LESS THAN m AND y GREATER THAN OR EQUAL TO 0 AND y LESS THAN n AND mat AT INDEX x AT INDEX y EQUALS 1  
                INCREMENT length BY 1  
                INCREMENT x BY dx  
                INCREMENT y BY dy  
            RETURN length  
        END FUNCTION  
        
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                IF mat AT INDEX i AT INDEX j EQUALS 1  
                    FOR each dx, dy IN directions  
                        IF i MINUS dx LESS THAN 0 OR j MINUS dy LESS THAN 0 OR j MINUS dy GREATER THAN OR EQUAL TO n OR mat AT INDEX i MINUS dx AT INDEX j MINUS dy EQUALS 0  
                            SET max_length TO maximum of max_length AND CALL check WITH arguments i, j, dx, dy  
        
        RETURN max_length  
    END FUNCTION  
END CLASS