CLASS Solution  
    FUNCTION wordBreak(s, wordDict)  
        SET wordSet TO conversion of wordDict into a set for quick membership checking  
        SET memo TO empty dictionary  
        
        FUNCTION backtrack(start)  
            IF start IS IN memo  
                RETURN value from memo AT start  
            END IF  
            IF start EQUALS length of s  
                RETURN list containing empty string  
            END IF  
            
            SET res TO empty list  
            FOR end FROM start PLUS 1 TO length of s  
                SET word TO substring of s FROM start TO end  
                IF word IS IN wordSet  
                    FOR each sentence IN backtrack(end)  
                        IF sentence IS NOT empty  
                            APPEND concatenation of word PLUS space PLUS sentence TO res  
                        ELSE  
                            APPEND word TO res  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
            
            SET memo AT start TO res  
            RETURN res  
        END FUNCTION  
        
        RETURN result of calling backtrack WITH 0  
    END FUNCTION  
END CLASS