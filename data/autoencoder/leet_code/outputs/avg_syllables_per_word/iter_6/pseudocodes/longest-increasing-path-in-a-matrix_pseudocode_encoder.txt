CLASS Solution  
    FUNCTION longestIncreasingPath(matrix)  
        IF matrix IS EMPTY OR first row of matrix IS EMPTY THEN  
            RETURN 0  
        
        SET m TO LENGTH OF matrix  
        SET n TO LENGTH OF first row of matrix  
        SET directions TO list of pairs (1, 0), (-1, 0), (0, 1), (0, -1)  
        SET dp TO two-dimensional list of size m by n FILLED WITH -1  
        
        FUNCTION dfs(x, y)  
            IF dp at position x, y IS NOT EQUAL TO -1 THEN  
                RETURN dp at position x, y  
            
            SET max_length TO 1  
            FOR each pair dx, dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                IF nx GREATER THAN OR EQUAL TO 0 AND nx LESS THAN m AND ny GREATER THAN OR EQUAL TO 0 AND ny LESS THAN n AND matrix at nx, ny GREATER THAN matrix at x, y THEN  
                    SET max_length TO maximum BETWEEN max_length AND 1 PLUS CALL dfs WITH nx, ny  
            
            SET dp at position x, y TO max_length  
            RETURN max_length  
        END FUNCTION  
        
        SET longest_path TO 0  
        FOR i FROM 0 TO m MINUS 1  
            FOR j FROM 0 TO n MINUS 1  
                SET longest_path TO maximum BETWEEN longest_path AND CALL dfs WITH i, j  
        
        RETURN longest_path  
    END FUNCTION  
END CLASS