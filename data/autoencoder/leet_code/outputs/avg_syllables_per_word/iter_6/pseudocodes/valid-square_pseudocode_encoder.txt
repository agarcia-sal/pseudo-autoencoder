CLASS Solution  
    FUNCTION validSquare(p1, p2, p3, p4)  
        FUNCTION squared_distance(point1, point2)  
            CALCULATE difference of first coordinate of point1 and point2  
            CALCULATE difference of second coordinate of point1 and point2  
            RETURN sum of squares of both differences  
        END FUNCTION  
        
        SET list points TO list containing p1, p2, p3, p4  
        SET set distances TO empty set  
        
        FOR index i FROM 0 TO 3  
            FOR index j FROM i PLUS 1 TO 3  
                CALL squared_distance WITH points at i and points at j, STORE in dist  
                IF dist EQUALS 0 THEN  
                    RETURN False  
                END IF  
                ADD dist TO distances  
            END FOR  
        END FOR  
        
        RETURN True IF SIZE OF distances EQUALS 2 OTHERWISE False  
    END FUNCTION  
END CLASS