CLASS Solution  
    FUNCTION numOfWays(nums)  
        SET MOD TO ten raised to the power of nine PLUS one  

        FUNCTION count_ways(arr)  
            IF LENGTH OF arr LESS THAN OR EQUAL TO one  
                RETURN one  
            END IF  

            SET root TO first element of arr  
            SET left_subtree TO list of elements in arr WHERE element LESS THAN root  
            SET right_subtree TO list of elements in arr WHERE element GREATER THAN root  

            SET ways_left TO CALL count_ways WITH left_subtree  
            SET ways_right TO CALL count_ways WITH right_subtree  

            SET total_ways TO CALL comb WITH sum of LENGTH OF left_subtree AND LENGTH OF right_subtree AND LENGTH OF left_subtree  

            RETURN ways_left MULTIPLIED BY ways_right MULTIPLIED BY total_ways MODULO MOD  
        END FUNCTION  

        RETURN CALL count_ways WITH nums MINUS one MODULO MOD  
    END FUNCTION  
END CLASS