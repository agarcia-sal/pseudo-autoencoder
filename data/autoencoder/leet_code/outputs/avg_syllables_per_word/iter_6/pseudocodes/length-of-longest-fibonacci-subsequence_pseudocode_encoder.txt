CLASS Solution
    FUNCTION lenLongestFibSubseq(arr)
        SET index TO EMPTY MAP
        FOR i FROM 0 TO LENGTH OF arr MINUS 1
            SET x TO arr AT i
            SET index AT x TO i
        SET dp TO EMPTY MAP
        SET max_length TO 0

        FOR k FROM 0 TO LENGTH OF arr MINUS 1
            FOR j FROM 0 TO k MINUS 1
                SET i TO VALUE FROM index AT (arr AT k MINUS arr AT j), OR -1 IF NOT FOUND
                IF i IS GREATER THAN OR EQUAL TO 0 AND i IS LESS THAN j
                    SET dp AT (j, k) TO VALUE FROM dp AT (i, j), OR 2 IF NOT FOUND, PLUS 1
                    IF dp AT (j, k) IS GREATER THAN max_length
                        SET max_length TO dp AT (j, k)

        IF max_length IS GREATER THAN OR EQUAL TO 3
            RETURN max_length
        ELSE
            RETURN 0
    END FUNCTION
END CLASS