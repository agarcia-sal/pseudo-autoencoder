CLASS Solution  
    FUNCTION calculateMinimumHP(dungeon)  
        SET m TO LENGTH OF dungeon  
        SET n TO LENGTH OF dungeon AT index 0  
        
        CALL dp TO CREATE two-dimensional list with (m PLUS 1) rows and (n PLUS 1) columns filled with infinity  
        
        SET dp AT row m and column (n MINUS 1) TO 1  
        SET dp AT row (m MINUS 1) and column n TO 1  
        
        FOR i FROM (m MINUS 1) DOWN TO 0  
            FOR j FROM (n MINUS 1) DOWN TO 0  
                SET min_health TO MINIMUM OF dp AT (i PLUS 1, j) AND dp AT (i, j PLUS 1) MINUS dungeon AT (i, j)  
                SET dp AT (i, j) TO MAXIMUM OF min_health AND 1  
        
        RETURN dp AT (0, 0)  
    END FUNCTION  
END CLASS