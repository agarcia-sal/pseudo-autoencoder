CLASS Solution  
    FUNCTION subsetsWithDup(nums)  
        Sort the elements of nums in ascending order  
        SET result TO an empty list  
        SET subset TO an empty list  
        
        FUNCTION dfs(i)  
            IF i GREATER THAN OR EQUAL TO the LENGTH OF nums THEN  
                Append a copy of subset TO result  
                RETURN  
            END IF  
            
            Append the element at position i of nums TO subset  
            Call dfs with argument i PLUS one  
            
            Remove the last element from subset  
            WHILE i PLUS one LESS THAN the LENGTH OF nums AND the element at position i of nums EQUALS the element at position i PLUS one of nums DO  
                INCREMENT i BY one  
            END WHILE  
            Call dfs with argument i PLUS one  
        END FUNCTION  
        
        Call dfs with argument zero  
        RETURN result  
    END FUNCTION  
END CLASS