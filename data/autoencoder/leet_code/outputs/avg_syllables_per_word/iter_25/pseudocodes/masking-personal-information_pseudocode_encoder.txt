CLASS Solution  
    FUNCTION maskPII WITH PARAMETER s  
        IF s CONTAINS the CHARACTER at SIGN  
            SET local AND domain TO the RESULT OF SPLITTING s BY the CHARACTER at SIGN  
            SET masked_local TO the FIRST CHARACTER of local CONCATENATED WITH FIVE ASTERISK CHARACTERS CONCATENATED WITH the LAST CHARACTER of local  
            RETURN the RESULT OF CONVERTING masked_local TO LOWERCASE CONCATENATED WITH the CHARACTER at SIGN CONCATENATED WITH the RESULT OF CONVERTING domain TO LOWERCASE  
        ELSE  
            SET digits TO the RESULT OF JOINING EACH CHARACTER THAT IS A DIGIT FROM s  
            SET local_number TO THREE ASTERISK CHARACTERS CONCATENATED WITH DASH CONCATENATED WITH THREE ASTERISK CHARACTERS CONCATENATED WITH DASH CONCATENATED WITH the LAST FOUR CHARACTERS of digits  
            IF the LENGTH OF digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the LENGTH OF digits MINUS ten  
                SET country_code TO the PLUS SIGN CONCATENATED WITH country_code_length ASTERISK CHARACTERS CONCATENATED WITH DASH  
                RETURN country_code CONCATENATED WITH local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS