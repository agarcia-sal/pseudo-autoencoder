CLASS Solution  
    FUNCTION wordPatternMatch WITH PARAMETERS pattern string AND s string  
        FUNCTION backtrack WITH PARAMETERS pattern_index AND string_index AND mapping AND used  
            IF pattern_index EQUALS the LENGTH OF pattern AND string_index EQUALS the LENGTH OF s  
                RETURN True  
            END IF  
            IF pattern_index EQUALS the LENGTH OF pattern OR string_index EQUALS the LENGTH OF s  
                RETURN False  
            END IF  
            SET current_char TO element at position pattern_index of pattern  
            IF current_char IS a key IN mapping  
                SET word TO value associated with current_char IN mapping  
                IF the substring of s from position string_index TO position string_index PLUS the LENGTH OF word DOES NOT EQUAL word  
                    RETURN False  
                END IF  
                IF backtrack CALLED WITH pattern_index PLUS one AND string_index PLUS the LENGTH OF word AND mapping AND used RETURNS True  
                    RETURN True  
                END IF  
            ELSE  
                FOR end FROM string_index PLUS one TO the LENGTH OF s PLUS one  
                    SET word TO the substring of s from position string_index TO position end  
                    IF word IS contained IN used  
                        CONTINUE  
                    END IF  
                    SET the value associated with current_char IN mapping TO word  
                    ADD word TO used  
                    IF backtrack CALLED WITH pattern_index PLUS one AND end AND mapping AND used RETURNS True  
                        RETURN True  
                    END IF  
                    REMOVE the key current_char FROM mapping  
                    REMOVE word FROM used  
                END FOR  
            END IF  
            RETURN False  
        END FUNCTION  
        RETURN backtrack CALLED WITH zero AND zero AND an empty mapping AND an empty used set  
    END FUNCTION  
END CLASS