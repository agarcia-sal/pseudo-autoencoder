CLASS Solution  
    FUNCTION longestIncreasingPath(matrix)  
        IF matrix EQUALS empty OR element at position zero of matrix EQUALS empty  
            RETURN zero  
        END IF  
        SET m TO the LENGTH OF matrix  
        SET n TO the LENGTH OF element at position zero of matrix  
        SET directions TO a list containing a list of one and zero PLUS a list of negative one and zero PLUS a list of zero and one PLUS a list of zero and negative one  
        SET dp TO a list of lists each initialized with negative one with the LENGTH OF n REPEATED m times  
        FUNCTION dfs(x, y)  
            IF element at position x of dp AND element at position y DOES NOT EQUAL negative one  
                RETURN element at position x of dp AND element at position y  
            END IF  
            SET max_length TO one  
            FOR each pair dx, dy IN directions  
                SET nx TO x PLUS dx  
                SET ny TO y PLUS dy  
                IF zero LESS THAN OR EQUAL TO nx AND nx LESS THAN m AND zero LESS THAN OR EQUAL TO ny AND ny LESS THAN n AND element at position nx of matrix AND element at position ny GREATER THAN element at position x of matrix AND element at position y  
                    SET max_length TO the GREATER OF max_length AND one PLUS dfs(nx, ny)  
                END IF  
            END FOR  
            SET element at position x of dp AND element at position y TO max_length  
            RETURN max_length  
        END FUNCTION  
        SET longest_path TO zero  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                SET longest_path TO the GREATER OF longest_path AND dfs(i, j)  
            END FOR  
        END FOR  
        RETURN longest_path  
    END FUNCTION  
END CLASS