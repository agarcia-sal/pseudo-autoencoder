CLASS Solution  
    FUNCTION maxValue WITH PARAMETERS events AND k  
        SET events TO the list of events sorted by the end day of each event  
        SET n TO the length of the list of events  
        SET dp TO a list containing for each number from zero TO n a list of zeros of length k PLUS one representing maximum values for attending events  
        FOR i FROM one TO n  
            SET start TO the start day of the event at position i MINUS one of events  
            SET end TO the end day of the event at position i MINUS one of events  
            SET value TO the value of the event at position i MINUS one of events  
            SET j TO the position to insert start in events to maintain order based on end day using binary search  
            FOR l FROM one TO k  
                SET dp at position i and l TO the maximum of the value at dp position i MINUS one and l AND the sum of dp at position j and l MINUS one AND value  
            END FOR  
        END FOR  
        RETURN the value at dp position n and k  
    END FUNCTION  
END CLASS