CLASS Solution  
    FUNCTION maxStudents WITH PARAMETER seats  
        SET m TO the LENGTH OF seats  
        SET n TO the LENGTH OF element at position zero of seats  
        
        SET broken TO a new list of zero repeated m times  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF element at position j of element at position i of seats EQUALS the character number sign THEN  
                    SET broken at position i TO broken at position i BITWISE OR one LEFT SHIFTED BY j  
                END IF  
            END FOR  
        END FOR  
        
        FUNCTION is_valid WITH PARAMETER arrangement  
            RETURN the BITWISE AND of arrangement and the result of arranging shifted RIGHT by one EQUALS zero  
        END FUNCTION  
        
        SET dp TO a new list containing m empty dictionaries  
        
        FOR arrangement FROM zero TO two RAISED TO n MINUS one  
            IF is_valid with arrangement AND the BITWISE AND of arrangement and broken at position zero EQUALS zero THEN  
                SET dp at position zero at key arrangement TO the COUNT of ones in the binary representation of arrangement  
            END IF  
        END FOR  
        
        FOR i FROM one TO m MINUS one  
            FOR arrangement FROM zero TO two RAISED TO n MINUS one  
                IF is_valid with arrangement AND the BITWISE AND of arrangement and broken at position i EQUALS zero THEN  
                    SET max_students TO zero  
                    FOR each prev_arrangement IN the KEYS of dp at position i MINUS one  
                        IF the BITWISE AND of arrangement and the prev_arrangement shifted RIGHT by one EQUALS zero AND the BITWISE AND of arrangement and the prev_arrangement shifted LEFT by one EQUALS zero THEN  
                            IF dp at position i MINUS one at key prev_arrangement GREATER THAN max_students THEN  
                                SET max_students TO dp at position i MINUS one at key prev_arrangement  
                            END IF  
                        END IF  
                    END FOR  
                    SET dp at position i at key arrangement TO max_students PLUS the COUNT of ones in the binary representation of arrangement  
                END IF  
            END FOR  
        END FOR  
        
        IF the last element of dp IS empty THEN  
            RETURN zero  
        ELSE  
            RETURN the maximum value among all values in the last element of dp  
        END IF  
    END FUNCTION  
END CLASS