CLASS Solution  
    FUNCTION updateMatrix WITH PARAMETERS mat  
        IF mat IS EMPTY OR the FIRST element of mat IS EMPTY  
            RETURN mat  
        END IF  
        SET rows TO the LENGTH OF mat  
        SET cols TO the LENGTH OF the FIRST element of mat  
        SET dist TO a two dimensional list of rows BY cols where each element IS assigned to INFINITY  
        SET queue TO an empty double ended queue structure  
        FOR each r FROM zero TO rows MINUS one  
            FOR each c FROM zero TO cols MINUS one  
                IF the element at position r of mat AND position c IS EQUALS TO zero  
                    SET the element at position r OF dist AT position c TO zero  
                    APPEND the tuple containing r AND c TO queue  
                END IF  
            END FOR  
        END FOR  
        SET directions TO the list containing the tuples minus one AND zero ONE AND zero zero AND minus one zero AND one  
        WHILE queue IS NOT EMPTY  
            REMOVE and ASSIGN the first element from queue TO r AND c  
            FOR each dr AND dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF zero IS LESS THAN OR EQUAL TO nr AND nr IS LESS THAN rows AND zero IS LESS THAN OR EQUAL TO nc AND nc IS LESS THAN cols AND the element at position nr OF dist AT position nc IS GREATER THAN the element at position r OF dist AT position c PLUS one  
                    SET the element at position nr OF dist AT position nc TO the element at position r OF dist AT position c PLUS one  
                    APPEND the tuple containing nr AND nc TO queue  
                END IF  
            END FOR  
        END WHILE  
        RETURN dist  
    END FUNCTION  
END CLASS