CLASS Solution  
    FUNCTION shoppingOffers WITH PARAMETERS price needs special  
        SET special TO an empty list  
        FOR each offer IN special  
            IF the sum of elements of offer except the last element is GREATER THAN zero AND the last element of offer is LESS THAN the sum of the products of corresponding elements of price and offer except the last element  
                APPEND offer TO special  
            END IF  
        END FOR  
        
        FUNCTION dfs WITH PARAMETERS needs  
            SET min_cost TO the sum of the products of corresponding elements of price and needs  
            
            FOR each offer IN special  
                SET new_needs TO an empty list  
                FOR each pair of elements n and o IN needs and offer except the last element  
                    APPEND n MINUS o TO new_needs  
                END FOR  
                IF for all elements n IN new_needs the condition n IS GREATER THAN OR EQUAL TO zero holds  
                    SET min_cost TO the lesser BETWEEN min_cost AND the sum of the last element of offer PLUS the result of calling dfs WITH the tuple formed from new_needs  
                END IF  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN the result of calling dfs WITH the tuple formed from needs  
END CLASS