CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO an empty collection counting frequencies of each number  
        SET freq TO an empty collection counting frequencies of frequencies  
        SET max_len TO zero  
        
        FOR each index i AND each number num IN the enumeration of nums  
            INCREMENT the count of num BY one  
            
            IF the count of num IS GREATER THAN one THEN  
                DECREMENT the frequency for the old frequency which IS the count of num MINUS one BY one  
                IF the frequency for the old frequency IS EQUAL TO zero THEN  
                    REMOVE the old frequency from freq  
                END IF  
            END IF  
            
            INCREMENT the frequency for the new frequency which IS the count of num BY one  
            
            IF the LENGTH of freq IS EQUAL TO one AND (the frequency for one IS PRESENT IN freq OR the only frequency value IS EQUAL TO one) THEN  
                SET max_len TO i PLUS one  
            ELSE IF the LENGTH of freq IS EQUAL TO two AND (the frequency for one IS PRESENT AND EQUAL TO one OR (the difference between the maximum frequency key and the minimum frequency key IS EQUAL TO one AND the frequency for the maximum frequency key IS EQUAL TO one)) THEN  
                SET max_len TO i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS