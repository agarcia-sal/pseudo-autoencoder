CLASS Solution  
    FUNCTION reachableNodes edges maxMoves n  
        SET graph TO an empty mapping from each integer from zero TO one less than n TO an empty list  
        FOR each element containing u v cnt IN edges  
            APPEND a pair consisting of v and cnt TO the list at key u in graph  
            APPEND a pair consisting of u and cnt TO the list at key v in graph  
        END FOR  
          
        SET distances TO a list of length n each element set TO infinity  
        SET the element at position zero of distances TO zero  
        SET priority_queue TO a list containing the pair zero distance and zero node  
          
        WHILE priority_queue is not empty  
            REMOVE and RETURN the smallest element from priority_queue AND ASSIGN the first value TO dist AND the second value TO node  
            IF dist IS GREATER THAN the element at position node of distances  
                CONTINUE to the next iteration  
            END IF  
            FOR each element containing neighbor and cnt IN the list at key node in graph  
                SET new_dist TO dist PLUS cnt PLUS one  
                IF new_dist IS LESS THAN the element at position neighbor of distances  
                    SET the element at position neighbor of distances TO new_dist  
                    ADD the pair new_dist and neighbor TO priority_queue maintaining heap property  
                END IF  
            END FOR  
        END WHILE  
          
        SET reachable_nodes TO zero  
          
        FOR each distance_value IN distances  
            IF distance_value IS LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  
          
        SET used_edges TO an empty mapping  
        FOR each element containing u v cnt IN edges  
            SET moves_u TO the greater value between zero and maxMoves MINUS the element at position u of distances  
            SET moves_v TO the greater value between zero and maxMoves MINUS the element at position v of distances  
            SET reachable_new_nodes TO the smaller value between cnt and moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            ASSIGN reachable_new_nodes TO the key which is the pair u and v in used_edges  
        END FOR  
          
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS