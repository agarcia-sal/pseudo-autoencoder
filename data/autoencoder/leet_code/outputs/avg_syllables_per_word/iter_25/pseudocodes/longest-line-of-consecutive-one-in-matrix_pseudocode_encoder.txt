CLASS Solution  
    FUNCTION longestLine WITH PARAMETER mat  
        IF mat IS EMPTY OR element at position zero of mat IS EMPTY  
            RETURN zero  
        END IF  
        SET m TO the LENGTH OF mat  
        SET n TO the LENGTH OF element at position zero of mat  
        SET directions TO a list containing tuples of zero PLUS one THEN one PLUS zero THEN one PLUS one THEN one MINUS one  
        SET max_length TO zero  
        FUNCTION check WITH PARAMETERS x y dx dy  
            SET length TO zero  
            WHILE x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND element at position x of mat AND element at position y of element at position x of mat EQUALS one  
                INCREMENT length BY one  
                INCREMENT x BY dx  
                INCREMENT y BY dy  
            END WHILE  
            RETURN length  
        END FUNCTION  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF element at position i of mat AND element at position j of element at position i of mat EQUALS one  
                    FOR EACH dx dy IN directions  
                        IF i MINUS dx IS LESS THAN zero OR j MINUS dy IS LESS THAN zero OR j MINUS dy IS GREATER THAN OR EQUAL TO n OR element at position i MINUS dx of mat AND element at position j MINUS dy of element at position i MINUS dx of mat EQUALS zero  
                            SET candidate_length TO the RESULT OF check WITH ARGUMENTS i j dx dy  
                            IF max_length IS LESS THAN candidate_length  
                                SET max_length TO candidate_length  
                            END IF  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END FOR  
        RETURN max_length  
    END FUNCTION  
END CLASS