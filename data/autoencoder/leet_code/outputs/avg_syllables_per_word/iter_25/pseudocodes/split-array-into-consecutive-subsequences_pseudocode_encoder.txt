CLASS Solution  
    FUNCTION isPossible WITH PARAMETER nums  
        SET num_count TO a mapping counting the frequency of each element in nums  
        SET end_with TO an empty mapping counting ends of subsequences  
        FOR each num IN nums  
            IF the count of num in num_count EQUALS zero  
                CONTINUE to the next num  
            END IF  
            IF the count of num MINUS one in end_with IS GREATER THAN zero  
                DECREMENT the count of num MINUS one in end_with BY one  
                INCREMENT the count of num in end_with BY one  
            ELSE IF the count of num PLUS one in num_count IS GREATER THAN zero AND the count of num PLUS two in num_count IS GREATER THAN zero  
                DECREMENT the count of num PLUS one in num_count BY one  
                DECREMENT the count of num PLUS two in num_count BY one  
                INCREMENT the count of num PLUS two in end_with BY one  
            ELSE  
                RETURN false  
            END IF  
            DECREMENT the count of num in num_count BY one  
        END FOR  
        RETURN true  
    END FUNCTION  
END CLASS