CLASS Solution  
    FUNCTION numDistinctIslands WITH PARAMETERS grid  
        FUNCTION dfs WITH PARAMETERS i j direction  
            IF i GREATER THAN OR EQUAL TO zero AND i LESS THAN the LENGTH OF grid AND j GREATER THAN OR EQUAL TO zero AND j LESS THAN the LENGTH OF element at position zero of grid AND element at position i and position j of grid EQUALS one  
                SET element at position i and position j of grid TO zero  
                APPEND direction TO path  
                CALL dfs WITH ARGUMENTS i PLUS one j direction EQUALS the single character d representing down direction  
                CALL dfs WITH ARGUMENTS i MINUS one j direction EQUALS the single character u representing up direction  
                CALL dfs WITH ARGUMENTS i j PLUS one direction EQUALS the single character r representing right direction  
                CALL dfs WITH ARGUMENTS i j MINUS one direction EQUALS the single character l representing left direction  
                APPEND the single character b representing backtrack TO path  
            END IF  
            RETURN path  
        END FUNCTION  
        SET unique_islands TO an empty set  
        FOR i FROM zero TO the LENGTH OF grid MINUS one  
            FOR j FROM zero TO the LENGTH OF element at position zero of grid MINUS one  
                IF element at position i and position j of grid EQUALS one  
                    SET path TO an empty list  
                    ADD the tuple constructed from the result of calling dfs WITH ARGUMENTS i j origin direction represented by the single character o TO unique_islands  
                END IF  
            END FOR  
        END FOR  
        RETURN the LENGTH OF unique_islands  
    END FUNCTION  
END CLASS