CLASS Solution  
    FUNCTION numberOfGoodSubsets(nums)  
        SET count TO a mapping of number frequencies in nums  
        SET dp TO a list of zeros of length two RAISED TO the power ten  
        SET the element at position zero of dp TO one  
        
        FOR each num IN the keys of count  
            IF num EQUALS one THEN  
                SET the element at position zero of dp TO the element at position zero of dp MULTIPLIED BY two RAISED TO the power of the element at position one in count  
                SET the element at position zero of dp TO the element at position zero of dp MODULO the defined MOD value  
                CONTINUE  
            END IF  
            
            IF num NOT IN the predefined prime_factors mapping THEN  
                CONTINUE  
            END IF  
            
            SET factors TO the list of prime factors corresponding to num  
            SET mask TO zero  
            FOR each prime IN factors  
                SET mask TO mask OR one LEFT SHIFTED BY prime MINUS one positions  
            END FOR  
            
            FOR m FROM two RAISED TO the power ten MINUS one DOWN TO zero DO  
                IF m AND mask EQUALS zero THEN  
                    SET dp at position of m OR mask TO the element at position m OR mask of dp PLUS the element at position m of dp MULTIPLIED BY the frequency count of num  
                    SET dp at position m OR mask TO dp at position m OR mask MODULO the defined MOD value  
                END IF  
            END FOR  
        END FOR  
        
        SET result TO the sum of the sublist of dp from position one to the end MODULO the defined MOD value  
        RETURN result  
    END FUNCTION  
END CLASS