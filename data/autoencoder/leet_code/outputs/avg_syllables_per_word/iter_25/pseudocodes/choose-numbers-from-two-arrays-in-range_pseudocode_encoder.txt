CLASS Solution  
    FUNCTION countSubranges(nums1 LIST OF INTEGER comma nums2 LIST OF INTEGER) RETURNS INTEGER  
        SET n TO the LENGTH OF nums1  
        SET count TO zero  
        SET dp TO a LIST OF n elements EACH BEING a DICTIONARY WITH DEFAULT INTEGER zero  
        
        FOR i FROM zero TO n MINUS one  
            INCREMENT the VALUE ASSOCIATED WITH THE KEY EQUAL TO element at position i of nums1 IN dp at position i BY one  
            INCREMENT the VALUE ASSOCIATED WITH THE KEY EQUAL TO the NEGATION of element at position i of nums2 IN dp at position i BY one  
            
            IF i GREATER THAN zero  
                FOR each balance AND freq IN the ITEMS OF dp at position i MINUS one  
                    SET the VALUE ASSOCIATED WITH THE KEY EQUAL TO balance PLUS element at position i of nums1 IN dp at position i TO the VALUE ASSOCIATED WITH THIS KEY PLUS freq MODULO ten TO THE POWER OF nine PLUS seven  
                    SET the VALUE ASSOCIATED WITH THE KEY EQUAL TO balance MINUS element at position i of nums2 IN dp at position i TO the VALUE ASSOCIATED WITH THIS KEY PLUS freq MODULO ten TO THE POWER OF nine PLUS seven  
                END FOR  
            END IF  
            
            SET count TO count PLUS the VALUE ASSOCIATED WITH THE KEY zero IN dp at position i MODULO ten TO THE POWER OF nine PLUS seven  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS