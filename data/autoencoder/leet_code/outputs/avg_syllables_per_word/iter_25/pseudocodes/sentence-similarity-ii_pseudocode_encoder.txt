CLASS Solution  
    FUNCTION areSentencesSimilarTwo(sentence1, sentence2, similarPairs)  
        IF the LENGTH OF sentence1 IS NOT EQUAL TO the LENGTH OF sentence2 THEN  
            RETURN False  
        END IF  

        SET parent TO an empty mapping  

        FUNCTION find(x)  
            IF the element at key x in parent IS NOT EQUAL TO x THEN  
                SET the element at key x in parent TO the result of find of the element at key x in parent  
            END IF  
            RETURN the element at key x in parent  
        END FUNCTION  

        FUNCTION union(x, y)  
            SET rootX TO the result of find of x  
            SET rootY TO the result of find of y  
            IF rootX IS NOT EQUAL TO rootY THEN  
                SET the element at key rootY in parent TO rootX  
            END IF  
        END FUNCTION  

        FOR each pair IN similarPairs  
            FOR each word IN pair  
                IF word IS NOT a key in parent THEN  
                    SET the element at key word in parent TO word  
                END IF  
            END FOR  
        END FOR  

        FOR each x and y IN similarPairs by extracting paired elements  
            CALL union with x and y  
        END FOR  

        FOR each w1 and w2 BY pairing elements from sentence1 and sentence2  
            IF w1 IS NOT a key in parent THEN  
                SET the element at key w1 in parent TO w1  
            END IF  
            IF w2 IS NOT a key in parent THEN  
                SET the element at key w2 in parent TO w2  
            END IF  
            IF the result of find of w1 IS NOT EQUAL TO the result of find of w2 THEN  
                RETURN False  
            END IF  
        END FOR  

        RETURN True  
    END FUNCTION  
END CLASS