CLASS Solution  
    FUNCTION countRangeSum(nums LOWER upper)  
        SET prefix_sums TO a list containing zero  
        SET current_sum TO zero  
        SET count TO zero  
        FOR each num IN nums  
            INCREMENT current_sum BY num  
            SET left TO current_sum MINUS upper  
            SET right TO current_sum MINUS lower  
            INCREMENT count BY the position to insert right in prefix_sums from the right MINUS the position to insert left in prefix_sums from the left  
            INSERT current_sum into prefix_sums preserving its sorted order  
        END FOR  
        RETURN count  
    END FUNCTION  
END CLASS