CLASS Solution  
    FUNCTION countPairs WITH PARAMETERS n edges queries  
        SET degree TO a list of zeros with length n PLUS one  
        FOR each u v IN edges  
            INCREMENT element at position u of degree BY one  
            INCREMENT element at position v of degree BY one  
        END FOR  
        SET shared TO an empty dictionary with default integer values  
        FOR each u v IN edges  
            IF u GREATER THAN v THEN  
                SET temporary variable temp_u TO v  
                SET v TO u  
                SET u TO temp_u  
            END IF  
            INCREMENT element at key tuple of u and v in shared BY one  
        END FOR  
        SET sorted_degree TO the list degree sorted in ascending order  
        SET answers TO an empty list  
        FOR each q IN queries  
            SET count TO zero  
            SET left TO one  
            SET right TO n  
            WHILE left LESS THAN right DO  
                IF element at position left of sorted_degree PLUS element at position right of sorted_degree GREATER THAN q THEN  
                    INCREMENT count BY right MINUS left  
                    DECREMENT right BY one  
                ELSE  
                    INCREMENT left BY one  
                END IF  
            END WHILE  
            FOR each key tuple u v and value count_uv IN items of shared  
                SET degree_uv TO element at position u of degree PLUS element at position v of degree  
                IF degree_uv GREATER THAN q AND degree_uv MINUS count_uv LESS THAN OR EQUAL TO q THEN  
                    DECREMENT count BY one  
                END IF  
            END FOR  
            APPEND count TO answers  
        END FOR  
        RETURN answers  
    END FUNCTION  
END CLASS