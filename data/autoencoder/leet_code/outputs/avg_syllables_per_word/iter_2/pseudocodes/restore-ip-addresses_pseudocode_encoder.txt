CLASS Solution
    FUNCTION restoreIpAddresses(s)
        FUNCTION is_valid(segment)
            IF LENGTH OF segment EQUALS 1 THEN
                RETURN True
            ELSE IF segment[0] IS NOT '0' AND CONVERT segment TO INTEGER IS LESS THAN OR EQUAL TO 255 THEN
                RETURN True
            ELSE
                RETURN False
            END IF
        END FUNCTION

        FUNCTION backtrack(start, path)
            IF LENGTH OF path EQUALS 4 THEN
                IF start EQUALS LENGTH OF s THEN
                    APPEND JOIN path WITH '.' TO result
                END IF
                RETURN
            END IF
            FOR length FROM 1 TO 3
                IF start + length IS LESS THAN OR EQUAL TO LENGTH OF s THEN
                    SET segment TO SUBSTRING OF s FROM start TO start + length
                    IF is_valid(segment) THEN
                        CALL backtrack WITH (start + length, path CONCATENATED WITH segment)
                    END IF
                END IF
            END FOR
        END FUNCTION

        SET result TO EMPTY LIST
        CALL backtrack WITH (0, EMPTY LIST)
        RETURN result
    END FUNCTION
END CLASS