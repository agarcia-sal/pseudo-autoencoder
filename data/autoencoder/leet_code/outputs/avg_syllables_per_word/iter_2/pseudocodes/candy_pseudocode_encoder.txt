CLASS Solution
    FUNCTION candy(ratings)
        SET n TO LENGTH OF ratings
        SET candies TO LIST OF 1 REPEATED n TIMES

        FOR i FROM 1 TO n MINUS 1
            IF ratings[i] GREATER THAN ratings[i MINUS 1]
                SET candies[i] TO candies[i MINUS 1] PLUS 1

        FOR i FROM n MINUS 2 DOWNTO 0
            IF ratings[i] GREATER THAN ratings[i PLUS 1]
                SET candies[i] TO MAXIMUM OF candies[i] AND candies[i PLUS 1] PLUS 1

        SET total_candies TO SUM OF candies
        RETURN total_candies
    END FUNCTION
END CLASS