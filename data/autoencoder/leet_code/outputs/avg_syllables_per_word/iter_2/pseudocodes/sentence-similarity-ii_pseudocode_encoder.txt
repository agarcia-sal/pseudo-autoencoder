CLASS Solution
    FUNCTION areSentencesSimilarTwo(sentence1, sentence2, similarPairs)
        IF LENGTH OF sentence1 NOT EQUAL TO LENGTH OF sentence2
            RETURN False

        SET parent TO empty dictionary

        FUNCTION find(x)
            IF parent[x] NOT EQUAL TO x
                SET parent[x] TO find(parent[x])
            RETURN parent[x]
        END FUNCTION

        FUNCTION union(x, y)
            SET rootX TO find(x)
            SET rootY TO find(y)
            IF rootX NOT EQUAL TO rootY
                SET parent[rootY] TO rootX
        END FUNCTION

        FOR each pair IN similarPairs
            FOR each word IN pair
                IF word NOT IN parent
                    SET parent[word] TO word

        FOR each x, y IN similarPairs
            CALL union(x, y)

        FOR each w1, w2 IN sentence1 AND sentence2 PAIRS
            IF w1 NOT IN parent
                SET parent[w1] TO w1
            IF w2 NOT IN parent
                SET parent[w2] TO w2
            IF find(w1) NOT EQUAL TO find(w2)
                RETURN False

        RETURN True
    END FUNCTION
END CLASS