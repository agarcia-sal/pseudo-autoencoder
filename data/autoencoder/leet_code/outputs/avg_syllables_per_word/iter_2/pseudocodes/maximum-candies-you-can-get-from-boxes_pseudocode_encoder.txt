```
CLASS Solution
    FUNCTION maxCandies(status: List[int], candies: List[int], keys: List[List[int]], containedBoxes: List[List[int]], initialBoxes: List[int])
        SET boxes_we_have TO set containing initialBoxes
        SET keys_we_have TO empty set
        SET total_candies TO 0
        SET progress_made TO True

        WHILE progress_made IS True
            SET progress_made TO False
            FOR each box IN list of boxes_we_have
                IF status at box IS 1 OR box IS IN keys_we_have
                    INCREMENT total_candies BY candies at box
                    ADD all keys at box TO keys_we_have
                    ADD all containedBoxes at box TO boxes_we_have
                    REMOVE box FROM boxes_we_have
                    SET progress_made TO True
        RETURN total_candies
    END FUNCTION
END CLASS
```