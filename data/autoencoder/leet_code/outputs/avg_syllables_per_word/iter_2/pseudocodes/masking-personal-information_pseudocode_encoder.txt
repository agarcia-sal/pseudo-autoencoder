CLASS Solution
    FUNCTION maskPII(s)
        IF s CONTAINS '@' THEN
            SET local, domain TO SPLIT s BY '@'
            SET masked_local TO CONCATENATE first character of local, FIVE times '*', last character of local
            RETURN CONCATENATE lowercase of masked_local, '@', lowercase of domain
        ELSE
            SET digits TO JOIN all characters IN s THAT ARE digits
            SET local_number TO CONCATENATE '***-***-', last FOUR characters of digits
            IF LENGTH OF digits EQUALS 10 THEN
                RETURN local_number
            ELSE
                SET country_code_length TO LENGTH OF digits MINUS 10
                SET country_code TO CONCATENATE '+', country_code_length times '*', '-'
                RETURN CONCATENATE country_code, local_number
    END FUNCTION
END CLASS