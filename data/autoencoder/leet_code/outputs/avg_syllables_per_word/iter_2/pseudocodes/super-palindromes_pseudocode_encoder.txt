CLASS Solution
    FUNCTION superpalindromesInRange(left, right)
        FUNCTION is_palindrome(num)
            RETURN STRING(num) EQUALS REVERSE OF STRING(num)
        END FUNCTION

        FUNCTION generate_palindromes(limit)
            SET palindromes TO EMPTY LIST
            FOR i FROM 1 TO 99999
                SET s TO STRING(i)
                APPEND INTEGER(CONCATENATE(s, REVERSE OF s EXCLUDING LAST CHARACTER)) TO palindromes
                APPEND INTEGER(CONCATENATE(s, REVERSE OF s)) TO palindromes
            END FOR
            RETURN ALL p IN palindromes WHERE p IS LESS THAN OR EQUAL TO limit
        END FUNCTION

        SET left TO INTEGER VALUE OF left
        SET right TO INTEGER VALUE OF right
        SET limit TO INTEGER OF SQUARE ROOT OF right PLUS 1
        SET palindromes TO generate_palindromes(limit)

        SET count TO 0
        FOR EACH p IN palindromes
            SET square TO p MULTIPLIED BY p
            IF square IS GREATER THAN OR EQUAL TO left AND LESS THAN OR EQUAL TO right AND is_palindrome(square) IS TRUE
                INCREMENT count BY 1
            END IF
        END FOR

        RETURN count
    END FUNCTION
END CLASS