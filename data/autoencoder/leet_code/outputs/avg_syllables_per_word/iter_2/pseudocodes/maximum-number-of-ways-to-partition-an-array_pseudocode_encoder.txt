CLASS Solution
    FUNCTION waysToPartition(nums, k)
        SET total_sum TO sum of nums
        SET n TO length of nums
        
        SET left_diff TO map with default integer zero
        SET right_diff TO map with default integer zero
        
        SET current_sum TO 0
        FOR i FROM 0 TO n - 2
            INCREMENT current_sum BY nums[i]
            SET diff TO total_sum MINUS (2 TIMES current_sum)
            INCREMENT right_diff[diff] BY 1
        
        SET max_ways TO right_diff[0]
        
        SET current_sum TO 0
        FOR i FROM 0 TO n - 1
            INCREMENT current_sum BY nums[i]
            SET diff_change TO k MINUS nums[i]
            
            SET new_ways TO left_diff[NEGATIVE diff_change] PLUS right_diff[diff_change]
            SET max_ways TO maximum of max_ways AND new_ways
            
            SET diff TO total_sum MINUS (2 TIMES current_sum)
            DECREMENT right_diff[diff] BY 1
            INCREMENT left_diff[diff] BY 1
        
        RETURN max_ways
    END FUNCTION
END CLASS