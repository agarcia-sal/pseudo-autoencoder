CLASS ListNode
    FUNCTION __init__(self, val=0, next=None)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values: list)
    IF values IS empty
        RETURN None
    SET head TO new ListNode(values at index 0)
    SET p TO head
    FOR each val IN values starting from index 1
        SET node TO new ListNode(val)
        SET p.next TO node
        SET p TO node
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS None AND p2 IS None
        RETURN True
    IF p1 IS None OR p2 IS None
        RETURN False
    RETURN (p1.val EQUALS p2.val) AND is_same_list(p1.next, p2.next)
END FUNCTION

CLASS Solution
    FUNCTION reverseBetween(self, head: Optional[ListNode], left: int, right: int) -> Optional[ListNode]
        IF head IS None OR left EQUALS right
            RETURN head
        SET dummy TO new ListNode(0)
        SET dummy.next TO head
        SET prev TO dummy
        FOR _ FROM 0 TO left MINUS 2
            SET prev TO prev.next
        SET current TO prev.next
        FOR _ FROM 0 TO right MINUS left MINUS 1
            SET next_node TO current.next
            SET current.next TO next_node.next
            SET next_node.next TO prev.next
            SET prev.next TO next_node
        RETURN dummy.next
    END FUNCTION
END CLASS