```
CLASS Solution
    FUNCTION maxVacationDays(flights: List of List of Integer, days: List of List of Integer) RETURNS Integer
        SET n TO LENGTH OF flights
        SET k TO LENGTH OF days[0]

        SET dp TO LIST OF SIZE n FILLED WITH -1
        SET dp[0] TO 0

        SET graph TO DICTIONARY WITH KEYS FROM 0 TO n-1 AND EMPTY LIST AS VALUES
        FOR i FROM 0 TO n-1
            FOR j FROM 0 TO n-1
                IF flights[i][j] EQUALS 1
                    APPEND j TO graph[i]

        FOR week FROM 0 TO k-1
            SET new_dp TO LIST OF SIZE n FILLED WITH -1
            FOR i FROM 0 TO n-1
                IF dp[i] EQUALS -1
                    CONTINUE
                SET new_dp[i] TO MAXIMUM OF new_dp[i] AND dp[i] PLUS days[i][week]
                FOR each city j IN graph[i]
                    SET new_dp[j] TO MAXIMUM OF new_dp[j] AND dp[i] PLUS days[j][week]
            SET dp TO new_dp

        RETURN MAXIMUM VALUE IN dp
    END FUNCTION
END CLASS
```