CLASS Solution
    FUNCTION findDerangement(n)
        SET MOD TO 10 POWER 9 PLUS 7
        
        IF n EQUALS 1 THEN
            RETURN 0
        END IF
        
        IF n EQUALS 2 THEN
            RETURN 1
        END IF
        
        SET prev2 TO 1
        SET prev1 TO 0
        
        FOR i FROM 3 TO n DO
            SET current TO (i MINUS 1) MULTIPLIED BY (prev1 PLUS prev2) MODULO MOD
            SET prev2 TO prev1
            SET prev1 TO current
        END FOR
        
        RETURN prev1
    END FUNCTION
END CLASS