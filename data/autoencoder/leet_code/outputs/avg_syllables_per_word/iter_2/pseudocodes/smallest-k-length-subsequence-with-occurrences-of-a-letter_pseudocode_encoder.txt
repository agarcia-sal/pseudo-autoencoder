CLASS Solution
    FUNCTION smallestSubsequence(s, k, letter, repetition)
        SET letter_count TO count of letter in s
        SET stack TO empty list
        FOR i FROM 0 TO length of s MINUS 1
            SET char TO s at position i
            WHILE stack is not empty AND char is less than last element of stack AND 
                  (length of s MINUS i PLUS length of stack MINUS 1) is greater than or equal to k
                IF last element of stack is letter
                    IF letter_count is greater than repetition
                        INCREMENT repetition BY 1
                        REMOVE last element from stack
                    ELSE
                        BREAK
                ELSE
                    REMOVE last element from stack
            IF length of stack is less than k
                IF char equals letter
                    APPEND char TO stack
                    DECREMENT repetition BY 1
                ELSE IF (k MINUS length of stack) is greater than repetition
                    APPEND char TO stack
                IF char equals letter
                    DECREMENT letter_count BY 1
        WHILE length of stack is less than k
            APPEND letter TO stack
        RETURN concatenation of elements in stack
    END FUNCTION
END CLASS