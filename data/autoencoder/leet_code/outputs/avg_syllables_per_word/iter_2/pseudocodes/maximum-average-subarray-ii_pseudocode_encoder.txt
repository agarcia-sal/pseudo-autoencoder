CLASS Solution
    FUNCTION findMaxAverage(nums, k)
        FUNCTION canFindAverage(mid)
            SET prefix_sums TO array of zeros with size LENGTH OF nums PLUS 1
            SET min_prefix_sum TO array of zeros with size LENGTH OF nums PLUS 1
            
            FOR i FROM 0 TO LENGTH OF nums MINUS 1
                SET prefix_sums[i + 1] TO prefix_sums[i] PLUS nums[i] MINUS mid
                
                IF i GREATER OR EQUAL TO k THEN
                    SET min_prefix_sum[i + 1] TO MINIMUM OF min_prefix_sum[i] AND prefix_sums[i + 1 - k]
                ELSE
                    SET min_prefix_sum[i + 1] TO min_prefix_sum[i]
                
                IF i GREATER OR EQUAL TO k MINUS 1 AND prefix_sums[i + 1] MINUS min_prefix_sum[i + 1] GREATER OR EQUAL TO 0 THEN
                    RETURN True
            END FOR
            RETURN False
        END FUNCTION

        SET low TO MINIMUM VALUE IN nums
        SET high TO MAXIMUM VALUE IN nums
        
        WHILE high MINUS low GREATER THAN 0.00001
            SET mid TO (low PLUS high) DIVIDED BY 2
            IF canFindAverage(mid) THEN
                SET low TO mid
            ELSE
                SET high TO mid
        END WHILE
        RETURN low
    END FUNCTION
END CLASS