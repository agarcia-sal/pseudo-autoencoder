CLASS Solution
    FUNCTION lastRemaining(n)
        SET remaining TO n
        SET step TO 1
        SET left_to_right TO true
        SET head TO 1

        WHILE remaining > 1
            IF left_to_right OR remaining MODULO 2 EQUALS 1
                INCREMENT head BY step
            MULTIPLY step BY 2
            SET remaining TO remaining DIVIDED BY 2
            SET left_to_right TO NOT left_to_right

        RETURN head
    END FUNCTION
END CLASS