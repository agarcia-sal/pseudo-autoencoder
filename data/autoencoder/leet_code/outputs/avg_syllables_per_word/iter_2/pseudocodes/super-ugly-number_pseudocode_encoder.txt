CLASS Solution
    FUNCTION nthSuperUglyNumber(n: integer, primes: list of integer) RETURNS integer
        SET ugly_numbers TO list containing 1
        SET heap TO list of pairs (prime, index) for each prime with its position
        TRANSFORM heap INTO a min-heap
        SET indices TO list of zeros with length equal to number of primes

        WHILE LENGTH OF ugly_numbers LESS THAN n
            SET next_ugly, prime_index TO smallest pair popped from heap

            IF next_ugly IS NOT EQUAL TO last element in ugly_numbers
                APPEND next_ugly TO ugly_numbers
            END IF

            INCREMENT indices[prime_index] BY 1
            SET next_multiple TO primes[prime_index] MULTIPLIED BY ugly_numbers[indices[prime_index]]
            ADD (next_multiple, prime_index) TO heap as new element

        END WHILE

        RETURN last element in ugly_numbers
    END FUNCTION
END CLASS