CLASS Solution
    FUNCTION maximumRequests(n, requests)
        SET max_requests TO 0
        SET num_requests TO LENGTH OF requests
        
        FOR mask FROM 0 TO (1 LEFT SHIFT num_requests) MINUS 1
            SET balance TO LIST OF ZEROS WITH LENGTH n
            SET count TO 0
            
            FOR i FROM 0 TO num_requests MINUS 1
                IF mask AND (1 LEFT SHIFT i) IS NOT 0
                    SET from_building, to_building TO requests AT INDEX i
                    DECREMENT balance AT INDEX from_building BY 1
                    INCREMENT balance AT INDEX to_building BY 1
                    INCREMENT count BY 1
            
            IF ALL ELEMENTS IN balance ARE EQUAL TO 0
                SET max_requests TO MAXIMUM OF max_requests AND count
        
        RETURN max_requests
    END FUNCTION
END CLASS