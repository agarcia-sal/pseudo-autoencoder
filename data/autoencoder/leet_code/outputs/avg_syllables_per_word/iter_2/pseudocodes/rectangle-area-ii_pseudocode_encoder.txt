CLASS Solution
    FUNCTION rectangleArea(rectangles)
        SET MOD TO 10^9 + 7
        
        SET y_coords TO empty set
        FOR each rectangle WITH coordinates x1, y1, x2, y2 IN rectangles
            ADD y1 TO y_coords
            ADD y2 TO y_coords
        
        SET y_coords TO sorted list of y_coords
        SET y_index TO an empty map
        FOR each y WITH index i IN y_coords
            MAP y TO i IN y_index
        
        SET count TO list of zeros with length equal to LENGTH OF y_coords
        
        SET events TO empty list
        FOR each rectangle WITH coordinates x1, y1, x2, y2 IN rectangles
            APPEND (x1, 1, y1, y2) TO events
            APPEND (x2, -1, y1, y2) TO events
        
        SORT events by the first element (x-coordinate)
        
        SET prev_x TO 0
        SET area TO 0
        
        FOR each x, eventType, y1, y2 IN events
            SET current_length TO 0
            FOR i FROM 1 TO LENGTH OF count MINUS 1
                IF count at i-1 IS GREATER THAN 0
                    INCREMENT current_length BY (y_coords at i MINUS y_coords at i-1)
            
            INCREMENT area BY current_length MULTIPLIED BY (x MINUS prev_x)
            SET area TO area MODULO MOD
            
            IF eventType IS 1
                FOR i FROM y_index at y1 TO y_index at y2 MINUS 1
                    INCREMENT count at i BY 1
            ELSE
                FOR i FROM y_index at y1 TO y_index at y2 MINUS 1
                    DECREMENT count at i BY 1
            
            SET prev_x TO x
        
        RETURN area
    END FUNCTION
END CLASS