CLASS Solution
    FUNCTION maxProfit(prices)
        IF prices IS EMPTY
            RETURN 0
        END IF
        
        SET min_price1 TO infinity
        SET min_price2 TO infinity
        SET max_profit1 TO 0
        SET max_profit2 TO 0
        
        FOR each price IN prices
            SET min_price1 TO MINIMUM OF min_price1 AND price
            SET max_profit1 TO MAXIMUM OF max_profit1 AND price MINUS min_price1
            SET min_price2 TO MINIMUM OF min_price2 AND price MINUS max_profit1
            SET max_profit2 TO MAXIMUM OF max_profit2 AND price MINUS min_price2
        END FOR
        
        RETURN max_profit2
    END FUNCTION
END CLASS