CLASS Solution
    FUNCTION longestIncreasingPath(matrix: List of List of int) RETURNS int
        IF matrix IS EMPTY OR matrix[0] IS EMPTY THEN
            RETURN 0
        END IF

        SET m TO LENGTH OF matrix
        SET n TO LENGTH OF matrix[0]
        SET directions TO LIST OF (1, 0), (-1, 0), (0, 1), (0, -1)
        INITIALIZE dp AS 2D LIST OF SIZE m BY n FILLED WITH -1

        FUNCTION dfs(x, y) RETURNS int
            IF dp[x][y] IS NOT -1 THEN
                RETURN dp[x][y]
            END IF

            SET max_length TO 1
            FOR EACH (dx, dy) IN directions DO
                SET nx TO x + dx
                SET ny TO y + dy

                IF nx IS AT LEAST 0 AND nx LESS THAN m AND ny IS AT LEAST 0 AND ny LESS THAN n AND matrix[nx][ny] GREATER THAN matrix[x][y] THEN
                    SET max_length TO MAXIMUM OF max_length AND 1 PLUS dfs(nx, ny)
                END IF
            END FOR

            SET dp[x][y] TO max_length
            RETURN max_length
        END FUNCTION

        SET longest_path TO 0
        FOR i FROM 0 TO m MINUS 1 DO
            FOR j FROM 0 TO n MINUS 1 DO
                SET longest_path TO MAXIMUM OF longest_path AND dfs(i, j)
            END FOR
        END FOR

        RETURN longest_path
    END FUNCTION
END CLASS