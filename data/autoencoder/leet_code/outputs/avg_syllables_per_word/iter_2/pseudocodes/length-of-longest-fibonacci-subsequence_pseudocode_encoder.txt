CLASS Solution
    FUNCTION lenLongestFibSubseq(arr)
        SET index TO DICTIONARY MAPPING value TO its POSITION IN arr
        SET dp TO EMPTY DICTIONARY
        SET max_length TO 0

        FOR k FROM 0 TO LENGTH OF arr MINUS 1
            FOR j FROM 0 TO k MINUS 1
                SET i TO VALUE FROM index FOR (arr[k] MINUS arr[j]) OR -1 IF NOT FOUND
                IF i IS GREATER OR EQUAL TO 0 AND i IS LESS THAN j
                    SET dp[j, k] TO VALUE FROM dp FOR (i, j) OR 2 PLUS 1
                    IF dp[j, k] IS GREATER THAN max_length
                        SET max_length TO dp[j, k]
        
        IF max_length IS GREATER OR EQUAL TO 3
            RETURN max_length
        ELSE
            RETURN 0
    END FUNCTION
END CLASS