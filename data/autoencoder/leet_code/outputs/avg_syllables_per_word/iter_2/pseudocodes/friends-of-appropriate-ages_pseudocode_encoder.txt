CLASS Solution
    FUNCTION numFriendRequests(ages)
        FUNCTION request_will_be_sent(age_x, age_y)
            RETURN NOT (age_y LESS THAN OR EQUAL TO 0.5 TIMES age_x PLUS 7 OR age_y GREATER THAN age_x OR (age_y GREATER THAN 100 AND age_x LESS THAN 100))
        END FUNCTION

        SET count TO LIST OF SIZE 121 FILLED WITH 0
        FOR EACH age IN ages
            INCREMENT count[age] BY 1

        SET total_requests TO 0
        FOR age_x FROM 1 TO 120
            FOR age_y FROM 1 TO 120
                IF request_will_be_sent(age_x, age_y)
                    INCREMENT total_requests BY count[age_x] TIMES (count[age_y] MINUS (IF age_x EQUALS age_y THEN 1 ELSE 0))
        RETURN total_requests
    END FUNCTION
END CLASS