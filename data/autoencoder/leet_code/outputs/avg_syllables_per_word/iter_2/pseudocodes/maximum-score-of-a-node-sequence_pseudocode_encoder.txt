CLASS Solution
    FUNCTION maximumScore(scores, edges)
        SET graph TO empty mapping with default empty list
        
        FOR each (u, v) IN edges
            APPEND (scores[v], v) TO graph[u]
            APPEND (scores[u], u) TO graph[v]
        
        FOR each node IN graph
            SET graph[node] TO the three items with largest scores in graph[node]
        
        SET max_score TO -1
        
        FOR each (u, v) IN edges
            FOR each (score1, x) IN graph[u]
                FOR each (score2, y) IN graph[v]
                    IF the set of {x, y, u, v} has size 4
                        SET max_score TO the maximum of max_score and (score1 + score2 + scores[u] + scores[v])
        
        RETURN max_score
    END FUNCTION
END CLASS