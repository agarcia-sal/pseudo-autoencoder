CLASS Solution
    FUNCTION subdomainVisits(cpdomains)
        SET domain_count TO a map with default integer 0
        
        FOR each cpdomain IN cpdomains
            SPLIT cpdomain INTO count AND domain BY whitespace
            CONVERT count TO integer
            SPLIT domain INTO subdomains BY '.'
            
            FOR index FROM 0 TO LENGTH OF subdomains MINUS 1
                SET subdomain TO JOIN subdomains FROM index TO END WITH '.'
                INCREMENT domain_count[subdomain] BY count
        
        SET result TO empty list
        FOR each domain, count IN domain_count items
            APPEND string CONCATENATION of count, space, domain TO result
        
        RETURN result
    END FUNCTION
END CLASS