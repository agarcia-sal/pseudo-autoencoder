CLASS Solution  
    FUNCTION maskPII with parameter s  
        IF the character at position at sign IN s  
            SET local TO the substring of s from the start TO the position one BEFORE the at sign  
            SET domain TO the substring of s from the position one AFTER the at sign TO the end  
            SET masked_local TO the first character of local CONCATENATED WITH five times the character asterisk CONCATENATED WITH the last character of local  
            RETURN lowercase version of masked_local CONCATENATED WITH at sign CONCATENATED WITH lowercase version of domain  
        ELSE  
            SET digits TO an empty string  
            FOR each character IN s  
                IF the character is a digit  
                    APPEND the character TO digits  
                END IF  
            END FOR  
            SET local_number TO the string concatenation of three asterisks MINUS three asterisks MINUS the last four characters of digits  
            IF the length of digits EQUALS to ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the length of digits MINUS ten  
                SET country_code TO a plus sign CONCATENATED WITH country_code_length times the character asterisk CONCATENATED WITH a minus sign  
                RETURN country_code CONCATENATED WITH local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS