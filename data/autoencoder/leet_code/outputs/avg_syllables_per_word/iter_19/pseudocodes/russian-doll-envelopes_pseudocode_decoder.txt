CLASS Solution  
    FUNCTION maxEnvelopes(envelopes)  
        SORT envelopes BY element at position one of each envelope IN ASCENDING ORDER AND BY element at position two of each envelope IN DESCENDING ORDER  
        INITIALIZE dp AS empty list  
        FOR each width_and_height IN envelopes  
            SET h TO element at position two of width_and_height  
            FIND position idx TO INSERT h INTO dp SUCH THAT dp REMAINS SORTED USING BINARY SEARCH LOWER BOUND  
            IF idx EQUALS the LENGTH OF dp THEN  
                APPEND h TO dp  
            ELSE  
                SET element at position idx OF dp TO h  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS