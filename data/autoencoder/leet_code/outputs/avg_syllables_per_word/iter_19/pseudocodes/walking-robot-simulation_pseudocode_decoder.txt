CLASS Solution  
    FUNCTION robotSim(commands, obstacles)  
        SET directions TO list of pairs zero one, one zero, zero negative one, negative one zero representing north east south west  
        SET x TO zero  
        SET y TO zero  
        SET dir_index TO zero indicating start facing north  
        SET obstacles_set TO convert each element of obstacles into tuple and collect into set for constant time lookup  
        SET max_distance TO zero  
        
        FOR each command IN commands  
            IF command EQUALS negative two indicating turn left  
                SET dir_index TO remainder of dir_index minus one divided by four  
            ELSE IF command EQUALS negative one indicating turn right  
                SET dir_index TO remainder of dir_index plus one divided by four  
            ELSE indicating move forward  
                SET dx TO element at position dir_index and zero in directions  
                SET dy TO element at position dir_index and one in directions  
                FOR count FROM one TO command  
                    SET next_x TO x PLUS dx  
                    SET next_y TO y PLUS dy  
                    IF pair next_x next_y is an element of obstacles_set  
                        BREAK the loop of movement  
                    END IF  
                    SET x TO next_x  
                    SET y TO next_y  
                END FOR  
                SET max_distance TO maximum of max_distance AND x MULTIPLIED BY x PLUS y MULTIPLIED BY y representing squared Euclidean distance from origin  
            END IF  
        END FOR  
        
        RETURN max_distance  
    END FUNCTION  
END CLASS