CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO EMPTY MAP  
        FOR each element x WITH index i IN arr  
            SET element x AS KEY AND index i AS VALUE IN index  
        END FOR  
        SET dp TO EMPTY MAP  
        SET max_length TO zero  
        FOR k FROM zero TO the LENGTH OF arr MINUS one  
            FOR j FROM zero TO k MINUS one  
                SET difference TO element at position k of arr MINUS element at position j of arr  
                SET i TO VALUE associated WITH key difference IN index IF PRESENT OTHERWISE negative one  
                IF i IS GREATER THAN OR EQUAL TO zero AND i IS LESS THAN j  
                    SET previous_length TO VALUE associated WITH key tuple of i AND j IN dp IF PRESENT OTHERWISE two  
                    SET dp AT key tuple of j AND k TO previous_length PLUS one  
                    IF dp AT key tuple of j AND k IS GREATER THAN max_length  
                        SET max_length TO dp AT key tuple of j AND k  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        IF max_length IS GREATER THAN OR EQUAL TO three  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS