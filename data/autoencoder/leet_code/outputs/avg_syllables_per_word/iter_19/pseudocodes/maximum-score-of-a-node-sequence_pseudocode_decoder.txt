CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        SET graph TO a new default mapping FROM elements TO empty lists  
        FOR each element u and element v IN edges  
            APPEND the pair consisting of the element at position v of scores AND the element v TO the element at position u of graph  
            APPEND the pair consisting of the element at position u of scores AND the element u TO the element at position v of graph  
        END FOR  
        FOR each element node IN graph  
            SET the element at position node of graph TO the three largest pairs in the element at position node of graph based on the first component of each pair  
        END FOR  
        SET max_score TO negative one  
        FOR each element u and element v IN edges  
            FOR each pair consisting of score1 AND x IN the element at position u of graph  
                FOR each pair consisting of score2 AND y IN the element at position v of graph  
                    IF the number of distinct elements among x y u and v EQUALS four  
                        SET max_score TO the greater of max_score AND the sum of score1 PLUS score2 PLUS the element at position u of scores PLUS the element at position v of scores  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        RETURN max_score  
    END FUNCTION  
END CLASS