CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND list containing one and zero TO restrictions  
        SORT restrictions IN ascending order  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_index TO element at position index first element of restrictions  
            SET current_height TO element at position index second element of restrictions  
            SET previous_index TO element at position index minus one first element of restrictions  
            SET previous_height TO element at position index minus one second element of restrictions  
            SET element at position index second element of restrictions TO the smaller VALUE BETWEEN current_height AND previous_height PLUS current_index MINUS previous_index  
        END FOR  
        
        FOR index FROM the LENGTH OF restrictions MINUS two DOWN TO zero  
            SET current_index TO element at position index first element of restrictions  
            SET current_height TO element at position index second element of restrictions  
            SET next_index TO element at position index plus one first element of restrictions  
            SET next_height TO element at position index plus one second element of restrictions  
            SET element at position index second element of restrictions TO the smaller VALUE BETWEEN current_height AND next_height PLUS next_index MINUS current_index  
        END FOR  
        
        SET max_height TO zero  
        SET previous_index TO element at position zero first element of restrictions  
        SET previous_height TO element at position zero second element of restrictions  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_index TO element at position index first element of restrictions  
            SET current_height TO element at position index second element of restrictions  
            SET calculated_height TO the integer result OF the sum of current_index MINUS previous_index PLUS previous_height PLUS current_height DIVIDED BY two  
            SET max_height TO the larger VALUE BETWEEN max_height AND calculated_height  
            SET previous_index TO current_index  
            SET previous_height TO current_height  
        END FOR  
        
        SET max_height TO the larger VALUE BETWEEN max_height AND previous_height PLUS n MINUS previous_index  
        
        RETURN max_height  
    END FUNCTION  
END CLASS