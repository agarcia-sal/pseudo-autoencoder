CLASS Solution  
    FUNCTION numSimilarGroups(strs)  
        FUNCTION are_similar(s1, s2)  
            SET differing_positions TO empty list  
            FOR position FROM zero TO the LENGTH OF s1 MINUS one  
                IF element at position of s1 DOES NOT EQUAL element at position of s2  
                    APPEND position TO differing_positions  
                END IF  
            END FOR  
            IF the LENGTH OF differing_positions EQUALS zero  
                RETURN true  
            ELSE IF the LENGTH OF differing_positions EQUALS two  
                SET first_position TO element at position zero of differing_positions  
                SET second_position TO element at position one of differing_positions  
                IF element at first_position of s1 EQUALS element at second_position of s2 AND element at second_position of s1 EQUALS element at first_position of s2  
                    RETURN true  
                ELSE  
                    RETURN false  
                END IF  
            ELSE  
                RETURN false  
            END IF  
        END FUNCTION  
        
        FUNCTION dfs(node, visited)  
            ADD node TO visited  
            FOR each neighbor IN element at position node of graph  
                IF neighbor NOT IN visited  
                    CALL dfs WITH neighbor AND visited  
                END IF  
            END FOR  
        END FUNCTION  
        
        SET n TO the LENGTH OF strs  
        SET graph TO a mapping FROM each index FROM zero TO n MINUS one TO an empty list  
        
        FOR i FROM zero TO n MINUS one  
            FOR j FROM i PLUS one TO n MINUS one  
                IF are_similar WITH element at position i of strs AND element at position j of strs RETURNS true  
                    APPEND j TO element at position i of graph  
                    APPEND i TO element at position j of graph  
                END IF  
            END FOR  
        END FOR  
        
        SET visited TO an empty set  
        SET num_groups TO zero  
        
        FOR i FROM zero TO n MINUS one  
            IF i NOT IN visited  
                CALL dfs WITH i AND visited  
                INCREMENT num_groups BY one  
            END IF  
        END FOR  
        
        RETURN num_groups  
    END FUNCTION  
END CLASS