CLASS Solution  
    FUNCTION largestRectangleArea(heights)  
        SET stack TO list containing negative one  
        SET max_area TO zero  
        APPEND zero TO heights  
        FOR index AND height IN enumeration of heights  
            WHILE the element at the last position of stack NOT EQUALS negative one AND height LESS THAN the element at position equal to the element at the last position of stack in heights  
                SET height_value TO the element at position popped from stack in heights  
                SET width_value TO index MINUS the element at the last position of stack MINUS one  
                SET max_area TO the greater value BETWEEN max_area AND height_value MULTIPLIED BY width_value  
            END WHILE  
            APPEND index TO stack  
        END FOR  
        RETURN max_area  
    END FUNCTION  
END CLASS