CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        SET count TO a new counter mapping each number to zero  
        SET freq TO a new counter mapping each frequency to zero  
        SET max_len TO zero  
        
        FOR each index i and element num IN nums starting from zero  
            INCREMENT element num in count by one  
            
            IF element num in count is greater than one THEN  
                DECREMENT element one less than element num in count from freq by one  
                IF element one less than element num in count in freq EQUALS zero THEN  
                    REMOVE element one less than element num in count FROM freq  
                END IF  
            END IF  
            
            INCREMENT element element num in count in freq by one  
            
            IF the length of freq EQUALS one AND (the number one IS IN keys of freq OR the sole value in freq EQUALS one) THEN  
                SET max_len TO index i PLUS one  
            ELSE IF the length of freq EQUALS two AND (the number one IS IN keys of freq AND element one in freq EQUALS one OR (the maximum key in freq MINUS the minimum key in freq EQUALS one AND element the maximum key in freq in freq EQUALS one)) THEN  
                SET max_len TO index i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS