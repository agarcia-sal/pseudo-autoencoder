CLASS Solution  
    FUNCTION candy WITH ratings  
        SET n TO the LENGTH OF ratings  
        SET candies TO a list of size n where each element is one  
        FOR index FROM one TO n MINUS one  
            IF element at position index of ratings IS GREATER THAN element at position index MINUS one of ratings  
                SET element at position index of candies TO element at position index MINUS one of candies PLUS one  
            END IF  
        END FOR  
        FOR index FROM n MINUS two DOWN TO zero  
            IF element at position index of ratings IS GREATER THAN element at position index PLUS one of ratings  
                SET element at position index of candies TO the GREATER OF element at position index of candies AND element at position index PLUS one of candies PLUS one  
            END IF  
        END FOR  
        RETURN the SUM OF all elements in candies  
    END FUNCTION  
END CLASS