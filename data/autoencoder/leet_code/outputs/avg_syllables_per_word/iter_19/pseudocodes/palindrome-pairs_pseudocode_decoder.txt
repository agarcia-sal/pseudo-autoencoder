CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN the string s EQUALS the reverse of the string s  
        END FUNCTION  
        
        SET word_dict TO an empty mapping from string to integer where each word from words is mapped to its corresponding index  
        SET result TO an empty list  
        
        FOR each index i AND word word IN enumeration of words  
            IF the word is empty  
                CONTINUE to the next iteration  
            END IF  
            
            IF the empty string EXISTS in word_dict AND is_palindrome(word) holds  
                APPEND a list containing i AND the integer mapped by the empty string in word_dict TO result  
                APPEND a list containing the integer mapped by the empty string in word_dict AND i TO result  
            END IF  
            
            SET reversed_word TO the reverse of the string word  
            IF reversed_word EXISTS in word_dict AND the integer mapped by reversed_word in word_dict IS NOT EQUAL TO i  
                APPEND a list containing i AND the integer mapped by reversed_word in word_dict TO result  
            END IF  
            
            FOR each integer j FROM one TO the length of the word MINUS one  
                SET prefix TO the substring from position zero TO j MINUS one of word  
                SET suffix TO the substring from position j TO the last position of word  
                SET reversed_prefix TO the reverse of the string prefix  
                SET reversed_suffix TO the reverse of the string suffix  
                
                IF is_palindrome(suffix) holds AND reversed_prefix EXISTS in word_dict  
                    APPEND a list containing i AND the integer mapped by reversed_prefix in word_dict TO result  
                END IF  
                
                IF is_palindrome(prefix) holds AND reversed_suffix EXISTS in word_dict  
                    APPEND a list containing the integer mapped by reversed_suffix in word_dict AND i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS