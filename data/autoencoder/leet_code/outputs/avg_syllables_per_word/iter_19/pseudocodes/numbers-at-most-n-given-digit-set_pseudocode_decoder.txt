CLASS Solution  
    FUNCTION atMostNGivenDigitSet(digits, n)  
        FUNCTION count_numbers_with_length(length)  
            RETURN the LENGTH OF digits RAISED TO THE POWER OF length  
        END FUNCTION  
        
        FUNCTION count_numbers_up_to_n(n)  
            SET string_representation_of_n TO the STRING REPRESENTATION OF n  
            SET length TO the LENGTH OF string_representation_of_n  
            SET count TO zero  
            
            FOR number_length FROM one TO length MINUS one  
                INCREMENT count BY count_numbers_with_length(number_length)  
            END FOR  
            
            FOR position FROM zero TO length MINUS one  
                SET current_digit TO the INTEGER VALUE OF the CHARACTER AT position of string_representation_of_n  
                FOR each digit IN digits  
                    SET digit_value TO the INTEGER VALUE OF digit  
                    IF digit_value LESS THAN current_digit THEN  
                        INCREMENT count BY count_numbers_with_length(length MINUS position MINUS one)  
                    ELSE IF digit_value EQUALS current_digit THEN  
                        IF position EQUALS length MINUS one THEN  
                            INCREMENT count BY one  
                        END IF  
                    ELSE  
                        BREAK the INNER LOOP  
                    END IF  
                END FOR  
            END FOR  
            
            RETURN count  
        END FUNCTION  
        
        RETURN count_numbers_up_to_n(n)  
    END FUNCTION  
END CLASS