CLASS Solution  
    FUNCTION maxStudents WITH PARAMETER seats  
        SET m TO the LENGTH OF seats  
        SET n TO the LENGTH OF element at position zero of seats  
        
        SET broken TO a LIST OF zero VALUES of LENGTH m  
        FOR index i FROM zero TO m MINUS one  
            FOR index j FROM zero TO n MINUS one  
                IF element at position j of element at position i of seats EQUALS the SYMBOL representing broken seat  
                    SET element at position i of broken TO the VALUE at element at position i of broken PLUS two RAISED TO the POWER OF j  
                END IF  
            END FOR  
        END FOR  
        
        FUNCTION is_valid WITH PARAMETER arrangement  
            RETURN the RESULT of logical AND between arrangement AND the RESULT of arrangement shifted ONE POSITION TO THE RIGHT EQUALS zero  
        END FUNCTION  
        
        SET dp TO a LIST of EMPTY MAPS with LENGTH m  
        
        FOR arrangement FROM zero TO two RAISED TO THE POWER OF n MINUS one  
            IF is_valid WITH arrangement RETURNS TRUE AND logical AND between arrangement AND element at position zero of broken EQUALS zero  
                SET the VALUE in map at position zero of dp with KEY arrangement TO the COUNT OF ONES in the BINARY representation of arrangement  
            END IF  
        END FOR  
        
        FOR index i FROM one TO m MINUS one  
            FOR arrangement FROM zero TO two RAISED TO THE POWER OF n MINUS one  
                IF is_valid WITH arrangement RETURNS TRUE AND logical AND between arrangement AND element at position i of broken EQUALS zero  
                    SET max_students TO zero  
                    FOR each prev_arrangement IN the KEYS of MAP at position i MINUS one of dp  
                        IF logical AND between arrangement AND RESULT of prev_arrangement shifted ONE POSITION TO THE RIGHT EQUALS zero AND logical AND between arrangement AND RESULT of prev_arrangement shifted ONE POSITION TO THE LEFT EQUALS zero  
                            IF VALUE at prev_arrangement in MAP at position i MINUS one of dp GREATER THAN max_students  
                                SET max_students TO VALUE at prev_arrangement in MAP at position i MINUS one of dp  
                            END IF  
                        END IF  
                    END FOR  
                    SET VALUE in MAP at position i of dp with KEY arrangement TO max_students PLUS the COUNT OF ONES in the BINARY representation of arrangement  
                END IF  
            END FOR  
        END FOR  
        
        IF MAP at last position of dp IS NOT EMPTY  
            RETURN the MAXIMUM VALUE in MAP at last position of dp  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS