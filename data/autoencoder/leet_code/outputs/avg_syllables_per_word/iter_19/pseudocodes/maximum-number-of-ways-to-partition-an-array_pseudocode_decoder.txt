CLASS Solution  
    FUNCTION waysToPartition(nums AS List OF integers, k AS integer) RETURNS integer  
        SET total_sum TO the SUM OF all elements IN nums  
        SET n TO the LENGTH OF nums  
        CREATE left_diff AS a dictionary that PROVIDES zero FOR any missing key  
        CREATE right_diff AS a dictionary that PROVIDES zero FOR any missing key  
        SET current_sum TO zero  
        FOR each index i FROM zero TO n MINUS one MINUS one  
            INCREMENT current_sum BY the element at position i of nums  
            SET diff TO total_sum MINUS two MULTIPLIED BY current_sum  
            INCREMENT the element at key diff in right_diff BY one  
        END FOR  
        SET max_ways TO the element at key zero in right_diff  
        SET current_sum TO zero  
        FOR each index i FROM zero TO n MINUS one  
            INCREMENT current_sum BY the element at position i of nums  
            SET diff_change TO k MINUS the element at position i of nums  
            SET new_ways TO the sum of the element at key negative diff_change in left_diff AND the element at key diff_change in right_diff  
            SET max_ways TO the GREATER OF max_ways AND new_ways  
            SET diff TO total_sum MINUS two MULTIPLIED BY current_sum  
            DECREMENT the element at key diff in right_diff BY one  
            INCREMENT the element at key diff in left_diff BY one  
        END FOR  
        RETURN max_ways  
    END FUNCTION  
END CLASS