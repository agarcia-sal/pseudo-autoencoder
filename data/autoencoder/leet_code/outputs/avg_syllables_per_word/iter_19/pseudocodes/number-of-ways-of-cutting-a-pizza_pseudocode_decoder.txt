CLASS Solution  
    FUNCTION ways(pizza AS List OF String, k AS Integer) RETURNS Integer  
        FUNCTION dfs(i AS Integer, j AS Integer, k AS Integer) RETURNS Integer  
            IF k EQUALS zero THEN  
                RETURN the INTEGER VALUE OF the EXPRESSION the element at position m in s at position n MINUS the element at position i in s at position n MINUS the element at position m in s at position j PLUS the element at position i in s at position j GREATER THAN zero  
            END IF  
            SET ans TO zero  
            FOR x FROM i PLUS one TO m MINUS one  
                IF the element at position x in s at position n MINUS the element at position i in s at position n MINUS the element at position x in s at position j PLUS the element at position i in s at position j GREATER THAN zero THEN  
                    INCREMENT ans BY dfs(x, j, k MINUS one)  
                END IF  
            END FOR  
            FOR y FROM j PLUS one TO n MINUS one  
                IF the element at position m in s at position y MINUS the element at position i in s at position y MINUS the element at position m in s at position j PLUS the element at position i in s at position j GREATER THAN zero THEN  
                    INCREMENT ans BY dfs(i, y, k MINUS one)  
                END IF  
            END FOR  
            RETURN ans MODULO mod  
        END FUNCTION  
  
        SET mod TO one BILLION PLUS seven  
        SET m TO the LENGTH OF pizza  
        SET n TO the LENGTH OF the element at position zero of pizza  
        ASSIGN pointer TO a TWO DIMENSIONAL collection s WHERE the NUMBER OF ROWS IS m PLUS one AND the NUMBER OF COLUMNS IS n PLUS one INITIALIZED TO zero  
        FOR i FROM one TO m  
            FOR j FROM one TO n  
                SET element at position i in s at position j TO the element at position i MINUS one in s at position j PLUS the element at position i in s at position j MINUS one MINUS the element at position i MINUS one in s at position j MINUS one PLUS the INTEGER VALUE OF the CONDITION the ELEMENT at position i MINUS one of pizza at position j MINUS one EQUALS the LETTER A  
            END FOR  
        END FOR  
        RETURN dfs(zero, zero, k MINUS one)  
    END FUNCTION  
END CLASS