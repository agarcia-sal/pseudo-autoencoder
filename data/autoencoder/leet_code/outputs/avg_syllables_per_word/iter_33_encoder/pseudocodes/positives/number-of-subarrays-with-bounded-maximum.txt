CLASS Solution  
    FUNCTION numSubarrayBoundedMax(nums list of integers left integer right integer) RETURNS integer  
        FUNCTION count(max_value integer) RETURNS integer  
            SET count TO zero  
            SET current_length TO zero  
            FOR each num IN nums  
                IF num LESS THAN OR EQUAL TO max_value  
                    INCREMENT current_length BY one  
                    INCREMENT count BY current_length  
                ELSE  
                    SET current_length TO zero  
                END IF  
            END FOR  
            RETURN count  
        END FUNCTION  
        RETURN result of count with parameter right MINUS result of count with parameter left MINUS one  
    END FUNCTION  
END CLASS