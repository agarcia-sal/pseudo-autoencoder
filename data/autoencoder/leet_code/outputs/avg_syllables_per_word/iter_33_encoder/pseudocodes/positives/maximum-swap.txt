CLASS Solution  
    FUNCTION maximumSwap(num)  
        SET digits TO list of characters representing num converted to string form  
        SET last TO an empty dictionary mapping digit values TO their last position index in digits  
        FOR each index i AND digit_char d IN digits with their indices  
            SET digit_value TO integer value of digit_char d  
            SET last at key digit_value TO i  
        END FOR  
        FOR each index i AND digit_char d IN digits with their indices  
            SET current_digit TO integer value of digit_char d  
            FOR possible_digit d2 FROM nine DOWN TO current_digit PLUS one BY negative one step  
                IF last at key d2 EXISTS AND last at key d2 GREATER THAN i  
                    SET swap_position TO last at key d2  
                    SET temp TO element at position i of digits  
                    SET element at position i of digits TO element at position swap_position of digits  
                    SET element at position swap_position of digits TO temp  
                    RETURN integer value of string formed by concatenating elements of digits in order  
                END IF  
            END FOR  
        END FOR  
        RETURN num  
    END FUNCTION  
END CLASS