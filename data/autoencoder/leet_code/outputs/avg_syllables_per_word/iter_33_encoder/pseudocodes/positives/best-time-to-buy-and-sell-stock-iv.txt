CLASS Solution  
    FUNCTION maxProfit(k, prices)  
        IF the LENGTH OF prices EQUALS zero OR k EQUALS zero  
            RETURN zero  
        END IF  

        SET n TO the LENGTH OF prices  

        IF k GREATER THAN OR EQUAL TO n DIVIDED BY two  
            SET profit TO zero  
            FOR i FROM one TO n MINUS one  
                IF the element at position i of prices GREATER THAN the element at position i MINUS one of prices  
                    INCREMENT profit BY the element at position i of prices MINUS the element at position i MINUS one of prices  
                END IF  
            END FOR  
            RETURN profit  
        END IF  

        CREATE list hold WITH k PLUS one ELEMENTS EACH EQUAL TO NEGATIVE infinity  
        CREATE list release WITH k PLUS one ELEMENTS EACH EQUAL TO zero  

        FOR each price IN prices  
            FOR i FROM one TO k  
                SET hold at position i TO the GREATER VALUE BETWEEN hold at position i AND release at position i MINUS one MINUS price  
                SET release at position i TO the GREATER VALUE BETWEEN release at position i AND hold at position i PLUS price  
            END FOR  
        END FOR  

        RETURN release at position k  
    END FUNCTION  
END CLASS