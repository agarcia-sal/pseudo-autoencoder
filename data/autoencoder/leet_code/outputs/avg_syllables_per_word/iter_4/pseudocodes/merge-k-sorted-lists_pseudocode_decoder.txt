CLASS ListNode
    FUNCTION __init__(self, val=0, next=None)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values: list)
    IF values IS EMPTY
        RETURN None
    SET head TO ListNode(values[0])
    SET p TO head
    FOR val IN values FROM INDEX 1 TO END
        SET node TO ListNode(val)
        SET p.next TO node
        SET p TO node
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS None AND p2 IS None
        RETURN True
    IF p1 IS None OR p2 IS None
        RETURN False
    RETURN p1.val EQUALS p2.val AND is_same_list(p1.next, p2.next)
END FUNCTION

CLASS Solution
    FUNCTION mergeKLists(lists: List OF Optional[ListNode]) RETURNS Optional[ListNode]
        SET min_heap TO empty list

        FOR EACH i, lst IN lists WITH INDEX
            IF lst IS NOT None
                PUSH (lst.val, i, lst) INTO min_heap MIN-HEAP
        
        SET dummy TO ListNode()
        SET current TO dummy

        WHILE min_heap IS NOT EMPTY
            POP (val, i, node) FROM min_heap MIN-HEAP
            SET current.next TO node
            SET current TO current.next
            
            IF node.next IS NOT None
                PUSH (node.next.val, i, node.next) INTO min_heap MIN-HEAP
        
        RETURN dummy.next
    END FUNCTION
END CLASS