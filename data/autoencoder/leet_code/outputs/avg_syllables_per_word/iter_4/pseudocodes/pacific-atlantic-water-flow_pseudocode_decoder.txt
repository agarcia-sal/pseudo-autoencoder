```
CLASS Solution
    FUNCTION pacificAtlantic(heights)
        FUNCTION bfs(q, vis)
            WHILE q IS NOT EMPTY
                SET size TO LENGTH OF q
                FOR count FROM 1 TO size
                    SET (i, j) TO q POP LEFT
                    FOR each (a, b) IN [(0, -1), (0, 1), (1, 0), (-1, 0)]
                        SET x TO i + a
                        SET y TO j + b
                        IF x IS WITHIN 0 AND m - 1 AND y IS WITHIN 0 AND n - 1 AND (x, y) NOT IN vis AND heights[x][y] IS GREATER THAN OR EQUAL TO heights[i][j]
                            ADD (x, y) TO vis
                            q APPEND (x, y)
        END FUNCTION

        SET m TO LENGTH OF heights
        SET n TO LENGTH OF heights[0]
        SET vis1 TO EMPTY SET
        SET vis2 TO EMPTY SET
        SET q1 TO EMPTY DEQUE
        SET q2 TO EMPTY DEQUE
        FOR i FROM 0 TO m - 1
            FOR j FROM 0 TO n - 1
                IF i IS 0 OR j IS 0
                    ADD (i, j) TO vis1
                    q1 APPEND (i, j)
                IF i IS m - 1 OR j IS n - 1
                    ADD (i, j) TO vis2
                    q2 APPEND (i, j)
        CALL bfs(q1, vis1)
        CALL bfs(q2, vis2)
        RETURN LIST OF (i, j) FOR i FROM 0 TO m - 1 FOR j FROM 0 TO n - 1 WHERE (i, j) IN vis1 AND (i, j) IN vis2
    END FUNCTION
END CLASS
```