CLASS Solution
    FUNCTION countSpecialSubsequences(nums: List of Integer) RETURNS Integer
        SET MOD TO 10^9 + 7
        SET dp TO [0, 0, 0]

        FOR each num IN nums
            IF num EQUALS 0 THEN
                SET dp[0] TO (2 TIMES dp[0] PLUS 1) MODULO MOD
            ELSE IF num EQUALS 1 THEN
                SET dp[1] TO (2 TIMES dp[1] PLUS dp[0]) MODULO MOD
            ELSE IF num EQUALS 2 THEN
                SET dp[2] TO (2 TIMES dp[2] PLUS dp[1]) MODULO MOD
            END IF
        END FOR

        RETURN dp[2]
    END FUNCTION
END CLASS