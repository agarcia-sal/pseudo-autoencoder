CLASS Solution
    FUNCTION nthSuperUglyNumber(n, primes)
        SET ugly_numbers TO list containing 1
        SET heap TO list of pairs (prime, index) for each index and prime in primes
        CONVERT heap into a min-heap
        SET indices TO list of zeros with length equal to length of primes

        WHILE length of ugly_numbers IS LESS THAN n
            SET next_ugly, prime_index TO extracted smallest element from heap
            IF next_ugly IS NOT EQUAL TO last element in ugly_numbers
                APPEND next_ugly TO ugly_numbers
            INCREMENT indices[prime_index] BY 1
            SET next_multiple TO primes[prime_index] MULTIPLIED BY ugly_numbers[indices[prime_index]]
            INSERT (next_multiple, prime_index) INTO heap

        RETURN last element in ugly_numbers
    END FUNCTION
END CLASS