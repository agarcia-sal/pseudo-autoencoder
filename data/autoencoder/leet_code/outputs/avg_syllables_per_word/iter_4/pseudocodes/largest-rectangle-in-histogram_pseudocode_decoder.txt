CLASS Solution
    FUNCTION largestRectangleArea(heights)
        SET stack TO list containing -1
        SET max_area TO 0
        APPEND 0 TO heights
        
        FOR i, h IN enumeration of heights
            WHILE last element of stack is not -1 AND h less than heights at last element of stack
                SET height TO heights at popped last element of stack
                SET width TO i minus last element of stack minus 1
                SET max_area TO maximum of max_area and height multiplied by width
            APPEND i TO stack
        
        RETURN max_area
    END FUNCTION
END CLASS