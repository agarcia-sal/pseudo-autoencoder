CLASS Solution
    FUNCTION longestPrefix(s)
        SET n TO LENGTH OF s
        SET lps TO LIST OF SIZE n FILLED WITH 0
        SET j TO 0

        FOR i FROM 1 TO n - 1
            WHILE j GREATER THAN 0 AND s[i] NOT EQUAL TO s[j]
                SET j TO lps[j - 1]
            END WHILE

            IF s[i] EQUALS s[j]
                INCREMENT j BY 1
                SET lps[i] TO j
            END IF
        END FOR

        SET longest_happy_prefix_length TO lps[n - 1]
        RETURN SUBSTRING OF s FROM START TO longest_happy_prefix_length
    END FUNCTION
END CLASS