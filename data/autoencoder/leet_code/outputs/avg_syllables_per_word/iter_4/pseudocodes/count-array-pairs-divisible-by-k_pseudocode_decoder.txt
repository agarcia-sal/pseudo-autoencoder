CLASS Solution
    FUNCTION countPairs(nums, k)
        SET gcd_count TO empty counter
        
        FOR each num IN nums
            INCREMENT gcd_count[gcd(num, k)] BY 1
        
        SET total_pairs TO 0
        SET gcd_values TO list of keys in gcd_count
        SET n TO length of gcd_values
        
        FOR i FROM 0 TO n - 1
            FOR j FROM i TO n - 1
                SET gcd1 TO gcd_values[i]
                SET gcd2 TO gcd_values[j]
                IF (gcd1 * gcd2) MODULO k EQUALS 0 THEN
                    IF i EQUALS j THEN
                        INCREMENT total_pairs BY (gcd_count[gcd1] * (gcd_count[gcd1] - 1)) DIVIDED BY 2
                    ELSE
                        INCREMENT total_pairs BY gcd_count[gcd1] * gcd_count[gcd2]
        RETURN total_pairs
    END FUNCTION
END CLASS