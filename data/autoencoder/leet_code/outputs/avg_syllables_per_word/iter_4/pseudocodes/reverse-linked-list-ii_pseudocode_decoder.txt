CLASS ListNode
    FUNCTION __init__(val = 0, next = None)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values)
    IF values IS EMPTY
        RETURN None
    END IF
    SET head TO ListNode(values at index 0)
    SET p TO head
    FOR each val IN values from index 1 TO END
        SET node TO ListNode(val)
        SET p.next TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS None AND p2 IS None
        RETURN True
    END IF
    IF p1 IS None OR p2 IS None
        RETURN False
    END IF
    RETURN p1.val EQUALS p2.val AND is_same_list(p1.next, p2.next)
END FUNCTION

CLASS Solution
    FUNCTION reverseBetween(head, left, right)
        IF head IS None OR left EQUALS right
            RETURN head
        END IF
        
        SET dummy TO ListNode(0)
        SET dummy.next TO head
        SET prev TO dummy
        
        FOR i FROM 1 TO left - 1
            SET prev TO prev.next
        END FOR
        
        SET current TO prev.next
        
        FOR i FROM 1 TO right - left
            SET next_node TO current.next
            SET current.next TO next_node.next
            SET next_node.next TO prev.next
            SET prev.next TO next_node
        END FOR
        
        RETURN dummy.next
    END FUNCTION
END CLASS