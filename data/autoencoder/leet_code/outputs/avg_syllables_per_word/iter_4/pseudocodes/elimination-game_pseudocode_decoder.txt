CLASS Solution
    FUNCTION lastRemaining(n)
        SET remaining TO n
        SET step TO 1
        SET left_to_right TO True
        SET head TO 1
        
        WHILE remaining > 1
            IF left_to_right OR remaining MODULO 2 EQUALS 1
                SET head TO head + step
            END IF
            SET step TO step * 2
            SET remaining TO remaining DIVIDED BY 2
            SET left_to_right TO NOT left_to_right
        END WHILE
        
        RETURN head
    END FUNCTION
END CLASS