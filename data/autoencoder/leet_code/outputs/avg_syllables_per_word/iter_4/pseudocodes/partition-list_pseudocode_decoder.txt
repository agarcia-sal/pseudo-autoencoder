CLASS ListNode
    FUNCTION __init__(val = 0, next = None)
        SET self.val TO val
        SET self.next TO next
    END FUNCTION
END CLASS

FUNCTION list_node(values)
    IF values IS EMPTY
        RETURN None
    END IF
    SET head TO ListNode(values[0])
    SET p TO head
    FOR each val IN values FROM SECOND ELEMENT TO END
        SET node TO ListNode(val)
        SET p.next TO node
        SET p TO node
    END FOR
    RETURN head
END FUNCTION

FUNCTION is_same_list(p1, p2)
    IF p1 IS None AND p2 IS None
        RETURN True
    END IF
    IF p1 IS None OR p2 IS None
        RETURN False
    END IF
    RETURN (p1.val EQUALS p2.val) AND is_same_list(p1.next, p2.next)
END FUNCTION

CLASS Solution
    FUNCTION partition(head, x)
        SET less_head TO ListNode(0)
        SET greater_head TO ListNode(0)

        SET less TO less_head
        SET greater TO greater_head

        SET current TO head
        WHILE current IS NOT None
            IF current.val LESS THAN x
                SET less.next TO current
                SET less TO less.next
            ELSE
                SET greater.next TO current
                SET greater TO greater.next
            END IF
            SET current TO current.next
        END WHILE

        SET less.next TO greater_head.next
        SET greater.next TO None

        RETURN less_head.next
    END FUNCTION
END CLASS