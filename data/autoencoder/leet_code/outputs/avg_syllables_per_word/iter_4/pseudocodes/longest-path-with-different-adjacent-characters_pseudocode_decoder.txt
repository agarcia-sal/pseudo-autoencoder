CLASS Solution
    FUNCTION longestPath(parent, s)
        INITIALIZE tree AS a mapping from integer to list of integers

        FOR index, p IN ENUMERATE parent
            IF p IS NOT -1
                APPEND index TO tree[p]

        SET self.result TO 1

        FUNCTION dfs(node)
            SET max1 TO 0
            SET max2 TO 0

            FOR each child IN tree[node]
                SET child_length TO dfs(child)

                IF s[child] IS NOT EQUAL TO s[node]
                    IF child_length GREATER THAN max1
                        SET max2 TO max1
                        SET max1 TO child_length
                    ELSE IF child_length GREATER THAN max2
                        SET max2 TO child_length

            SET self.result TO MAXIMUM OF self.result AND (max1 + max2 + 1)

            RETURN max1 + 1
        END FUNCTION

        CALL dfs WITH argument 0

        RETURN self.result
    END FUNCTION
END CLASS