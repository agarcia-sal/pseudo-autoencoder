CLASS Solution
    FUNCTION solveNQueens(n)
        FUNCTION is_not_under_attack(row, col)
            RETURN NOT (cols[col] + hills[row MINUS col] + dales[row PLUS col])
        END FUNCTION
        
        FUNCTION place_queen(row, col)
            ADD (row, col) TO queens
            SET cols[col] TO 1
            SET hills[row MINUS col] TO 1
            SET dales[row PLUS col] TO 1
        END FUNCTION
        
        FUNCTION remove_queen(row, col)
            REMOVE (row, col) FROM queens
            SET cols[col] TO 0
            SET hills[row MINUS col] TO 0
            SET dales[row PLUS col] TO 0
        END FUNCTION
        
        FUNCTION add_solution()
            SET solution TO empty list
            FOR EACH (_, col) IN SORTED queens
                APPEND (string of col dots + 'Q' + string of (n MINUS col MINUS 1) dots) TO solution
            END FOR
            APPEND solution TO output
        END FUNCTION
        
        FUNCTION backtrack(row = 0)
            FOR col FROM 0 TO n MINUS 1
                IF is_not_under_attack(row, col)
                    place_queen(row, col)
                    IF row PLUS 1 EQUALS n
                        add_solution()
                    ELSE
                        backtrack(row PLUS 1)
                    END IF
                    remove_queen(row, col)
                END IF
            END FOR
        END FUNCTION
        
        SET cols TO list of zeros of length n
        SET hills TO list of zeros of length (2 TIMES n MINUS 1)
        SET dales TO list of zeros of length (2 TIMES n MINUS 1)
        SET queens TO empty set
        SET output TO empty list
        CALL backtrack()
        RETURN output
    END FUNCTION
END CLASS