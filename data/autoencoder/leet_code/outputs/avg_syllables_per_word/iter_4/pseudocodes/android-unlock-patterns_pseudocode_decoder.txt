```
CLASS Solution
    FUNCTION numberOfPatterns(m, n)
        SET jumps TO DICTIONARY WITH
            (1, 3) MAPPED TO 2, (1, 7) MAPPED TO 4, (1, 9) MAPPED TO 5, (2, 8) MAPPED TO 5,
            (3, 1) MAPPED TO 2, (3, 7) MAPPED TO 5, (3, 9) MAPPED TO 6,
            (4, 6) MAPPED TO 5, (5, 5) MAPPED TO 5, (6, 4) MAPPED TO 5,
            (7, 1) MAPPED TO 4, (7, 3) MAPPED TO 5, (7, 9) MAPPED TO 8,
            (8, 2) MAPPED TO 5, (9, 1) MAPPED TO 5, (9, 3) MAPPED TO 6, (9, 7) MAPPED TO 8

        FUNCTION countPatternsFromDot(current, visited, length)
            IF length EQUALS n THEN
                RETURN 1
            END IF

            IF length GREATER OR EQUAL TO m THEN
                SET count TO 1
            ELSE
                SET count TO 0
            END IF

            FOR next_dot FROM 1 TO 9
                IF visited[next_dot] IS FALSE THEN
                    SET jump TO jumps VALUE FOR KEY (current, next_dot) IF EXISTS, OTHERWISE NULL
                    IF jump IS NULL OR visited[jump] IS TRUE THEN
                        SET visited[next_dot] TO TRUE
                        INCREMENT count BY countPatternsFromDot(next_dot, visited, length + 1)
                        SET visited[next_dot] TO FALSE
                    END IF
                END IF
            END FOR
            RETURN count
        END FUNCTION

        SET visited TO LIST OF 10 FALSE VALUES
        SET result TO 0

        SET visited[1] TO TRUE
        INCREMENT result BY countPatternsFromDot(1, visited, 1)
        SET visited[1] TO FALSE

        SET visited[2] TO TRUE
        INCREMENT result BY countPatternsFromDot(2, visited, 1)
        SET visited[2] TO FALSE

        SET visited[5] TO TRUE
        INCREMENT result BY countPatternsFromDot(5, visited, 1)
        SET visited[5] TO FALSE

        RETURN result MULTIPLIED BY 4 FOR CORNERS (FROM 1) PLUS result MULTIPLIED BY 4 FOR EDGES (FROM 2) PLUS result FOR CENTER (FROM 5)

    END FUNCTION
END CLASS
```