CLASS Solution
    FUNCTION numFactoredBinaryTrees(arr: List of Integer) RETURNS Integer
        SET MOD TO 10 TO THE POWER OF 9 PLUS 7
        SORT arr IN ASCENDING ORDER
        SET dp TO DICTIONARY WITH KEYS AS ELEMENTS OF arr AND VALUES AS 1

        FOR i FROM 0 TO LENGTH OF arr MINUS 1
            SET num TO arr AT INDEX i
            FOR j FROM 0 TO i MINUS 1
                IF num MODULO arr[j] EQUALS 0
                    SET right_child TO num DIVIDED BY arr[j]
                    IF right_child EXISTS IN dp
                        SET dp[num] TO (dp[num] PLUS dp[arr[j]] TIMES dp[right_child]) MODULO MOD

        SET total_trees TO SUM OF ALL VALUES IN dp
        RETURN total_trees MODULO MOD
    END FUNCTION
END CLASS