CLASS Solution
    FUNCTION maxEnvelopes(envelopes: List of List of Integer) RETURNS Integer
        SORT envelopes BY ascending first element AND descending second element
        SET dp TO empty list
        FOR EACH (_, h) IN envelopes
            SET idx TO position found by binary searching left for h IN dp
            IF idx EQUALS LENGTH OF dp THEN
                APPEND h TO dp
            ELSE
                SET dp[idx] TO h
        RETURN LENGTH OF dp
    END FUNCTION
END CLASS