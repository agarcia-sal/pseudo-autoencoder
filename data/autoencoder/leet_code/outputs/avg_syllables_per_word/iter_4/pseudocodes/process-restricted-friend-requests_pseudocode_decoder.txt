CLASS UnionFind
    FUNCTION __init__(self, n)
        SET self.parent TO list of integers from 0 to n-1
        SET self.size TO list of n elements each equal to 1
    END FUNCTION

    FUNCTION find(self, u)
        IF self.parent[u] NOT EQUAL TO u THEN
            SET self.parent[u] TO self.find(self.parent[u])
        END IF
        RETURN self.parent[u]
    END FUNCTION

    FUNCTION union(self, u, v)
        SET root_u TO self.find(u)
        SET root_v TO self.find(v)
        IF root_u NOT EQUAL TO root_v THEN
            IF self.size[root_u] GREATER THAN self.size[root_v] THEN
                SET self.parent[root_v] TO root_u
                INCREMENT self.size[root_u] BY self.size[root_v]
            ELSE
                SET self.parent[root_u] TO root_v
                INCREMENT self.size[root_v] BY self.size[root_u]
            END IF
        END IF
    END FUNCTION
END CLASS

CLASS Solution
    FUNCTION friendRequests(self, n, restrictions, requests)
        SET uf TO new UnionFind with n
        SET result TO empty list
        SET restriction_map TO empty dictionary

        FOR EACH x, y IN restrictions
            IF x NOT IN restriction_map THEN
                SET restriction_map[x] TO empty set
            END IF
            IF y NOT IN restriction_map THEN
                SET restriction_map[y] TO empty set
            END IF
            ADD y TO restriction_map[x]
            ADD x TO restriction_map[y]
        END FOR

        FUNCTION can_union(u, v)
            SET root_u TO uf.find(u)
            SET root_v TO uf.find(v)
            FOR EACH person IN restriction_map.GET(root_u, empty set)
                IF uf.find(person) EQUALS root_v THEN
                    RETURN False
                END IF
            END FOR
            FOR EACH person IN restriction_map.GET(root_v, empty set)
                IF uf.find(person) EQUALS root_u THEN
                    RETURN False
                END IF
            END FOR
            RETURN True
        END FUNCTION

        FOR EACH u, v IN requests
            IF uf.find(u) EQUALS uf.find(v) THEN
                APPEND True TO result
            ELSE IF can_union(u, v) THEN
                uf.union(u, v)
                APPEND True TO result
            ELSE
                APPEND False TO result
            END IF
        END FOR

        RETURN result
    END FUNCTION
END CLASS