CLASS Solution
    FUNCTION findMaxAverage(nums: List[int], k: int) RETURNS float
        FUNCTION canFindAverage(mid: float) RETURNS bool
            SET prefix_sums TO list of zeros with length LENGTH OF nums PLUS 1
            SET min_prefix_sum TO list of zeros with length LENGTH OF nums PLUS 1

            FOR i FROM 0 TO LENGTH OF nums MINUS 1
                SET prefix_sums[i + 1] TO prefix_sums[i] PLUS nums[i] MINUS mid
                IF i IS GREATER THAN OR EQUAL TO k
                    SET min_prefix_sum[i + 1] TO MINIMUM OF min_prefix_sum[i] AND prefix_sums[i + 1 - k]
                ELSE
                    SET min_prefix_sum[i + 1] TO min_prefix_sum[i]
                IF i IS GREATER THAN OR EQUAL TO k MINUS 1 AND prefix_sums[i + 1] MINUS min_prefix_sum[i + 1] IS GREATER THAN OR EQUAL TO 0
                    RETURN True
            RETURN False
        END FUNCTION

        SET low TO MINIMUM OF nums
        SET high TO MAXIMUM OF nums
        
        WHILE high MINUS low IS GREATER THAN 0.00001
            SET mid TO (low PLUS high) DIVIDED BY 2
            IF canFindAverage(mid)
                SET low TO mid
            ELSE
                SET high TO mid
        RETURN low
    END FUNCTION
END CLASS