CLASS Solution
    FUNCTION subsetsWithDup(nums)
        CALL nums SORT
        SET result TO empty list
        SET subset TO empty list
        
        FUNCTION dfs(i)
            IF i IS GREATER THAN OR EQUAL TO LENGTH OF nums THEN
                APPEND copy of subset TO result
                RETURN
            END IF
            
            APPEND nums AT i TO subset
            CALL dfs(i + 1)
            
            REMOVE last element FROM subset
            WHILE i + 1 IS LESS THAN LENGTH OF nums AND nums AT i EQUALS nums AT i + 1
                INCREMENT i BY 1
            END WHILE
            CALL dfs(i + 1)
        END FUNCTION
        
        CALL dfs(0)
        RETURN result
    END FUNCTION
END CLASS