CLASS Solution
    FUNCTION validUtf8(data)
        FUNCTION get_byte_count(byte)
            IF most significant bit of byte IS 0
                RETURN 1
            ELSE IF first three bits of byte ARE pattern 110
                RETURN 2
            ELSE IF first four bits of byte ARE pattern 1110
                RETURN 3
            ELSE IF first five bits of byte ARE pattern 11110
                RETURN 4
            ELSE
                RETURN -1
            END IF
        END FUNCTION

        SET i TO 0
        WHILE i LESS THAN LENGTH OF data
            SET byte_count TO get_byte_count(data[i])
            IF byte_count IS -1
                RETURN False
            END IF
            IF i PLUS byte_count GREATER THAN LENGTH OF data
                RETURN False
            END IF
            FOR j FROM i PLUS 1 TO i PLUS byte_count MINUS 1
                IF first two bits of data[j] ARE NOT pattern 10
                    RETURN False
                END IF
            END FOR
            INCREMENT i BY byte_count
        END WHILE
        RETURN True
    END FUNCTION
END CLASS