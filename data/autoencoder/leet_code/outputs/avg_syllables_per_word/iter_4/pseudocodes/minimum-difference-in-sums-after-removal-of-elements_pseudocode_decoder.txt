CLASS Solution
    FUNCTION minimumDifference(nums: List of Integer) RETURNS Integer
        SET n TO LENGTH OF nums DIVIDED BY 3

        SET min_heap TO empty list
        SET min_sums TO list of zeros with length (2 * n + 1)

        FOR i FROM 0 TO (2 * n - 1)
            ADD negative of nums[i] TO min_heap
            IF LENGTH OF min_heap GREATER THAN n
                REMOVE smallest element FROM min_heap
            IF LENGTH OF min_heap EQUALS n
                SET min_sums[i] TO negative of SUM OF min_heap
            END IF
        END FOR

        SET max_heap TO empty list
        SET max_sums TO list of zeros with length (2 * n + 1)

        FOR i FROM (3 * n - 1) DOWN TO n
            ADD nums[i] TO max_heap
            IF LENGTH OF max_heap GREATER THAN n
                REMOVE smallest element FROM max_heap
            IF LENGTH OF max_heap EQUALS n
                SET max_sums[i] TO SUM OF max_heap
            END IF
        END FOR

        SET min_diff TO infinity

        FOR i FROM (n - 1) TO (2 * n - 1)
            SET current_diff TO min_sums[i] MINUS max_sums[i + 1]
            IF current_diff LESS THAN min_diff
                SET min_diff TO current_diff
            END IF
        END FOR

        RETURN min_diff
    END FUNCTION
END CLASS