CLASS Solution
    FUNCTION lenLongestFibSubseq(arr)
        SET index TO dictionary mapping each element x in arr to its position i
        SET dp TO empty dictionary
        SET max_length TO 0
        
        FOR k FROM 0 TO LENGTH OF arr MINUS 1
            FOR j FROM 0 TO k MINUS 1
                SET i TO value from index for key (arr[k] MINUS arr[j]), OR -1 if not found
                IF i IS GREATER THAN OR EQUAL TO 0 AND i IS LESS THAN j
                    SET dp[j, k] TO value from dp for key (i, j) OR 2 PLUS 1
                    SET max_length TO maximum of max_length AND dp[j, k]
        
        IF max_length IS GREATER THAN OR EQUAL TO 3
            RETURN max_length
        ELSE
            RETURN 0
    END FUNCTION
END CLASS