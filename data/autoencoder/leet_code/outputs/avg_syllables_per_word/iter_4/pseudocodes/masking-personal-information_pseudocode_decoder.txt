CLASS Solution
    FUNCTION maskPII(s)
        IF '@' IN s THEN
            SPLIT s BY '@' INTO local AND domain
            SET masked_local TO CONCATENATE local's first character, FIVE TIMES '*', local's last character
            RETURN CONCATENATE lowercase of masked_local, '@', lowercase of domain
        ELSE
            SET digits TO all digit characters extracted from s
            SET local_number TO CONCATENATE '***-***-', last FOUR characters of digits
            IF LENGTH OF digits IS EQUAL TO 10 THEN
                RETURN local_number
            ELSE
                SET country_code_length TO LENGTH OF digits MINUS 10
                SET country_code TO CONCATENATE '+', country_code_length TIMES '*', '-'
                RETURN CONCATENATE country_code, local_number
            END IF
        END IF
    END FUNCTION
END CLASS