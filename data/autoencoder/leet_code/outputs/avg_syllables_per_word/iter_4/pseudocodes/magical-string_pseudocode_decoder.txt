CLASS Solution
    FUNCTION magicalString(n)
        IF n EQUALS 0 THEN
            RETURN 0
        IF n LESS THAN OR EQUAL TO 3 THEN
            RETURN 1

        SET s TO list containing [1, 2, 2]
        SET count TO 1
        SET index TO 2

        WHILE LENGTH OF s LESS THAN n DO
            SET next_num TO 3 MINUS last element of s
            APPEND next_num repeated s[index] times TO s
            IF next_num EQUALS 1 THEN
                INCREMENT count BY s[index]
            INCREMENT index BY 1

        IF LENGTH OF s GREATER THAN n THEN
            DECREMENT count BY last element of s MULTIPLIED BY (LENGTH OF s MINUS n)

        RETURN count
    END FUNCTION
END CLASS