CLASS Solution
    FUNCTION numDistinctIslands(grid)
        FUNCTION dfs(i, j, direction)
            IF i IS WITHIN ROW BOUNDS OF grid AND j IS WITHIN COLUMN BOUNDS OF grid AND grid[i][j] IS 1
                SET grid[i][j] TO 0
                APPEND direction TO path
                CALL dfs(i + 1, j, 'd')
                CALL dfs(i - 1, j, 'u')
                CALL dfs(i, j + 1, 'r')
                CALL dfs(i, j - 1, 'l')
                APPEND 'b' TO path
            RETURN path
        END FUNCTION

        SET unique_islands TO empty set

        FOR i FROM 0 TO LENGTH OF grid MINUS 1
            FOR j FROM 0 TO LENGTH OF grid[0] MINUS 1
                IF grid[i][j] IS 1
                    SET path TO empty list
                    ADD tuple RETURNED BY dfs(i, j, 'o') TO unique_islands

        RETURN SIZE OF unique_islands
    END FUNCTION
END CLASS