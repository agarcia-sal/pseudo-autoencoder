CLASS Solution
    FUNCTION cutOffTree(forest)
        IF forest IS EMPTY OR forest[0] IS EMPTY
            RETURN -1
        END IF
        
        SET trees TO LIST OF (forest[i][j], i, j) FOR EACH i IN RANGE LENGTH OF forest FOR EACH j IN RANGE LENGTH OF forest[0] WHERE forest[i][j] > 1
        SORT trees BY HEIGHT
        
        FUNCTION bfs(start, end)
            IF start IS EQUAL TO end
                RETURN 0
            END IF
            SET m TO LENGTH OF forest
            SET n TO LENGTH OF forest[0]
            SET queue TO DEQUE CONTAINING start
            SET visited TO SET CONTAINING start
            SET steps TO 0
            
            WHILE queue IS NOT EMPTY
                FOR EACH ELEMENT IN CURRENT queue LENGTH
                    SET x, y TO REMOVE FIRST ELEMENT FROM queue
                    FOR EACH (dx, dy) IN [(-1, 0), (1, 0), (0, -1), (0, 1)]
                        SET nx TO x PLUS dx
                        SET ny TO y PLUS dy
                        IF nx IS AT LEAST 0 AND LESS THAN m AND ny IS AT LEAST 0 AND LESS THAN n AND (nx, ny) NOT IN visited AND forest[nx][ny] IS NOT 0
                            IF (nx, ny) IS EQUAL TO end
                                RETURN steps PLUS 1
                            END IF
                            ADD (nx, ny) TO visited
                            APPEND (nx, ny) TO queue
                        END IF
                    END FOR
                END FOR
                INCREMENT steps BY 1
            END WHILE
            
            RETURN -1
        END FUNCTION
        
        SET x TO 0
        SET y TO 0
        SET total_steps TO 0
        
        FOR EACH (height, tx, ty) IN trees
            SET steps TO bfs((x, y), (tx, ty))
            IF steps IS -1
                RETURN -1
            END IF
            INCREMENT total_steps BY steps
            SET x TO tx
            SET y TO ty
        END FOR
        
        RETURN total_steps
    END FUNCTION
END CLASS