CLASS Solution
    FUNCTION totalNQueens(n)
        FUNCTION is_not_under_attack(row, col)
            RETURN NOT (cols[col] + hills[row MINUS col] + dales[row PLUS col])
        END FUNCTION
        
        FUNCTION place_queen(row, col)
            SET cols[col] TO 1
            SET hills[row MINUS col] TO 1
            SET dales[row PLUS col] TO 1
        END FUNCTION
        
        FUNCTION remove_queen(row, col)
            SET cols[col] TO 0
            SET hills[row MINUS col] TO 0
            SET dales[row PLUS col] TO 0
        END FUNCTION
        
        FUNCTION backtrack(row, count)
            IF row IS NOT PROVIDED THEN
                SET row TO 0
            IF count IS NOT PROVIDED THEN
                SET count TO 0
            FOR col FROM 0 TO n MINUS 1
                IF is_not_under_attack(row, col)
                    place_queen(row, col)
                    IF row PLUS 1 EQUALS n
                        INCREMENT count BY 1
                    ELSE
                        SET count TO backtrack(row PLUS 1, count)
                    remove_queen(row, col)
            RETURN count
        END FUNCTION
        
        SET cols TO LIST OF LENGTH n FILLED WITH 0
        SET hills TO LIST OF LENGTH (2 TIMES n MINUS 1) FILLED WITH 0
        SET dales TO LIST OF LENGTH (2 TIMES n MINUS 1) FILLED WITH 0
        
        RETURN backtrack()
    END FUNCTION
END CLASS