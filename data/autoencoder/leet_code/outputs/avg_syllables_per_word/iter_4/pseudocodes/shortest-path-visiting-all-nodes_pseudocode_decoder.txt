```
CLASS Solution
    FUNCTION shortestPathLength(graph: List of List of int) RETURNS int
        IF graph IS EMPTY
            RETURN 0
        SET n TO LENGTH OF graph
        SET queue TO DEQUE containing (node, BITSHIFT 1 LEFT BY node) FOR each node FROM 0 TO n-1
        SET visited TO SET containing (node, BITSHIFT 1 LEFT BY node) FOR each node FROM 0 TO n-1
        SET steps TO 0
        SET all_nodes_visited TO BITSHIFT 1 LEFT BY n MINUS 1
        WHILE queue IS NOT EMPTY
            SET current_level_size TO LENGTH OF queue
            FOR i FROM 1 TO current_level_size
                SET current_node, visited_nodes TO REMOVE LEFTMOST ELEMENT OF queue
                IF visited_nodes EQUALS all_nodes_visited
                    RETURN steps
                FOR each neighbor IN graph[current_node]
                    SET next_visited_nodes TO visited_nodes OR (BITSHIFT 1 LEFT BY neighbor)
                    SET next_state TO (neighbor, next_visited_nodes)
                    IF next_state NOT IN visited
                        ADD next_state TO visited
                        APPEND next_state TO queue
            INCREMENT steps BY 1
        RETURN -1
```