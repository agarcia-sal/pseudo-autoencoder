```
CLASS Solution
    FUNCTION candy(ratings)
        SET n TO LENGTH OF ratings
        SET candies TO LIST OF 1 REPEATED n TIMES

        FOR i FROM 1 TO n - 1
            IF ratings[i] > ratings[i - 1]
                SET candies[i] TO candies[i - 1] + 1
            END IF
        END FOR

        FOR i FROM n - 2 DOWN TO 0
            IF ratings[i] > ratings[i + 1]
                SET candies[i] TO MAXIMUM OF candies[i] AND candies[i + 1] + 1
            END IF
        END FOR

        SET total_candies TO SUM OF candies
        RETURN total_candies
    END FUNCTION
END CLASS
```