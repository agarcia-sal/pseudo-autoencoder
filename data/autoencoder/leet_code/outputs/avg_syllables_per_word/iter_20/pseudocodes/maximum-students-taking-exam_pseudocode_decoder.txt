CLASS Solution  
    FUNCTION maxStudents WITH parameter seats OF TYPE List of List of strings  
        SET m TO the LENGTH OF seats  
        SET n TO the LENGTH OF the element at position zero of seats  
        
        FUNCTION convertSeatsToBroken WITH parameter seats  
            SET broken TO a list of zeros of LENGTH m  
            FOR each index i FROM zero TO m MINUS one  
                FOR each index j FROM zero TO n MINUS one  
                    IF the element at position j of the element at position i of seats EQUALS the symbol representing broken seat  
                        SET the element at position i of broken TO the BITWISE OR of its current value WITH one LEFT SHIFTED BY j positions  
                    END IF  
                END FOR  
            END FOR  
            RETURN broken  
        END FUNCTION  
        
        FUNCTION is_valid WITH parameter arrangement  
            RETURN the BITWISE AND of arrangement WITH arrangement RIGHT SHIFTED BY one position EQUALS zero  
        END FUNCTION  
        
        SET broken TO the result of convertSeatsToBroken WITH the argument seats  
        
        SET dp TO a list with m elements each being an empty dictionary or map  
        
        FOR each arrangement FROM zero TO two RAISED TO THE POWER OF n MINUS one  
            IF is_valid OF arrangement HOLDS AND the BITWISE AND of arrangement WITH the element at position zero of broken EQUALS zero  
                SET the element at position zero of dp WITH key arrangement TO the COUNT OF ONES in the binary representation of arrangement  
            END IF  
        END FOR  
        
        FOR each index i FROM one TO m MINUS one  
            FOR each arrangement FROM zero TO two RAISED TO THE POWER OF n MINUS one  
                IF is_valid OF arrangement HOLDS AND the BITWISE AND of arrangement WITH the element at position i of broken EQUALS zero  
                    SET max_students TO zero  
                    FOR each prev_arrangement IN the keys of the element at position i MINUS one of dp  
                        IF the BITWISE AND of arrangement WITH prev_arrangement RIGHT SHIFTED BY one position EQUALS zero AND the BITWISE AND of arrangement WITH prev_arrangement LEFT SHIFTED BY one position EQUALS zero  
                            IF the element at position i MINUS one of dp AT key prev_arrangement GREATER THAN max_students  
                                SET max_students TO the element at position i MINUS one of dp AT key prev_arrangement  
                            END IF  
                        END IF  
                    END FOR  
                    SET the element at position i of dp AT key arrangement TO max_students PLUS the COUNT OF ONES in the binary representation of arrangement  
                END IF  
            END FOR  
        END FOR  
        
        IF the element at the last position of dp IS NOT EMPTY  
            SET result TO the maximum value among all values in the element at the last position of dp  
        ELSE  
            SET result TO zero  
        END IF  
        
        RETURN result  
    END FUNCTION  
END CLASS