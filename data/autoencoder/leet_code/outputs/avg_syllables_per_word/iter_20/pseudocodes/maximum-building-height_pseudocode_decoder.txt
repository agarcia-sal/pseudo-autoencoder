CLASS Solution  
    FUNCTION maxBuilding(n, restrictions)  
        APPEND a list containing one and zero TO restrictions  
        SORT restrictions IN ascending order  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            SET current_position TO element at position index of restrictions  
            SET previous_position TO element at position index MINUS one of restrictions  
            DESTRUCTURE current_position INTO idx AND height  
            DESTRUCTURE previous_position INTO prev_idx AND prev_height  
            SET element at position one of element at position index of restrictions TO the MINIMUM OF height AND prev_height PLUS idx MINUS prev_idx  
        END FOR  
        
        FOR index FROM the LENGTH OF restrictions MINUS two DOWN TO zero  
            SET current_position TO element at position index of restrictions  
            SET next_position TO element at position index PLUS one of restrictions  
            DESTRUCTURE current_position INTO idx AND height  
            DESTRUCTURE next_position INTO next_idx AND next_height  
            SET element at position one of element at position index of restrictions TO the MINIMUM OF height AND next_height PLUS next_idx MINUS idx  
        END FOR  
        
        SET max_height TO zero  
        DESTRUCTURE element at position zero of restrictions INTO prev_idx AND prev_height  
        
        FOR index FROM one TO the LENGTH OF restrictions MINUS one  
            DESTRUCTURE element at position index of restrictions INTO idx AND height  
            SET candidate_height TO the INTEGER DIVISION of idx MINUS prev_idx PLUS prev_height PLUS height BY two  
            SET max_height TO the MAXIMUM OF max_height AND candidate_height  
            SET prev_idx TO idx  
            SET prev_height TO height  
        END FOR  
        
        SET max_height TO the MAXIMUM OF max_height AND prev_height PLUS n MINUS prev_idx  
        
        RETURN max_height  
    END FUNCTION  
END CLASS