CLASS Solution  
    FUNCTION solve(nums AS List of integers, queries AS List of List of integers) RETURNS List of integers  
        SET MOD TO ten TO THE POWER OF nine PLUS seven  
        SET n TO the LENGTH OF nums  
        
        SET max_y TO the MAXIMUM y IN the SECOND ELEMENT OF each pair IN queries  
        SET prefix_sums TO a LIST OF LISTS WITH zero VALUES WITH n ELEMENTS FOR EACH y FROM zero TO max_y INCLUSIVE  
        
        FOR y FROM one TO max_y INCLUSIVE  
            FOR i FROM n MINUS one DOWN TO zero  
                IF i PLUS y IS LESS THAN n  
                    SET the element at position i of the list at position y of prefix_sums TO the element at position i of nums PLUS the element at position i PLUS y of the list at position y of prefix_sums  
                ELSE  
                    SET the element at position i of the list at position y of prefix_sums TO the element at position i of nums  
                END IF  
            END FOR  
        END FOR  
        
        SET answer TO an empty list  
        FOR each pair x and y IN queries  
            APPEND the element at position x of the list at position y of prefix_sums MODULO MOD TO answer  
        END FOR  
        
        RETURN answer  
    END FUNCTION  
END CLASS