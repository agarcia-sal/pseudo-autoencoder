CLASS Solution  
    FUNCTION sumOfDistancesInTree(n, edges)  
        SET graph TO an empty mapping from each node to a list of connected nodes  
        FOR each pair a and b IN edges  
            APPEND b TO the list of node a in graph  
            APPEND a TO the list of node b in graph  
        END FOR  
  
        SET count TO a list of size n with each element initialized to one  
        SET dist TO a list of size n with each element initialized to zero  
  
        FUNCTION dfs1(u, p)  
            FOR each node v IN the list of neighbors at node u in graph  
                IF node v is not equal to node p  
                    CALL dfs1 with parameters v and u  
                    INCREMENT count at position u BY count at position v  
                    INCREMENT dist at position u BY dist at position v PLUS count at position v  
                END IF  
            END FOR  
        END FUNCTION  
  
        CALL dfs1 with parameters zero and negative one  
  
        FUNCTION dfs2(u, p)  
            FOR each node v IN the list of neighbors at node u in graph  
                IF node v is not equal to node p  
                    SET dist at position v TO dist at position u MINUS count at position v PLUS n MINUS count at position v  
                    CALL dfs2 with parameters v and u  
                END IF  
            END FOR  
        END FUNCTION  
  
        CALL dfs2 with parameters zero and negative one  
  
        RETURN dist  
    END FUNCTION  
END CLASS