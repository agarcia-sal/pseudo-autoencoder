CLASS Solution  
    FUNCTION maxEnvelopes(envelopes)  
        SORT envelopes IN ORDER OF element at position zero of envelope IN ASCENDING ORDER AND element at position one of envelope IN DESCENDING ORDER  
        SET dp TO empty list  
        FOR each envelope IN envelopes  
            ASSIGN the second element of envelope TO h  
            SET idx TO the position where h CAN BE INSERTED IN dp TO KEEP dp IN ASCENDING ORDER USING BINARY SEARCH  
            IF idx EQUALS the LENGTH OF dp THEN  
                APPEND h TO dp  
            ELSE  
                SET the element at position idx of dp TO h  
            END IF  
        END FOR  
        RETURN the LENGTH OF dp  
    END FUNCTION  
END CLASS