CLASS Solution  
    FUNCTION longestLine(mat)  
        IF mat IS empty OR element at position zero of mat IS empty  
            RETURN zero  
        END IF  
        
        SET m TO the LENGTH OF mat  
        SET n TO the LENGTH OF element at position zero of mat  
        
        SET directions TO the LIST OF PAIRS OF zero AND one one AND zero one AND one one AND NEGATIVE one  
        SET max_length TO zero  
        
        FUNCTION check(x, y, dx, dy)  
            SET length TO zero  
            WHILE x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND element at position x of mat at position y EQUALS one  
                INCREMENT length BY one  
                SET x TO x PLUS dx  
                SET y TO y PLUS dy  
            END WHILE  
            RETURN length  
        END FUNCTION  
        
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF element at position i of mat at position j EQUALS one  
                    FOR each pair dx AND dy IN directions  
                        IF i MINUS dx IS LESS THAN zero OR j MINUS dy IS LESS THAN zero OR j MINUS dy IS GREATER THAN OR EQUAL TO n OR element at position i MINUS dx of mat at position j MINUS dy EQUALS zero  
                            SET line_length TO check(i, j, dx, dy)  
                            IF line_length IS GREATER THAN max_length  
                                SET max_length TO line_length  
                            END IF  
                        END IF  
                    END FOR  
                END IF  
            END FOR  
        END FOR  
        
        RETURN max_length  
    END FUNCTION  
END CLASS