CLASS Solution  
    FUNCTION solveNQueens WITH PARAMETER n  
        FUNCTION is_not_under_attack WITH PARAMETERS row AND col  
            RETURN NOT the SUM of element at position col of cols PLUS element at position difference between row AND col of hills PLUS element at position sum of row AND col of dales IS GREATER THAN zero  
        END FUNCTION  

        FUNCTION place_queen WITH PARAMETERS row AND col  
            ADD the tuple of row AND col TO queens  
            SET element at position col of cols TO one  
            SET element at position difference between row AND col of hills TO one  
            SET element at position sum of row AND col of dales TO one  
        END FUNCTION  

        FUNCTION remove_queen WITH PARAMETERS row AND col  
            REMOVE the tuple of row AND col FROM queens  
            SET element at position col of cols TO zero  
            SET element at position difference between row AND col of hills TO zero  
            SET element at position sum of row AND col of dales TO zero  
        END FUNCTION  

        FUNCTION add_solution  
            SET solution TO an empty list  
            FOR each tuple of row AND col IN the list queens SORTED BY row ascending  
                SET row_string TO a sequence of the character dot REPEATED col times PLUS character Q PLUS a sequence of the character dot REPEATED THE VALUE of n MINUS col MINUS one times  
                APPEND row_string TO solution  
            END FOR  
            APPEND solution TO output  
        END FUNCTION  

        FUNCTION backtrack WITH OPTIONAL PARAMETER row DEFAULTING TO zero  
            FOR col FROM zero TO n MINUS one  
                IF is_not_under_attack WITH PARAMETERS row AND col EQUALS true THEN  
                    CALL place_queen WITH PARAMETERS row AND col  
                    IF sum of row AND one EQUALS n THEN  
                        CALL add_solution  
                    ELSE  
                        CALL backtrack WITH PARAMETER sum of row AND one  
                    END IF  
                    CALL remove_queen WITH PARAMETERS row AND col  
                END IF  
            END FOR  
        END FUNCTION  

        SET cols TO a list of zeros with length n  
        SET hills TO a list of zeros with length two TIMES n MINUS one  
        SET dales TO a list of zeros with length two TIMES n MINUS one  
        SET queens TO an empty set  
        SET output TO an empty list  
        CALL backtrack  
        RETURN output  
    END FUNCTION  
END CLASS