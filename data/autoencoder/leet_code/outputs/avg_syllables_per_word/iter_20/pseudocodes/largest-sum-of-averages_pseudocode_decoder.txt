CLASS Solution  
    FUNCTION largestSumOfAverages(nums WITH TYPE list of integers, k WITH TYPE integer) RETURNS floating point number  
        SET n TO the LENGTH OF nums  
        SET prefix_sum TO a list of zero repeated for the count of n PLUS one  
        FOR index i FROM zero TO n MINUS one  
            SET element at position i PLUS one of prefix_sum TO element at position i of prefix_sum PLUS element at position i of nums  
        END FOR  

        FUNCTION average(i WITH TYPE integer, j WITH TYPE integer) RETURNS floating point number  
            SET numerator TO element at position j PLUS one of prefix_sum MINUS element at position i of prefix_sum  
            SET denominator TO j MINUS i PLUS one  
            SET result TO numerator DIVIDED BY denominator  
            RETURN result  
        END FUNCTION  

        SET dp TO a two dimensional list of zeros with n PLUS one rows and k PLUS one columns  

        FOR index i FROM zero TO n MINUS one  
            SET element at position i at column one of dp TO average(i, n MINUS one)  
        END FOR  

        FOR index i FROM n MINUS one DOWN TO zero  
            FOR partitions FROM two TO k  
                FOR index j FROM i PLUS one TO n MINUS one  
                    SET candidate TO element at position j at column partitions MINUS one of dp PLUS average(i, j MINUS one)  
                    IF candidate IS GREATER THAN element at position i at column partitions of dp  
                        SET element at position i at column partitions of dp TO candidate  
                    END IF  
                END FOR  
            END FOR  
        END FOR  

        RETURN element at position zero at column k of dp  
    END FUNCTION  
END CLASS