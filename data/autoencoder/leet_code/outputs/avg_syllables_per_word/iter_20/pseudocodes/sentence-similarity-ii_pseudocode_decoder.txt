CLASS Solution  
    FUNCTION areSentencesSimilarTwo(sentence1 AS List OF string, sentence2 AS List OF string, similarPairs AS List OF List OF string) RETURNS boolean  
        IF the LENGTH OF sentence1 IS NOT EQUALS the LENGTH OF sentence2  
            RETURN false  
        END IF  

        SET parent TO an empty dictionary  

        FUNCTION find(x) RETURNS string  
            IF the element at key x of parent IS NOT EQUALS x  
                SET the element at key x of parent TO the result of find with the element at key x of parent as argument  
            END IF  
            RETURN the element at key x of parent  
        END FUNCTION  

        FUNCTION union(x, y)  
            SET rootX TO the result of find with argument x  
            SET rootY TO the result of find with argument y  
            IF rootX IS NOT EQUALS rootY  
                SET the element at key rootY of parent TO rootX  
            END IF  
        END FUNCTION  

        FOR each pair IN similarPairs  
            FOR each word IN pair  
                IF word IS NOT a key in parent  
                    SET the element at key word of parent TO word  
                END IF  
            END FOR  
        END FOR  

        FOR each x and y IN pairs of similarPairs taken simultaneously as x being the first element and y being the second element  
            CALL union with arguments x and y  
        END FOR  

        FOR each w1 and w2 IN pairs of sentence1 and sentence2 taken simultaneously as w1 from sentence1 and w2 from sentence2  
            IF w1 IS NOT a key in parent  
                SET the element at key w1 of parent TO w1  
            END IF  
            IF w2 IS NOT a key in parent  
                SET the element at key w2 of parent TO w2  
            END IF  
            IF the result of find with argument w1 IS NOT EQUALS the result of find with argument w2  
                RETURN false  
            END IF  
        END FOR  

        RETURN true  
    END FUNCTION  
END CLASS