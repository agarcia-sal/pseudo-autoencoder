CLASS Solution  
    FUNCTION atMostNGivenDigitSet(digits AS list of strings, n AS integer) AS integer  
        FUNCTION count_numbers_with_length(length AS integer) AS integer  
            RETURN the LENGTH OF digits RAISED TO THE POWER OF length  
        END FUNCTION  

        FUNCTION count_numbers_up_to_n(n AS integer) AS integer  
            SET str_n TO the STRING REPRESENTATION OF n  
            SET length TO the LENGTH OF str_n  
            SET count TO zero  

            FOR each l FROM one TO length MINUS one  
                INCREMENT count BY the RESULT OF count_numbers_with_length WITH l  
            END FOR  

            FOR each i FROM zero TO length MINUS one  
                SET current_digit TO the INTEGER REPRESENTATION OF the CHARACTER AT POSITION i OF str_n  
                FOR each digit IN digits  
                    SET digit_value TO the INTEGER REPRESENTATION OF digit  
                    IF digit_value IS LESS THAN current_digit THEN  
                        INCREMENT count BY the RESULT OF count_numbers_with_length WITH length MINUS i MINUS one  
                    ELSE IF digit_value EQUALS current_digit THEN  
                        IF i EQUALS length MINUS one THEN  
                            INCREMENT count BY one  
                        END IF  
                    ELSE  
                        BREAK out of the inner loop  
                    END IF  
                END FOR  
            END FOR  

            RETURN count  
        END FUNCTION  

        RETURN the RESULT OF count_numbers_up_to_n WITH n  
    END FUNCTION  
END CLASS