CLASS Solution  
    FUNCTION eventualSafeNodes(graph)  
        FUNCTION is_safe(node)  
            IF visited at position node EQUALS one  
                RETURN false  
            END IF  
            IF visited at position node EQUALS two  
                RETURN true  
            END IF  
            SET visited at position node TO one  
            FOR each neighbor IN element at position node of graph  
                IF is_safe of neighbor EQUALS false  
                    RETURN false  
                END IF  
            END FOR  
            SET visited at position node TO two  
            RETURN true  
        END FUNCTION  
        SET n TO the LENGTH OF graph  
        SET visited TO a list of zero REPEATED n TIMES  
        SET safe_nodes TO an empty list  
        FOR node FROM zero TO n MINUS one  
            IF is_safe of node EQUALS true  
                APPEND node TO safe_nodes  
            END IF  
        END FOR  
        RETURN safe_nodes  
    END FUNCTION  
END CLASS