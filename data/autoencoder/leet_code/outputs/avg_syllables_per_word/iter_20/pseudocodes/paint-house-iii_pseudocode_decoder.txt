CLASS Solution  
    FUNCTION minCost(houses AS List OF INTEGER, cost AS List OF List OF INTEGER, m AS INTEGER, n AS INTEGER, target AS INTEGER) RETURNS INTEGER  
        FUNCTION dp(i AS INTEGER, prev_color AS INTEGER, groups AS INTEGER) RETURNS INTEGER  
            IF i EQUALS m THEN  
                IF groups EQUALS target THEN  
                    RETURN zero  
                ELSE  
                    RETURN infinite value  
                END IF  
            END IF  

            IF element at position i of houses NOT EQUALS zero THEN  
                SET new_groups TO groups PLUS one IF element at position i of houses NOT EQUALS prev_color OTHERWISE zero  
                RETURN result of dp with parameters i INCREMENTED BY one, element at position i of houses, new_groups  
            END IF  

            SET min_cost TO infinite value  
            FOR color FROM one TO n DO  
                SET new_groups TO groups PLUS one IF color NOT EQUALS prev_color OTHERWISE zero  
                SET candidate_cost TO element at position i at position color MINUS one of cost PLUS result of dp with parameters i INCREMENTED BY one, color, new_groups  
                IF candidate_cost LESS THAN min_cost THEN  
                    SET min_cost TO candidate_cost  
                END IF  
            END FOR  

            RETURN min_cost  
        END FUNCTION  

        SET result TO result of dp with parameters zero, zero, zero  
        IF result NOT EQUALS infinite value THEN  
            RETURN result  
        ELSE  
            RETURN negative one  
        END IF  
    END FUNCTION  
END CLASS