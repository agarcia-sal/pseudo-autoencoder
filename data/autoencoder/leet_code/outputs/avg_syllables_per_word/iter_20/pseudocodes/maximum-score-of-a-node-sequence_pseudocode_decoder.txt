CLASS Solution  
    FUNCTION maximumScore WITH parameters scores AND edges  
        SET graph TO new default dictionary with list as default value  
        FOR each element u comma v IN edges  
            APPEND tuple of element at position v of scores AND v TO the element at position u of graph  
            APPEND tuple of element at position u of scores AND u TO the element at position v of graph  
        END FOR  
        FOR each element node IN graph  
            SET the element at position node of graph TO the three largest elements according to the first element of each tuple in the element at position node of graph  
        END FOR  
        SET max_score TO negative one  
        FOR each element u comma v IN edges  
            FOR each element score1 comma x IN element at position u of graph  
                FOR each element score2 comma y IN element at position v of graph  
                    IF the size of the set of elements x comma y comma u comma v EQUALS four  
                        SET max_score TO the greater value BETWEEN max_score AND the sum of score1 PLUS score2 PLUS element at position u of scores PLUS element at position v of scores  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        RETURN max_score  
    END FUNCTION  
END CLASS