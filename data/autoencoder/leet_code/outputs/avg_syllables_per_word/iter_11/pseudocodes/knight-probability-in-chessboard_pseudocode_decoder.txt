CLASS Solution  
    FUNCTION knightProbability(n, k, row, column)  
        SET moves TO list of tuples containing the pairs: minus two and minus one, minus two and one, minus one and minus two, minus one and two, one and minus two, one and two, two and minus one, two and one  
        
        CALL initialize_matrix WITH parameters n, n AND SET result TO dp  
        SET element at position row and column of dp TO one
        
        FOR each step FROM one TO k  
            CALL initialize_matrix WITH parameters n, n AND SET result TO new_dp
            
            FOR each r FROM zero TO n MINUS one  
                FOR each c FROM zero TO n MINUS one  
                    IF element at position r and c of dp EQUALS zero  
                        CONTINUE to next iteration  
                    END IF
                    
                    FOR each pair dr and dc IN moves  
                        SET nr TO r PLUS dr  
                        SET nc TO c PLUS dc  
                        
                        IF nr GREATER THAN OR EQUAL TO zero AND nr LESS THAN n AND nc GREATER THAN OR EQUAL TO zero AND nc LESS THAN n  
                            INCREMENT element at position nr and nc of new_dp BY element at position r and c of dp DIVIDED BY eight  
                        END IF  
                    END FOR  
                END FOR  
            END FOR  
            
            SET dp TO new_dp  
        END FOR  
        
        SET total_probability TO zero  
        FOR each row_list IN dp  
            FOR each probability_value IN row_list  
                INCREMENT total_probability BY probability_value  
            END FOR  
        END FOR  
        
        RETURN total_probability  
    END FUNCTION

    FUNCTION initialize_matrix(rows, columns)  
        SET matrix TO empty list  
        FOR each i FROM zero TO rows MINUS one  
            SET row_list TO empty list  
            FOR each j FROM zero TO columns MINUS one  
                APPEND zero TO row_list  
            END FOR  
            APPEND row_list TO matrix  
        END FOR  
        RETURN matrix  
    END FUNCTION  
END CLASS