CLASS Solution  
    FUNCTION minPushBox(grid)  
        SET directions TO list containing tuple minus one and zero, tuple one and zero, tuple zero and minus one, tuple zero and one  
        FOR i FROM zero TO LENGTH OF grid MINUS one  
            FOR j FROM zero TO LENGTH OF element at position zero of grid MINUS one  
                IF element at position i of grid at position j EQUALS character S  
                    SET player_start TO tuple i and j  
                END IF  
                IF element at position i of grid at position j EQUALS character B  
                    SET box_start TO tuple i and j  
                END IF  
                IF element at position i of grid at position j EQUALS character T  
                    SET target TO tuple i and j  
                END IF  
            END FOR  
        END FOR  
        SET queue TO new deque containing tuple player_start, box_start, zero  
        SET visited TO empty set  
        ADD tuple player_start and box_start TO visited  
        WHILE queue is not empty  
            SET player_pos, box_pos, push_count TO remove the first element FROM queue  
            IF box_pos EQUALS target  
                RETURN push_count  
            END IF  
            FOR each tuple dx and dy IN directions  
                SET new_player_pos TO tuple sum of the first element of player_pos and dx, sum of the second element of player_pos and dy  
                IF is_valid_position with new_player_pos AND grid RETURNS true  
                    IF new_player_pos EQUALS box_pos  
                        SET new_box_pos TO tuple sum of the first element of box_pos and dx, sum of the second element of box_pos and dy  
                        IF is_valid_position with new_box_pos AND grid RETURNS true AND tuple new_player_pos and new_box_pos NOT IN visited  
                            ADD tuple new_player_pos and new_box_pos TO visited  
                            APPEND tuple new_player_pos, new_box_pos, sum of push_count and one TO queue  
                        END IF  
                    ELSE  
                        IF tuple new_player_pos and box_pos NOT IN visited  
                            ADD tuple new_player_pos and box_pos TO visited  
                            APPEND tuple new_player_pos, box_pos, push_count TO queue  
                        END IF  
                    END IF  
                END IF  
            END FOR  
        END WHILE  
        RETURN minus one  
    END FUNCTION  
  
    FUNCTION is_valid_position(position, grid)  
        SET x TO first element of position  
        SET y TO second element of position  
        RETURN x GREATER THAN OR EQUAL TO zero AND x LESS THAN LENGTH OF grid AND y GREATER THAN OR EQUAL TO zero AND y LESS THAN LENGTH OF element at position zero of grid AND element at position x of grid at position y NOT EQUALS character hash  
    END FUNCTION  
END CLASS