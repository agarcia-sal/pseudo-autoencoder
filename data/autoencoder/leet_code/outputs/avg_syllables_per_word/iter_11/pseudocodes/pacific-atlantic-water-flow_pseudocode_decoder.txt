CLASS Solution  
    FUNCTION pacificAtlantic(heights)  
        FUNCTION bfs(q, vis)  
            WHILE q IS NOT empty  
                FOR index FROM zero TO the LENGTH OF q MINUS one  
                    SET i, j TO the first element of q REMOVED FROM FRONT  
                    FOR each pair a, b IN the list of pairs zero MINUS one, zero ONE, one zero, MINUS one zero  
                        SET x TO i PLUS a  
                        SET y TO j PLUS b  
                        IF x IS GREATER THAN OR EQUAL TO zero AND x IS LESS THAN m AND y IS GREATER THAN OR EQUAL TO zero AND y IS LESS THAN n AND the pair x, y IS NOT IN vis AND the element at position x of heights AT position y IS GREATER THAN OR EQUAL TO the element at position i of heights AT position j THEN  
                            ADD the pair x, y TO vis  
                            APPEND the pair x, y TO q  
                        END IF  
                    END FOR  
                END FOR  
            END WHILE  
        END FUNCTION  
          
        SET m TO the LENGTH OF heights  
        SET n TO the LENGTH OF the element at position zero of heights  
        SET vis1 TO an empty set  
        SET vis2 TO an empty set  
        SET q1 TO a new empty double-ended queue  
        SET q2 TO a new empty double-ended queue  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF i EQUALS zero OR j EQUALS zero THEN  
                    ADD the pair i, j TO vis1  
                    APPEND the pair i, j TO q1  
                END IF  
                IF i EQUALS m MINUS one OR j EQUALS n MINUS one THEN  
                    ADD the pair i, j TO vis2  
                    APPEND the pair i, j TO q2  
                END IF  
            END FOR  
        END FOR  
        CALL bfs WITH q1 AND vis1  
        CALL bfs WITH q2 AND vis2  
        SET result TO an empty list  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF the pair i, j IS IN vis1 AND the pair i, j IS IN vis2 THEN  
                    APPEND the pair i, j TO result  
                END IF  
            END FOR  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS