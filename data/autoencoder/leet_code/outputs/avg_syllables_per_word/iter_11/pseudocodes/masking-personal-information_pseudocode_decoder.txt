CLASS Solution  
    FUNCTION maskPII(s)  
        IF the character AT position one of s EQUALS the at symbol OR the at symbol IS IN s  
            SET email_parts TO the result of splitting s BY the at symbol  
            SET local TO the element at position zero of email_parts  
            SET domain TO the element at position one of email_parts  
            SET masked_local TO the first character of local CONCATENATED WITH the character asterisk REPEATED five times CONCATENATED WITH the last character of local  
            RETURN the lowercase version of masked_local CONCATENATED WITH the at symbol CONCATENATED WITH the lowercase version of domain  
        ELSE  
            SET digits TO an empty string  
            FOR each character IN s  
                IF the character is a digit  
                    APPEND the character TO digits  
                END IF  
            END FOR  
            SET local_number TO the concatenation of three asterisks, a hyphen, three asterisks, a hyphen, and the last four characters of digits  
            IF the length of digits EQUALS ten  
                RETURN local_number  
            ELSE  
                SET country_code_length TO the length of digits MINUS ten  
                SET country_code TO the plus symbol CONCATENATED WITH the character asterisk REPEATED country_code_length times CONCATENATED WITH a hyphen  
                RETURN country_code CONCATENATED WITH local_number  
            END IF  
        END IF  
    END FUNCTION  
END CLASS