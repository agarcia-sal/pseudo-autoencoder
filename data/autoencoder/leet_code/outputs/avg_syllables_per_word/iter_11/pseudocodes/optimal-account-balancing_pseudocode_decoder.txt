CLASS Solution
    FUNCTION minTransfers(transactions)
        SET balance TO empty dictionary
        FOR each element consisting of frm, to, amount IN transactions
            IF frm IN balance
                SET value at key frm in balance TO value at key frm in balance MINUS amount
            ELSE
                SET value at key frm in balance TO zero MINUS amount
            END IF
            IF to IN balance
                SET value at key to in balance TO value at key to in balance PLUS amount
            ELSE
                SET value at key to in balance TO amount
            END IF
        END FOR

        SET balances TO empty list
        FOR each net IN values of balance
            IF net NOT EQUALS zero
                APPEND net TO balances
            END IF
        END FOR

        IF the LENGTH OF balances EQUALS zero
            RETURN zero
        END IF

        FUNCTION settle(start, cnt)
            WHILE start LESS THAN the LENGTH OF balances AND element at position start of balances EQUALS zero
                INCREMENT start BY one
            END WHILE

            IF start EQUALS the LENGTH OF balances
                RETURN cnt
            END IF

            SET min_cnt TO infinity
            FOR i FROM start PLUS one TO the LENGTH OF balances MINUS one
                IF element at position start of balances MULTIPLIED BY element at position i of balances LESS THAN zero
                    SET element at position i of balances TO element at position i of balances PLUS element at position start of balances
                    SET min_cnt TO the MINIMUM OF min_cnt AND settle(start PLUS one, cnt PLUS one)
                    SET element at position i of balances TO element at position i of balances MINUS element at position start of balances
                END IF
            END FOR

            RETURN min_cnt
        END FUNCTION

        RETURN settle(zero, zero)
    END FUNCTION
END CLASS