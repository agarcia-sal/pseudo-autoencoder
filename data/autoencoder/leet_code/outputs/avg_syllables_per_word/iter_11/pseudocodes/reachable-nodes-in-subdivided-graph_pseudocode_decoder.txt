CLASS Solution  
    FUNCTION reachableNodes(edges, maxMoves, n)  
        SET graph TO a mapping from each index from zero TO n MINUS one TO an empty list  
        FOR each u, v, cnt IN edges  
            APPEND the pair of v AND cnt TO the list at graph at position u  
            APPEND the pair of u AND cnt TO the list at graph at position v  
        END FOR  
  
        SET distances TO a list of length n where each element is infinity  
        SET the element at position zero in distances TO zero  
        SET priority_queue TO a list containing the pair of zero AND zero  
  
        WHILE priority_queue IS NOT empty  
            REMOVE the element with the smallest distance FROM priority_queue AND SET dist TO its distance AND node TO its node value  
            IF dist GREATER THAN the element at position node in distances  
                CONTINUE the loop  
            END IF  
            FOR each neighbor, cnt IN the list at graph at position node  
                SET new_dist TO dist PLUS cnt PLUS one  
                IF new_dist LESS THAN the element at position neighbor in distances  
                    SET the element at position neighbor in distances TO new_dist  
                    INSERT the pair of new_dist AND neighbor INTO priority_queue according to priority  
                END IF  
            END FOR  
        END WHILE  
  
        SET reachable_nodes TO zero  
  
        FOR each d IN distances  
            IF d LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  
  
        SET used_edges TO an empty mapping  
  
        FOR each u, v, cnt IN edges  
            SET moves_u TO the maximum of zero AND maxMoves MINUS the element at position u in distances  
            SET moves_v TO the maximum of zero AND maxMoves MINUS the element at position v in distances  
            SET reachable_new_nodes TO the minimum of cnt AND moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
  
            SET the value at used_edges at key of pair u, v TO reachable_new_nodes  
        END FOR  
  
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS