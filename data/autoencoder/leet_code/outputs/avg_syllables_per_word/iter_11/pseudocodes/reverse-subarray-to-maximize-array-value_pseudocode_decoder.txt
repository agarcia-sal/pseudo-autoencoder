CLASS Solution  
    FUNCTION maxValueAfterReverse(nums)  
        SET n TO the LENGTH OF nums  
        IF n EQUALS 2  
            RETURN the ABSOLUTE VALUE OF the ELEMENT at position zero of nums MINUS the ELEMENT at position one of nums  
        END IF  
        
        SET initial_value TO zero  
        FOR i FROM 1 TO n MINUS 1  
            INCREMENT initial_value BY the ABSOLUTE VALUE OF the ELEMENT at position i of nums MINUS the ELEMENT at position i MINUS 1 of nums  
        END FOR  
        
        SET max_edge_gain TO zero  
        FOR i FROM 1 TO n MINUS 1  
            SET possible_gain TO the ABSOLUTE VALUE OF the ELEMENT at position zero of nums MINUS the ELEMENT at position i of nums MINUS the ABSOLUTE VALUE OF the ELEMENT at position i of nums MINUS the ELEMENT at position i MINUS 1 of nums  
            SET max_edge_gain TO the GREATER OF max_edge_gain AND possible_gain  
        END FOR  
        
        FOR i FROM zero TO n MINUS 2  
            SET possible_gain TO the ABSOLUTE VALUE OF the ELEMENT at position n MINUS 1 of nums MINUS the ELEMENT at position i of nums MINUS the ABSOLUTE VALUE OF the ELEMENT at position i PLUS 1 of nums MINUS the ELEMENT at position i of nums  
            SET max_edge_gain TO the GREATER OF max_edge_gain AND possible_gain  
        END FOR  
        
        SET min_pair TO a VERY LARGE NUMBER  
        FOR i FROM zero TO n MINUS 2  
            SET max_of_pair TO the GREATER OF the ELEMENT at position i of nums AND the ELEMENT at position i PLUS 1 of nums  
            SET min_pair TO the LESSER OF min_pair AND max_of_pair  
        END FOR  
        
        SET max_pair TO a VERY SMALL NUMBER  
        FOR i FROM zero TO n MINUS 2  
            SET min_of_pair TO the LESSER OF the ELEMENT at position i of nums AND the ELEMENT at position i PLUS 1 of nums  
            SET max_pair TO the GREATER OF max_pair AND min_of_pair  
        END FOR  
        
        SET general_gain TO the GREATER OF zero AND two MULTIPLIED BY the DIFFERENCE OF max_pair MINUS min_pair  
        
        RETURN initial_value PLUS the GREATER OF max_edge_gain AND general_gain  
    END FUNCTION  
END CLASS