CLASS Solution
    FUNCTION numberOfArithmeticSlices(nums)
        SET n TO the LENGTH OF nums
        IF n LESS THAN 3
            RETURN zero
        END IF

        CALL create_list_of_defaultdicts WITH n, SET TO dp
        SET total_count TO zero

        FOR i FROM zero TO n MINUS one
            FOR j FROM zero TO i MINUS one
                SET d TO element at position i of nums MINUS element at position j of nums

                IF dp at position j CONTAINS key d
                    INCREMENT value of key d in dp at position i BY value of key d in dp at position j PLUS one
                    INCREMENT total_count BY value of key d in dp at position j
                ELSE
                    INCREMENT value of key d in dp at position i BY one
                END IF
            END FOR
        END FOR

        RETURN total_count
    END FUNCTION

    FUNCTION create_list_of_defaultdicts(n)
        INITIALIZE an empty list named dp_list
        FOR index FROM zero TO n MINUS one
            APPEND a new default dictionary of integer default values TO dp_list
        END FOR
        RETURN dp_list
    END FUNCTION
END CLASS