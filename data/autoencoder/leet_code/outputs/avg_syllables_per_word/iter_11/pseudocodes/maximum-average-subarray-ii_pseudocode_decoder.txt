CLASS Solution  
    FUNCTION findMaxAverage(nums, k)  
        FUNCTION canFindAverage(mid)  
            SET prefix_sums TO a list of zeroes with LENGTH equal to the LENGTH OF nums PLUS one  
            SET min_prefix_sum TO a list of zeroes with LENGTH equal to the LENGTH OF nums PLUS one  
            
            FOR i FROM zero TO the LENGTH OF nums MINUS one  
                SET element_at_position i PLUS one OF prefix_sums TO element_at_position i OF prefix_sums PLUS element_at_position i OF nums MINUS mid  
                
                IF i GREATER THAN OR EQUAL TO k  
                    SET element_at_position i PLUS one OF min_prefix_sum TO the MINIMUM OF element_at_position i OF min_prefix_sum AND element_at_position i PLUS one MINUS k OF prefix_sums  
                ELSE  
                    SET element_at_position i PLUS one OF min_prefix_sum TO element_at_position i OF min_prefix_sum  
                END IF  
                
                IF i GREATER THAN OR EQUAL TO k MINUS one AND element_at_position i PLUS one OF prefix_sums MINUS element_at_position i PLUS one OF min_prefix_sum GREATER THAN OR EQUAL TO zero  
                    RETURN True  
                END IF  
            END FOR  
            RETURN False  
        END FUNCTION  
        
        SET low TO the MINIMUM OF nums  
        SET high TO the MAXIMUM OF nums  
        
        WHILE high MINUS low GREATER THAN one MULTIPLIED BY ten TO THE POWER OF MINUS five  
            SET mid TO low PLUS high DIVIDED BY two  
            IF canFindAverage(mid)  
                SET low TO mid  
            ELSE  
                SET high TO mid  
            END IF  
        END WHILE  
        RETURN low  
    END FUNCTION  
END CLASS