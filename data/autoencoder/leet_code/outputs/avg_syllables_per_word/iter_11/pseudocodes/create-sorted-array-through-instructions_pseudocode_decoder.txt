CLASS Solution
    FUNCTION createSortedArray(instructions)
        SET MOD TO one billion PLUS seven
        SET MAX TO the maximum element IN instructions PLUS one
        SET bit TO a list of zeros WITH length MAX

        FUNCTION update(idx, val)
            WHILE idx IS LESS THAN MAX
                INCREMENT element at position idx OF bit BY val
                SET idx TO idx PLUS bitwise AND of idx AND negative idx
            END WHILE
        END FUNCTION

        FUNCTION query(idx)
            SET total TO zero
            WHILE idx IS GREATER THAN zero
                INCREMENT total BY element at position idx OF bit
                SET idx TO idx MINUS bitwise AND of idx AND negative idx
            END WHILE
            RETURN total
        END FUNCTION

        SET total_cost TO zero
        FOR each position i AND element num IN instructions
            SET less_than TO query(num MINUS one)
            SET greater_than TO i MINUS query(num)
            IF less_than IS LESS THAN OR EQUAL TO greater_than
                SET cost TO less_than
            ELSE
                SET cost TO greater_than
            END IF
            SET total_cost TO (total_cost PLUS cost) MODULO MOD
            CALL update WITH num AND one
        END FOR

        RETURN total_cost
    END FUNCTION
END CLASS