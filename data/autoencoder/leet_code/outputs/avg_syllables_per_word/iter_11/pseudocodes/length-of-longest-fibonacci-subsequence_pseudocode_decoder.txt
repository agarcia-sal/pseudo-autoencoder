CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO an empty mapping from element TO position  
        FOR each element x AND position i IN enumeration of arr  
            SET element x IN index TO position i  
        END FOR  
        SET dp TO an empty mapping from pair of positions TO integer  
        SET max_length TO zero  
        
        FOR position k FROM zero TO the LENGTH OF arr MINUS one  
            FOR position j FROM zero TO k MINUS one  
                SET i TO the position FROM index CORRESPONDING TO the value AT position k OF arr MINUS the value AT position j OF arr WITH default minus one  
                IF i GREATER THAN OR EQUAL TO zero AND i LESS THAN j  
                    SET dp AT pair j, k TO the value AT dp FOR pair i, j WITH default two PLUS one  
                    SET max_length TO the GREATER OF max_length AND dp AT pair j, k  
                END IF  
            END FOR  
        END FOR  
        
        IF max_length GREATER THAN OR EQUAL TO three  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS