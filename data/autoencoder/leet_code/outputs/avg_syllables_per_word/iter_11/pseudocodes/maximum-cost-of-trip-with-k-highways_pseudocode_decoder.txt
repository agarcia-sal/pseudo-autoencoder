CLASS Solution  
    FUNCTION maximumCost(n, highways, k)  
        FUNCTION dfs(city, visited, cost, highways_used)  
            IF highways_used EQUALS k  
                SET max_cost TO the GREATER OF max_cost AND cost  
                RETURN  
            END IF  
            FOR each pair neighbor and toll IN graph at key city  
                IF neighbor NOT IN visited  
                    ADD neighbor TO visited  
                    CALL dfs WITH neighbor, visited, cost PLUS toll, highways_used PLUS one  
                    REMOVE neighbor FROM visited  
                END IF  
            END FOR  
        END FUNCTION  

        SET graph TO an empty mapping from keys to empty lists  
        FOR each triple city1, city2, toll IN highways  
            APPEND pair city2 and toll TO graph at key city1  
            APPEND pair city1 and toll TO graph at key city2  
        END FOR  

        SET max_cost TO negative one  
        FOR start_city FROM zero TO n MINUS one  
            SET visited TO a set containing start_city  
            CALL dfs WITH start_city, visited, zero, zero  
        END FOR  

        RETURN max_cost  
    END FUNCTION  
END CLASS