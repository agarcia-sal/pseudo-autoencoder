CLASS Solution  
    FUNCTION maximumScore(scores, edges)  
        SET graph TO a new default dictionary with lists as default values  
        
        FOR each pair u AND v IN edges  
            APPEND a pair consisting of element at position v of scores AND v TO the list at key u in graph  
            APPEND a pair consisting of element at position u of scores AND u TO the list at key v in graph  
        END FOR  
        
        FOR each node IN graph  
            SET graph at node TO the list of up to three pairs with the highest first elements from graph at node  
        END FOR  
        
        SET max_score TO negative one  
        
        FOR each pair u AND v IN edges  
            FOR each pair score1 AND x IN graph at u  
                FOR each pair score2 AND y IN graph at v  
                    IF the count of unique elements in the set formed by x y u and v EQUALS four  
                        IF max_score LESS THAN score1 PLUS score2 PLUS element at position u of scores PLUS element at position v of scores  
                            SET max_score TO score1 PLUS score2 PLUS element at position u of scores PLUS element at position v of scores  
                        END IF  
                    END IF  
                END FOR  
            END FOR  
        END FOR  
        
        RETURN max_score  
    END FUNCTION  
END CLASS