CLASS Solution  
    FUNCTION isEscapePossible(blocked, source, target)  
        IF the LENGTH OF blocked EQUALS zero THEN  
            RETURN True  
        END IF  
        
        SET blocked_set TO a SET OF TUPLES each formed BY elements OF blocked  
        SET n TO the LENGTH OF blocked  
        SET max_steps TO n MULTIPLIED BY (n MINUS one) DIVIDED BY two  
        
        FUNCTION bfs(start, end)  
            SET queue TO a DEQUE containing a SINGLE TUPLE formed BY elements OF start  
            SET visited TO a SET initialized WITH elements OF queue  
            
            WHILE the LENGTH OF queue IS GREATER THAN zero  
                REMOVE the FIRST ELEMENT FROM queue AND ASSIGN the FIRST value TO x AND the SECOND value TO y  
                
                IF the LENGTH OF visited GREATER THAN max_steps OR x EQUALS the FIRST element OF end AND y EQUALS the SECOND element OF end THEN  
                    RETURN True  
                END IF  
                
                FOR each pair dx dy IN the COLLECTION OF pairs denoting zero ONE zero MINUS one ONE zero MINUS one zero  
                    SET nx TO x PLUS dx  
                    SET ny TO y PLUS dy  
                    IF nx GREATER THAN OR EQUAL TO zero AND nx LESS THAN one MILLION AND ny GREATER THAN OR EQUAL TO zero AND ny LESS THAN one MILLION AND THE TUPLE nx ny IS NOT IN blocked_set AND THE TUPLE nx ny IS NOT IN visited THEN  
                        ADD the TUPLE nx ny TO visited  
                        APPEND the TUPLE nx ny TO queue  
                    END IF  
                END FOR  
            END WHILE  
            
            RETURN False  
        END FUNCTION  
        
        RETURN the RESULT OF bfs CALLED WITH source AND target AND the RESULT OF bfs CALLED WITH target AND source  
    END FUNCTION  
END CLASS