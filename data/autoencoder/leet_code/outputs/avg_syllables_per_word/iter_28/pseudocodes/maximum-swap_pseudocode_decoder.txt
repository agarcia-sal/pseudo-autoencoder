CLASS Solution  
    FUNCTION maximumSwap(num)  
        SET digits TO list of string representations of each digit in num  
        SET last TO empty dictionary mapping digit to its last position  
        FOR each position i AND character d IN digits  
            SET digit_value TO numerical value of d  
            SET last at key digit_value TO i  
        END FOR  
        FOR each position i AND character d IN digits  
            SET digit_value TO numerical value of d  
            FOR digit_candidate FROM nine DOWN TO digit_value PLUS one  
                IF last at key digit_candidate EXISTS AND last at key digit_candidate GREATER THAN i THEN  
                    SET position_to_swap TO last at key digit_candidate  
                    SET temporary TO element at position i of digits  
                    SET element at position i of digits TO element at position position_to_swap of digits  
                    SET element at position position_to_swap of digits TO temporary  
                    RETURN integer formed by concatenating all elements of digits in order  
                END IF  
            END FOR  
        END FOR  
        RETURN num  
    END FUNCTION  
END CLASS