CLASS Solution  
    FUNCTION reachableNodes(edges AS list of list of integers, maxMoves AS integer, n AS integer) RETURNS integer  
        SET graph TO empty mapping from integer TO empty list  
        FOR index FROM zero TO n MINUS one  
            SET graph at key index TO empty list  
        END FOR  
        FOR each edge_element IN edges  
            SET u TO element at position zero of edge_element  
            SET v TO element at position one of edge_element  
            SET cnt TO element at position two of edge_element  
            APPEND tuple of v and cnt TO element at key u in graph  
            APPEND tuple of u and cnt TO element at key v in graph  
        END FOR  

        SET distances TO list with n elements each SET TO infinity  
        SET element at position zero of distances TO zero  
        SET priority_queue TO list containing tuple of zero and zero  

        WHILE priority_queue is not empty  
            REMOVE and SET dist and node TO the result of extracting the smallest element from priority_queue  
            IF dist GREATER THAN element at position node in distances  
                CONTINUE to next iteration  
            END IF  
            FOR each neighbor_element IN element at key node in graph  
                SET neighbor TO element at position zero of neighbor_element  
                SET cnt TO element at position one of neighbor_element  
                SET new_dist TO dist PLUS cnt PLUS one  
                IF new_dist LESS THAN element at position neighbor in distances  
                    SET element at position neighbor in distances TO new_dist  
                    ADD tuple of new_dist and neighbor TO priority_queue maintaining heap property  
                END IF  
            END FOR  
        END WHILE  

        SET reachable_nodes TO zero  

        FOR each d IN distances  
            IF d LESS THAN OR EQUAL TO maxMoves  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  

        SET used_edges TO empty mapping  

        FOR each edge_element IN edges  
            SET u TO element at position zero of edge_element  
            SET v TO element at position one of edge_element  
            SET cnt TO element at position two of edge_element  
            
            SET moves_u TO max of zero AND maxMoves MINUS element at position u in distances  
            SET moves_v TO max of zero AND maxMoves MINUS element at position v in distances  
            SET reachable_new_nodes TO minimum of cnt AND moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            
            SET element at key tuple of u and v in used_edges TO reachable_new_nodes  
        END FOR  

        RETURN reachable_nodes  
    END FUNCTION  
END CLASS