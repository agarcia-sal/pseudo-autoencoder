CLASS Solution  
    FUNCTION numOfWays(nums)  
        SET MOD TO ten raised to the power of nine PLUS one  

        FUNCTION count_ways(arr)  
            IF the LENGTH OF arr LESS THAN OR EQUAL TO one THEN  
                RETURN one  
            END IF  

            SET root TO element at position one of arr  
            SET left_subtree TO an empty list  
            FOR each element x IN arr  
                IF x LESS THAN root THEN  
                    APPEND x TO left_subtree  
                END IF  
            END FOR  
            SET right_subtree TO an empty list  
            FOR each element x IN arr  
                IF x GREATER THAN root THEN  
                    APPEND x TO right_subtree  
                END IF  
            END FOR  

            SET ways_left TO the result of calling count_ways with left_subtree  
            SET ways_right TO the result of calling count_ways with right_subtree  

            SET total_ways TO the combination of the sum of the LENGTH OF left_subtree PLUS the LENGTH OF right_subtree AND the LENGTH OF left_subtree  

            RETURN the remainder of the product of ways_left MULTIPLIED BY ways_right MULTIPLIED BY total_ways when divided by MOD  
        END FUNCTION  

        RETURN the remainder of the difference of the result of calling count_ways with nums MINUS one when divided by MOD  
    END FUNCTION  
END CLASS