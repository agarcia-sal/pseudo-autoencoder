CLASS Solution  
    FUNCTION numDistinctIslands(grid)  
        FUNCTION dfs(i, j, direction)  
            IF i GREATER THAN OR EQUAL TO zero AND i LESS THAN THE LENGTH OF grid AND j GREATER THAN OR EQUAL TO zero AND j LESS THAN THE LENGTH OF element at position zero OF grid AND element at position i OF grid AT position j EQUALS one  
                SET element at position i OF grid AT position j TO zero  
                APPEND direction TO path  
                CALL dfs WITH arguments i PLUS one j direction REPRESENTING down  
                CALL dfs WITH arguments i MINUS one j direction REPRESENTING up  
                CALL dfs WITH arguments i j PLUS one direction REPRESENTING right  
                CALL dfs WITH arguments i j MINUS one direction REPRESENTING left  
                APPEND backtrack marker TO path  
            END IF  
            RETURN path  
        END FUNCTION  
        
        SET unique_islands TO empty set  
        
        FOR i FROM zero TO THE LENGTH OF grid MINUS one  
            FOR j FROM zero TO THE LENGTH OF element at position zero OF grid MINUS one  
                IF element at position i OF grid AT position j EQUALS one  
                    SET path TO empty list  
                    ADD tuple CONSTRUCTED FROM RESULT OF dfs WITH arguments i j origin marker TO unique_islands  
                END IF  
            END FOR  
        END FOR  
        
        RETURN THE LENGTH OF unique_islands  
    END FUNCTION  
END CLASS