CLASS Solution  
    FUNCTION superpalindromesInRange left right  
        FUNCTION is_palindrome num  
            RETURN string conversion of num EQUALS reverse of string conversion of num  
        END FUNCTION  
        
        FUNCTION generate_palindromes limit  
            SET palindromes TO empty list  
            FOR i FROM one TO one hundred thousand MINUS one  
                SET s TO string conversion of i  
                APPEND integer conversion of concatenation of s PLUS substring of s from position second last DOWNTO first TO palindromes  
                APPEND integer conversion of concatenation of s PLUS reverse of s TO palindromes  
            END FOR  
            RETURN list of elements p FROM palindromes WHERE p LESS THAN OR EQUAL TO limit  
        END FUNCTION  
        
        SET left TO integer conversion of left  
        SET right TO integer conversion of right  
        SET limit TO integer conversion of square root of right PLUS one  
        SET palindromes TO result of generate_palindromes with limit  
        
        SET count TO zero  
        FOR each p IN palindromes  
            SET square TO p MULTIPLIED BY p  
            IF left LESS THAN OR EQUAL TO square AND square LESS THAN OR EQUAL TO right AND is_palindrome with square RETURNS true  
                INCREMENT count BY one  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS