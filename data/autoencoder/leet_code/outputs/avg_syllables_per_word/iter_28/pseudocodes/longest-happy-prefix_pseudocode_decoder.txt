CLASS Solution  
    FUNCTION longestPrefix WITH PARAMETER s  
        SET n TO the LENGTH OF s  
        SET lps TO a list of ZEROES of LENGTH n  
        SET j TO ZERO  
        FOR i FROM ONE TO n MINUS ONE  
            WHILE j GREATER THAN ZERO AND element at position i of s NOT EQUALS element at position j of s  
                SET j TO element at position j MINUS ONE of lps  
            END WHILE  
            IF element at position i of s EQUALS element at position j of s  
                INCREMENT j BY ONE  
                SET element at position i of lps TO j  
            END IF  
        END FOR  
        SET longest_happy_prefix_length TO element at position n MINUS ONE of lps  
        SET result TO substring from position ZERO TO position longest_happy_prefix_length MINUS ONE of s  
        RETURN result  
    END FUNCTION  
END CLASS