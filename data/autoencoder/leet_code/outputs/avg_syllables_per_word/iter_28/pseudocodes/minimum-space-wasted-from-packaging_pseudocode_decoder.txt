CLASS Solution  
    FUNCTION minWastedSpace(packages LIST OF INTEGER boxes LIST OF LIST OF INTEGER) RETURNS INTEGER  
        SET MOD TO one billion PLUS one million PLUS seven  
        SORT packages IN ascending order  
        SET n TO the LENGTH OF packages  
        
        SET prefix_sum TO a list of zeros with LENGTH n PLUS one  
        FOR i FROM zero TO n MINUS one  
            SET element at position i PLUS one of prefix_sum TO element at position i of prefix_sum PLUS element at position i of packages  
        END FOR  
        
        SET min_wasted_space TO a very large number representing positive infinity  
        
        FOR each box IN boxes  
            SORT box IN ascending order  
            IF element at the last position of box LESS THAN element at the last position of packages THEN  
                CONTINUE to the next box  
            END IF  
            
            SET total_wasted TO zero  
            SET last_index TO zero  
            
            FOR each box_size IN box  
                SET index TO last_index  
                WHILE index LESS THAN n AND element at position index of packages LESS THAN OR EQUAL TO box_size  
                    INCREMENT index BY one  
                END WHILE  
                
                IF index GREATER THAN last_index THEN  
                    SET total_wasted TO total_wasted PLUS (index MINUS last_index) MULTIPLIED BY box_size MINUS (element at position index of prefix_sum MINUS element at position last_index of prefix_sum)  
                    SET last_index TO index  
                END IF  
            END FOR  
            
            IF last_index EQUALS n THEN  
                IF total_wasted LESS THAN min_wasted_space THEN  
                    SET min_wasted_space TO total_wasted  
                END IF  
            END IF  
        END FOR  
        
        IF min_wasted_space NOT EQUALS a very large number representing positive infinity THEN  
            RETURN min_wasted_space MODULO MOD  
        ELSE  
            RETURN minus one  
        END IF  
    END FUNCTION  
END CLASS