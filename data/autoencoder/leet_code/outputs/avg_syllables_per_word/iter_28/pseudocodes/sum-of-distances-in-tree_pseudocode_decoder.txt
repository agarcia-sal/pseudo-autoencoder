CLASS Solution  
    FUNCTION sumOfDistancesInTree(n PARAMETER, edges PARAMETER)  
        SET graph TO a mapping from node to list of connected nodes with default empty list  
        FOR each pair a AND b IN edges  
            APPEND b TO element at position a of graph  
            APPEND a TO element at position b of graph  
        END FOR  
        
        SET count TO a list of length n with each element set to one  
        SET dist TO a list of length n with each element set to zero  
        
        FUNCTION dfs1(u PARAMETER, p PARAMETER)  
            FOR each v IN element at position u of graph  
                IF v NOT EQUALS p THEN  
                    CALL dfs1 with parameters v AND u  
                    INCREMENT element at position u of count BY element at position v of count  
                    INCREMENT element at position u of dist BY element at position v of dist PLUS element at position v of count  
                END IF  
            END FOR  
        END FUNCTION  
        
        CALL dfs1 with parameters zero AND negative one  
        
        FUNCTION dfs2(u PARAMETER, p PARAMETER)  
            FOR each v IN element at position u of graph  
                IF v NOT EQUALS p THEN  
                    SET element at position v of dist TO element at position u of dist MINUS element at position v of count PLUS n MINUS element at position v of count  
                    CALL dfs2 with parameters v AND u  
                END IF  
            END FOR  
        END FUNCTION  
        
        CALL dfs2 with parameters zero AND negative one  
        
        RETURN dist  
    END FUNCTION  
END CLASS