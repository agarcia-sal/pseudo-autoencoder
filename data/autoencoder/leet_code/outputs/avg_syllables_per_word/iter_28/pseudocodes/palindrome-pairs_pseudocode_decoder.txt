CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS reverse_of(s)  
        END FUNCTION  
        
        SET word_dict TO an empty mapping from word TO index  
        FOR index FROM zero TO the LENGTH OF words MINUS one  
            SET word_at_index TO element at position index of words  
            ASSIGN word_at_index TO word_dict at key word_at_index  
        END FOR  
        
        SET result TO an empty list  
        
        FOR index FROM zero TO the LENGTH OF words MINUS one  
            SET word TO element at position index of words  
            
            IF word EQUALS empty string THEN  
                CONTINUE to next iteration  
            END IF  
            
            IF empty string IS A KEY IN word_dict AND is_palindrome(word) THEN  
                APPEND list containing index AND word_dict at key empty string TO result  
                APPEND list containing word_dict at key empty string AND index TO result  
            END IF  
            
            SET reversed_word TO reverse_of(word)  
            IF reversed_word IS A KEY IN word_dict AND word_dict at key reversed_word NOT EQUALS index THEN  
                APPEND list containing index AND word_dict at key reversed_word TO result  
            END IF  
            
            FOR j FROM one TO the LENGTH OF word MINUS one  
                SET prefix TO substring from position zero TO position j MINUS one of word  
                SET suffix TO substring from position j TO the END of word  
                SET reversed_prefix TO reverse_of(prefix)  
                SET reversed_suffix TO reverse_of(suffix)  
                
                IF is_palindrome(suffix) AND reversed_prefix IS A KEY IN word_dict THEN  
                    APPEND list containing index AND word_dict at key reversed_prefix TO result  
                END IF  
                
                IF is_palindrome(prefix) AND reversed_suffix IS A KEY IN word_dict THEN  
                    APPEND list containing word_dict at key reversed_suffix AND index TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS