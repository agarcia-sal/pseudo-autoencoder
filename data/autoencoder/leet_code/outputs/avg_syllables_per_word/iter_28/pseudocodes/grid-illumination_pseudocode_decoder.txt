CLASS Solution  
    FUNCTION gridIllumination(n integer_parameter lamps list_of_list_of_integer queries list_of_list_of_integer) RETURNS list_of_integer  
        SET row_count TO a new dictionary with default integer value  
        SET col_count TO a new dictionary with default integer value  
        SET diag_count TO a new dictionary with default integer value  
        SET anti_diag_count TO a new dictionary with default integer value  
        SET lamp_positions TO a new empty set  
        
        FOR each element r and c IN lamps  
            IF the pair consisting of r and c is NOT IN lamp_positions  
                ADD the pair consisting of r and c TO lamp_positions  
                INCREMENT the value associated with r in row_count BY one  
                INCREMENT the value associated with c in col_count BY one  
                INCREMENT the value associated with the difference of r MINUS c in diag_count BY one  
                INCREMENT the value associated with the sum of r PLUS c in anti_diag_count BY one  
            END IF  
        END FOR  
        
        SET directions TO a list of pairs of integers representing all eight adjacent directions PLUS the zero zero direction  
        
        SET result TO a new empty list  
        
        FOR each element r and c IN queries  
            IF the value associated with r in row_count IS GREATER THAN zero OR the value associated with c in col_count IS GREATER THAN zero OR the value associated with the difference of r MINUS c in diag_count IS GREATER THAN zero OR the value associated with the sum of r PLUS c in anti_diag_count IS GREATER THAN zero  
                APPEND one TO result  
            ELSE  
                APPEND zero TO result  
            END IF  
            
            FOR each element dr and dc IN directions  
                SET nr TO the sum of r PLUS dr  
                SET nc TO the sum of c PLUS dc  
                IF the pair consisting of nr and nc IS IN lamp_positions  
                    REMOVE the pair consisting of nr and nc FROM lamp_positions  
                    DECREMENT the value associated with nr in row_count BY one  
                    DECREMENT the value associated with nc in col_count BY one  
                    DECREMENT the value associated with the difference of nr MINUS nc in diag_count BY one  
                    DECREMENT the value associated with the sum of nr PLUS nc in anti_diag_count BY one  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS