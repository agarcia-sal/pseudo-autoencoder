CLASS Solution  
    FUNCTION countPairs(nums k)  
        SET gcd_count TO an empty mapping of counts  
        FOR each num IN nums  
            SET current_gcd TO the greatest common divisor of num AND k  
            INCREMENT the count associated WITH current_gcd IN gcd_count BY one  
        END FOR  
        SET total_pairs TO zero  
        SET gcd_values TO the list of keys FROM gcd_count  
        SET n TO the length OF gcd_values  
        FOR i FROM zero TO n MINUS one  
            FOR j FROM i TO n MINUS one  
                SET gcd1 TO the element at position i OF gcd_values  
                SET gcd2 TO the element at position j OF gcd_values  
                SET product TO gcd1 MULTIPLIED BY gcd2  
                SET remainder TO product MODULO k  
                IF remainder EQUALS zero THEN  
                    IF i EQUALS j THEN  
                        INCREMENT total_pairs BY the count associated WITH gcd1 IN gcd_count MULTIPLIED BY the count associated WITH gcd1 IN gcd_count MINUS one DIVIDED BY two  
                    ELSE  
                        INCREMENT total_pairs BY the count associated WITH gcd1 IN gcd_count MULTIPLIED BY the count associated WITH gcd2 IN gcd_count  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        RETURN total_pairs  
    END FUNCTION  
END CLASS