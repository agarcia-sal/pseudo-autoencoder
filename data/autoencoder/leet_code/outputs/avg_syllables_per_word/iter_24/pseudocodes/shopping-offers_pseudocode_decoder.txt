CLASS Solution  
    FUNCTION shoppingOffers(price, special, needs)  
        SET special TO an empty list  
        FOR each offer IN special  
            IF the sum of elements at all positions except the last position of offer GREATER THAN zero AND the element at the last position of offer LESS THAN the sum of each element at position p of price MULTIPLIED BY the element at the corresponding position n of offer at all positions except the last position  
                APPEND offer TO special  
            END IF  
        END FOR  
        
        FUNCTION dfs(needs)  
            SET min_cost TO zero  
            FOR each element p IN price AND each corresponding element n IN needs  
                INCREMENT min_cost BY p MULTIPLIED BY n  
            END FOR  
            
            FOR each offer IN special  
                SET new_needs TO an empty list  
                FOR each element n IN needs AND each corresponding element o IN offer at all positions except the last position  
                    APPEND n MINUS o TO new_needs  
                END FOR  
                
                SET can_use_offer TO true  
                FOR each element n IN new_needs  
                    IF n LESS THAN zero  
                        SET can_use_offer TO false  
                        BREAK  
                    END IF  
                END FOR  
                
                IF can_use_offer EQUALS true  
                    SET min_cost TO the smaller value BETWEEN min_cost AND the element at the last position of offer PLUS dfs(new_needs converted to tuple)  
                END IF  
            END FOR  
            
            RETURN min_cost  
        END FUNCTION  
        
        RETURN dfs(needs converted to tuple)  
    END FUNCTION  
END CLASS