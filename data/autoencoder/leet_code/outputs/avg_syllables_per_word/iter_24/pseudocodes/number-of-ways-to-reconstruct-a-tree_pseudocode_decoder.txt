CLASS Solution  
    FUNCTION checkWays(pairs)  
        SET graph TO a default dictionary with empty sets as default values  
        FOR each element x and element y IN pairs  
            ADD element y TO the set associated with element x in graph  
            ADD element x TO the set associated with element y in graph  
        END FOR  
        
        SET max_degree TO the element in graph with the maximum LENGTH OF the set associated with that element  
        SET n TO the LENGTH OF graph  
        
        IF the LENGTH OF the set associated with max_degree NOT EQUALS n MINUS one  
            RETURN zero  
        END IF  
        
        FUNCTION can_be_parent(u, v)  
            RETURN for every neighbor in the set associated with element v IN graph the condition that neighbor is in the set associated with element u in graph OR neighbor EQUALS element u holds true  
        END FUNCTION  
        
        SET ways TO one  
        
        FOR each element u IN graph  
            IF element u EQUALS max_degree  
                CONTINUE to next iteration  
            END IF  
            
            SET parent TO none  
            FOR each element v IN the set associated with element u in graph  
                IF element v IN graph AND the LENGTH OF the set associated with element v in graph GREATER THAN OR EQUAL TO the LENGTH OF the set associated with element u in graph AND can_be_parent(element v, element u)  
                    IF parent IS none OR the LENGTH OF the set associated with element v in graph LESS THAN the LENGTH OF the set associated with element parent in graph  
                        SET parent TO element v  
                    END IF  
                END IF  
            END FOR  
            
            IF parent IS none  
                RETURN zero  
            END IF  
            
            IF the LENGTH OF the set associated with element parent in graph EQUALS the LENGTH OF the set associated with element u in graph  
                SET ways TO two  
            END IF  
        END FOR  
        
        RETURN ways  
    END FUNCTION  
END CLASS