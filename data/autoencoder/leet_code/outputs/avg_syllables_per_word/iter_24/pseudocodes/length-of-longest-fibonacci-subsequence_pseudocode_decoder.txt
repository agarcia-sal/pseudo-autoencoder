CLASS Solution  
    FUNCTION lenLongestFibSubseq(arr)  
        SET index TO an empty mapping from element to position  
        FOR each element x WITH position i IN arr  
            SET element x in index TO position i  
        END FOR  
        
        SET dp TO an empty mapping from pairs of positions to lengths  
        SET max_length TO zero  
        
        FOR position k FROM zero TO the LENGTH OF arr MINUS one  
            FOR position j FROM zero TO position k MINUS one  
                SET value i TO the position corresponding to the element at position k MINUS the element at position j in index OR negative one if not found  
                IF value i IS GREATER THAN OR EQUAL TO zero AND value i IS LESS THAN position j THEN  
                    SET dp for the pair position j AND position k TO the value of dp for the pair value i AND position j OR two PLUS one  
                    IF dp for the pair position j AND position k IS GREATER THAN max_length THEN  
                        SET max_length TO dp for the pair position j AND position k  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        
        IF max_length IS GREATER THAN OR EQUAL TO three THEN  
            RETURN max_length  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS