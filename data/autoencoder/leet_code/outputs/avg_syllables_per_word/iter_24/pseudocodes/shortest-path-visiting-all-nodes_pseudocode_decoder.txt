CLASS Solution  
    FUNCTION shortestPathLength(graph)  
        IF graph EQUALS empty  
            RETURN zero  
        END IF  
        
        SET n TO the LENGTH OF graph  
        SET queue TO a new double ended queue containing pairs of each node IN the RANGE from zero TO n MINUS one AND one SHIFTED LEFT by the value of node  
        SET visited TO a new set containing pairs of each node IN the RANGE from zero TO n MINUS one AND one SHIFTED LEFT by the value of node  
        
        SET steps TO zero  
        SET all_nodes_visited TO one SHIFTED LEFT by the value of n MINUS one  
        
        WHILE queue holds elements  
            FOR index FROM zero TO the LENGTH OF queue MINUS one  
                REMOVE the first element FROM queue AND ASSIGN current_node and visited_nodes TO the values of this element  
                
                IF visited_nodes EQUALS all_nodes_visited  
                    RETURN steps  
                END IF  
                
                FOR each neighbor IN the element at position current_node of graph  
                    SET next_visited_nodes TO the value of visited_nodes OR one SHIFTED LEFT by the value of neighbor  
                    SET next_state TO the pair consisting of neighbor AND next_visited_nodes  
                    
                    IF next_state NOT IN visited  
                        ADD next_state TO visited  
                        APPEND next_state TO queue  
                    END IF  
                END FOR  
            END FOR  
            
            INCREMENT steps BY one  
        END WHILE  
        
        RETURN minus one  
    END FUNCTION  
END CLASS