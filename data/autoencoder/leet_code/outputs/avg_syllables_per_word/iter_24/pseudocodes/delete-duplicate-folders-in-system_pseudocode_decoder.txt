CLASS TrieNode  
    FUNCTION __init__ with no parameters  
        SET children TO a new default dictionary mapping to TrieNode objects  
        SET deleted TO false  
    END FUNCTION  
END CLASS  

CLASS Solution  
    FUNCTION deleteDuplicateFolder with parameter paths  
        SET ans TO an empty list  
        SET root TO a new TrieNode object  
        SET subtreeToNodes TO a new default dictionary mapping to empty lists  

        FOR each path IN the paths sorted in ascending lexicographical order  
            SET node TO root  
            FOR each element named s IN path  
                SET node TO the child of node mapped by s in children  
            END FOR  
        END FOR  

        FUNCTION buildSubtreeToRoots with parameter node  
            SET subtree TO the opening parenthesis concatenated WITH the concatenation FOR each element s IN the children of node OF s concatenated WITH the result of calling buildSubtreeToRoots with the child node mapped by s concatenated WITH the closing parenthesis  
            IF subtree NOT EQUALS the string representation of empty parentheses  
                APPEND node TO the list of nodes mapped by subtree in subtreeToNodes  
            END IF  
            RETURN subtree  
        END FUNCTION  

        CALL buildSubtreeToRoots with argument root  

        FOR each list of nodes named nodes IN the values of subtreeToNodes  
            IF the length of nodes GREATER THAN one  
                FOR each node IN nodes  
                    SET the deleted attribute of node TO true  
                END FOR  
            END IF  
        END FOR  

        FUNCTION constructPath with parameters node and path  
            FOR each pair of elements s and child IN the items of the children dictionary of node  
                IF the deleted attribute of child EQUALS false  
                    CALL constructPath with arguments child and the concatenation of path WITH s appended  
                END IF  
            END FOR  
            IF path is NOT empty  
                APPEND path TO ans  
            END IF  
        END FUNCTION  

        CALL constructPath with arguments root and an empty list  
        RETURN ans  
    END FUNCTION  
END CLASS