CLASS Solution  
    FUNCTION maxStudents(seats)  
        SET m TO the LENGTH OF seats  
        SET n TO the LENGTH OF element at position zero of seats  
        
        SET broken TO a list containing m zeros  
        FOR i FROM zero TO m MINUS one  
            FOR j FROM zero TO n MINUS one  
                IF element at position j of element at position i of seats EQUALS the character representing broken seat  
                    SET element at position i of broken TO element at position i of broken PLUS the value one SHIFTED LEFT BY j positions  
                END IF  
            END FOR  
        END FOR  
        
        FUNCTION is_valid(arrangement)  
            RETURN the result of binary AND between arrangement AND the value of arrangement SHIFTED RIGHT BY one position EQUALS zero  
        END FUNCTION  
        
        SET dp TO a list containing m empty dictionaries  
        
        FOR arrangement FROM zero TO the value one SHIFTED LEFT BY n positions MINUS one  
            IF is_valid(arrangement) AND the result of binary AND between arrangement AND element at position zero of broken EQUALS zero  
                SET the entry in dictionary at position zero of dp with key arrangement TO the count of ones in the binary representation of arrangement  
            END IF  
        END FOR  
        
        FOR i FROM one TO m MINUS one  
            FOR arrangement FROM zero TO the value one SHIFTED LEFT BY n positions MINUS one  
                IF is_valid(arrangement) AND the result of binary AND between arrangement AND element at position i of broken EQUALS zero  
                    SET max_students TO zero  
                    FOR each prev_arrangement IN the keys of dictionary at position i MINUS one of dp  
                        IF the result of binary AND between arrangement AND the value of prev_arrangement SHIFTED RIGHT BY one position EQUALS zero AND the result of binary AND between arrangement AND the value of prev_arrangement SHIFTED LEFT BY one position EQUALS zero  
                            IF the value in dictionary at position i MINUS one of dp for key prev_arrangement GREATER THAN max_students  
                                SET max_students TO the value in dictionary at position i MINUS one of dp for key prev_arrangement  
                            END IF  
                        END IF  
                    END FOR  
                    SET the entry in dictionary at position i of dp with key arrangement TO max_students PLUS the count of ones in the binary representation of arrangement  
                END IF  
            END FOR  
        END FOR  
        
        IF the dictionary at the last position in dp is not empty  
            RETURN the maximum value among all values in the dictionary at the last position of dp  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS