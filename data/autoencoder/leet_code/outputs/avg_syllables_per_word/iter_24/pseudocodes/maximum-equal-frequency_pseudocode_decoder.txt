CLASS Solution  
    FUNCTION maxEqualFreq(nums)  
        ASSIGN reference TO an empty frequency counter named count  
        ASSIGN reference TO an empty frequency-of-frequency counter named freq  
        SET max_len TO zero  
        
        FOR each index i AND each element num IN nums with enumeration  
            INCREMENT the frequency of num in count by one  
            
            IF the frequency of num in count is GREATER THAN one THEN  
                DECREMENT the frequency of the previous frequency of num in freq by one  
                IF the frequency of that previous frequency in freq is EQUALS zero THEN  
                    REMOVE that previous frequency from freq  
                END IF  
            END IF  
            
            INCREMENT the frequency of the current frequency of num in freq by one  
            
            IF the number of distinct frequencies in freq is EQUALS one AND  
               (freq contains frequency one OR the single frequency count in freq is EQUALS one) THEN  
                SET max_len TO i PLUS one  
            ELSE IF the number of distinct frequencies in freq is EQUALS two AND  
                    (freq contains frequency one AND the count of frequency one in freq is EQUALS one OR  
                     the difference between the maximum frequency key in freq AND the minimum frequency key in freq is EQUALS one AND  
                     the count of the maximum frequency key in freq is EQUALS one) THEN  
                SET max_len TO i PLUS one  
            END IF  
        END FOR  
        
        RETURN max_len  
    END FUNCTION  
END CLASS