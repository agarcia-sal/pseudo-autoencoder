CLASS Solution  
    FUNCTION nearestPalindromic(n)  
        SET length TO the LENGTH OF n  
        IF length EQUALS one  
            RETURN the string representation OF the integer value OF n MINUS one  
        END IF  
        
        SET candidates TO an empty set  
        
        ADD the integer value OF ten MULTIPLIED BY ten MULTIPLIED BY ... repeated length times PLUS one TO candidates  
        ADD the integer value OF ten MULTIPLIED BY ten MULTIPLIED BY ... repeated (length MINUS one) times MINUS one TO candidates  
        
        SET prefix TO the integer value OF the substring FROM position one TO position (length PLUS one) DIVIDED BY two OF n  
        
        FOR i FROM negative one TO one  
            SET new_prefix TO the string representation OF prefix PLUS i  
            
            IF the remainder of length DIVIDED BY two EQUALS zero  
                SET candidate TO new_prefix FOLLOWED BY new_prefix IN REVERSE ORDER  
            ELSE  
                SET candidate TO new_prefix FOLLOWED BY the substring OF new_prefix FROM the second last position TO the first position IN REVERSE ORDER  
            END IF  
            
            ADD the integer value OF candidate TO candidates  
        END FOR  
        
        SET original_number TO the integer value OF n  
        REMOVE original_number FROM candidates IF present  
        
        SET closest TO the element IN candidates WITH the minimum value ACCORDING TO the conditions THAT the absolute value OF element MINUS original_number IS minimal AND WHEN TIES break BY the element value ITSELF  
        
        RETURN the string representation OF closest  
    END FUNCTION  
END CLASS