CLASS Solution  
    FUNCTION palindromePairs(words)  
        FUNCTION is_palindrome(s)  
            RETURN s EQUALS reverse_of s  
        END FUNCTION  
        
        SET word_dict TO a new empty mapping from word TO index  
        FOR each index i FROM zero TO the LENGTH OF words MINUS one  
            ASSIGN word_dict at element at position i of words TO i  
        END FOR  
        
        SET result TO a new empty list  
        
        FOR each index i FROM zero TO the LENGTH OF words MINUS one  
            SET word TO element at position i of words  
            
            IF word EQUALS the empty string THEN  
                CONTINUE TO next iteration  
            END IF  
            
            IF the empty string IS IN the keys of word_dict AND is_palindrome of word THEN  
                APPEND a list of i PLUS the value of word_dict at the empty string TO result  
                APPEND a list of the value of word_dict at the empty string PLUS i TO result  
            END IF  
            
            SET reversed_word TO reverse_of word  
            IF reversed_word IS IN the keys of word_dict AND the value of word_dict at reversed_word NOT EQUALS i THEN  
                APPEND a list of i PLUS the value of word_dict at reversed_word TO result  
            END IF  
            
            FOR each index j FROM one TO the LENGTH OF word MINUS one  
                SET prefix TO substring from position zero TO position j MINUS one of word  
                SET suffix TO substring from position j TO the end of word  
                
                SET reversed_prefix TO reverse_of prefix  
                SET reversed_suffix TO reverse_of suffix  
                
                IF is_palindrome of suffix AND reversed_prefix IS IN the keys of word_dict THEN  
                    APPEND a list of i PLUS the value of word_dict at reversed_prefix TO result  
                END IF  
                
                IF is_palindrome of prefix AND reversed_suffix IS IN the keys of word_dict THEN  
                    APPEND a list of the value of word_dict at reversed_suffix PLUS i TO result  
                END IF  
            END FOR  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS