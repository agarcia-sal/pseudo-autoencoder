CLASS Solution  
    FUNCTION candy(ratings)  
        SET n TO the LENGTH OF ratings  
        SET candies TO a list of the LENGTH n where each element is SET TO one  
        FOR i FROM two TO n  
            IF element at position i of ratings GREATER THAN element at position i MINUS one of ratings  
                SET element at position i of candies TO element at position i MINUS one of candies PLUS one  
            END IF  
        END FOR  
        FOR i FROM n MINUS one MINUS one DOWN TO one  
            IF element at position i MINUS one of ratings GREATER THAN element at position i of ratings  
                SET element at position i MINUS one of candies TO the GREATER OF element at position i MINUS one of candies AND element at position i of candies PLUS one  
            END IF  
        END FOR  
        SET total_candies TO zero  
        FOR each candy_count IN candies  
            INCREMENT total_candies BY candy_count  
        END FOR  
        RETURN total_candies  
    END FUNCTION  
END CLASS