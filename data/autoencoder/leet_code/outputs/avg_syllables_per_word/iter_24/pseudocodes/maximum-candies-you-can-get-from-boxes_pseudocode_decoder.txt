CLASS Solution  
    FUNCTION maxCandies(status LIST OF INTEGER  
                       candies LIST OF INTEGER  
                       keys LIST OF LIST OF INTEGER  
                       containedBoxes LIST OF LIST OF INTEGER  
                       initialBoxes LIST OF INTEGER) RETURNS INTEGER  
        SET boxes_we_have TO a new empty set  
        FOR each element IN initialBoxes  
            ADD element TO boxes_we_have  
        END FOR  
        SET keys_we_have TO a new empty set  
        SET total_candies TO zero  
        SET progress_made TO true  
        WHILE progress_made EQUALS true  
            SET progress_made TO false  
            FOR each box IN the list converted from boxes_we_have  
                IF the element at position box of status EQUALS one OR box IS IN keys_we_have  
                    INCREMENT total_candies BY the element at position box of candies  
                    FOR each key_element IN the element at position box of keys  
                        ADD key_element TO keys_we_have  
                    END FOR  
                    FOR each contained_box_element IN the element at position box of containedBoxes  
                        ADD contained_box_element TO boxes_we_have  
                    END FOR  
                    REMOVE box FROM boxes_we_have  
                    SET progress_made TO true  
                END IF  
            END FOR  
        END WHILE  
        RETURN total_candies  
    END FUNCTION  
END CLASS