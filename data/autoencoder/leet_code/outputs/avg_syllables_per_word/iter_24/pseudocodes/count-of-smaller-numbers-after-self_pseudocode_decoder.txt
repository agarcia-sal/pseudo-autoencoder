CLASS Solution  
    FUNCTION countSmaller(nums)  
        SET sorted_nums TO the sorted list of unique elements from nums  
        SET rank TO an empty dictionary  
        FOR each index and value IN the enumeration of sorted_nums  
            SET the element with key value of rank TO index PLUS one  
        END FOR  
        
        SET bit TO a list of zeros with length of the length of sorted_nums PLUS one  
        
        FUNCTION get_sum(idx)  
            SET res TO zero  
            WHILE idx GREATER THAN zero HOLDING  
                INCREMENT res BY the element at position idx of bit  
                SET idx TO idx MINUS the bitwise AND of idx and the negative of idx expressed in natural language  
            END WHILE  
            RETURN res  
        END FUNCTION  
        
        FUNCTION update(idx, delta)  
            WHILE idx LESS THAN the length of bit HOLDING  
                INCREMENT the element at position idx of bit BY delta  
                SET idx TO idx PLUS the bitwise AND of idx and the negative of idx expressed in natural language  
            END WHILE  
        END FUNCTION  
        
        SET counts TO an empty list  
        FOR each num IN the elements of nums traversed in reversed order  
            SET r TO the element with key num of rank  
            APPEND get_sum the value of r MINUS one TO counts  
            CALL update with r and one  
        END FOR  
        
        RETURN counts traversed in reversed order  
    END FUNCTION  
END CLASS