CLASS Solution
    FUNCTION findMaxAverage(nums: List[int], k: int) RETURNS float
        FUNCTION canFindAverage(mid: float) RETURNS bool
            SET prefix_sums TO list of zeros with length LENGTH OF nums + 1
            SET min_prefix_sum TO list of zeros with length LENGTH OF nums + 1

            FOR i FROM 0 TO LENGTH OF nums - 1
                SET prefix_sums[i + 1] TO prefix_sums[i] + nums[i] - mid
                IF i >= k THEN
                    SET min_prefix_sum[i + 1] TO MINIMUM OF min_prefix_sum[i] AND prefix_sums[i + 1 - k]
                ELSE
                    SET min_prefix_sum[i + 1] TO min_prefix_sum[i]
                END IF

                IF i >= k - 1 AND prefix_sums[i + 1] - min_prefix_sum[i + 1] >= 0 THEN
                    RETURN True
                END IF
            END FOR

            RETURN False
        END FUNCTION

        SET low TO MINIMUM OF nums
        SET high TO MAXIMUM OF nums

        WHILE high - low > 0.00001
            SET mid TO (low + high) DIVIDED BY 2
            IF canFindAverage(mid) THEN
                SET low TO mid
            ELSE
                SET high TO mid
            END IF
        END WHILE

        RETURN low
    END FUNCTION
END CLASS