CLASS Solution
    FUNCTION pacificAtlantic(heights)
        FUNCTION bfs(q, vis)
            WHILE q IS NOT EMPTY
                SET size TO LENGTH OF q
                FOR index FROM 1 TO size
                    SET i, j TO q POP LEFT
                    FOR each (a, b) IN [(0, -1), (0, 1), (1, 0), (-1, 0)]
                        SET x TO i + a
                        SET y TO j + b
                        IF x IS AT LEAST 0 AND LESS THAN m AND y IS AT LEAST 0 AND LESS THAN n
                            AND (x, y) NOT IN vis
                            AND heights[x][y] IS AT LEAST heights[i][j]
                            THEN
                                ADD (x, y) TO vis
                                APPEND (x, y) TO q
        SET m TO LENGTH OF heights
        SET n TO LENGTH OF heights[0]
        INITIALIZE vis1 AS EMPTY SET
        INITIALIZE vis2 AS EMPTY SET
        INITIALIZE q1 AS EMPTY DEQUE
        INITIALIZE q2 AS EMPTY DEQUE
        FOR i FROM 0 TO m - 1
            FOR j FROM 0 TO n - 1
                IF i EQUALS 0 OR j EQUALS 0
                    ADD (i, j) TO vis1
                    APPEND (i, j) TO q1
                IF i EQUALS m - 1 OR j EQUALS n - 1
                    ADD (i, j) TO vis2
                    APPEND (i, j) TO q2
        CALL bfs WITH q1 AND vis1
        CALL bfs WITH q2 AND vis2
        RETURN LIST OF (i, j) FOR i FROM 0 TO m - 1 FOR j FROM 0 TO n - 1 WHERE (i, j) IN vis1 AND (i, j) IN vis2
    END FUNCTION
END CLASS