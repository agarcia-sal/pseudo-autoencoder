CLASS Solution
    FUNCTION largestRectangleArea(heights)
        SET stack TO LIST containing -1
        SET max_area TO 0
        APPEND 0 TO heights
        
        FOR i, h IN ENUMERATE heights
            WHILE last element in stack IS NOT -1 AND h IS LESS THAN heights at last element in stack
                SET height TO heights at POPPED element from stack
                SET width TO i MINUS last element in stack MINUS 1
                SET max_area TO MAXIMUM of max_area AND height MULTIPLIED BY width
            END WHILE
            APPEND i TO stack
        END FOR

        RETURN max_area
    END FUNCTION
END CLASS