CLASS Solution
    FUNCTION numDupDigitsAtMostN(n)
        FUNCTION count_unique_digits(x)
            SET s TO string representation of x
            SET length TO length of s
            SET count TO 0
            FOR i FROM 1 TO length - 1
                INCREMENT count BY 9 TIMES perm(9, i - 1)
            SET seen TO empty set
            FOR i FROM 0 TO length - 1
                SET digit TO integer value of s at position i
                FOR d FROM (0 IF i > 0 ELSE 1) TO digit - 1
                    IF d NOT IN seen
                        INCREMENT count BY perm(9 - i, length - i - 1)
                IF digit IN seen
                    BREAK loop
                ADD digit TO seen
            ELSE
                INCREMENT count BY 1
            RETURN count
        END FUNCTION

        RETURN n MINUS count_unique_digits(n)
    END FUNCTION

    FUNCTION perm(m, n)
        IF n EQUALS 0
            RETURN 1
        SET result TO 1
        FOR i FROM 0 TO n - 1
            SET result TO result TIMES (m MINUS i)
        RETURN result
    END FUNCTION
END CLASS