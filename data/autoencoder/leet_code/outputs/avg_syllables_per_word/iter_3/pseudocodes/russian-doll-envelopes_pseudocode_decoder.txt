CLASS Solution
    FUNCTION maxEnvelopes(envelopes)
        SORT envelopes BY width ASCENDING AND height DESCENDING
        
        SET dp TO empty list
        
        FOR each (_, h) IN envelopes
            SET idx TO position found by binary searching left for h IN dp
            IF idx EQUALS LENGTH OF dp
                APPEND h TO dp
            ELSE
                SET dp[idx] TO h
        RETURN LENGTH OF dp
    END FUNCTION
END CLASS