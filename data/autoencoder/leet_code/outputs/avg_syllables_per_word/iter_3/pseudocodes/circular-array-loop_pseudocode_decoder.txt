CLASS Solution
    FUNCTION circularArrayLoop(nums)
        FUNCTION sameDirection(val1, val2)
            RETURN (val1 > 0 AND val2 > 0) OR (val1 < 0 AND val2 < 0)
        END FUNCTION

        SET n TO LENGTH OF nums

        FOR i FROM 0 TO n - 1
            SET slow TO i
            SET fast TO i

            IF nums[i] EQUALS 0
                CONTINUE TO NEXT i
            END IF

            WHILE TRUE
                SET slow TO (slow + nums[slow]) MODULO n
                IF slow < 0
                    INCREMENT slow BY n
                END IF

                SET fast TO (fast + nums[fast]) MODULO n
                IF fast < 0
                    INCREMENT fast BY n
                END IF

                SET fast TO (fast + nums[fast]) MODULO n
                IF fast < 0
                    INCREMENT fast BY n
                END IF

                IF NOT sameDirection(nums[slow], nums[i]) OR NOT sameDirection(nums[fast], nums[i])
                    BREAK
                END IF

                IF slow EQUALS fast
                    IF slow EQUALS (slow + nums[slow]) MODULO n
                        BREAK
                    END IF
                    RETURN TRUE
                END IF
            END WHILE
        END FOR

        RETURN FALSE
    END FUNCTION
END CLASS