CLASS Solution
    FUNCTION restoreIpAddresses(s)
        FUNCTION is_valid(segment)
            IF LENGTH OF segment IS 1 THEN
                RETURN TRUE
            ELSE IF segment STARTS NOT WITH '0' AND CONVERT segment TO INTEGER IS LESS THAN OR EQUAL TO 255 THEN
                RETURN TRUE
            ELSE
                RETURN FALSE
            END IF
        END FUNCTION

        FUNCTION backtrack(start, path)
            IF LENGTH OF path IS 4 THEN
                IF start IS EQUAL TO LENGTH OF s THEN
                    APPEND JOIN path WITH '.' TO result
                END IF
                RETURN
            END IF
            FOR length FROM 1 TO 3 DO
                IF start + length IS LESS THAN OR EQUAL TO LENGTH OF s THEN
                    SET segment TO SUBSTRING OF s FROM start TO start + length
                    IF is_valid(segment) THEN
                        CALL backtrack(start + length, path APPENDED WITH segment)
                    END IF
                END IF
            END FOR
        END FUNCTION

        SET result TO EMPTY LIST
        CALL backtrack(0, EMPTY LIST)
        RETURN result
    END FUNCTION
END CLASS