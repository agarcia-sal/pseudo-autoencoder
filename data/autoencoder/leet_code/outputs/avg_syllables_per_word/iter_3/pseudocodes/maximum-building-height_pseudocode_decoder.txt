CLASS Solution
    FUNCTION maxBuilding(n, restrictions)
        APPEND [1, 0] TO restrictions
        SORT restrictions BY first element ascending
        
        FOR i FROM 1 TO LENGTH OF restrictions MINUS 1
            SET idx TO restrictions[i][0]
            SET height TO restrictions[i][1]
            SET prev_idx TO restrictions[i - 1][0]
            SET prev_height TO restrictions[i - 1][1]
            SET restrictions[i][1] TO MINIMUM OF height AND (prev_height + (idx - prev_idx))
        
        FOR i FROM LENGTH OF restrictions MINUS 2 DOWNTO 0
            SET idx TO restrictions[i][0]
            SET height TO restrictions[i][1]
            SET next_idx TO restrictions[i + 1][0]
            SET next_height TO restrictions[i + 1][1]
            SET restrictions[i][1] TO MINIMUM OF height AND (next_height + (next_idx - idx))
        
        SET max_height TO 0
        SET prev_idx TO restrictions[0][0]
        SET prev_height TO restrictions[0][1]
        
        FOR i FROM 1 TO LENGTH OF restrictions MINUS 1
            SET idx TO restrictions[i][0]
            SET height TO restrictions[i][1]
            SET candidate TO (idx - prev_idx + prev_height + height) DIVIDED BY 2
            SET max_height TO MAXIMUM OF max_height AND candidate
            SET prev_idx TO idx
            SET prev_height TO height
        
        SET max_height TO MAXIMUM OF max_height AND (prev_height + (n - prev_idx))
        
        RETURN max_height
    END FUNCTION
END CLASS