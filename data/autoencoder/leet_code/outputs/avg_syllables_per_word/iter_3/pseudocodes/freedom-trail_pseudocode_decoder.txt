CLASS Solution
    FUNCTION findRotateSteps(ring, key)
        SET char_positions TO empty dictionary with default list
        
        FOR i FROM 0 TO LENGTH OF ring MINUS 1
            SET char TO character at position i in ring
            APPEND i TO char_positions[char]
        
        SET n TO LENGTH OF ring
        
        FUNCTION dp(i, prev_pos)
            IF i EQUALS LENGTH OF key
                RETURN 0
            
            SET min_steps TO infinity
            FOR pos IN char_positions[key[i]]
                SET clockwise TO (pos MINUS prev_pos) MODULO n
                SET anticlockwise TO (prev_pos MINUS pos) MODULO n
                SET steps TO MINIMUM OF clockwise AND anticlockwise PLUS 1 PLUS dp(i PLUS 1, pos)
                SET min_steps TO MINIMUM OF min_steps AND steps
            
            RETURN min_steps
        
        RETURN dp(0, 0)
    END FUNCTION
END CLASS