CLASS Solution
    FUNCTION minimumMountainRemovals(nums)
        SET n TO LENGTH OF nums

        SET lis TO A LIST OF 1 REPEATED n TIMES
        FOR i FROM 0 TO n-1
            FOR j FROM 0 TO i-1
                IF nums[i] > nums[j] THEN
                    SET lis[i] TO MAXIMUM OF lis[i] AND lis[j] + 1

        SET lds TO A LIST OF 1 REPEATED n TIMES
        FOR i FROM n-1 DOWNTO 0
            FOR j FROM i+1 TO n-1
                IF nums[i] > nums[j] THEN
                    SET lds[i] TO MAXIMUM OF lds[i] AND lds[j] + 1

        SET max_mountain_length TO 0
        FOR i FROM 1 TO n-2
            IF lis[i] > 1 AND lds[i] > 1 THEN
                SET max_mountain_length TO MAXIMUM OF max_mountain_length AND lis[i] + lds[i] - 1

        RETURN n MINUS max_mountain_length
    END FUNCTION
END CLASS