CLASS Solution
    FUNCTION nthSuperUglyNumber(n, primes)
        SET ugly_numbers TO LIST containing 1
        SET heap TO LIST of pairs (prime, index) FOR each prime WITH its index IN primes
        CONVERT heap INTO a min-heap structure
        SET indices TO LIST of zeros WITH LENGTH equal to LENGTH OF primes

        WHILE LENGTH OF ugly_numbers IS LESS THAN n
            REMOVE smallest pair (next_ugly, prime_index) FROM heap
            IF next_ugly IS NOT EQUAL TO LAST ELEMENT IN ugly_numbers
                APPEND next_ugly TO ugly_numbers
            INCREMENT indices[prime_index] BY 1
            SET next_multiple TO primes[prime_index] MULTIPLIED BY ugly_numbers[indices[prime_index]]
            ADD pair (next_multiple, prime_index) INTO heap

        RETURN LAST ELEMENT IN ugly_numbers
    END FUNCTION
END CLASS