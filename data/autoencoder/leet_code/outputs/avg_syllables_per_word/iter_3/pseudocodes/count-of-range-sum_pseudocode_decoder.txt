CLASS Solution
    FUNCTION countRangeSum(nums, lower, upper)
        SET prefix_sums TO [0]
        SET current_sum TO 0
        SET count TO 0
        FOR each num IN nums
            INCREMENT current_sum BY num
            SET left TO current_sum MINUS upper
            SET right TO current_sum MINUS lower
            SET count TO count PLUS (number of elements in prefix_sums LESS THAN OR EQUAL TO right MINUS number of elements in prefix_sums GREATER THAN OR EQUAL TO left)
            INSERT current_sum INTO prefix_sums WHILE MAINTAINING SORT ORDER
        RETURN count
    END FUNCTION
END CLASS