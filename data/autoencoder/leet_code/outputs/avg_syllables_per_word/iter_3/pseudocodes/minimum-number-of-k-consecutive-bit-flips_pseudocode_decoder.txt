CLASS Solution
    FUNCTION minKBitFlips(nums: List[int], k: int) RETURNS int
        SET n TO LENGTH OF nums
        SET flip_count TO 0
        SET flipped TO LIST OF ZEROS WITH LENGTH n + 1
        SET flip_state TO 0
        
        FOR i FROM 0 TO n - 1
            SET flip_state TO flip_state XOR flipped[i]
            
            IF nums[i] EQUALS flip_state THEN
                IF i + k GREATER THAN n THEN
                    RETURN -1
                END IF
                
                SET flip_state TO flip_state XOR 1
                SET flipped[i + k] TO flipped[i + k] XOR 1
                INCREMENT flip_count BY 1
            END IF
        END FOR
        
        RETURN flip_count
    END FUNCTION
END CLASS