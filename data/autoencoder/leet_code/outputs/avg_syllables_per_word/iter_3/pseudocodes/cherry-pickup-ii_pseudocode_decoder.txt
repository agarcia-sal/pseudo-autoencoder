```
CLASS Solution
    FUNCTION cherryPickup(grid)
        SET rows TO LENGTH OF grid
        SET cols TO LENGTH OF grid[0]

        FUNCTION dp(r, c1, c2)
            IF c1 < 0 OR c1 >= cols OR c2 < 0 OR c2 >= cols THEN
                RETURN 0
            END IF

            IF c1 == c2 THEN
                SET cherries TO grid[r][c1]
            ELSE
                SET cherries TO grid[r][c1] + grid[r][c2]
            END IF

            IF r == rows - 1 THEN
                RETURN cherries
            END IF

            SET max_cherries TO 0
            FOR dc1 IN [-1, 0, 1]
                FOR dc2 IN [-1, 0, 1]
                    SET candidate TO dp(r + 1, c1 + dc1, c2 + dc2)
                    IF candidate > max_cherries THEN
                        SET max_cherries TO candidate
                    END IF
                END FOR
            END FOR

            RETURN cherries + max_cherries
        END FUNCTION

        RETURN dp(0, 0, cols - 1)
    END FUNCTION
END CLASS
```