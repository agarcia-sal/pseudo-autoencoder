CLASS Solution
    FUNCTION trap(height)
        IF height IS EMPTY
            RETURN 0
        SET n TO LENGTH OF height
        SET left_max TO LIST OF SIZE n WITH ALL ZEROS
        SET right_max TO LIST OF SIZE n WITH ALL ZEROS
        SET left_max[0] TO height[0]
        FOR i FROM 1 TO n - 1
            SET left_max[i] TO MAXIMUM OF left_max[i - 1] AND height[i]
        SET right_max[n - 1] TO height[n - 1]
        FOR i FROM n - 2 DOWN TO 0
            SET right_max[i] TO MAXIMUM OF right_max[i + 1] AND height[i]
        SET trapped_water TO 0
        FOR i FROM 0 TO n - 1
            INCREMENT trapped_water BY MINIMUM OF left_max[i] AND right_max[i] MINUS height[i]
        RETURN trapped_water
    END FUNCTION
END CLASS