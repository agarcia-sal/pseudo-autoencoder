CLASS Solution
    FUNCTION longestPrefix(s)
        SET n TO LENGTH OF s
        SET lps TO LIST OF ZEROES WITH SIZE n
        SET j TO 0

        FOR i FROM 1 TO n MINUS 1
            WHILE j GREATER THAN 0 AND s AT i NOT EQUAL TO s AT j
                SET j TO lps AT j MINUS 1

            IF s AT i EQUALS s AT j
                INCREMENT j BY 1
                SET lps AT i TO j

        SET longest_happy_prefix_length TO lps AT n MINUS 1
        RETURN SUBSTRING OF s FROM START TO longest_happy_prefix_length
    END FUNCTION
END CLASS