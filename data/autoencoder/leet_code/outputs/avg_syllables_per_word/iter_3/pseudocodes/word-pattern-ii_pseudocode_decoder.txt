CLASS Solution
    FUNCTION wordPatternMatch(pattern, s)
        FUNCTION backtrack(pattern_index, string_index, mapping, used)
            IF pattern_index EQUALS LENGTH OF pattern AND string_index EQUALS LENGTH OF s THEN
                RETURN True
            IF pattern_index EQUALS LENGTH OF pattern OR string_index EQUALS LENGTH OF s THEN
                RETURN False

            SET current_char TO pattern AT pattern_index
            IF current_char IN mapping THEN
                SET word TO mapping[current_char]
                IF SUBSTRING OF s FROM string_index TO string_index PLUS LENGTH OF word NOT EQUALS word THEN
                    RETURN False
                IF backtrack(pattern_index PLUS 1, string_index PLUS LENGTH OF word, mapping, used) THEN
                    RETURN True
            ELSE
                FOR end FROM string_index PLUS 1 TO LENGTH OF s PLUS 1 DO
                    SET word TO SUBSTRING OF s FROM string_index TO end
                    IF word IN used THEN
                        CONTINUE
                    SET mapping[current_char] TO word
                    ADD word TO used
                    IF backtrack(pattern_index PLUS 1, end, mapping, used) THEN
                        RETURN True
                    REMOVE current_char FROM mapping
                    REMOVE word FROM used

            RETURN False
        END FUNCTION

        RETURN backtrack(0, 0, EMPTY MAP, EMPTY SET)
    END FUNCTION
END CLASS