CLASS Solution
    FUNCTION maskPII(s)
        IF '@' IN s THEN
            SET local AND domain TO SPLIT s BY '@'
            SET masked_local TO CONCATENATE local FIRST CHARACTER, FIVE TIMES '*', local LAST CHARACTER
            RETURN CONCATENATE masked_local LOWERCASED, '@', domain LOWERCASED
        ELSE
            SET digits TO EMPTY STRING
            FOR each character IN s
                IF character IS DIGIT THEN
                    APPEND character TO digits
            SET local_number TO CONCATENATE '***-***-', LAST FOUR CHARACTERS OF digits
            IF LENGTH OF digits EQUALS 10 THEN
                RETURN local_number
            ELSE
                SET country_code_length TO LENGTH OF digits MINUS 10
                SET country_code TO CONCATENATE '+', country_code_length TIMES '*', '-'
                RETURN CONCATENATE country_code, local_number
    END FUNCTION
END CLASS