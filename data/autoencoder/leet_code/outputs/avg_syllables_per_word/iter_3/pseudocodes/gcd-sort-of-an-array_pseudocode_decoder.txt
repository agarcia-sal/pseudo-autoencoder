```
CLASS UnionFind
    FUNCTION __init__(size)
        SET parent TO list of integers from 0 TO size - 1
        SET rank TO list of 1 repeated size times
    END FUNCTION

    FUNCTION find(p)
        IF parent[p] NOT EQUALS p THEN
            SET parent[p] TO find(parent[p])
        RETURN parent[p]
    END FUNCTION

    FUNCTION union(p, q)
        SET rootP TO find(p)
        SET rootQ TO find(q)
        IF rootP EQUALS rootQ THEN
            RETURN False
        IF rank[rootP] GREATER THAN rank[rootQ] THEN
            SET parent[rootQ] TO rootP
        ELSE IF rank[rootP] LESS THAN rank[rootQ] THEN
            SET parent[rootP] TO rootQ
        ELSE
            SET parent[rootQ] TO rootP
            INCREMENT rank[rootP] BY 1
        RETURN True
    END FUNCTION
END CLASS

CLASS Solution
    FUNCTION gcdSort(nums)
        SET sorted_nums TO nums sorted in ascending order
        SET max_val TO maximum value in nums
        SET uf TO new UnionFind with size max_val plus 1

        FOR each num IN nums
            FOR factor FROM 2 TO integer square root of num INCLUSIVE
                IF num MODULO factor EQUALS 0 THEN
                    CALL uf.union(num, factor)
                    CALL uf.union(num, num DIVIDED BY factor)

        FOR index FROM 0 TO length of nums MINUS 1
            IF uf.find(nums[index]) NOT EQUALS uf.find(sorted_nums[index]) THEN
                RETURN False

        RETURN True
    END FUNCTION
END CLASS
```