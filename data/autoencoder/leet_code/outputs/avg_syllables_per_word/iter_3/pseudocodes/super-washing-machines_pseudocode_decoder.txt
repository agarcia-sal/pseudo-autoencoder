CLASS Solution
    FUNCTION findMinMoves(machines: List of Integer) RETURNS Integer
        SET total_dresses TO SUM of machines
        SET n TO LENGTH of machines
        
        IF total_dresses MODULO n IS NOT 0
            RETURN -1
        
        SET target TO total_dresses DIVIDED BY n
        SET left_sum TO 0
        SET max_moves TO 0
        
        FOR i FROM 0 TO n MINUS 1
            SET left_excess TO left_sum MINUS (target TIMES i)
            SET right_excess TO (total_dresses MINUS left_sum MINUS machines[i]) MINUS (target TIMES (n MINUS i MINUS 1))
            
            SET current_moves TO MAXIMUM OF (ABSOLUTE VALUE OF left_excess, ABSOLUTE VALUE OF right_excess, machines[i] MINUS target)
            SET max_moves TO MAXIMUM OF max_moves AND current_moves
            
            SET left_sum TO left_sum PLUS machines[i]
        
        RETURN max_moves
    END FUNCTION
END CLASS