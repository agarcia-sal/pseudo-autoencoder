CLASS Solution
    FUNCTION getProbability(balls)
        FUNCTION dfs(i, j, diff)  CACHE
            IF i >= k THEN
                IF j EQUALS 0 AND diff EQUALS 0 THEN
                    RETURN 1
                ELSE
                    RETURN 0
            IF j LESS THAN 0 THEN
                RETURN 0
            SET ans TO 0
            FOR x FROM 0 TO balls[i] DO
                IF x EQUALS balls[i] THEN
                    SET y TO 1
                ELSE IF x EQUALS 0 THEN
                    SET y TO -1
                ELSE
                    SET y TO 0
                SET ans TO ans PLUS dfs(i PLUS 1, j MINUS x, diff PLUS y) TIMES comb(balls[i], x)
            RETURN ans
        SET n TO SUM OF balls DIVIDED BY 2
        SET k TO LENGTH OF balls
        RETURN dfs(0, n, 0) DIVIDED BY comb(n TIMES 2, n)
    END FUNCTION
END CLASS