CLASS Solution
    FUNCTION isSelfCrossing(distance)
        SET n TO LENGTH OF distance
        IF n < 4 THEN
            RETURN False
        END IF
        
        FOR i FROM 3 TO n - 1
            IF distance[i] >= distance[i - 2] AND distance[i - 1] <= distance[i - 3] THEN
                RETURN True
            END IF
            
            IF i >= 4 AND distance[i - 1] == distance[i - 3] AND distance[i] + distance[i - 4] >= distance[i - 2] THEN
                RETURN True
            END IF
            
            IF i >= 5 AND distance[i - 2] >= distance[i - 4] AND distance[i - 3] >= distance[i - 1] AND distance[i - 1] + distance[i - 5] >= distance[i - 3] AND distance[i] + distance[i - 4] >= distance[i - 2] THEN
                RETURN True
            END IF
        END FOR
        
        RETURN False
    END FUNCTION
END CLASS