CLASS Solution
    FUNCTION maxValueAfterReverse(nums: List[int])
        SET n TO LENGTH OF nums
        IF n EQUALS 2 THEN
            RETURN ABSOLUTE VALUE OF (nums[0] MINUS nums[1])
        END IF

        SET initial_value TO 0
        FOR i FROM 1 TO n MINUS 1
            INCREMENT initial_value BY ABSOLUTE VALUE OF (nums[i] MINUS nums[i - 1])
        END FOR

        SET max_edge_gain TO 0
        FOR i FROM 1 TO n MINUS 1
            SET max_edge_gain TO MAXIMUM OF max_edge_gain AND (ABSOLUTE VALUE OF (nums[0] MINUS nums[i]) MINUS ABSOLUTE VALUE OF (nums[i] MINUS nums[i - 1]))
        END FOR

        FOR i FROM 0 TO n MINUS 2
            SET max_edge_gain TO MAXIMUM OF max_edge_gain AND (ABSOLUTE VALUE OF (nums[n - 1] MINUS nums[i]) MINUS ABSOLUTE VALUE OF (nums[i + 1] MINUS nums[i]))
        END FOR

        SET min_pair TO MINIMUM OF (MAXIMUM OF nums[i] AND nums[i + 1]) FOR i FROM 0 TO n MINUS 2
        SET max_pair TO MAXIMUM OF (MINIMUM OF nums[i] AND nums[i + 1]) FOR i FROM 0 TO n MINUS 2

        SET general_gain TO MAXIMUM OF 0 AND (2 TIMES (max_pair MINUS min_pair))

        RETURN initial_value PLUS MAXIMUM OF max_edge_gain AND general_gain
    END FUNCTION
END CLASS