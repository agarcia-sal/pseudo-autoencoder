```
CLASS Solution
    FUNCTION shortestPathLength(graph: List of List of int) RETURNS int
        IF graph IS EMPTY
            RETURN 0
        END IF

        SET n TO LENGTH OF graph
        SET queue TO DEQUE OF (node, 1 LEFT SHIFTED BY node) FOR EACH node FROM 0 TO n-1
        SET visited TO SET OF (node, 1 LEFT SHIFTED BY node) FOR EACH node FROM 0 TO n-1

        SET steps TO 0
        SET all_nodes_visited TO (1 LEFT SHIFTED BY n) MINUS 1

        WHILE queue IS NOT EMPTY
            SET current_level_size TO LENGTH OF queue
            FOR i FROM 1 TO current_level_size
                SET current_node, visited_nodes TO REMOVE FIRST ELEMENT FROM queue
                
                IF visited_nodes EQUALS all_nodes_visited
                    RETURN steps
                END IF

                FOR EACH neighbor IN graph[current_node]
                    SET next_visited_nodes TO visited_nodes OR (1 LEFT SHIFTED BY neighbor)
                    SET next_state TO (neighbor, next_visited_nodes)

                    IF next_state NOT IN visited
                        ADD next_state TO visited
                        APPEND next_state TO queue
                    END IF
                END FOR
            END FOR
            INCREMENT steps BY 1
        END WHILE

        RETURN -1
    END FUNCTION
END CLASS
```