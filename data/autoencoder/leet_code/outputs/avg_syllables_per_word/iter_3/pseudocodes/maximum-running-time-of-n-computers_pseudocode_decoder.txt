CLASS Solution
    FUNCTION maxRunTime(n, batteries)
        FUNCTION canRunFor(time)
            SET total TO 0
            FOR each battery IN batteries
                INCREMENT total BY minimum of battery and time
            RETURN total >= time MULTIPLIED BY n
        END FUNCTION

        SET left TO 0
        SET right TO sum of batteries DIVIDED BY n

        WHILE left < right
            SET mid TO (left PLUS right PLUS 1) DIVIDED BY 2
            IF canRunFor(mid) THEN
                SET left TO mid
            ELSE
                SET right TO mid MINUS 1
        RETURN left
    END FUNCTION
END CLASS