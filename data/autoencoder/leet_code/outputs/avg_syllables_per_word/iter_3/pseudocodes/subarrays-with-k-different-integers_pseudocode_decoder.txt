CLASS Solution
    FUNCTION subarraysWithKDistinct(nums, k)
        FUNCTION atMostKDistinct(t)
            SET count TO empty mapping with default integer values
            SET left TO 0
            SET result TO 0
            FOR right FROM 0 TO LENGTH OF nums MINUS 1
                INCREMENT count[nums[right]] BY 1
                WHILE SIZE OF count GREATER THAN t
                    DECREMENT count[nums[left]] BY 1
                    IF count[nums[left]] EQUALS 0
                        REMOVE count[nums[left]]
                    INCREMENT left BY 1
                INCREMENT result BY right MINUS left PLUS 1
            RETURN result
        END FUNCTION
        RETURN atMostKDistinct(k) MINUS atMostKDistinct(k MINUS 1)
    END FUNCTION
END CLASS