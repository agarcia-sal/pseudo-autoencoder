CLASS Solution
    FUNCTION nextPalindrome(num)
        SET n TO LENGTH OF num
        SET half TO SUBSTRING OF num FROM START TO n DIVIDED BY 2

        SET half_list TO LIST OF CHARACTERS IN half
        SET k TO -1
        SET l TO -1

        FOR i FROM LENGTH OF half_list MINUS 2 DOWNTO 0
            IF half_list[i] IS LESS THAN half_list[i + 1]
                SET k TO i
                BREAK LOOP
        IF k IS EQUAL TO -1
            RETURN EMPTY STRING

        FOR i FROM LENGTH OF half_list MINUS 1 DOWNTO k + 1
            IF half_list[i] IS GREATER THAN half_list[k]
                SET l TO i
                BREAK LOOP

        SWAP half_list[k] WITH half_list[l]
        SET half_list TO CONCATENATION OF half_list UP TO k + 1 AND SORTED SUBLIST FROM k + 1 TO END

        SET new_half TO JOIN CHARACTERS IN half_list INTO STRING

        IF n MODULO 2 EQUALS 0
            RETURN CONCATENATION OF new_half AND REVERSE OF new_half
        ELSE
            RETURN CONCATENATION OF new_half, CHARACTER AT POSITION n DIVIDED BY 2 IN num, AND REVERSE OF new_half
    END FUNCTION
END CLASS