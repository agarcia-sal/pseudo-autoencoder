```
CLASS Solution
    FUNCTION maxStudents(seats)
        SET m TO LENGTH OF seats
        SET n TO LENGTH OF seats[0]
        
        SET broken TO LIST OF SIZE m FILLED WITH 0
        
        FOR i FROM 0 TO m - 1
            FOR j FROM 0 TO n - 1
                IF seats[i][j] EQUALS '#'
                    SET broken[i] TO broken[i] BITWISE OR (1 SHIFTED LEFT BY j)
        
        FUNCTION is_valid(arrangement)
            RETURN (arrangement BITWISE AND (arrangement SHIFTED RIGHT BY 1)) EQUALS 0
        END FUNCTION
        
        SET dp TO LIST OF SIZE m FILLED WITH EMPTY DICTIONARIES
        
        FOR arrangement FROM 0 TO (1 SHIFTED LEFT BY n) - 1
            IF is_valid(arrangement) AND (arrangement BITWISE AND broken[0]) EQUALS 0
                SET dp[0][arrangement] TO NUMBER OF ONES IN arrangement
        
        FOR i FROM 1 TO m - 1
            FOR arrangement FROM 0 TO (1 SHIFTED LEFT BY n) - 1
                IF is_valid(arrangement) AND (arrangement BITWISE AND broken[i]) EQUALS 0
                    SET max_students TO 0
                    FOR prev_arrangement IN KEYS OF dp[i - 1]
                        IF (arrangement BITWISE AND (prev_arrangement SHIFTED RIGHT BY 1)) EQUALS 0
                           AND (arrangement BITWISE AND (prev_arrangement SHIFTED LEFT BY 1)) EQUALS 0
                            IF dp[i - 1][prev_arrangement] GREATER THAN max_students
                                SET max_students TO dp[i - 1][prev_arrangement]
                    SET dp[i][arrangement] TO max_students PLUS NUMBER OF ONES IN arrangement
        
        IF dp[m - 1] IS NOT EMPTY
            RETURN MAXIMUM VALUE AMONG VALUES IN dp[m - 1]
        ELSE
            RETURN 0
    END FUNCTION
END CLASS
```