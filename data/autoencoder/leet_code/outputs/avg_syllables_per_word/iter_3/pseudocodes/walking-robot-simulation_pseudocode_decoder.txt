CLASS Solution
    FUNCTION robotSim(commands: List[int], obstacles: List[List[int]]) RETURNS int
        SET directions TO [(0, 1), (1, 0), (0, -1), (-1, 0)]
        SET x TO 0
        SET y TO 0
        SET dir_index TO 0
        SET obstacles_set TO set of tuples from obstacles
        SET max_distance TO 0

        FOR each command IN commands
            IF command EQUALS -2 THEN
                SET dir_index TO (dir_index - 1) MODULO 4
            ELSE IF command EQUALS -1 THEN
                SET dir_index TO (dir_index + 1) MODULO 4
            ELSE
                SET dx, dy TO directions[dir_index]
                FOR _ FROM 1 TO command
                    SET next_x TO x + dx
                    SET next_y TO y + dy
                    IF (next_x, next_y) IN obstacles_set THEN
                        BREAK
                    SET x TO next_x
                    SET y TO next_y
                SET current_distance TO x * x + y * y
                IF current_distance GREATER THAN max_distance THEN
                    SET max_distance TO current_distance
        RETURN max_distance
    END FUNCTION
END CLASS