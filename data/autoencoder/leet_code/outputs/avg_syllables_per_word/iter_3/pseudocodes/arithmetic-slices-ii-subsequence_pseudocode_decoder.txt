CLASS Solution
    FUNCTION numberOfArithmeticSlices(nums: List of Integer) RETURNS Integer
        SET n TO LENGTH OF nums
        IF n LESS THAN 3 THEN
            RETURN 0
        END IF

        SET dp TO LIST OF DICTIONARIES mapping Integer TO Integer with size n
        SET total_count TO 0

        FOR i FROM 0 TO n MINUS 1
            FOR j FROM 0 TO i MINUS 1
                SET d TO nums[i] MINUS nums[j]

                IF dp[j] CONTAINS KEY d THEN
                    INCREMENT dp[i][d] BY dp[j][d] PLUS 1
                    INCREMENT total_count BY dp[j][d]
                ELSE
                    INCREMENT dp[i][d] BY 1
                END IF
            END FOR
        END FOR

        RETURN total_count
    END FUNCTION
END CLASS