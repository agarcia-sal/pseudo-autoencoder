CLASS Solution
    FUNCTION deleteAndEarn(nums)
        SET count TO mapping of each number TO its frequency in nums
        SET unique_nums TO sorted list of keys in count
        SET dp TO list of zeros with length LENGTH OF unique_nums PLUS 1

        SET dp[1] TO unique_nums[0] MULTIPLIED BY count[unique_nums[0]]

        FOR i FROM 2 TO LENGTH OF unique_nums
            SET num TO unique_nums[i MINUS 1]
            IF num EQUALS unique_nums[i MINUS 2] PLUS 1 THEN
                SET dp[i] TO MAXIMUM OF dp[i MINUS 1] AND dp[i MINUS 2] PLUS num MULTIPLIED BY count[num]
            ELSE
                SET dp[i] TO dp[i MINUS 1] PLUS num MULTIPLIED BY count[num]
            END IF
        END FOR

        RETURN dp[LENGTH OF dp MINUS 1]
    END FUNCTION
END CLASS