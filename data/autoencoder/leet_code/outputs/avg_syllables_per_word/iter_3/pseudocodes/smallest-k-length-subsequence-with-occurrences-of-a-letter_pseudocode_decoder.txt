CLASS Solution
    FUNCTION smallestSubsequence(s, k, letter, repetition)
        SET letter_count TO count occurrences of letter in s
        SET stack TO empty list
        FOR each index i and character char IN s
            WHILE stack is not empty AND char is less than last element in stack AND
                  length of s minus i plus length of stack minus 1 is at least k
                IF last element in stack equals letter
                    IF letter_count is greater than repetition
                        INCREMENT repetition BY 1
                        REMOVE last element from stack
                    ELSE
                        BREAK loop
                ELSE
                    REMOVE last element from stack
            IF length of stack is less than k
                IF char equals letter
                    APPEND char TO stack
                    DECREMENT repetition BY 1
                ELSE IF k minus length of stack is greater than repetition
                    APPEND char TO stack
                IF char equals letter
                    DECREMENT letter_count BY 1
        WHILE length of stack is less than k
            APPEND letter TO stack
        RETURN concatenation of all elements in stack
    END FUNCTION
END CLASS