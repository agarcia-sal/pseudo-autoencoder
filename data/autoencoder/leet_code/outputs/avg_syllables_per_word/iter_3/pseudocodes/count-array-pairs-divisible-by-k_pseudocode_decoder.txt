CLASS Solution
    FUNCTION countPairs(nums, k)
        SET gcd_count TO empty map with default 0
        
        FOR each num IN nums
            INCREMENT gcd_count[gcd(num, k)] BY 1
        
        SET total_pairs TO 0
        SET gcd_values TO list of keys from gcd_count
        SET n TO LENGTH OF gcd_values
        
        FOR i FROM 0 TO n MINUS 1
            FOR j FROM i TO n MINUS 1
                SET gcd1 TO gcd_values[i]
                SET gcd2 TO gcd_values[j]
                
                IF (gcd1 TIMES gcd2) MODULO k EQUALS 0 THEN
                    IF i EQUALS j THEN
                        INCREMENT total_pairs BY (gcd_count[gcd1] TIMES (gcd_count[gcd1] MINUS 1)) DIVIDED BY 2
                    ELSE
                        INCREMENT total_pairs BY gcd_count[gcd1] TIMES gcd_count[gcd2]
        RETURN total_pairs
    END FUNCTION
END CLASS