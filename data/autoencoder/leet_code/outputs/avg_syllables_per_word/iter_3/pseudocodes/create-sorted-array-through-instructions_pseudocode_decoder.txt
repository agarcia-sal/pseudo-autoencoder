CLASS Solution
    FUNCTION createSortedArray(instructions)
        SET MOD TO 10 TO THE POWER OF 9 PLUS 7
        SET MAX TO MAXIMUM VALUE IN instructions PLUS 1
        SET bit TO LIST OF ZEROS WITH LENGTH MAX

        FUNCTION update(idx, val)
            WHILE idx LESS THAN MAX
                INCREMENT bit AT idx BY val
                SET idx TO idx PLUS (idx BITWISE AND NEGATION OF idx)
            END WHILE
        END FUNCTION

        FUNCTION query(idx)
            SET total TO 0
            WHILE idx GREATER THAN 0
                INCREMENT total BY bit AT idx
                SET idx TO idx MINUS (idx BITWISE AND NEGATION OF idx)
            END WHILE
            RETURN total
        END FUNCTION

        SET total_cost TO 0
        FOR i FROM 0 TO LENGTH OF instructions MINUS 1
            SET num TO instructions AT i
            SET less_than TO query(num MINUS 1)
            SET greater_than TO i MINUS query(num)
            SET cost TO MINIMUM OF less_than AND greater_than
            SET total_cost TO (total_cost PLUS cost) MODULO MOD
            CALL update(num, 1)
        END FOR

        RETURN total_cost
    END FUNCTION
END CLASS