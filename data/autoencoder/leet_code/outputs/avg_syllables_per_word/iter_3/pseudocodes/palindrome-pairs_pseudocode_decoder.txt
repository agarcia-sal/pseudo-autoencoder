CLASS Solution
    FUNCTION palindromePairs(words)
        FUNCTION is_palindrome(s)
            RETURN s EQUALS reversed s
        END FUNCTION

        SET word_dict TO map each word TO its index in words
        SET result TO empty list

        FOR each index i AND word IN words
            IF word IS empty string
                CONTINUE to next iteration
            END IF

            IF empty string IN word_dict AND is_palindrome(word)
                APPEND [i, word_dict[""]] TO result
                APPEND [word_dict[""], i] TO result
            END IF

            SET reversed_word TO reversed word
            IF reversed_word IN word_dict AND word_dict[reversed_word] NOT EQUAL TO i
                APPEND [i, word_dict[reversed_word]] TO result
            END IF

            FOR j FROM 1 TO LENGTH OF word MINUS 1
                SET prefix TO substring of word FROM start TO j
                SET suffix TO substring of word FROM j TO end
                SET reversed_prefix TO reversed prefix
                SET reversed_suffix TO reversed suffix

                IF is_palindrome(suffix) AND reversed_prefix IN word_dict
                    APPEND [i, word_dict[reversed_prefix]] TO result
                END IF

                IF is_palindrome(prefix) AND reversed_suffix IN word_dict
                    APPEND [word_dict[reversed_suffix], i] TO result
                END IF
            END FOR
        END FOR

        RETURN result
    END FUNCTION
END CLASS