CLASS Solution
    FUNCTION solve(board: List of List of String)
        IF board IS EMPTY OR board[0] IS EMPTY
            RETURN
        
        SET m TO LENGTH OF board
        SET n TO LENGTH OF board[0]
        
        FUNCTION dfs(x, y)
            IF x LESS THAN 0 OR x GREATER THAN OR EQUAL TO m OR y LESS THAN 0 OR y GREATER THAN OR EQUAL TO n OR board[x][y] NOT EQUAL TO 'O'
                RETURN
            SET board[x][y] TO 'S'
            CALL dfs(x + 1, y)
            CALL dfs(x - 1, y)
            CALL dfs(x, y + 1)
            CALL dfs(x, y - 1)
        END FUNCTION
        
        FOR i FROM 0 TO m MINUS 1
            CALL dfs(i, 0)
            CALL dfs(i, n MINUS 1)
        
        FOR j FROM 0 TO n MINUS 1
            CALL dfs(0, j)
            CALL dfs(m MINUS 1, j)
        
        FOR i FROM 0 TO m MINUS 1
            FOR j FROM 0 TO n MINUS 1
                IF board[i][j] EQUALS 'O'
                    SET board[i][j] TO 'X'
        
        FOR i FROM 0 TO m MINUS 1
            FOR j FROM 0 TO n MINUS 1
                IF board[i][j] EQUALS 'S'
                    SET board[i][j] TO 'O'
    END FUNCTION
END CLASS