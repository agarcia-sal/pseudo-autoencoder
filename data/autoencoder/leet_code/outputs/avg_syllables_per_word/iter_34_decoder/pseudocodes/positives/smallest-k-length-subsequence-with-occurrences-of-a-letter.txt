CLASS Solution  
    FUNCTION smallestSubsequence(s letter_string k integer letter letter_character repetition integer) RETURNS string  
        SET letter_count TO the number of times the letter_character appears in the letter_string  
        SET stack TO an empty list  
        FOR each index i AND character char IN the letter_string from the first element to the last element  
            WHILE the stack is not empty AND the character char is LESS THAN the element at the last position of the stack  
            AND the LENGTH OF the letter_string MINUS i PLUS the LENGTH OF the stack MINUS one is GREATER THAN OR EQUAL TO k  
                IF the element at the last position of the stack EQUALS letter_character  
                    IF letter_count is GREATER THAN repetition  
                        INCREMENT repetition BY one  
                        REMOVE the element at the last position FROM the stack  
                    ELSE  
                        BREAK the WHILE loop  
                    END IF  
                ELSE  
                    REMOVE the element at the last position FROM the stack  
                END IF  
            END WHILE  
            IF the LENGTH OF the stack is LESS THAN k  
                IF char EQUALS letter_character  
                    APPEND char TO the stack  
                    DECREMENT repetition BY one  
                ELSE IF k MINUS the LENGTH OF the stack is GREATER THAN repetition  
                    APPEND char TO the stack  
                END IF  
                IF char EQUALS letter_character  
                    DECREMENT letter_count BY one  
                END IF  
            END IF  
        END FOR  
        WHILE the LENGTH OF the stack is LESS THAN k  
            APPEND letter_character TO the stack  
        END WHILE  
        RETURN the concatenation of all elements in the stack as a single string  
    END FUNCTION  
END CLASS