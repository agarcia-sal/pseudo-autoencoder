CLASS Solution  
    FUNCTION trap(height)  
        IF height EQUALS no elements  
            RETURN zero  
        END IF  

        SET n TO the LENGTH OF height  
        INITIALIZE left_max AS a list of zeros WITH LENGTH n  
        INITIALIZE right_max AS a list of zeros WITH LENGTH n  

        SET element at position one of left_max TO element at position one of height  
        FOR i FROM two TO n  
            SET element at position i of left_max TO THE MAXIMUM OF element at position i MINUS one of left_max AND element at position i of height  
        END FOR  

        SET element at position n of right_max TO element at position n of height  
        FOR i FROM n MINUS one DOWN TO one  
            SET element at position i of right_max TO THE MAXIMUM OF element at position i PLUS one of right_max AND element at position i of height  
        END FOR  

        SET trapped_water TO zero  
        FOR i FROM one TO n  
            INCREMENT trapped_water BY THE MINIMUM OF element at position i of left_max AND element at position i of right_max MINUS element at position i of height  
        END FOR  

        RETURN trapped_water  
    END FUNCTION  
END CLASS