CLASS Solution  
    FUNCTION checkWays(pairs)  
        SET graph TO a new default dictionary of sets  
        FOR each element x AND each element y IN pairs  
            ADD element y TO the set corresponding to element x in graph  
            ADD element x TO the set corresponding to element y in graph  
        END FOR  
          
        SET max_degree TO the element in graph with the maximum size of the set mapped by that element in graph  
        SET n TO the SIZE OF graph  
          
        IF the SIZE OF the set mapped by max_degree in graph NOT EQUALS n MINUS one  
            RETURN zero  
        END IF  
          
        FUNCTION can_be_parent(u v)  
            FOR each element neighbor IN the set mapped by element v in graph  
                IF element neighbor NOT IN the set mapped by element u in graph AND element neighbor NOT EQUALS element u  
                    RETURN false  
                END IF  
            END FOR  
            RETURN true  
        END FUNCTION  
          
        SET ways TO one  
          
        FOR each element u IN graph  
            IF element u EQUALS max_degree  
                CONTINUE to next iteration of the loop  
            END IF  
            SET parent TO null  
            FOR each element v IN the set mapped by element u in graph  
                IF element v IN graph AND the SIZE OF the set mapped by element v in graph GREATER THAN OR EQUAL TO the SIZE OF the set mapped by element u in graph AND can_be_parent with arguments element v AND element u RETURNS true  
                    IF parent IS null OR the SIZE OF set mapped by element v in graph LESS THAN the SIZE OF set mapped by element parent in graph  
                        SET parent TO element v  
                    END IF  
                END IF  
            END FOR  
            IF parent IS null  
                RETURN zero  
            END IF  
            IF the SIZE OF set mapped by element parent in graph EQUALS the SIZE OF set mapped by element u in graph  
                SET ways TO two  
            END IF  
        END FOR  
          
        RETURN ways  
    END FUNCTION  
END CLASS