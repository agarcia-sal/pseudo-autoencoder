CLASS Solution  
    FUNCTION updateMatrix WITH parameter mat  
        IF mat EQUALS empty OR element at position zero of mat EQUALS empty  
            RETURN mat  
        END IF  
        
        SET rows TO the LENGTH OF mat  
        SET cols TO the LENGTH OF element at position zero of mat  
        
        SET dist TO a new list  
        FOR index r FROM zero TO rows MINUS one  
            SET row_list TO a new list  
            FOR index c FROM zero TO cols MINUS one  
                APPEND infinity TO row_list  
            END FOR  
            APPEND row_list TO dist  
        END FOR  
        
        SET queue TO an empty queue structure  
        
        FOR index r FROM zero TO rows MINUS one  
            FOR index c FROM zero TO cols MINUS one  
                IF element at position r of mat AT position c EQUALS zero  
                    SET element at position r of dist AT position c TO zero  
                    APPEND the tuple of r and c TO queue  
                END IF  
            END FOR  
        END FOR  
        
        SET directions TO a list of tuples each containing  
            the first tuple with negative one and zero  
            the second tuple with one and zero  
            the third tuple with zero and negative one  
            the fourth tuple with zero and one  
        
        WHILE queue is not empty  
            SET current_position TO the removal of the first element FROM queue  
            SET r TO the first element of current_position  
            SET c TO the second element of current_position  
            FOR each tuple dr, dc IN directions  
                SET nr TO r PLUS dr  
                SET nc TO c PLUS dc  
                IF nr GREATER THAN OR EQUAL TO zero AND nr LESS THAN rows AND nc GREATER THAN OR EQUAL TO zero AND nc LESS THAN cols  
                    AND element at position nr of dist AT position nc GREATER THAN element at position r of dist AT position c PLUS one  
                    SET element at position nr of dist AT position nc TO element at position r of dist AT position c PLUS one  
                    APPEND the tuple of nr and nc TO queue  
                END IF  
            END FOR  
        END WHILE  
        
        RETURN dist  
    END FUNCTION  
END CLASS