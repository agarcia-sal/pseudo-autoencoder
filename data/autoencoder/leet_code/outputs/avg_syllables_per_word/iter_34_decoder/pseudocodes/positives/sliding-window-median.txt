CLASS Solution  
    FUNCTION medianSlidingWindow(nums k)  
        SET lo TO empty list  
        SET hi TO empty list  

        FUNCTION balance_heaps()  
            IF the LENGTH OF lo IS GREATER THAN the LENGTH OF hi PLUS one  
                CALL heappush WITH the argument hi AND NEGATIVE of the result of heappop ON lo  
            ELSE IF the LENGTH OF hi IS GREATER THAN the LENGTH OF lo  
                CALL heappush WITH the argument lo AND NEGATIVE of the result of heappop ON hi  
            END IF  
        END FUNCTION  

        FUNCTION add_num(num)  
            IF lo IS empty OR num IS LESS THAN OR EQUAL TO NEGATIVE of element at position zero of lo  
                CALL heappush WITH the argument lo AND NEGATIVE num  
            ELSE  
                CALL heappush WITH the argument hi AND num  
            END IF  
            CALL balance_heaps()  
        END FUNCTION  

        FUNCTION remove_num(num)  
            IF num IS LESS THAN OR EQUAL TO NEGATIVE of element at position zero of lo  
                REMOVE NEGATIVE num FROM lo  
                IF lo IS NOT empty  
                    CALL heapify WITH the argument lo  
                END IF  
            ELSE  
                REMOVE num FROM hi  
                IF hi IS NOT empty  
                    CALL heapify WITH the argument hi  
                END IF  
            END IF  
            CALL balance_heaps()  
        END FUNCTION  

        FUNCTION get_median()  
            IF the LENGTH OF lo IS GREATER THAN the LENGTH OF hi  
                RETURN NEGATIVE of element at position zero of lo  
            END IF  
            RETURN NEGATIVE of element at position zero of lo PLUS element at position zero of hi DIVIDED BY two  
        END FUNCTION  

        FOR i FROM zero TO k MINUS one  
            CALL add_num WITH element at position i of nums  
        END FOR  

        SET medians TO a list containing the result of get_median()  

        FOR i FROM k TO the LENGTH OF nums MINUS one  
            CALL add_num WITH element at position i of nums  
            CALL remove_num WITH element at position i MINUS k of nums  
            APPEND the result of get_median() TO medians  
        END FOR  

        RETURN medians  
    END FUNCTION  
END CLASS