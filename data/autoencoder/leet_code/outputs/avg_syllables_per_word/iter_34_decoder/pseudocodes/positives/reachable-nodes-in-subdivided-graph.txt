CLASS Solution  
    FUNCTION reachableNodes(edges parameter AS List OF List OF Integer, maxMoves parameter AS Integer, n parameter AS Integer) RETURNS Integer  
        SET graph TO empty mapping FROM integers TO lists  
        FOR each index FROM zero TO n MINUS one  
            SET element at position index of graph TO empty list  
        END FOR  
        FOR each element consisting of u parameter v parameter cnt parameter IN edges  
            APPEND pair consisting of v parameter and cnt parameter TO element at position u parameter of graph  
            APPEND pair consisting of u parameter and cnt parameter TO element at position v parameter of graph  
        END FOR  
        SET distances TO list consisting of n repetitions of infinity value  
        SET element at position zero of distances TO zero  
        SET priority_queue TO list containing pair consisting of zero and zero  
        WHILE priority_queue holds  
            EXTRACT pair consisting of dist parameter and node parameter WITH the smallest first element FROM priority_queue  
            IF dist parameter GREATER THAN element at position node parameter of distances THEN  
                CONTINUE to next iteration of loop  
            END IF  
            FOR each pair consisting of neighbor parameter and cnt parameter IN element at position node parameter of graph  
                SET new_dist TO dist parameter PLUS cnt parameter PLUS one  
                IF new_dist LESS THAN element at position neighbor parameter of distances THEN  
                    SET element at position neighbor parameter of distances TO new_dist  
                    INSERT pair consisting of new_dist and neighbor parameter INTO priority_queue maintaining heap property  
                END IF  
            END FOR  
        END WHILE  
        SET reachable_nodes TO zero  
        FOR each d parameter IN distances  
            IF d parameter LESS THAN OR EQUAL TO maxMoves parameter THEN  
                INCREMENT reachable_nodes BY one  
            END IF  
        END FOR  
        SET used_edges TO empty mapping  
        FOR each element consisting of u parameter v parameter cnt parameter IN edges  
            SET moves_u TO maximum of zero and maxMoves parameter MINUS element at position u parameter of distances  
            SET moves_v TO maximum of zero and maxMoves parameter MINUS element at position v parameter of distances  
            SET reachable_new_nodes TO minimum of cnt parameter and moves_u PLUS moves_v  
            INCREMENT reachable_nodes BY reachable_new_nodes  
            ASSIGN reference in used_edges at key consisting of pair u parameter and v parameter TO reachable_new_nodes  
        END FOR  
        RETURN reachable_nodes  
    END FUNCTION  
END CLASS